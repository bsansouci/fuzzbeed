var Localization=function(){this.test_mode=false;this.language=null;this.languages=["fr","es","pt","de"];this.non_english=null;this.init=function(){if(typeof BF_STATIC!="undefined"){localize.language=localize.returnLang();localize.non_english=localize.nonEnglish();localize.test_mode=localize.inTestMode()}};this.getLangs=function(){return localize.languages};this.returnLang=function(){if(typeof BF_STATIC.language!="undefined"){return BF_STATIC.language}else{return null}};this.nonEnglish=function(){if(typeof BF_STATIC.non_english!="undefined"&&BF_STATIC.non_english){return true}else{return false}};this.inTestMode=function(){if(typeof BF_STATIC.translation_debug!="undefined"&&BF_STATIC.translation_debug&&localize.non_english&&localize.language){return true}else{return false}};this.dictionary=function(){if(!localize.language){return null}try{return eval(localize.language+"_dictionary")}catch(e){return null}};this.testMode=function(str){return(str+" ("+localize.language+")")};this.translate=function(string,args){if(!string||typeof string!="string"){return null}var translation,start_space=string.charAt(0)==" "?true:false,end_space=string.charAt(string.length-1)==" "?true:false;string=localize.strip_spaces(string);translation=localize.dictionary()&&localize.dictionary()[string]?localize.dictionary()[string]:string;if(translation&&args&&args.variables){translation=localize.var_replace(translation,args.variables)}if(start_space){translation=" "+translation}if(end_space){translation=translation+" "}if(localize.test_mode){translation=localize.testMode(translation)}return translation};this.strip_spaces=function(string){if(string.charAt(0)==" "){string=string.slice(1,string.length-1)}if(string.charAt(string.length-1)==" "){string=string.slice(0,string.length-2)}return string};this.var_replace=function(string,vars){var variable,counter,subString,split=string.split("#{"),length=split.length;for(counter=0;counter<length;counter++){subString=split[counter];if(subString){subString=subString.split("}")[0];variable=(vars.hasOwnProperty(subString)?vars[subString].toString():null);if(variable){variable=localize.translate(variable);string=string.replace("#{"+subString+"}",variable)}}}return string}};var localize=new Localization();localize.init();var local=localize;local.t=local.translate;var BF_SiteSpeedUpload=function(){this._start_track_time={};this.opt_sampleRate=1;this.filter_empty_time=true;this.dom_time_spent=function(c){if(bf_start_site_time=="undefined"){return false}var b=new Date().getTime();var f=b-bf_start_site_time;var a=(BF_STATIC.tt_page?BF_STATIC.tt_page:"NA")+":DOM";if((bf_site_speed.filter_empty_time&&f)||!bf_site_speed.filter_empty_time){gtrack.track_timing(a,c,f)}};this.start_track=function(a){bf_site_speed._start_track_time[a]=new Date().getTime()};this.end_track=function(b,a,g){var f=new Date().getTime();var c=bf_site_speed._start_track_time[b]?f-bf_site_speed._start_track_time[b]:0;delete (bf_site_speed._start_track_time[b]);if((bf_site_speed.filter_empty_time&&c)||!bf_site_speed.filter_empty_time){gtrack.track_timing(b,a,c,g,bf_site_speed.opt_sampleRate)}}};var bf_site_speed=new BF_SiteSpeedUpload();Event.observe(window,"load",function(){bf_site_speed.dom_time_spent("Window Load")});var s_account=(document.domain=="stage.buzzfeed.com"?"buzzfeeddev":"buzzfeedprod");var s=s_gi(s_account);s.debugTracking=false;s.trackingServer="buzzfeed.d1.sc.omtrdc.net";s.visitorNamespace="buzzfeed";s.trackDownloadLinks=false;s.trackExternalLinks=false;s.trackInlineStats=true;s.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx";s.linkInternalFilters="javascript:,buzzfeed.com";s.linkLeaveQueryString=false;s.linkTrackVars="None";s.linkTrackEvents="None";s.usePlugins=true;function s_doPlugins(a){}s.doPlugins=s_doPlugins;var s_code="",s_objectID;function s_gi(o,p,F){var r="s.version='H.27.2';s.an=s_an;s.logDebug=function(m){var s=this,tcf=new Function('var e;try{console.log(\"'+s.rep(s.rep(s.rep(m,\"\\\\\",\"\\\\\\\\\"),\"\\n\",\"\\\\n\"),\"\\\"\",\"\\\\\\\"\")+'\");}catch(e){}');tcf()};s.cls=function(x,c){var i,y='';if(!c)c=this.an;for(i=0;i<x.length;i++){n=x.substring(i,i+1);if(c.indexOf(n)>=0)y+=n}return y};s.fl=function(x,l){return x?(''+x).substring(0,l):x};s.co=function(o){return o};s.num=function(x){x=''+x;for(var p=0;p<x.length;p++)if(('0123456789').indexOf(x.substring(p,p+1))<0)return 0;return 1};s.rep=s_rep;s.sp=s_sp;s.jn=s_jn;s.ape=function(x){var s=this,h='0123456789ABCDEF',f=\"+~!*()'\",i,c=s.charSet,n,l,e,y='';c=c?c.toUpperCase():'';if(x){x=''+x;if(s.em==3){x=encodeURIComponent(x);for(i=0;i<f.length;i++) {n=f.substring(i,i+1);if(x.indexOf(n)>=0)x=s.rep(x,n,\"%\"+n.charCodeAt(0).toString(16).toUpperCase())}}else if(c=='AUTO'&&('').charCodeAt){for(i=0;i<x.length;i++){c=x.substring(i,i+1);n=x.charCodeAt(i);if(n>127){l=0;e='';while(n||l<4){e=h.substring(n%16,n%16+1)+e;n=(n-n%16)/16;l++}y+='%u'+e}else if(c=='+')y+='%2B';else y+=escape(c)}x=y}else x=s.rep(escape(''+x),'+','%2B');if(c&&c!='AUTO'&&s.em==1&&x.indexOf('%u')<0&&x.indexOf('%U')<0){i=x.indexOf('%');while(i>=0){i++;if(h.substring(8).indexOf(x.substring(i,i+1).toUpperCase())>=0)return x.substring(0,i)+'u00'+x.substring(i);i=x.indexOf('%',i)}}}return x};s.epa=function(x){var s=this,y,tcf;if(x){x=s.rep(''+x,'+',' ');if(s.em==3){tcf=new Function('x','var y,e;try{y=decodeURIComponent(x)}catch(e){y=unescape(x)}return y');return tcf(x)}else return unescape(x)}return y};s.pt=function(x,d,f,a){var s=this,t=x,z=0,y,r;while(t){y=t.indexOf(d);y=y<0?t.length:y;t=t.substring(0,y);r=s[f](t,a);if(r)return r;z+=y+d.length;t=x.substring(z,x.length);t=z<x.length?t:''}return ''};s.isf=function(t,a){var c=a.indexOf(':');if(c>=0)a=a.substring(0,c);c=a.indexOf('=');if(c>=0)a=a.substring(0,c);if(t.substring(0,2)=='s_')t=t.substring(2);return (t!=''&&t==a)};s.fsf=function(t,a){var s=this;if(s.pt(a,',','isf',t))s.fsg+=(s.fsg!=''?',':'')+t;return 0};s.fs=function(x,f){var s=this;s.fsg='';s.pt(x,',','fsf',f);return s.fsg};s.mpc=function(m,a){var s=this,c,l,n,v;v=s.d.visibilityState;if(!v)v=s.d.webkitVisibilityState;if(v&&v=='prerender'){if(!s.mpq){s.mpq=new Array;l=s.sp('webkitvisibilitychange,visibilitychange',',');for(n=0;n<l.length;n++){s.d.addEventListener(l[n],new Function('var s=s_c_il['+s._in+'],c,v;v=s.d.visibilityState;if(!v)v=s.d.webkitVisibilityState;if(s.mpq&&v==\"visible\"){while(s.mpq.length>0){c=s.mpq.shift();s[c.m].apply(s,c.a)}s.mpq=0}'),false)}}c=new Object;c.m=m;c.a=a;s.mpq.push(c);return 1}return 0};s.si=function(){var s=this,i,k,v,c=s_gi+'var s=s_gi(\"'+s.oun+'\");s.sa(\"'+s.un+'\");';for(i=0;i<s.va_g.length;i++){k=s.va_g[i];v=s[k];if(v!=undefined){if(typeof(v)!='number')c+='s.'+k+'=\"'+s_fe(v)+'\";';else c+='s.'+k+'='+v+';'}}c+=\"s.lnk=s.eo=s.linkName=s.linkType=s.wd.s_objectID=s.ppu=s.pe=s.pev1=s.pev2=s.pev3='';\";return c};s.c_d='';s.c_gdf=function(t,a){var s=this;if(!s.num(t))return 1;return 0};s.c_gd=function(){var s=this,d=s.wd.location.hostname,n=s.fpCookieDomainPeriods,p;if(!n)n=s.cookieDomainPeriods;if(d&&!s.c_d){n=n?parseInt(n):2;n=n>2?n:2;p=d.lastIndexOf('.');if(p>=0){while(p>=0&&n>1){p=d.lastIndexOf('.',p-1);n--}s.c_d=p>0&&s.pt(d,'.','c_gdf',0)?d.substring(p):d}}return s.c_d};s.c_r=function(k){var s=this;k=s.ape(k);var c=' '+s.d.cookie,i=c.indexOf(' '+k+'='),e=i<0?i:c.indexOf(';',i),v=i<0?'':s.epa(c.substring(i+2+k.length,e<0?c.length:e));return v!='[[B]]'?v:''};s.c_w=function(k,v,e){var s=this,d=s.c_gd(),l=s.cookieLifetime,t;v=''+v;l=l?(''+l).toUpperCase():'';if(e&&l!='SESSION'&&l!='NONE'){t=(v!=''?parseInt(l?l:0):-60);if(t){e=new Date;e.setTime(e.getTime()+(t*1000))}}if(k&&l!='NONE'){s.d.cookie=k+'='+s.ape(v!=''?v:'[[B]]')+'; path=/;'+(e&&l!='SESSION'?' expires='+e.toGMTString()+';':'')+(d?' domain='+d+';':'');return s.c_r(k)==v}return 0};s.eh=function(o,e,r,f){var s=this,b='s_'+e+'_'+s._in,n=-1,l,i,x;if(!s.ehl)s.ehl=new Array;l=s.ehl;for(i=0;i<l.length&&n<0;i++){if(l[i].o==o&&l[i].e==e)n=i}if(n<0){n=i;l[n]=new Object}x=l[n];x.o=o;x.e=e;f=r?x.b:f;if(r||f){x.b=r?0:o[e];x.o[e]=f}if(x.b){x.o[b]=x.b;return b}return 0};s.cet=function(f,a,t,o,b){var s=this,r,tcf;if(s.apv>=5&&(!s.isopera||s.apv>=7)){tcf=new Function('s','f','a','t','var e,r;try{r=s[f](a)}catch(e){r=s[t](e)}return r');r=tcf(s,f,a,t)}else{if(s.ismac&&s.u.indexOf('MSIE 4')>=0)r=s[b](a);else{s.eh(s.wd,'onerror',0,o);r=s[f](a);s.eh(s.wd,'onerror',1)}}return r};s.gtfset=function(e){var s=this;return s.tfs};s.gtfsoe=new Function('e','var s=s_c_il['+s._in+'],c;s.eh(window,\"onerror\",1);s.etfs=1;c=s.t();if(c)s.d.write(c);s.etfs=0;return true');s.gtfsfb=function(a){return window};s.gtfsf=function(w){var s=this,p=w.parent,l=w.location;s.tfs=w;if(p&&p.location!=l&&p.location.host==l.host){s.tfs=p;return s.gtfsf(s.tfs)}return s.tfs};s.gtfs=function(){var s=this;if(!s.tfs){s.tfs=s.wd;if(!s.etfs)s.tfs=s.cet('gtfsf',s.tfs,'gtfset',s.gtfsoe,'gtfsfb')}return s.tfs};s.mrq=function(u){var s=this,l=s.rl[u],n,r;s.rl[u]=0;if(l)for(n=0;n<l.length;n++){r=l[n];s.mr(0,0,r.r,r.t,r.u)}};s.flushBufferedRequests=function(){};s.mr=function(sess,q,rs,ta,u){var s=this,dc=s.dc,t1=s.trackingServer,t2=s.trackingServerSecure,tb=s.trackingServerBase,p='.sc',ns=s.visitorNamespace,un=s.cls(u?u:(ns?ns:s.fun)),r=new Object,l,imn='s_i_'+s._in+'_'+un,im,b,e;if(!rs){if(t1){if(t2&&s.ssl)t1=t2}else{if(!tb)tb='2o7.net';if(dc)dc=(''+dc).toLowerCase();else dc='d1';if(tb=='2o7.net'){if(dc=='d1')dc='112';else if(dc=='d2')dc='122';p=''}t1=un+'.'+dc+'.'+p+tb}rs='http'+(s.ssl?'s':'')+'://'+t1+'/b/ss/'+s.un+'/'+(s.mobile?'5.1':'1')+'/'+s.version+(s.tcn?'T':'')+'/'+sess+'?AQB=1&ndh=1'+(q?q:'')+'&AQE=1';if(s.isie&&!s.ismac)rs=s.fl(rs,2047)}if(s.d.images&&s.apv>=3&&(!s.isopera||s.apv>=7)&&(s.ns6<0||s.apv>=6.1)){if(!s.rc)s.rc=new Object;if(!s.rc[un]){s.rc[un]=1;if(!s.rl)s.rl=new Object;s.rl[un]=new Array;setTimeout('if(window.s_c_il)window.s_c_il['+s._in+'].mrq(\"'+un+'\")',750)}else{l=s.rl[un];if(l){r.t=ta;r.u=un;r.r=rs;l[l.length]=r;return ''}imn+='_'+s.rc[un];s.rc[un]++}if(s.debugTracking){var d='AppMeasurement Debug: '+rs,dl=s.sp(rs,'&'),dln;for(dln=0;dln<dl.length;dln++)d+=\"\\n\\t\"+s.epa(dl[dln]);s.logDebug(d)}im=s.wd[imn];if(!im)im=s.wd[imn]=new Image;im.alt=\"\";im.s_l=0;im.onload=im.onerror=new Function('e','this.s_l=1;var wd=window,s;if(wd.s_c_il){s=wd.s_c_il['+s._in+'];s.bcr();s.mrq(\"'+un+'\");s.nrs--;if(!s.nrs)s.m_m(\"rr\")}');if(!s.nrs){s.nrs=1;s.m_m('rs')}else s.nrs++;im.src=rs;if(s.useForcedLinkTracking||s.bcf){if(!s.forcedLinkTrackingTimeout)s.forcedLinkTrackingTimeout=250;setTimeout('if(window.s_c_il)window.s_c_il['+s._in+'].bcr()',s.forcedLinkTrackingTimeout);}else if((s.lnk||s.eo)&&(!ta||ta=='_self'||ta=='_top'||ta=='_parent'||(s.wd.name&&ta==s.wd.name))){b=e=new Date;while(!im.s_l&&e.getTime()-b.getTime()<500)e=new Date}return ''}return '<im'+'g sr'+'c=\"'+rs+'\" width=1 height=1 border=0 alt=\"\">'};s.gg=function(v){var s=this;if(!s.wd['s_'+v])s.wd['s_'+v]='';return s.wd['s_'+v]};s.glf=function(t,a){if(t.substring(0,2)=='s_')t=t.substring(2);var s=this,v=s.gg(t);if(v)s[t]=v};s.gl=function(v){var s=this;if(s.pg)s.pt(v,',','glf',0)};s.rf=function(x){var s=this,y,i,j,h,p,l=0,q,a,b='',c='',t;if(x&&x.length>255){y=''+x;i=y.indexOf('?');if(i>0){q=y.substring(i+1);y=y.substring(0,i);h=y.toLowerCase();j=0;if(h.substring(0,7)=='http://')j+=7;else if(h.substring(0,8)=='https://')j+=8;i=h.indexOf(\"/\",j);if(i>0){h=h.substring(j,i);p=y.substring(i);y=y.substring(0,i);if(h.indexOf('google')>=0)l=',q,ie,start,search_key,word,kw,cd,';else if(h.indexOf('yahoo.co')>=0)l=',p,ei,';if(l&&q){a=s.sp(q,'&');if(a&&a.length>1){for(j=0;j<a.length;j++){t=a[j];i=t.indexOf('=');if(i>0&&l.indexOf(','+t.substring(0,i)+',')>=0)b+=(b?'&':'')+t;else c+=(c?'&':'')+t}if(b&&c)q=b+'&'+c;else c=''}i=253-(q.length-c.length)-y.length;x=y+(i>0?p.substring(0,i):'')+'?'+q}}}}return x};s.s2q=function(k,v,vf,vfp,f){var s=this,qs='',sk,sv,sp,ss,nke,nk,nf,nfl=0,nfn,nfm;if(k==\"contextData\")k=\"c\";if(v){for(sk in v)if((!f||sk.substring(0,f.length)==f)&&v[sk]&&(!vf||vf.indexOf(','+(vfp?vfp+'.':'')+sk+',')>=0)&&(!Object||!Object.prototype||!Object.prototype[sk])){nfm=0;if(nfl)for(nfn=0;nfn<nfl.length;nfn++)if(sk.substring(0,nfl[nfn].length)==nfl[nfn])nfm=1;if(!nfm){if(qs=='')qs+='&'+k+'.';sv=v[sk];if(f)sk=sk.substring(f.length);if(sk.length>0){nke=sk.indexOf('.');if(nke>0){nk=sk.substring(0,nke);nf=(f?f:'')+nk+'.';if(!nfl)nfl=new Array;nfl[nfl.length]=nf;qs+=s.s2q(nk,v,vf,vfp,nf)}else{if(typeof(sv)=='boolean'){if(sv)sv='true';else sv='false'}if(sv){if(vfp=='retrieveLightData'&&f.indexOf('.contextData.')<0){sp=sk.substring(0,4);ss=sk.substring(4);if(sk=='transactionID')sk='xact';else if(sk=='channel')sk='ch';else if(sk=='campaign')sk='v0';else if(s.num(ss)){if(sp=='prop')sk='c'+ss;else if(sp=='eVar')sk='v'+ss;else if(sp=='list')sk='l'+ss;else if(sp=='hier'){sk='h'+ss;sv=sv.substring(0,255)}}}qs+='&'+s.ape(sk)+'='+s.ape(sv)}}}}}if(qs!='')qs+='&.'+k}return qs};s.hav=function(){var s=this,qs='',l,fv='',fe='',mn,i,e;if(s.lightProfileID){l=s.va_m;fv=s.lightTrackVars;if(fv)fv=','+fv+','+s.vl_mr+','}else{l=s.va_t;if(s.pe||s.linkType){fv=s.linkTrackVars;fe=s.linkTrackEvents;if(s.pe){mn=s.pe.substring(0,1).toUpperCase()+s.pe.substring(1);if(s[mn]){fv=s[mn].trackVars;fe=s[mn].trackEvents}}}if(fv)fv=','+fv+','+s.vl_l+','+s.vl_l2;if(fe){fe=','+fe+',';if(fv)fv+=',events,'}if (s.events2)e=(e?',':'')+s.events2}for(i=0;i<l.length;i++){var k=l[i],v=s[k],b=k.substring(0,4),x=k.substring(4),n=parseInt(x),q=k;if(!v)if(k=='events'&&e){v=e;e=''}if(v&&(!fv||fv.indexOf(','+k+',')>=0)&&k!='linkName'&&k!='linkType'){if(k=='supplementalDataID')q='sdid';else if(k=='timestamp')q='ts';else if(k=='dynamicVariablePrefix')q='D';else if(k=='visitorID')q='vid';else if(k=='marketingCloudVisitorID')q='mid';else if(k=='analyticsVisitorID')q='aid';else if(k=='audienceManagerLocationHint')q='aamlh';else if(k=='audienceManagerBlob')q='aamb';else if(k=='pageURL'){q='g';if(v.length>255){s.pageURLRest=v.substring(255);v=v.substring(0,255);}}else if(k=='pageURLRest')q='-g';else if(k=='referrer'){q='r';v=s.fl(s.rf(v),255)}else if(k=='vmk'||k=='visitorMigrationKey')q='vmt';else if(k=='visitorMigrationServer'){q='vmf';if(s.ssl&&s.visitorMigrationServerSecure)v=''}else if(k=='visitorMigrationServerSecure'){q='vmf';if(!s.ssl&&s.visitorMigrationServer)v=''}else if(k=='charSet'){q='ce';if(v.toUpperCase()=='AUTO')v='ISO8859-1';else if(s.em==2||s.em==3)v='UTF-8'}else if(k=='visitorNamespace')q='ns';else if(k=='cookieDomainPeriods')q='cdp';else if(k=='cookieLifetime')q='cl';else if(k=='variableProvider')q='vvp';else if(k=='currencyCode')q='cc';else if(k=='channel')q='ch';else if(k=='transactionID')q='xact';else if(k=='campaign')q='v0';else if(k=='resolution')q='s';else if(k=='colorDepth')q='c';else if(k=='javascriptVersion')q='j';else if(k=='javaEnabled')q='v';else if(k=='cookiesEnabled')q='k';else if(k=='browserWidth')q='bw';else if(k=='browserHeight')q='bh';else if(k=='connectionType')q='ct';else if(k=='homepage')q='hp';else if(k=='plugins')q='p';else if(k=='events'){if(e)v+=(v?',':'')+e;if(fe)v=s.fs(v,fe)}else if(k=='events2')v='';else if(k=='contextData'){qs+=s.s2q('c',s[k],fv,k,0);v=''}else if(k=='lightProfileID')q='mtp';else if(k=='lightStoreForSeconds'){q='mtss';if(!s.lightProfileID)v=''}else if(k=='lightIncrementBy'){q='mti';if(!s.lightProfileID)v=''}else if(k=='retrieveLightProfiles')q='mtsr';else if(k=='deleteLightProfiles')q='mtsd';else if(k=='retrieveLightData'){if(s.retrieveLightProfiles)qs+=s.s2q('mts',s[k],fv,k,0);v=''}else if(s.num(x)){if(b=='prop')q='c'+n;else if(b=='eVar')q='v'+n;else if(b=='list')q='l'+n;else if(b=='hier'){q='h'+n;v=s.fl(v,255)}}if(v)qs+='&'+s.ape(q)+'='+(k.substring(0,3)!='pev'?s.ape(v):v)}}return qs};s.ltdf=function(t,h){t=t?t.toLowerCase():'';h=h?h.toLowerCase():'';var qi=h.indexOf('?'),hi=h.indexOf('#');if(qi>=0){if(hi>=0&&hi<qi)qi=hi;}else qi=hi;h=qi>=0?h.substring(0,qi):h;if(t&&h.substring(h.length-(t.length+1))=='.'+t)return 1;return 0};s.ltef=function(t,h){t=t?t.toLowerCase():'';h=h?h.toLowerCase():'';if(t&&h.indexOf(t)>=0)return 1;return 0};s.lt=function(h){var s=this,lft=s.linkDownloadFileTypes,lef=s.linkExternalFilters,lif=s.linkInternalFilters;lif=lif?lif:s.wd.location.hostname;h=h.toLowerCase();if(s.trackDownloadLinks&&lft&&s.pt(lft,',','ltdf',h))return 'd';if(s.trackExternalLinks&&h.indexOf('#')!=0&&h.indexOf('about:')!=0&&h.indexOf('javascript:')!=0&&(lef||lif)&&(!lef||s.pt(lef,',','ltef',h))&&(!lif||!s.pt(lif,',','ltef',h)))return 'e';return ''};s.lc=new Function('e','var s=s_c_il['+s._in+'],b=s.eh(this,\"onclick\");s.lnk=this;s.t();s.lnk=0;if(b)return this[b](e);return true');s.bcr=function(){var s=this;if(s.bct&&s.bce)s.bct.dispatchEvent(s.bce);if(s.bcf){if(typeof(s.bcf)=='function')s.bcf();else if(s.bct&&s.bct.href)s.d.location=s.bct.href}s.bct=s.bce=s.bcf=0};s.bc=new Function('e','if(e&&e.s_fe)return;var s=s_c_il['+s._in+'],f,tcf,t,n,nrs,a,h;if(s.d&&s.d.all&&s.d.all.cppXYctnr)return;if(!s.bbc)s.useForcedLinkTracking=0;else if(!s.useForcedLinkTracking){s.b.removeEventListener(\"click\",s.bc,true);s.bbc=s.useForcedLinkTracking=0;return}else s.b.removeEventListener(\"click\",s.bc,false);s.eo=e.srcElement?e.srcElement:e.target;nrs=s.nrs;s.t();s.eo=0;if(s.nrs>nrs&&s.useForcedLinkTracking&&e.target){a=e.target;while(a&&a!=s.b&&a.tagName.toUpperCase()!=\"A\"&&a.tagName.toUpperCase()!=\"AREA\")a=a.parentNode;if(a){h=a.href;if(h.indexOf(\"#\")==0||h.indexOf(\"about:\")==0||h.indexOf(\"javascript:\")==0)h=0;t=a.target;if(e.target.dispatchEvent&&h&&(!t||t==\"_self\"||t==\"_top\"||t==\"_parent\"||(s.wd.name&&t==s.wd.name))){tcf=new Function(\"s\",\"var x;try{n=s.d.createEvent(\\\\\"MouseEvents\\\\\")}catch(x){n=new MouseEvent}return n\");n=tcf(s);if(n){tcf=new Function(\"n\",\"e\",\"var x;try{n.initMouseEvent(\\\\\"click\\\\\",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}catch(x){n=0}return n\");n=tcf(n,e);if(n){n.s_fe=1;e.stopPropagation();if (e.stopImmediatePropagation) {e.stopImmediatePropagation();}e.preventDefault();s.bct=e.target;s.bce=n}}}}}');s.oh=function(o){var s=this,l=s.wd.location,h=o.href?o.href:'',i,j,k,p;i=h.indexOf(':');j=h.indexOf('?');k=h.indexOf('/');if(h&&(i<0||(j>=0&&i>j)||(k>=0&&i>k))){p=o.protocol&&o.protocol.length>1?o.protocol:(l.protocol?l.protocol:'');i=l.pathname.lastIndexOf('/');h=(p?p+'//':'')+(o.host?o.host:(l.host?l.host:''))+(h.substring(0,1)!='/'?l.pathname.substring(0,i<0?0:i)+'/':'')+h}return h};s.ot=function(o){var t=o.tagName;if(o.tagUrn||(o.scopeName&&o.scopeName.toUpperCase()!='HTML'))return '';t=t&&t.toUpperCase?t.toUpperCase():'';if(t=='SHAPE')t='';if(t){if((t=='INPUT'||t=='BUTTON')&&o.type&&o.type.toUpperCase)t=o.type.toUpperCase();else if(!t&&o.href)t='A';}return t};s.oid=function(o){var s=this,t=s.ot(o),p,c,n='',x=0;if(t&&!o.s_oid){p=o.protocol;c=o.onclick;if(o.href&&(t=='A'||t=='AREA')&&(!c||!p||p.toLowerCase().indexOf('javascript')<0))n=s.oh(o);else if(c){n=s.rep(s.rep(s.rep(s.rep(''+c,\"\\r\",''),\"\\n\",''),\"\\t\",''),' ','');x=2}else if(t=='INPUT'||t=='SUBMIT'){if(o.value)n=o.value;else if(o.innerText)n=o.innerText;else if(o.textContent)n=o.textContent;x=3}else if(o.src&&t=='IMAGE')n=o.src;if(n){o.s_oid=s.fl(n,100);o.s_oidt=x}}return o.s_oid};s.rqf=function(t,un){var s=this,e=t.indexOf('='),u=e>=0?t.substring(0,e):'',q=e>=0?s.epa(t.substring(e+1)):'';if(u&&q&&(','+u+',').indexOf(','+un+',')>=0){if(u!=s.un&&s.un.indexOf(',')>=0)q='&u='+u+q+'&u=0';return q}return ''};s.rq=function(un){if(!un)un=this.un;var s=this,c=un.indexOf(','),v=s.c_r('s_sq'),q='';if(c<0)return s.pt(v,'&','rqf',un);return s.pt(un,',','rq',0)};s.sqp=function(t,a){var s=this,e=t.indexOf('='),q=e<0?'':s.epa(t.substring(e+1));s.sqq[q]='';if(e>=0)s.pt(t.substring(0,e),',','sqs',q);return 0};s.sqs=function(un,q){var s=this;s.squ[un]=q;return 0};s.sq=function(q){var s=this,k='s_sq',v=s.c_r(k),x,c=0;s.sqq=new Object;s.squ=new Object;s.sqq[q]='';s.pt(v,'&','sqp',0);s.pt(s.un,',','sqs',q);v='';for(x in s.squ)if(x&&(!Object||!Object.prototype||!Object.prototype[x]))s.sqq[s.squ[x]]+=(s.sqq[s.squ[x]]?',':'')+x;for(x in s.sqq)if(x&&(!Object||!Object.prototype||!Object.prototype[x])&&s.sqq[x]&&(x==q||c<2)){v+=(v?'&':'')+s.sqq[x]+'='+s.ape(x);c++}return s.c_w(k,v,0)};s.wdl=new Function('e','var s=s_c_il['+s._in+'],r=true,b=s.eh(s.wd,\"onload\"),i,o,oc;if(b)r=this[b](e);for(i=0;i<s.d.links.length;i++){o=s.d.links[i];oc=o.onclick?\"\"+o.onclick:\"\";if((oc.indexOf(\"s_gs(\")<0||oc.indexOf(\".s_oc(\")>=0)&&oc.indexOf(\".tl(\")<0)s.eh(o,\"onclick\",0,s.lc);}return r');s.wds=function(){var s=this;if(s.apv>3&&(!s.isie||!s.ismac||s.apv>=5)){if(s.b&&s.b.attachEvent)s.b.attachEvent('onclick',s.bc);else if(s.b&&s.b.addEventListener){if(s.n&&((s.n.userAgent.indexOf('WebKit')>=0&&s.d.createEvent)||(s.n.userAgent.indexOf('Firefox/2')>=0&&s.wd.MouseEvent))){s.bbc=1;s.useForcedLinkTracking=1;s.b.addEventListener('click',s.bc,true)}s.b.addEventListener('click',s.bc,false)}else s.eh(s.wd,'onload',0,s.wdl)}};s.vs=function(x){var s=this,v=s.visitorSampling,g=s.visitorSamplingGroup,k='s_vsn_'+s.un+(g?'_'+g:''),n=s.c_r(k),e=new Date,y=e.getYear();e.setYear(y+10+(y<1900?1900:0));if(v){v*=100;if(!n){if(!s.c_w(k,x,e))return 0;n=x}if(n%10000>v)return 0}return 1};s.dyasmf=function(t,m){if(t&&m&&m.indexOf(t)>=0)return 1;return 0};s.dyasf=function(t,m){var s=this,i=t?t.indexOf('='):-1,n,x;if(i>=0&&m){var n=t.substring(0,i),x=t.substring(i+1);if(s.pt(x,',','dyasmf',m))return n}return 0};s.uns=function(){var s=this,x=s.dynamicAccountSelection,l=s.dynamicAccountList,m=s.dynamicAccountMatch,n,i;s.un=s.un.toLowerCase();if(x&&l){if(!m)m=s.wd.location.host;if(!m.toLowerCase)m=''+m;l=l.toLowerCase();m=m.toLowerCase();n=s.pt(l,';','dyasf',m);if(n)s.un=n}i=s.un.indexOf(',');s.fun=i<0?s.un:s.un.substring(0,i)};s.sa=function(un){var s=this;if(s.un&&s.mpc('sa',arguments))return;s.un=un;if(!s.oun)s.oun=un;else if((','+s.oun+',').indexOf(','+un+',')<0)s.oun+=','+un;s.uns()};s.m_i=function(n,a){var s=this,m,f=n.substring(0,1),r,l,i;if(!s.m_l)s.m_l=new Object;if(!s.m_nl)s.m_nl=new Array;m=s.m_l[n];if(!a&&m&&m._e&&!m._i)s.m_a(n);if(!m){m=new Object,m._c='s_m';m._in=s.wd.s_c_in;m._il=s._il;m._il[m._in]=m;s.wd.s_c_in++;m.s=s;m._n=n;m._l=new Array('_c','_in','_il','_i','_e','_d','_dl','s','n','_r','_g','_g1','_t','_t1','_x','_x1','_rs','_rr','_l');s.m_l[n]=m;s.m_nl[s.m_nl.length]=n}else if(m._r&&!m._m){r=m._r;r._m=m;l=m._l;for(i=0;i<l.length;i++)if(m[l[i]])r[l[i]]=m[l[i]];r._il[r._in]=r;m=s.m_l[n]=r}if(f==f.toUpperCase())s[n]=m;return m};s.m_a=new Function('n','g','e','if(!g)g=\"m_\"+n;var s=s_c_il['+s._in+'],c=s[g+\"_c\"],m,x,f=0;if(s.mpc(\"m_a\",arguments))return;if(!c)c=s.wd[\"s_\"+g+\"_c\"];if(c&&s_d)s[g]=new Function(\"s\",s_ft(s_d(c)));x=s[g];if(!x)x=s.wd[\\'s_\\'+g];if(!x)x=s.wd[g];m=s.m_i(n,1);if(x&&(!m._i||g!=\"m_\"+n)){m._i=f=1;if((\"\"+x).indexOf(\"function\")>=0)x(s);else s.m_m(\"x\",n,x,e)}m=s.m_i(n,1);if(m._dl)m._dl=m._d=0;s.dlt();return f');s.m_m=function(t,n,d,e){t='_'+t;var s=this,i,x,m,f='_'+t,r=0,u;if(s.m_l&&s.m_nl)for(i=0;i<s.m_nl.length;i++){x=s.m_nl[i];if(!n||x==n){m=s.m_i(x);u=m[t];if(u){if((''+u).indexOf('function')>=0){if(d&&e)u=m[t](d,e);else if(d)u=m[t](d);else u=m[t]()}}if(u)r=1;u=m[t+1];if(u&&!m[f]){if((''+u).indexOf('function')>=0){if(d&&e)u=m[t+1](d,e);else if(d)u=m[t+1](d);else u=m[t+1]()}}m[f]=1;if(u)r=1}}return r};s.m_ll=function(){var s=this,g=s.m_dl,i,o;if(g)for(i=0;i<g.length;i++){o=g[i];if(o)s.loadModule(o.n,o.u,o.d,o.l,o.e,1);g[i]=0}};s.loadModule=function(n,u,d,l,e,ln){var s=this,m=0,i,g,o=0,f1,f2,c=s.h?s.h:s.b,b,tcf;if(n){i=n.indexOf(':');if(i>=0){g=n.substring(i+1);n=n.substring(0,i)}else g=\"m_\"+n;m=s.m_i(n)}if((l||(n&&!s.m_a(n,g)))&&u&&s.d&&c&&s.d.createElement){if(d){m._d=1;m._dl=1}if(ln){if(s.ssl)u=s.rep(u,'http:','https:');i='s_s:'+s._in+':'+n+':'+g;b='var s=s_c_il['+s._in+'],o=s.d.getElementById(\"'+i+'\");if(s&&o){if(!o.l&&s.wd.'+g+'){o.l=1;if(o.i)clearTimeout(o.i);o.i=0;s.m_a(\"'+n+'\",\"'+g+'\"'+(e?',\"'+e+'\"':'')+')}';f2=b+'o.c++;if(!s.maxDelay)s.maxDelay=250;if(!o.l&&o.c<(s.maxDelay*2)/100)o.i=setTimeout(o.f2,100)}';f1=new Function('e',b+'}');tcf=new Function('s','c','i','u','f1','f2','var e,o=0;try{o=s.d.createElement(\"script\");if(o){o.type=\"text/javascript\";'+(n?'o.id=i;o.defer=true;o.onload=o.onreadystatechange=f1;o.f2=f2;o.l=0;':'')+'o.src=u;c.appendChild(o);'+(n?'o.c=0;o.i=setTimeout(f2,100)':'')+'}}catch(e){o=0}return o');o=tcf(s,c,i,u,f1,f2)}else{o=new Object;o.n=n+':'+g;o.u=u;o.d=d;o.l=l;o.e=e;g=s.m_dl;if(!g)g=s.m_dl=new Array;i=0;while(i<g.length&&g[i])i++;g[i]=o}}else if(n){m=s.m_i(n);m._e=1}return m};s.voa=function(vo,r){var s=this,l=s.va_g,i,k,v,x;for(i=0;i<l.length;i++){k=l[i];v=vo[k];if(v||vo['!'+k]){if(!r&&(k==\"contextData\"||k==\"retrieveLightData\")&&s[k])for(x in s[k])if(!v[x])v[x]=s[k][x];s[k]=v}}};s.vob=function(vo,onlySet){var s=this,l=s.va_g,i,k;for(i=0;i<l.length;i++){k=l[i];vo[k]=s[k];if(!onlySet&&!vo[k])vo['!'+k]=1}};s.dlt=new Function('var s=s_c_il['+s._in+'],d=new Date,i,vo,f=0;if(s.dll)for(i=0;i<s.dll.length;i++){vo=s.dll[i];if(vo){if(!s.m_m(\"d\")||d.getTime()-vo._t>=s.maxDelay){s.dll[i]=0;s.t(vo)}else f=1}}if(s.dli)clearTimeout(s.dli);s.dli=0;if(f){if(!s.dli)s.dli=setTimeout(s.dlt,s.maxDelay)}else s.dll=0');s.dl=function(vo){var s=this,d=new Date;if(!vo)vo=new Object;s.vob(vo);vo._t=d.getTime();if(!s.dll)s.dll=new Array;s.dll[s.dll.length]=vo;if(!s.maxDelay)s.maxDelay=250;s.dlt()};s._waitingForMarketingCloudVisitorID = false;s._doneWaitingForMarketingCloudVisitorID = false;s._marketingCloudVisitorIDCallback=function(marketingCloudVisitorID) {var s=this;s.marketingCloudVisitorID = marketingCloudVisitorID;s._doneWaitingForMarketingCloudVisitorID = true;s._callbackWhenReadyToTrackCheck();};s._waitingForAnalyticsVisitorID = false;s._doneWaitingForAnalyticsVisitorID = false;s._analyticsVisitorIDCallback=function(analyticsVisitorID) {var s=this;s.analyticsVisitorID = analyticsVisitorID;s._doneWaitingForAnalyticsVisitorID = true;s._callbackWhenReadyToTrackCheck();};s._waitingForAudienceManagerLocationHint = false;s._doneWaitingForAudienceManagerLocationHint = false;s._audienceManagerLocationHintCallback=function(audienceManagerLocationHint) {var s=this;s.audienceManagerLocationHint = audienceManagerLocationHint;s._doneWaitingForAudienceManagerLocationHint = true;s._callbackWhenReadyToTrackCheck();};s._waitingForAudienceManagerBlob = false;s._doneWaitingForAudienceManagerBlob = false;s._audienceManagerBlobCallback=function(audienceManagerBlob) {var s=this;s.audienceManagerBlob = audienceManagerBlob;s._doneWaitingForAudienceManagerBlob = true;s._callbackWhenReadyToTrackCheck();};s.isReadyToTrack=function() {var s=this,readyToTrack = true,visitor = s.visitor;if ((visitor) && (visitor.isAllowed())) {if ((!s._waitingForMarketingCloudVisitorID) && (!s.marketingCloudVisitorID) && (visitor.getMarketingCloudVisitorID)) {s._waitingForMarketingCloudVisitorID = true;s.marketingCloudVisitorID = visitor.getMarketingCloudVisitorID([s,s._marketingCloudVisitorIDCallback]);if (s.marketingCloudVisitorID) {s._doneWaitingForMarketingCloudVisitorID = true;}}if ((!s._waitingForAnalyticsVisitorID) && (!s.analyticsVisitorID) && (visitor.getAnalyticsVisitorID)) {s._waitingForAnalyticsVisitorID = true;s.analyticsVisitorID = visitor.getAnalyticsVisitorID([s,s._analyticsVisitorIDCallback]);if (s.analyticsVisitorID) {s._doneWaitingForAnalyticsVisitorID = true;}}if ((!s._waitingForAudienceManagerLocationHint) && (!s.audienceManagerLocationHint) && (visitor.getAudienceManagerLocationHint)) {s._waitingForAudienceManagerLocationHint = true;s.audienceManagerLocationHint = visitor.getAudienceManagerLocationHint([s,s._audienceManagerLocationHintCallback]);if (s.audienceManagerLocationHint) {s._doneWaitingForAudienceManagerLocationHint = true;}}if ((!s._waitingForAudienceManagerBlob) && (!s.audienceManagerBlob) && (visitor.getAudienceManagerBlob)) {s._waitingForAudienceManagerBlob = true;s.audienceManagerBlob = visitor.getAudienceManagerBlob([s,s._audienceManagerBlobCallback]);if (s.audienceManagerBlob) {s._doneWaitingForAudienceManagerBlob = true;}}if (((s._waitingForMarketingCloudVisitorID)     && (!s._doneWaitingForMarketingCloudVisitorID)     && (!s.marketingCloudVisitorID)) ||((s._waitingForAnalyticsVisitorID)          && (!s._doneWaitingForAnalyticsVisitorID)          && (!s.analyticsVisitorID)) ||((s._waitingForAudienceManagerLocationHint) && (!s._doneWaitingForAudienceManagerLocationHint) && (!s.audienceManagerLocationHint)) ||((s._waitingForAudienceManagerBlob)         && (!s._doneWaitingForAudienceManagerBlob)         && (!s.audienceManagerBlob))) {readyToTrack = false;}}return readyToTrack;};s._callbackWhenReadyToTrackQueue = null;s._callbackWhenReadyToTrackInterval = 0;s.callbackWhenReadyToTrack=function(callbackThis,callback,args) {var s=this,callbackInfo;callbackInfo = {};callbackInfo.callbackThis = callbackThis;callbackInfo.callback     = callback;callbackInfo.args         = args;if (s._callbackWhenReadyToTrackQueue == null) {s._callbackWhenReadyToTrackQueue = [];}s._callbackWhenReadyToTrackQueue.push(callbackInfo);if (s._callbackWhenReadyToTrackInterval == 0) {s._callbackWhenReadyToTrackInterval = setInterval(s._callbackWhenReadyToTrackCheck,100);}};s._callbackWhenReadyToTrackCheck=new Function('var s=s_c_il['+s._in+'],callbackNum,callbackInfo;if (s.isReadyToTrack()) {if (s._callbackWhenReadyToTrackInterval) {clearInterval(s._callbackWhenReadyToTrackInterval);s._callbackWhenReadyToTrackInterval = 0;}if (s._callbackWhenReadyToTrackQueue != null) {while (s._callbackWhenReadyToTrackQueue.length > 0) {callbackInfo = s._callbackWhenReadyToTrackQueue.shift();callbackInfo.callback.apply(callbackInfo.callbackThis,callbackInfo.args);}}}');s._handleNotReadyToTrack=function(variableOverrides) {var s=this,args,varKey,variableOverridesCopy = null,setVariables = null;if (!s.isReadyToTrack()) {args = [];if (variableOverrides != null) {variableOverridesCopy = {};for (varKey in variableOverrides) {variableOverridesCopy[varKey] = variableOverrides[varKey];}}setVariables = {};s.vob(setVariables,true);args.push(variableOverridesCopy);args.push(setVariables);s.callbackWhenReadyToTrack(s,s.track,args);return true;}return false;};s.gfid=function(){var s=this,d='0123456789ABCDEF',k='s_fid',fid=s.c_r(k),h='',l='',i,j,m=8,n=4,e=new Date,y;if(!fid||fid.indexOf('-')<0){for(i=0;i<16;i++){j=Math.floor(Math.random()*m);h+=d.substring(j,j+1);j=Math.floor(Math.random()*n);l+=d.substring(j,j+1);m=n=16}fid=h+'-'+l;}y=e.getYear();e.setYear(y+2+(y<1900?1900:0));if(!s.c_w(k,fid,e))fid=0;return fid};s.track=s.t=function(vo,setVariables){var s=this,notReadyToTrack,trk=1,tm=new Date,sed=Math&&Math.random?Math.floor(Math.random()*10000000000000):tm.getTime(),sess='s'+Math.floor(tm.getTime()/10800000)%10+sed,y=tm.getYear(),vt=tm.getDate()+'/'+tm.getMonth()+'/'+(y<1900?y+1900:y)+' '+tm.getHours()+':'+tm.getMinutes()+':'+tm.getSeconds()+' '+tm.getDay()+' '+tm.getTimezoneOffset(),tcf,tfs=s.gtfs(),ta=-1,q='',qs='',code='',vb=new Object;if ((!s.supplementalDataID) && (s.visitor) && (s.visitor.getSupplementalDataID)) {s.supplementalDataID = s.visitor.getSupplementalDataID(\"AppMeasurement:\" + s._in,(s.expectSupplementalData ? false : true));}if(s.mpc('t',arguments))return;s.gl(s.vl_g);s.uns();s.m_ll();notReadyToTrack = s._handleNotReadyToTrack(vo);if (!notReadyToTrack) {if (setVariables) {s.voa(setVariables);}if(!s.td){var tl=tfs.location,a,o,i,x='',c='',v='',p='',bw='',bh='',j='1.0',k=s.c_w('s_cc','true',0)?'Y':'N',hp='',ct='',pn=0,ps;if(String&&String.prototype){j='1.1';if(j.match){j='1.2';if(tm.setUTCDate){j='1.3';if(s.isie&&s.ismac&&s.apv>=5)j='1.4';if(pn.toPrecision){j='1.5';a=new Array;if(a.forEach){j='1.6';i=0;o=new Object;tcf=new Function('o','var e,i=0;try{i=new Iterator(o)}catch(e){}return i');i=tcf(o);if(i&&i.next){j='1.7';if(a.reduce){j='1.8';if(j.trim){j='1.8.1';if(Date.parse){j='1.8.2';if(Object.create)j='1.8.5'}}}}}}}}}if(s.apv>=4)x=screen.width+'x'+screen.height;if(s.isns||s.isopera){if(s.apv>=3){v=s.n.javaEnabled()?'Y':'N';if(s.apv>=4){c=screen.pixelDepth;bw=s.wd.innerWidth;bh=s.wd.innerHeight}}s.pl=s.n.plugins}else if(s.isie){if(s.apv>=4){v=s.n.javaEnabled()?'Y':'N';c=screen.colorDepth;if(s.apv>=5){bw=s.d.documentElement.offsetWidth;bh=s.d.documentElement.offsetHeight;if(!s.ismac&&s.b){tcf=new Function('s','tl','var e,hp=0;try{s.b.addBehavior(\"#default#homePage\");hp=s.b.isHomePage(tl)?\"Y\":\"N\"}catch(e){}return hp');hp=tcf(s,tl);tcf=new Function('s','var e,ct=0;try{s.b.addBehavior(\"#default#clientCaps\");ct=s.b.connectionType}catch(e){}return ct');ct=tcf(s)}}}else r=''}if(s.pl)while(pn<s.pl.length&&pn<30){ps=s.fl(s.pl[pn].name,100)+';';if(p.indexOf(ps)<0)p+=ps;pn++}s.resolution=x;s.colorDepth=c;s.javascriptVersion=j;s.javaEnabled=v;s.cookiesEnabled=k;s.browserWidth=bw;s.browserHeight=bh;s.connectionType=ct;s.homepage=hp;s.plugins=p;s.td=1}if(vo){s.vob(vb);s.voa(vo)}if(!s.analyticsVisitorID&&!s.marketingCloudVisitorID)s.fid=s.gfid();if((vo&&vo._t)||!s.m_m('d')){if(s.usePlugins)s.doPlugins(s);if(!s.abort){var l=s.wd.location,r=tfs.document.referrer;if(!s.pageURL)s.pageURL=l.href?l.href:l;if(!s.referrer&&!s._1_referrer){s.referrer=r;s._1_referrer=1}s.m_m('g');if(s.lnk||s.eo){var o=s.eo?s.eo:s.lnk,p=s.pageName,w=1,t=s.ot(o),n=s.oid(o),x=o.s_oidt,h,l,i,oc;if(s.eo&&o==s.eo){while(o&&!n&&t!='BODY'){o=o.parentElement?o.parentElement:o.parentNode;if(o){t=s.ot(o);n=s.oid(o);x=o.s_oidt}}if(!n||t=='BODY')o='';if(o){oc=o.onclick?''+o.onclick:'';if((oc.indexOf('s_gs(')>=0&&oc.indexOf('.s_oc(')<0)||oc.indexOf('.tl(')>=0)o=0}}if(o){if(n)ta=o.target;h=s.oh(o);i=h.indexOf('?');h=s.linkLeaveQueryString||i<0?h:h.substring(0,i);l=s.linkName;t=s.linkType?s.linkType.toLowerCase():s.lt(h);if(t&&(h||l)){s.pe='lnk_'+(t=='d'||t=='e'?t:'o');s.pev1=(h?s.ape(h):'');s.pev2=(l?s.ape(l):'')}else trk=0;if(s.trackInlineStats){if(!p){p=s.pageURL;w=0}t=s.ot(o);i=o.sourceIndex;if(o.dataset&&o.dataset.sObjectId){s.wd.s_objectID=o.dataset.sObjectId;}else if(o.getAttribute&&o.getAttribute('data-s-object-id')){s.wd.s_objectID=o.getAttribute('data-s-object-id');}else if(s.useForcedLinkTracking){s.wd.s_objectID='';oc=o.onclick?''+o.onclick:'';if(oc){var ocb=oc.indexOf('s_objectID'),oce,ocq,ocx;if(ocb>=0){ocb+=10;while(ocb<oc.length&&(\"= \\t\\r\\n\").indexOf(oc.charAt(ocb))>=0)ocb++;if(ocb<oc.length){oce=ocb;ocq=ocx=0;while(oce<oc.length&&(oc.charAt(oce)!=';'||ocq)){if(ocq){if(oc.charAt(oce)==ocq&&!ocx)ocq=0;else if(oc.charAt(oce)==\"\\\\\")ocx=!ocx;else ocx=0;}else{ocq=oc.charAt(oce);if(ocq!='\"'&&ocq!=\"'\")ocq=0}oce++;}oc=oc.substring(ocb,oce);if(oc){o.s_soid=new Function('s','var e;try{s.wd.s_objectID='+oc+'}catch(e){}');o.s_soid(s)}}}}}if(s.gg('objectID')){n=s.gg('objectID');x=1;i=1}if(p&&n&&t)qs='&pid='+s.ape(s.fl(p,255))+(w?'&pidt='+w:'')+'&oid='+s.ape(s.fl(n,100))+(x?'&oidt='+x:'')+'&ot='+s.ape(t)+(i?'&oi='+i:'')}}else trk=0}if(trk||qs){s.sampled=s.vs(sed);if(trk){if(s.sampled)code=s.mr(sess,(vt?'&t='+s.ape(vt):'')+s.hav()+q+(qs?qs:s.rq()),0,ta);qs='';s.m_m('t');if(s.p_r)s.p_r();s.referrer=s.lightProfileID=s.retrieveLightProfiles=s.deleteLightProfiles=''}s.sq(qs)}}}else s.dl(vo);if(vo)s.voa(vb,1);}s.abort=0;s.supplementalDataID=s.pageURLRest=s.lnk=s.eo=s.linkName=s.linkType=s.wd.s_objectID=s.ppu=s.pe=s.pev1=s.pev2=s.pev3='';if(s.pg)s.wd.s_lnk=s.wd.s_eo=s.wd.s_linkName=s.wd.s_linkType='';return code};s.trackLink=s.tl=function(o,t,n,vo,f){var s=this;s.lnk=o;s.linkType=t;s.linkName=n;if(f){s.bct=o;s.bcf=f}s.t(vo)};s.trackLight=function(p,ss,i,vo){var s=this;s.lightProfileID=p;s.lightStoreForSeconds=ss;s.lightIncrementBy=i;s.t(vo)};s.setTagContainer=function(n){var s=this,l=s.wd.s_c_il,i,t,x,y;s.tcn=n;if(l)for(i=0;i<l.length;i++){t=l[i];if(t&&t._c=='s_l'&&t.tagContainerName==n){s.voa(t);if(t.lmq)for(i=0;i<t.lmq.length;i++){x=t.lmq[i];y='m_'+x.n;if(!s[y]&&!s[y+'_c']){s[y]=t[y];s[y+'_c']=t[y+'_c']}s.loadModule(x.n,x.u,x.d)}if(t.ml)for(x in t.ml)if(s[x]){y=s[x];x=t.ml[x];for(i in x)if(!Object.prototype[i]){if(typeof(x[i])!='function'||(''+x[i]).indexOf('s_c_il')<0)y[i]=x[i]}}if(t.mmq)for(i=0;i<t.mmq.length;i++){x=t.mmq[i];if(s[x.m]){y=s[x.m];if(y[x.f]&&typeof(y[x.f])=='function'){if(x.a)y[x.f].apply(y,x.a);else y[x.f].apply(y)}}}if(t.tq)for(i=0;i<t.tq.length;i++)s.t(t.tq[i]);t.s=s;return}}};s.wd=window;s.ssl=(s.wd.location.protocol.toLowerCase().indexOf('https')>=0);s.d=document;s.b=s.d.body;if(s.d.getElementsByTagName){s.h=s.d.getElementsByTagName('HEAD');if(s.h)s.h=s.h[0]}s.n=navigator;s.u=s.n.userAgent;s.ns6=s.u.indexOf('Netscape6/');var apn=s.n.appName,v=s.n.appVersion,ie=v.indexOf('MSIE '),o=s.u.indexOf('Opera '),i;if(v.indexOf('Opera')>=0||o>0)apn='Opera';s.isie=(apn=='Microsoft Internet Explorer');s.isns=(apn=='Netscape');s.isopera=(apn=='Opera');s.ismac=(s.u.indexOf('Mac')>=0);if(o>0)s.apv=parseFloat(s.u.substring(o+6));else if(ie>0){s.apv=parseInt(i=v.substring(ie+5));if(s.apv>3)s.apv=parseFloat(i)}else if(s.ns6>0)s.apv=parseFloat(s.u.substring(s.ns6+10));else s.apv=parseFloat(v);s.em=0;if(s.em.toPrecision)s.em=3;else if(String.fromCharCode){i=escape(String.fromCharCode(256)).toUpperCase();s.em=(i=='%C4%80'?2:(i=='%U0100'?1:0))}if(s.oun)s.sa(s.oun);s.sa(un);s.vl_l='supplementalDataID,timestamp,dynamicVariablePrefix,visitorID,marketingCloudVisitorID,analyticsVisitorID,audienceManagerLocationHint,fid,vmk,visitorMigrationKey,visitorMigrationServer,visitorMigrationServerSecure,ppu,charSet,visitorNamespace,cookieDomainPeriods,cookieLifetime,pageName,pageURL,referrer,contextData,currencyCode,lightProfileID,lightStoreForSeconds,lightIncrementBy,retrieveLightProfiles,deleteLightProfiles,retrieveLightData';s.va_l=s.sp(s.vl_l,',');s.vl_mr=s.vl_m='timestamp,charSet,visitorNamespace,cookieDomainPeriods,cookieLifetime,contextData,lightProfileID,lightStoreForSeconds,lightIncrementBy';s.vl_t=s.vl_l+',variableProvider,channel,server,pageType,transactionID,purchaseID,campaign,state,zip,events,events2,products,audienceManagerBlob,linkName,linkType';var n;for(n=1;n<=75;n++){s.vl_t+=',prop'+n+',eVar'+n;s.vl_m+=',prop'+n+',eVar'+n}for(n=1;n<=5;n++)s.vl_t+=',hier'+n;for(n=1;n<=3;n++)s.vl_t+=',list'+n;s.va_m=s.sp(s.vl_m,',');s.vl_l2=',tnt,pe,pev1,pev2,pev3,resolution,colorDepth,javascriptVersion,javaEnabled,cookiesEnabled,browserWidth,browserHeight,connectionType,homepage,pageURLRest,plugins';s.vl_t+=s.vl_l2;s.va_t=s.sp(s.vl_t,',');s.vl_g=s.vl_t+',trackingServer,trackingServerSecure,trackingServerBase,fpCookieDomainPeriods,disableBufferedRequests,mobile,visitorSampling,visitorSamplingGroup,dynamicAccountSelection,dynamicAccountList,dynamicAccountMatch,trackDownloadLinks,trackExternalLinks,trackInlineStats,linkLeaveQueryString,linkDownloadFileTypes,linkExternalFilters,linkInternalFilters,linkTrackVars,linkTrackEvents,linkNames,lnk,eo,lightTrackVars,_1_referrer,un';s.va_g=s.sp(s.vl_g,',');s.pg=pg;s.gl(s.vl_g);s.contextData=new Object;s.retrieveLightData=new Object;if(!ss)s.wds();if(pg){s.wd.s_co=function(o){return o};s.wd.s_gs=function(un){s_gi(un,1,1).t()};s.wd.s_dc=function(un){s_gi(un,1).t()}}",A=window,g=A.s_c_il,b=navigator,D=b.userAgent,B=b.appVersion,q=B.indexOf("MSIE "),f=D.indexOf("Netscape6/"),z,k,h,t,E;if(o){o=o.toLowerCase();if(g){for(h=0;h<2;h++){for(k=0;k<g.length;k++){E=g[k];t=E._c;if((!t||t=="s_c"||(h>0&&t=="s_l"))&&(E.oun==o||(E.fs&&E.sa&&E.fs(E.oun,o)))){if(E.sa){E.sa(o)}if(t=="s_c"){return E}}else{E=0}}}}}A.s_an="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";A.s_sp=new Function("x","d","var a=new Array,i=0,j;if(x){if(x.split)a=x.split(d);else if(!d)for(i=0;i<x.length;i++)a[a.length]=x.substring(i,i+1);else while(i>=0){j=x.indexOf(d,i);a[a.length]=x.substring(i,j<0?x.length:j);i=j;if(i>=0)i+=d.length}}return a");A.s_jn=new Function("a","d","var x='',i,j=a.length;if(a&&j>0){x=a[0];if(j>1){if(a.join)x=a.join(d);else for(i=1;i<j;i++)x+=d+a[i]}}return x");A.s_rep=new Function("x","o","n","return s_jn(s_sp(x,o),n)");A.s_d=new Function("x","var t='`^@$#',l=s_an,l2=new Object,x2,d,b=0,k,i=x.lastIndexOf('~~'),j,v,w;if(i>0){d=x.substring(0,i);x=x.substring(i+2);l=s_sp(l,'');for(i=0;i<62;i++)l2[l[i]]=i;t=s_sp(t,'');d=s_sp(d,'~');i=0;while(i<5){v=0;if(x.indexOf(t[i])>=0) {x2=s_sp(x,t[i]);for(j=1;j<x2.length;j++){k=x2[j].substring(0,1);w=t[i]+k;if(k!=' '){v=1;w=d[b+l2[k]]}x2[j]=w+x2[j].substring(1)}}if(v)x=s_jn(x2,'');else{w=t[i]+' ';if(x.indexOf(w)>=0)x=s_rep(x,w,t[i]);i++;b+=62}}}return x");A.s_fe=new Function("c","return s_rep(s_rep(s_rep(c,'\\\\','\\\\\\\\'),'\"','\\\\\"'),\"\\n\",\"\\\\n\")");A.s_fa=new Function("f","var s=f.indexOf('(')+1,e=f.indexOf(')'),a='',c;while(s>=0&&s<e){c=f.substring(s,s+1);if(c==',')a+='\",\"';else if((\"\\n\\r\\t \").indexOf(c)<0)a+=c;s++}return a?'\"'+a+'\"':a");A.s_ft=new Function("c","c+='';var s,e,o,a,d,q,f,h,x;s=c.indexOf('=function(');while(s>=0){s++;d=1;q='';x=0;f=c.substring(s);a=s_fa(f);e=o=c.indexOf('{',s);e++;while(d>0){h=c.substring(e,e+1);if(q){if(h==q&&!x)q='';if(h=='\\\\')x=x?0:1;else x=0}else{if(h=='\"'||h==\"'\")q=h;if(h=='{')d++;if(h=='}')d--}if(d>0)e++}c=c.substring(0,s)+'new Function('+(a?a+',':'')+'\"'+s_fe(c.substring(o+1,e))+'\")'+c.substring(e+1);s=c.indexOf('=function(')}return c;");r=s_d(r);if(q>0){z=parseInt(k=B.substring(q+5));if(z>3){z=parseFloat(k)}}else{if(f>0){z=parseFloat(D.substring(f+10))}else{z=parseFloat(B)}}if(z<5||B.indexOf("Opera")>=0||D.indexOf("Opera")>=0){r=s_ft(r)}if(!E){E=new Object;if(!A.s_c_in){A.s_c_il=new Array;A.s_c_in=0}E._il=A.s_c_il;E._in=A.s_c_in;E._il[E._in]=E;A.s_c_in++}E._c="s_c";(new Function("s","un","pg","ss",r))(E,o,p,F);return E}function s_giqf(){var a=window,g=a.s_giq,c,b,f;if(g){for(c=0;c<g.length;c++){b=g[c];f=s_gi(b.oun);f.sa(b.un);f.setTagContainer(b.tagContainerName)}}a.s_giq=0}s_giqf();BF_js_version="1.0.0";BF_XSS={request:function(b){var f=BF_server+b.script;f+="?version="+BF_js_version;for(name in b.params){f+="&";var c=b.params[name];f+=escape(name)+"="+escape(c)}var a=document.createElement("script");a.src=f;document.getElementsByTagName("body")[0].appendChild(a)},swift_injection:function(b){if(b=="http://platform.twitter.com/widgets.js"&&BF_STATIC.bf_test_mode&&document.cookie.match("sel2_superposter_add_as_tweet")===null){return true}var a=document.createElement("script");a.src=b;document.getElementsByTagName("head")[0].appendChild(a)},badge:function(args){if(BF_XSS.__open_badge){BF_XSS.__open_badge.style.display="none"}if(args.close==true){BF_XSS.__close_badge=true;return}if(BF_XSS.__close_badge){BF_XSS.__close_badge=false;return false}var target=args.target;var json_data=unescape(target.getAttribute("rel:bf_data"));this.obj=eval("("+json_data+")");var div_id=this.obj.buzz_id+"_"+this.obj.badge_type;if(!document.getElementById(div_id)){var div=document.createElement("div");div.id=div_id;div.className="badge-tip badge-"+this.obj.badge_type;args.target.appendChild(div);var spinner=document.createElement("div");spinner.className="spinner";spinner.innerText=" ";div.appendChild(spinner)}if(BF_XSS.__open_badge&&BF_XSS.__open_badge.id==div_id){BF_XSS.__open_badge=null;return true}BF_XSS.__open_badge=document.getElementById(div_id);BF_XSS.__open_badge.style.display="block";BF_XSS.request({script:"_badge",params:{element_id:div_id,json:json_data}});return false},stats_response:function(k,h){if(typeof h=="undefined"){h=BF_XSS.buzz_id}var l=document.getElementById(h+"_top_linking_sites");if(l){for(var g=0;g<k.domains.length;g++){if(k.domains[g]){var b=document.createElement("li");var c=document.createElement("a");c.setAttribute("href","http://"+k.domains[g]["domain"]);c.appendChild(document.createTextNode(k.domains[g]["domain"]));b.appendChild(c);l.appendChild(b)}}}l=document.getElementById(h+"_total_views");if(k.impressions&&k.impressions.length>0){var f=k.impressions[0]["total"]+"";f=f.replace(/(\d)(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})$/,"$1,$2,$3,$4,$5,$6,$7");f=f.replace(/,{2,}/,",");if(l){l.appendChild(document.createTextNode(f))}}if(k.pie){BF_XSS.update_chart(k.pie,h+"_chart")}},update_chart:function(f,h){var h=document.getElementById(h);var c=h.getAttribute("width");if(!c){c=50}var a=h.getAttribute("height");if(!a){a=40}var b=document.createElement("img");var g="http://chart.apis.google.com/chart?chs="+c+"x"+a+"&chd=t:"+f+","+(100-f)+"&cht=p3&chco=0077ee,ee3322&chf=bg,s,0d0d0d";b.src=g;h.appendChild(b);h.className="chart"}};function EventManagerBase(){this.EVENTS={}}EventManagerBase.prototype={constructor:EventManagerBase,observe:function(b,a){if(!this.EVENTS[b]){this.EVENTS[b]={listeners:[],one_time_listeners:[]}}if(this.EVENTS[b].listeners.indexOf(a)==-1){this.EVENTS[b].listeners.push(a)}},observe_once:function(b,a){if(!this.EVENTS[b]){this.EVENTS[b]={listeners:[],one_time_listeners:[]}}if(this.EVENTS[b].one_time_listeners.indexOf(a)==-1){this.EVENTS[b].one_time_listeners.push(a)}},stop_observing:function(f,c){var a=false;if(this.EVENTS[f]){var b=this.EVENTS[f].listeners.indexOf(c);if(b>-1){this.EVENTS[f].listeners.splice(b,1);a=true}b=this.EVENTS[f].one_time_listeners.indexOf(c);if(b>-1){this.EVENTS[f].one_time_listeners.splice(b,1);a=true}}return a},fire:function(f,g,h){if(BF_STATIC&&BF_STATIC.bf_env&&BF_STATIC.bf_env=="dev"){console.log("Firing: "+f);if(BF_STATIC.bf_test_mode){if(!this.eventStack){this.eventStack={}}if(!this.eventStack[f]){this.eventStack[f]=[]}this.eventStack[f].push({ev:f,data:g,target:h});if(this.eventListeners&&this.eventListeners[f]){this.eventListeners[f].map(function(k){if(!k.fulfilled){k.fulfilled=true;k.data=g;k.target=h}})}}}window[f]=true;if(typeof g=="undefined"){g={}}if(this.EVENTS[f]){var c=this.EVENTS[f].listeners;for(var a=0;a<c.length;a++){this._single_fire(c[a],g,h)}for(var b;b=this.EVENTS[f].one_time_listeners.pop();){this._single_fire(b,g,h)}}},_single_fire:function(a,c,f){try{a(c,f)}catch(b){console.dir(b)}}};EventManagerBase.reload=function(){if(BF_STATIC&&BF_STATIC.bf_env&&BF_STATIC.bf_env=="dev"&&BF_STATIC.bf_test_mode){EventManagerBase.prototype.eventStack={};EventManagerBase.prototype.findEventInStack=function(a){if(this.eventStack[a]){return this.eventStack[a].pop()}else{return null}};EventManagerBase.prototype.clearEventStack=function(a){if(this.eventStack[a]){this.eventStack[a]=[]}};EventManagerBase.prototype.eventListeners={};EventManagerBase.prototype.addEventListener=function(a){if(!this.eventListeners[a]){this.eventListeners[a]=[]}var b={id:(new Date().getTime()+Math.random().toString().substr(2,3)),fulfilled:false};this.eventListeners[a].push(b);return b.id};EventManagerBase.prototype.acceptEventOrAddEventListener=function(b){if(!this.eventListeners[b]){this.eventListeners[b]=[]}var a=this.findEventInStack(b);var c={id:(new Date().getTime()+Math.random().toString().substr(2,3)),fulfilled:false};if(a){c.fulfilled=true;c.data=a.data;c.target=a.target}this.eventListeners[b].push(c);return c.id};EventManagerBase.prototype.getEventListener=function(f,b){try{var a=null;if(this.eventListeners[b]){a=this.eventListeners[b].find(function(g){if(g.id==f){return true}else{return false}})}return a}catch(c){console.error(c)}};if(!Array.prototype.find){Object.defineProperty(Array.prototype,"find",{enumerable:false,configurable:true,writable:true,value:function(a){if(this==null){throw new TypeError("Array.prototype.find called on null or undefined")}if(typeof a!=="function"){throw new TypeError("predicate must be a function")}var h=Object(this);var f=h.length>>>0;var b=arguments[1];var g;for(var c=0;c<f;c++){if(c in h){g=h[c];if(a.call(b,g,c,h)){return g}}}return undefined}})}}};EventManagerBase.reload();var EventManager=new EventManagerBase();var BuzzLoader=function(){var b=false;var a={p1:[],p2:[],p3:[],p4:[],p5:[],p6:[],p7:[],p8:[],p9:[],p10:[],user:[]};var c=function(){var f;for(f=1;f<=10;f++){a["p"+f].each(function(h){try{h()}catch(g){if(typeof window.BF_STATIC!="undefined"&&BF_STATIC.bf_env=="dev"){console.dir(g.message);console.log(h)}}})}b=true;a.user.each(function(g){g()})};return{waitForDOM:function(){if(Prototype.Browser.IE){if(!$("buzz-body")){setTimeout("BuzzLoader.waitForDOM();",100)}else{c()}}else{document.observe("dom:loaded",c)}},callLoaded:function(f){if(b){f()}else{a.user.push(f)}},register:function(g,f){if(b){g()}if(f>10||f<1){return 0}a["p"+f].push(g);return 1},register_injection:function(f,g){return BuzzLoader.register(function(){setTimeout(function(){BF_XSS.swift_injection(f)},1)},g)}}}();BuzzLoader.waitForDOM();BFW_COOKIE="bf2-b";BFW_INFO_COOKIE="bf2-b_info";DEFAULT_USER="default_user";var BF_User=function(){this.bools=["p_allow_raw_html","p_disable_quickpost","p_disable_comment","p_disable_reaction","p_admin","p_access_stats","p_alias","p_dashboard","p_partner_admin","public_dashboard","p_boost_buzz","p_developer_admin","p_editor_admin","p_other_admin","show_account_settings","is_facebook_user","terminal_user","f_partner","f_ad","is_microsite","f_self_serve","is_subchannel","is_channel"];this.isLoggedIn=function(){if(BFW_Util.getCookie(BFW_COOKIE)){return true}else{return false}};this.getSessionKey=function(){return BFW_Util.getCookie(BFW_COOKIE)};this.logout=function(a){BFW_Util.deleteCookie(BFW_COOKIE);BFW_Util.deleteCookie(BFW_INFO_COOKIE);BFW_Util.deleteCookie(DEFAULT_USER);if(!a){BF_Request.location({reload_track:true,reload_track_no_delay:true})}};this.getUserInfo=function(){var a=BFW_Util.getCookie(BFW_INFO_COOKIE);var f=BFW_Util.getParameters({str:a,escape:true});var c=BFW_Util.getCookie(DEFAULT_USER);if(f&&c){f.default_user=BFW_Util.getParameters({str:c,escape:true})}if(("localStorage" in window)&&window.localStorage!==null){var b=localStorage.getItem("earned_reactions");if(f&&b){f.earned_reactions=b}}if(typeof f!="undefined"){this.bools.each(function(g){if(typeof f[g]=="undefined"){f[g]="false"}if(typeof f.default_user=="undefined"){f.default_user={b:"false"}}else{if(typeof f.default_user[g]=="undefined"||f.default_user[g]=="undefined"){f.default_user[g]="false"}}});f.isa=f.p_admin}if(f){f.session_key=BFW_Util.getCookie(BFW_COOKIE)}return f||{}};this.load_user_settings=function(){if(this.isLoggedIn()&&(!this.getUserInfo().username||this.getUserInfo().session_key!=this.getSessionKey())){try{if(window.user_nav){user_nav.signout()}}catch(b){console.error(b)}}else{if(this.isLoggedIn()&&bf_username==this.getUserInfo().username&&!document.location.href.match(/\/submissions\//)){var a=document.createElement("script");a.src=bf_sr+"/js/public/contribute/user_settings.js?"+BF_STATIC.version;document.getElementsByTagName("body")[0].appendChild(a);var a=document.createElement("script");a.src=bf_sr+"/js/public/contribute/user_post.js?"+BF_STATIC.version;document.getElementsByTagName("body")[0].appendChild(a)}}};this.getUsernameFromSession=function(){var a=BFW_Util.getCookie(BFW_COOKIE);username="";try{username=(new BF_User()).getUserInfo().username}catch(b){}return username}};var BFW_Util={getCookie:function(a){var b=document.cookie.match(new RegExp("(^|;)\\s*"+encodeURIComponent(a)+"=([^;\\s]*)"));return(b?decodeURIComponent(b[2]):null)},deleteCookie:function(c,f){var g=new Date();g.setTime(g.getTime()-1000000000);var b="; expires="+g.toGMTString();var a=decodeURIComponent(c)+"="+b+"; path=/";if(f){a+="; domain=."+f}else{a+="; domain=.buzzfeed.com"}document.cookie=a},setCookie:function(c){if(BF_STATIC.bf_env=="dev"&&c.name=="country"&&typeof c.clem_valid=="undefined"){alert("Make sure you talk to Clem before making updates to the country cookie!!")}var h=1000*60*60*24*365;if(c.seconds||c.seconds==0){h=c.seconds*1000}var g=new Date();g.setTime(g.getTime()+h);var b="";if(h>0){b="; expires="+g.toGMTString()}var f=c.no_encode?c.value:encodeURIComponent(c.value);var a=encodeURIComponent(c.name)+"="+f+b+"; path=/";if(c.host){a+="; domain=."+c.host}else{a+="; domain=.buzzfeed.com"}document.cookie=a;if(typeof c.callback!="undefined"){c.callback()}},setInfoCookie:function(a){var b=a.value;if(b.f_index){b.f_index="true"}if(b.earned_reactions){if(("localStorage" in window)&&window.localStorage!==null){localStorage.setItem("earned_reactions",Object.toJSON(b.earned_reactions))}else{console.warn("earned reactions not supported (no local storage)")}delete b.earned_reactions}if(BFW_Util.getCookie(DEFAULT_USER)==null){if(b.user_switching){b.user_switching="true"}else{delete b.user_switching}var f={display_name:encodeURIComponent(b.display_name),userid:b.userid,id:b.userid,p_boost_buzz:b.p_boost_buzz==1,username:encodeURIComponent(b.username),session_key:b.session_key,p_alias:b.p_alias,image:encodeURIComponent(b.image),};(new BF_User()).bools.each(function(g){if(typeof b[g]!="undefined"){f[g]=b[g]}});var c={name:DEFAULT_USER,value:$H(f).toQueryString()};BFW_Util.setCookie(c)}BFW_Util.setCookie({name:BFW_INFO_COOKIE,value:$H(b).toQueryString()})},updateInfoCookie:function(g){var a=(new BF_User()).getUserInfo();if(g.earned_reactions){if(("localStorage" in window)&&window.localStorage!==null){localStorage.setItem("earned_reactions",g.earned_reactions)}else{console.warn("earned reactions not supported (no local storage)")}}for(var c in a){if(typeof g[c]!="undefined"){a[c]=g[c]}}var b=["msg_count","msg_count_updated"];b.each(function(h){if(typeof g[h]!="undefined"){a[h]=g[h]}});delete g.earned_reactions;delete a.earned_reactions;for(var f in a){if(a[f]=="false"){delete a[f]}}BFW_Util.setCookie({name:BFW_INFO_COOKIE,value:$H(a).toQueryString()})},getParameters:function(a){var b={};var f=null;if(a&&a.str){f=a.str}if(!f){f=window.location.toString();if(f.indexOf("?")>-1){f=(f.split("?"))[1]}else{f=null}}if(!f||f==null){return}f=f.replace(/&amp;/g,"&");var c=f.split("&");c.each(function(h){h=h.split("=");if(a&&a.escape){h[1]=unescape(h[1])}if(b[h[0]]){if(typeof(b[h[0]])=="string"){var g=new Array();g[0]=b[h[0]];g[1]=h[1];b[h[0]]=g}else{b[h[0]].push(h[1])}}else{b[h[0]]=h[1]}});return b}};var BF_Pager={current_page:1,disabled:false,more:function(a){var b=a.el;if(BF_Pager.disabled){return false}BF_Pager.current_page++;b.addClassName("loading");BF_Pager.disabled=true;if(typeof a.unlimited=="undefined"&&acl.user_can("community_manage")&&a.paging_url.match(/responses\/paging/)){a.unlimited=Math.round(new Date().getTime()/1000)}new Ajax.Request(a.paging_url+(/\?/.test(a.paging_url)?"&":"?")+"p="+BF_Pager.current_page+(typeof a.unlimited!="undefined"?"&r="+a.unlimited:""),{method:"get",onSuccess:function(g){try{b.removeClassName("loading");BF_Pager.disabled=false;if(g.responseText.match("<!--PAGING_OVER-->")){b.hide()}$("post_list").innerHTML+=g.responseText;var c=document.write;document.write=function(h){$("post_list").innerHTML+=h};g.responseText.evalScripts();g.responseText.scan(/id."(post-\d+)"/m,function(h){if(h.length==2){universal_dom.update(h[1])}});g.responseText.scan(/id."(contribwhat_\d+)"/m,function(h){if(h.length==2){var k=h[1];$$("#"+k+" img").each(function(l){if(l.getAttribute("rel:bf_image_src")){bf_prog_load.load_image(l,l.getAttribute("rel:bf_image_src"))}})}});document.write=c;if(typeof BF_TWITTER2!=="undefined"){BF_TWITTER2.init()}bf_editor.init();bf_post_tools.init();picks_controller.init();EventManager.fire("pager:load:done")}catch(f){console.error(f)}}});return false}};var showModeratedUser=function(){if("universal_dom" in window){universal_dom.assign_handler({bucket:"show_for_moderated_user",handler:function(c,b){var a=new BF_User();if(a.isLoggedIn()&&a.getUserInfo().moderated=="1"){c.removeClassName("hidden")}else{if(typeof signin!="undefined"&&signin.callbacks){signin.callbacks.onLogin.push(function(){universal_dom.refresh_immediate_bucket("show_for_moderated_user")})}}}})}else{setTimeout(showModeratedUser,250)}};var showIndexUser=function(){if("universal_dom" in window){universal_dom.assign_handler({bucket:"show_for_index_user",handler:function(c,b){var a=new BF_User();if(a.isLoggedIn()&&a.getUserInfo().f_index=="true"){c.removeClassName("hidden")}else{if(typeof signin!="undefined"&&signin.callbacks){signin.callbacks.onLogin.push(function(){universal_dom.refresh_immediate_bucket("show_for_index_user")})}}}})}else{setTimeout(showIndexUser,250)}};var showPEditorAdminUser=function(){if("universal_dom" in window){universal_dom.assign_handler({bucket:"show_for_p_editor_admin_user",handler:function(c,b){var a=new BF_User();var f=a.getUserInfo().default_user;if(a.isLoggedIn()&&(a.getUserInfo().p_editor_admin=="true"||a.getUserInfo().p_admin=="true")){c.removeClassName("hidden")}if(a.isLoggedIn()&&(f.p_editor_admin=="true"||f.p_admin=="true")){c.removeClassName("hidden")}}})}else{setTimeout(showPEditorAdminUser,250)}};showModeratedUser();showIndexUser();showPEditorAdminUser();function Tracker(){this.entries=[];this.registered=new Array();this.url=window.location.toString();this.url=this.url.replace(/#H\w+$/i,"");this.url=encodeURIComponent(this.url);if(typeof window.HASH_REFER!="undefined"){this.referrer=window.HASH_REFER}else{this.referrer=document.referrer.toString()}this.referrer=encodeURIComponent(this.referrer);this.network_cookie=BFW_Util.getCookie("BUZZ_WIDGET");if((this.network_cookie&&window.location.href.match(this.network_cookie))||window.IS_HASH_WIDGET_CLICK){if(this.url.indexOf(encodeURIComponent("?"))>0){this.url+=encodeURIComponent("&w=1")}else{this.url+=encodeURIComponent("?w=1")}BFW_Util.deleteCookie("BUZZ_WIDGET");if(Tracker.DEBUG){console.debug("Tracking this page as a widget referrer %s",decodeURIComponent(this.url))}}this.defaults={c:"",u:"",type:"",user:"",buzz:"",query:"",url:this.url,referrer:this.referrer};this.cloud=Cloud.servers[Math.floor(Math.random()*Cloud.servers.length)];this.source="http://"+this.cloud+"/small.gif?type="}Tracker.gClick=function(a){return};Tracker.video=function(a){return};Tracker.browser=function(a){return};Tracker.prototype={setDefaults:function(a){for(key in a){this.defaults[key]=a[key]}},add:function(a,b){valid=true;entry={};for(key in this.defaults){entry[key]=this.defaults[key]}for(key in a){entry[key]=a[key]}if(b){valid=false;if(BFW_Util.getCookie("BF-U")){BFW_Util.deleteCookie("BF-U")}}if(valid){this.entries.push(entry)}},run:function(h){if(this.entries.length){var b=this.entries.find(function(k){return k.type==100});if(b&&b.query){this.entries.unshift({buzz:b.user,user:b.user,c:b.u,u:b.u,type:this.types.VXN_CLICK_IN,types:[this.types.VXN_CLICK_IN],domain:"",query:"",url:""});this.entries.unshift({buzz:"buzz",user:"buzz",c:"7BA7",u:"7BA7",type:this.types.VXN_CLICK_OUT,types:[this.types.VXN_CLICK_OUT],domain:"",query:"",url:""})}if(this.DEBUG){console.log("Tracking "+this.entries.length+" entry positions");this.entries.each(function(l){var k={};["buzz","query","type","user"].each(function(m){if(l[m]){k[m]=l[m]+"";k[m]=k[m].split(",").first()}});if(k.type==30||k.type==35&&k.query){console.log([k.user,k.buzz,tracker.positions[k.query]])}else{if(l.type==""){console.log([k.user,k.buzz,"Primary page impression"])}else{if(l.type=="12"){console.log([k.user,k.buzz,"Unique page impression"])}else{console.log([k.user,k.buzz,l.type])}}}})}list=this.entries.shift();if(list.type!=""){list.referrer=""}different={};last=Object.clone(list);multiple=false;while(this.entries.length){multiple=true;entry=this.entries.shift();if(entry.type!=""){entry.referrer=""}for(key in list){list[key]+=","+entry[key];if(!different[key]&&last[key]!=entry[key]){different[key]=1}}}if(multiple){for(key in list){if(!different[key]&&key!="type"){list[key]=list[key].replace(/,.*$/,"")}}}var a=new Image;var g=list.type+"&user="+list.user+"&buzz="+list.buzz+"&url="+list.url+"&query="+list.query+"&referrer="+list.referrer+"&c="+list.c+"&u="+list.u+"&z="+(new Date).getTime();a.src=this.source+g;if(Tracker.DEBUG){console.log("Pixel: ",list,(this.source+g))}try{if(Cloud.staging.sample>0&&(Math.random()<=Cloud.staging.sample)){var c="http://"+Cloud.staging.server+"/small.gif?type=";(new Image()).src=c+g}}catch(f){console.error(f)}this.pixels.push(a)}},track:function(){var reg_tracker=this.tracker.registered[this.index];var reg_event=reg_tracker.events[this.event];if(!reg_tracker.data_obj){reg_tracker.data_obj=reg_tracker.data.length==0?{}:eval("("+reg_tracker.data+")")}if(!reg_event.data_obj){reg_event.data_obj=eval("("+reg_event.data+")")}$H(reg_event.data_obj).each(function(pair){if(pair.key=="callback"){try{eval(pair.value+"("+reg_tracker.data+");")}catch(e){console.error(e)}return true}if(!Object.isArray(pair.value)){pair.value=[pair.value]}pair.value.each(function(query){data=Object.clone(reg_tracker.data_obj);data.type=this.tracker.types[pair.key];data.query=query;this.tracker.add(data)}.bind(this))}.bind(this));if(this.run){this.tracker.run()}},trackSiteClick:function(e){var external_click=false;var ignore_click=false;el=e.element();if(e.srcElement){el=e.srcElement}else{if(e.currentTarget){el=e.currentTarget}}if(!el.hasAttribute("track")||(el.tagName&&el.tagName.toLowerCase()=="img")){if(el.parentNode&&el.parentNode.tagName.toLowerCase()=="a"){el=el.parentNode}}if(el.getAttribute("track")==""){return}track_data=eval("("+el.getAttribute("track")+")");if(el.hasAttribute("rel:gt_act")&&el.getAttribute("rel:gt_act").match("share/")){ignore_click=true}if(!track_data){ignore_click=true}if(ignore_click){return true}if(!el.href.match(/buzzfeed.com/)){external_click=true;track_data.referrer=encodeURIComponent(el.href)}if(BF_STATIC.tt_page=="Buzz"||BF_STATIC.tt_page=="User"){if(BF_STATIC.tt_page=="User"){track_data=tracker.defaults}if(typeof(hashtrack)!="undefined"&&typeof(hashtrack.tracked_hash_tag)!="undefined"){track_data.types=["101"]}else{track_data.types=["100"]}}ctracker=new Tracker();for(i=0;i<track_data.types.length;i++){track_data.type=track_data.types[i];if(typeof track_data.queries!="undefined"&&track_data.queries[i]){track_data.query=track_data.queries[i]}else{if(external_click){track_data.query=encodeURIComponent(el.href)}else{track_data.query=""}}ctracker.add(track_data)}ctracker.run()},attach:function(){if(arguments&&arguments.length>0){base_el=$(arguments[0])}else{base_el=document}var a=function(f){if(f.hasClassName("flex_ab")){var h=f.id.match(/-(\d+)/);if(h&&BF_SELECTED_PROMOS[h[1]]){var c=BF_SELECTED_PROMOS[h[1]];f.setAttribute("track_load",'{"FLEX_PRO_IMP": '+c.promo_id+"}");f.setAttribute("track_mousedown",'{"FLEX_PRO_CLICK": '+c.promo_id+"}")}}var k=f.getAttribute("track");var b={data:k,events:{}};this.registered.push(b);this.events.each(function(m){if(!k){return false}try{b.events[m]={};var l=f.readAttribute("track_"+m);if(l){b.events[m].data=l;if(m=="load"){this.track.bind({tracker:this,event:m,index:(this.registered.length-1)})()}else{Event.observe(f,m,this.track.bind({tracker:this,event:m,index:(this.registered.length-1),run:true}))}}}catch(n){console.error(n)}},this);var g;if((BF_STATIC.tt_page=="Buzz"&&objExists(buzzDetails)&&buzzDetails.ad=="1")||BF_STATIC.tt_page=="User"){g=$$(".PageContent a")}else{if(BF_STATIC.tt_page=="Buzz"){g=[]}else{g=$A(f.getElementsByTagName("A"))}}g.each(function(l){l.setAttribute("track",k);Event.observe(l,"mousedown",Tracker.prototype.trackSiteClick);if(f.getAttribute("rel:ext_track_pixel")){l.setAttribute("rel:ext_track_pixel",f.getAttribute("rel:ext_track_pixel"));Event.observe(l,"mousedown",function(n){var m=new Image();m.src=l.getAttribute("rel:ext_track_pixel");if(Tracker.DEBUG){console.debug("External click tracking call made to %s",m.src)}})}});f.removeClassName("track")}.bind(this);universal_dom.assign_handler({bucket:"track",handler:a});this.run()},registered:[],pixels:[],events:["load","mousedown","mouseover","submit"],positions:["","Header","Homepage Flow","B-Page Viral Alert","Index Sidebar","B-Page Sidebar","C-Page Sidebar","Non-ad Flow","Non-ad Header","Non-ad Sidebar Partner","Non-ad Sidebar Raw","Non-ad Sidebar Badge","Non-ad Permalink Flow","Non-ad Clickable Sidebar","Non-ad Related Buzz","Non-ad Viral Related Unit","Viral Related Unit","Bottom-Of-Page Promo","Multi Homepage Flow","Valley of The Nerds","AOL Related Promo","Targeted-B","Targeted-C","Targeted-A"],types:{REFERRER_DIRECT:0,REFERRER_INTERNAL:1,REFERRER_LINK:2,REFERRER_SEARCH:3,REFERRER_NETWORK:4,SHARE_EMAIL:5,SHARE_FACEBOOK:6,SHARE_STUMBLE:7,SHARE_DELICIOUS:8,SHARE_DIGG:9,SHARE_REDDIT:10,SHARE_MIXX:11,SHARE_TWITTER:15,SHARE_FARK:16,SHARE_MYSPACE:17,SHARE_REBUZZ:18,SHARE_RESERVED4:19,SHARE_RESERVED5:20,UNIQUE_VISIT:12,WIDGET_IMPRESSION:13,WIDGET_CLICK:14,BUZZBOX_IMPRESSION:21,BUZZBOX_CLICK:22,VXN_CLICK_OUT:23,VXN_CLICK_IN:24,BUZZBOX_RES4:25,BUZZBOX_RES5:26,BUZZBOX_RES6:27,BUZZBOX_RES7:28,BUZZBOX_RES8:29,PROMO_IMPRESSION:30,PROMO_AD_IMP:31,BOOST_IMPRESSION:32,FLEX_PRO_IMP:33,PROMO_IMP_RES4:34,PROMO_CLICK:35,PROMO_AD_CLICK:36,BOOST_CLICK:37,FLEX_PRO_CLICK:38,PROMO_CLICK_RES4:39,SITE_CLICK:100,HASH_CLICK:101}};Tracker.DEBUG=document.location.search.match(/tracker=true/)?true:false;function track_gplusone(a,b){b=(typeof(b)!="undefined"&&b)?b:"";if(a.state=="on"){gtrack.track_events(b,"share/googleplus/plus-one","");(new BF_Targetting_Pixel()).add("google_plus")}else{if(a.state=="off"){gtrack.track_events(b,"share/googleplus/minus-one","")}}}function track_gplusone_sbm(a){track_gplusone(a,"Buzz:sharing-bottom-more")}function track_gplus_share_open(a){event_type=(typeof(event_type)!="undefined"&&event_type)?event_type:"";gtrack.track_events(event_type,"share/googleplus/plus-share-start","",null,true)}function track_gplus_share(a){event_type=(typeof(event_type)!="undefined"&&event_type)?event_type:"";gtrack.track_events(event_type,"share/googleplus/plus-one","",null,true)}QuantcastCounter=0;Tracker.Quantcast=function(){if(typeof(_qevents)=="undefined"&&QuantcastCounter<20){QuantcastCounter++;setTimeout("Tracker.Quantcast()",250);return false}_qevents.push({qacct:"p-3aud4J6uA4Z6Y"})};function Referrer(){this.track_subdomains=true;this.referrer=false;this.goal=false;this.cookies={session:{name:"rvt2_sess",expires:0},persist:{name:"rvt2_persist",expires:31536000000}};this._cookies={};this._goals=[];this.cookies_cancel="cancel";this.returns={default_bucket:">2m",buckets:{"1h":60,"3h":180,"6h":320,"12h":720,"24h":1440,"48h":2880,"1w":10080,"2w":20160,"1m":43200,"2m":86400}};this.track=function(){this._set_cookie("rvt_sess","",-1000);this._set_cookie("rvt_persist","",-1000);this.referrer=this._parse_referrer();if(this._is_returning()){this.track_return()}else{if(this._is_initial()){this.track_initial()}else{if(this._is_candidate()){this.start_initial()}}}};this.track_referrer=function(c){if(this._is_returning()){var g="",f="initial",c=this._parse_referrer(),b=(this._get_cookie(this.cookies.session.name)||"{}").evalJSON(),a=(this._get_cookie(this.cookies.persist.name)||"{}").evalJSON();if(!c){c="direct"}if(!a.d){return this.cancel_track()}if(this._is_returning()){f="return/"+b.bkt}if(a.h){g="/"+a.h}}};this.track_goal=function(b){if(this._is_returning()||this._is_initial()){var g="",f="initial",c=(this._get_cookie(this.cookies.session.name)||"{}").evalJSON(),a=(this._get_cookie(this.cookies.persist.name)||"{}").evalJSON();if(!a.d){return this.cancel_track()}if(this._is_returning()){f="return/"+c.bkt}if(a.h){g="/"+a.h}this._goals.push(b)}};this.track_return=function(){var c="",b=1,k="",h={},a=false,g=(this._get_cookie(this.cookies.session.name)||"{}").evalJSON(),f=(this._get_cookie(this.cookies.persist.name)||"{}").evalJSON();if(!f.d){return this.cancel_track()}if(!f.t){f.t=Math.floor(d.getTime()/1000)}if(f.h){k="/"+f.h}if(!this._has_cookie(this.cookies.session.name)||!g.bkt){c=this._determine_time_bucket(f.t);if(f[c]){b=parseInt(f[c])+1}h={t:f.t,d:f.d};if(f.h){h.h=f.h}h[c]=b;this._set_cookie(this.cookies.persist.name,Object.toJSON(h),this.cookies.persist.expires);this._track("impression/"+f.d+"/return/"+c+"/"+b+k);a=true}else{c=g.bkt}if(!g.session){g.session=0}this._set_cookie(this.cookies.session.name,Object.toJSON({bkt:c,session:(g.session+1)}),this.cookies.session.expires);this._track("view/"+f.d+"/return/"+c+k);if(a){this.track_referrer()}};this.track_initial=function(){var b=(this._get_cookie(this.cookies.session.name)||"{}").evalJSON(),a=(this._get_cookie(this.cookies.persist.name)||"{}").evalJSON(),c="";if(!a.d){return this.cancel_track()}if(a.h){c="/"+a.h}if(!b.initial){b.initial=0}this._set_cookie(this.cookies.session.name,Object.toJSON({initial:(b.initial+1)}),this.cookies.session.expires);this._track("view/"+a.d+"/initial"+c)};this.start_initial=function(){var f=new Date(),a=location.href.replace(/^(http|https)(\:\/\/)(.*\@.*\:)?([A-Z0-9\-\.]+\.[A-Z]+)([0-9\:]+)?(\/.*)$/i,"$6"),c="",b={};b={d:this.referrer,t:Math.floor(f.getTime()/1000)};if(this._has_hashtrack()){b.h=this._get_hashtrack();c="/"+b.h}this._set_cookie(this.cookies.persist.name,Object.toJSON(b),this.cookies.persist.expires);this._track("impression/"+this.referrer+"/initial"+c);this.track_initial()};this.cancel_track=function(){this._set_cookie(this.cookies.session.name,this.cookies_cancel,-1000);this._set_cookie(this.cookies.persist.name,this.cookies_cancel,this.cookies.persist.expires);return false};this._track=function(b,a){return};this._has_hashtrack=function(){return(window.location.href.indexOf("#H")!=-1)};this._get_hashtrack=function(){return(this._has_hashtrack()?window.location.href.replace(/^(.*\#)(H[A-Z0-9]+)(.*)?$/,"$2"):"")};this._is_trackable=function(){return(this.referrer&&this.referrer!=""&&!(/buzzfeed\.com$/i).exec(this.referrer))};this._is_returning=function(){return(this._has_cookie(this.cookies.persist.name)&&(!this._has_cookie(this.cookies.session.name)||this._has_cookie(this.cookies.session.name,"session")))};this._is_initial=function(){return(this._has_cookie(this.cookies.persist.name)&&this._has_cookie(this.cookies.session.name,"initial"))};this._is_candidate=function(){return(this._is_trackable()&&!this._has_any_cookies())};this._get_cookie=function(b){if(typeof(this._cookies[b])!="undefined"&&this._cookies[b]!=""){return this._cookies[b]}else{if(this._has_cookie(b)){var a=document.cookie.match("(^|;) ?"+b+"=([^;]*)(;|$)");return unescape(a[2])}else{return false}}};this._has_cookie=function(c,a){var b=document.cookie.match("(^|;) ?"+c+"=([^;]*)(;|$)");if(a&&typeof(a)=="string"){a=RegExp(RegExp.escape(a))}return(b?(a&&a!=""?unescape(b[2]).match(a):(b[2]!=this.cookies_cancel)):false)};this._has_any_cookies=function(){return(document.cookie&&document.cookie.match(/[\w\d]+/mg))};this._set_cookie=function(m,b,g,f){var c=31536000000,a="",l="";if(g||g==0){c=parseInt(g)}if(c&&c!=0){var k=new Date();k.setTime(k.getTime()+c);a="; expires="+k.toGMTString()}l=escape(m)+"="+escape(b)+a+"; path=/; domain=."+(f?escape(f):"buzzfeed.com");document.cookie=l;this._cookies[m]=b};this._determine_time_bucket=function(f){var b=this.returns.default_bucket,a=0,g=new Date();a=Math.floor((Math.floor(g.getTime()/1000)-f)/60);for(var c in this.returns.buckets){if(a<=this.returns.buckets[c]){b=c;break}}return b};this._parse_referrer=function(){var a=document.referrer.toLowerCase();a=a.replace(/^(http|https)(\:\/\/)(.*\@.*\:)?([A-Z0-9\-\.]+\.[A-Z]+)(.*)$/i,"$4");a=a.replace(/^www\./i,"");if(!this.track_subdomains){a=a.replace(/^(.*\.)?([A-Z0-9\-\.]+\.[A-Z]+)$/i,"$2")}return a}}try{var return_tracker=new Referrer();return_tracker.track()}catch(e){}POLLER_CALLBACK_LOOKUP=new Object();function poller_call_back(b,a){var c=POLLER_CALLBACK_LOOKUP[b];var f=c.callback;if(!c||!c.callback){console.error("no poller callback function defined with key: %s",b);return}else{c.poller.stop_polling();c.callback(a)}}function set_poller_trigger(){var f=5000;var c=new Date();c.setTime(c.getTime()+f);var b="";b="; expires="+c.toGMTString();var a="BUZZ_POLLER_COOKIE=true"+b+"; domain=.buzzfeed.com; path=/static/js/poller";document.cookie=a}cookie_poller=function(){this.active=false;this.count=0;this.start=function(a){this.active=true;this.count=0;cookie_poller_active=true;if(!a||!a.callback_string||!a.poll_url||!a.pollid){this.usage();return}this.callback_string=a.callback_string;this.callback_arguments=a.arguments;this.poll_url=a.poll_url;this.pollid=a.pollid;this.poll()};this.add_poller_callback=function(a,c,b){POLLER_CALLBACK_LOOKUP[a]={callback:c,poller:this}};this.poll=function(h){this.count++;if((this.count*500)>(1000*10*60)){this.active=false}if(this.active==true){var g=this.poll_url;g+="?version="+(new Date()).getTime();g+="&callback="+escape(this.callback_string);g+="&pollid="+this.pollid;if(this.callback_arguments){var f=escape(Object.toJSON(this.callback_arguments));g+="&args="+f}var c=document.createElement("script");c.src=g;var a=document.getElementsByTagName("body")[0];if(a){a.appendChild(c)}var b=function(){this.poll()}.bind(this);setTimeout(b,500)}};this.stop_polling=function(){this.active=false;this.count=0};this.usage=function(){var a="usage: cookie_poller.poll( {callback_string: 'afunction', poll_url: 'http://example/js/poll.js, pollid: 'a_unique_id', [ arguemnts: {} ] } )";console.error(a);console.error("cookie_poller.poll() needs a callback_string, a XSS poller url, a unique id and an optional arguments hash")}};var TT_Filters={round:function(a){return Math.round(a)},floor:function(a){return Math.floor(a)},ceil:function(a){return Math.ceil(a)},add_commas:function(a){a+="";a=a.replace(/(\d)(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})$/,"$1,$2,$3,$4,$5,$6,$7");a=a.replace(/,{2,}/,",");return a},upper:function(a){return a.toUpperCase()},lower:function(a){return a.toLowerCase()},ucfirst:function(a){return a.toString().substring(0,1).toUpperCase()+a.substring(1,a.length)},lcfirst:function(a){return a.toString().substring(0,1).toLowerCase()+a.substring(1,a.length)},titleCase:function(f){if(!f||f==""){return""}var b=f;var c=b.split(" ");var a=new Array("and","the","to","for","is","in","a","at","an","from","by","if","of");for(i=0;i<c.length;i++){if(i==0){c[i]=(c[i].substring(0,1)).toUpperCase()+c[i].substring(1)}else{if(a.indexOf(c[i])<0){c[i]=(c[i].substring(0,1)).toUpperCase()+c[i].substring(1)}}}retval=c.join(" ");return retval},quoteCase:function(b){if(!b||b==""){return""}var a=b.toLowerCase();a=a.replace(/^("*)/,"");a=a.replace(/("*)$/,"");return'"'+this.ucfirst(a)+'"'},trim:function(a){return a.toString().replace(/^\s+/,"").replace(/\s+$/,"")},collapse:function(a){return a.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")},html:function(a){if(a){return a.toString().replace(/&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;")}},boost_preview:function(c){if(c){c=c.toString().replace(/&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;");ents=new Array("b","strong","i","em");for(i=0;i<ents.length;i++){var b=new RegExp("&lt;"+ents[i]+"&gt;","gi");var a=new RegExp("&lt;/"+ents[i]+"&gt;","gi");c=c.replace(b,"<"+ents[i]+">");c=c.replace(a,"</"+ents[i]+">")}c=c.replace(/&lt;a href="http:\/\/(.*?)"&gt;/gi,'<a href="http://$1">');c=c.replace(/&lt;\/a&gt;/ig,"</a>");return c}},link:function(a){if(a){return a.toString().replace(/&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/"/g,"").replace(/\s/g,"%20")}},js:function(a){if(a){return a.toString().replace(/'/g,"").replace(/\n|\r/g,"")}},html_entity:function(a){return"HTML_ENTITY: not implemented.  see http://www.w3.org/TR/REC-html40/sgml/entities.html"},html_para:function(a){return a.toString().replace(/\n+/g,"<p>")},html_break:function(a){return a.toString().replace(/\n+/g,"<br><br>")},html_line_break:function(a){return a.toString().replace(/\n/g,"<br>")},uri:function(a){return escape(a)},unescape_uri:function(a){a=a.replace(/\+/g," ");return unescape(a)},indent:function(g,f){if(!f){f="    "}var a=g.split(/\n/);var b="";for(var c=0;c<a.length;c++){a[c]=a[c].toString().replace(/^/g,f)}return a.join("\n")},truncate:function(b,a){if(b){if(!a){a=32}if(b.length<=a){return b}return b.toString().substring(0,a-3)+"..."}},repeat:function(f,c){if(!c){c=1}var a=f;for(var b=c-1;b>0;b--){a+=f}return a},remove:function(c,a){if(!a){return c}var b=new RegExp(a,"g");return c.toString().replace(b,"")},replace:function(f,a,b){if(f){if(!a){return f}if(!b){b=""}var c=new RegExp(a,"g");f=f.toString().replace(c,b)}return f},strftime:function(g,a){var b=new Date();var f=g;if(g<10000000000){f=g+"000"}b.setTime(f);for(var c in TT_strftime_funks){if(c.length==1){a=a.replace("%"+c,TT_strftime_funks[c](b))}}return a},alert:function(a){alert(a);return""},clean_entities:function(a){if(a){return TT_cleanEntities(a)}},html_noentities:function(a){if(a){return a.toString().replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/"/g,"&quot;")}},html_entities:function(a){return TT_cleanEntities(a).toString().replace(/\</g,"&lt;").replace(/\>/g,"&gt;")}};TT_strftime_funks={zeropad:function(a){return a>9?a:"0"+a},a:function(a){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][a.getDay()]},A:function(a){return["Sunday","Monday","Tuedsay","Wednesday","Thursday","Friday","Saturday"][a.getDay()]},b:function(a){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()]},B:function(a){return["January","February","March","April","May","June","July","August","September","October","November","December"][a.getMonth()]},c:function(a){return a.toString()},d:function(a){return this.zeropad(a.getDate())},H:function(a){return this.zeropad(a.getHours())},I:function(a){return(a.getHours()==12||a.getHours()==0)?12:this.zeropad((a.getHours()+12)%12)},i:function(a){return(a.getHours()==12||a.getHours()==0)?12:(a.getHours()+12)%12},m:function(a){return this.zeropad(a.getMonth()+1)},M:function(a){return this.zeropad(a.getMinutes())},p:function(a){return this.H(a)<12?"am":"pm"},S:function(a){return this.zeropad(a.getSeconds())},w:function(a){return a.getDay()},y:function(a){return this.zeropad(this.Y(a)%100)},Y:function(a){return a.getFullYear()},"%":function(a){return"%"}};function TT_cleanEntities(f){var c={160:"nbsp",161:"iexcl",164:"curren",162:"cent",163:"pound",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",8482:"trade",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",215:"times",247:"divide",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8230:"hellip",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"};var b=f.split("");var g="";for(i=0;i<b.length;i++){var a=b[i].charCodeAt(0);if(c[a]){g+="&"+c[a]+";"}else{if(a>127){g+="&#"+a+";"}else{g+=b[i]}}}return g}var effect_callbacks={};var BF_Effect={OpenMenu:function(c,f,b){if(!b){b={}}b.top=(objExists(b.top)?b.top:0);b.left=(objExists(b.left)?b.left:0);var g=$(c);var a=g.positionedOffset();var c={el:g,offSetTop:Number(a[1])+Number(g.getHeight()),offSetLeft:Number(a[0])};$(c.el).insert(f);$(f).setStyle({top:c.offSetTop+b.top+"px",left:c.offSetLeft+b.left+"px",position:"absolute"}).show()},EffectCallbacks:function(a){EventManager.fire("BF_Effect:"+a,{});if(objExists(effect_callbacks[a])){effect_callbacks[a].each(function(b){b()})}},EffectCallbacksAdd:function(a,b){effect_callbacks[a]=[];effect_callbacks[a].push(b)},MarqueeOn:function(c,b){if(!c){return}if(!b){b=250}if(!$(c).hasClassName("marquee")){$(c).addClassName("marquee");$(c).setAttribute("rel:mtext",$(c).innerHTML.replace("&nbsp;"," ").toString());$(c).setAttribute("rel:mstatus","on");$(c).setAttribute("rel:mpos",0)}if($(c).hasClassName("marquee")&&$(c).getAttribute("rel:mstatus")=="on"){var f=Number($(c).getAttribute("rel:mpos"));var a=$(c).getAttribute("rel:mtext").toString();$(c).innerHTML=a.substr(a.length-f,a.length);$(c).setAttribute("rel:mpos",f+1)}setTimeout(function(){BF_Effect.MarqueeOn(c,b)},b)},ScrollIntoView:function(k,g){if(!$(k)||$(k).viewportOffset().top==0||(window.BF_STATIC&&BF_STATIC.bf_test_mode)){return}var c=false;Event.observe(window,"mousewheel",a);if(typeof(g)=="undefined"){g=0.5}var b=document.viewport.getHeight();var f=$(k).getHeight();var n=document.viewport.getScrollOffsets().top+$(k).viewportOffset().top;var l=Math.ceil($(k).viewportOffset().top/g/100);if($(k).viewportOffset().top>0){if(b>=f){var m=(b-f)/2;n-=m;l=Math.ceil(($(k).viewportOffset().top-m)/g/100)}}function a(){c=true}function h(q,p){if(c){Event.stopObserving(window,"mousewheel",a);return}var o=document.viewport.getScrollOffsets().top;if(Math.abs(q-o)<Math.abs(p)){p=q-o}window.scrollTo(0,(o+p));if(o==document.viewport.getScrollOffsets().top){Event.stopObserving(window,"mousewheel",a);return}if((o+p)!=q){setTimeout(function(){h(q,p)},1)}else{Event.stopObserving(window,"mousewheel",a);return}}h(n,l)},FadeOut:function(b,a,c,f){if(f){BF_Effect.EffectCallbacksAdd("FadeOut",f)}if(!c){c=50}if(!a){$(b).setOpacity(1).show();a=100-2;setTimeout(function(){BF_Effect.FadeOut(b,a,c)},c)}else{a=a-10;if(a>0){$(b).setOpacity(a/100);setTimeout(function(){BF_Effect.FadeOut(b,a,c)},c)}else{$(b).hide();BF_Effect.EffectCallbacks("FadeOut")}}},FadeIn:function(b,a,c,g){try{if(g){BF_Effect.EffectCallbacksAdd("FadeIn",g)}if(!c){c=5}if(!a){$(b).setOpacity(0.01);$(b).show();a=1;setTimeout(function(){BF_Effect.FadeIn(b,a,c)},c)}else{a=a+10;if(a<100){$(b).setOpacity(a/100);setTimeout(function(){BF_Effect.FadeIn(b,a,c)},c)}else{$(b).setOpacity(1);BF_Effect.EffectCallbacks("FadeIn")}}}catch(f){console.error(f)}},SlideDown:function(a,b){try{if(!$(a)){return}if(!b){b=20}if(isIE7()||isIE8()||(window.BF_STATIC&&BF_STATIC.bf_test_mode)){$(a).setStyle({height:"auto"}).show();return}if(!$(a).hasClassName("SlideDown")){$(a).addClassName("SlideDown");$(a).setStyle({height:"auto",overflow:"hidden"});$(a).setAttribute("rel:SlideGoal",$(a).getHeight());$(a).setAttribute("rel:Step",Math.max(1,Math.round($(a).getHeight()/20)));$(a).setStyle({height:"0px"});$(a).show()}else{if($(a).getHeight()>=(parseInt($(a).getAttribute("rel:SlideGoal")))){$(a).setStyle({height:"auto",overflow:"visible"});$(a).removeClassName("SlideDown");return}}$(a).setStyle({height:(Number($(a).getHeight())+Number($(a).getAttribute("rel:Step")))+"px"});setTimeout(function(){BF_Effect.SlideDown(a,b)},b)}catch(c){console.error(c)}},SlideUp:function(a,b){try{if(!$(a)){return}if(!b){b=20}if(isIE7()||isIE8()||(window.BF_STATIC&&BF_STATIC.bf_test_mode)){$(a).hide();return}if(!$(a).hasClassName("SlideUp")){$(a).addClassName("SlideUp");$(a).setAttribute("rel:Step",Math.max(1,Math.round($(a).getHeight()/20)));$(a).setStyle({overflow:"hidden"});$(a).show()}else{if($(a).cleanHeight()<=(Number($(a).getAttribute("rel:Step"))*2)){$(a).removeClassName("SlideUp");$(a).hide();return}}$(a).setStyle({height:(Number($(a).cleanHeight())-Number($(a).getAttribute("rel:Step")))+"px"});setTimeout(function(){BF_Effect.SlideUp(a,b)},b)}catch(c){console.error(c)}}};Object.extend(Element.Methods,{showOnScreen:function(a,b){a.show();BF_Effect.ScrollIntoView(a,b)}});Object.extend(Element.Methods,{BFOnAttributeChange:function(b,c,a){if(typeof b.observers=="undefined"){b.observers={}}if(typeof b.observers[c]=="undefined"){b.observers[c]=[]}b.observers[c].push(a)}});Object.extend(Element.Methods,{BFSetAttribute:function(b,c,f){var a=b.getAttribute(c);b.setAttribute(c,f);if(typeof b.observers!="undefined"&&typeof b.observers[c]!="undefined"){b.observers[c].each(function(g){g({element:b,old_value:a,new_value:f})})}}});Element.addMethods();var BF_PrototypeExtend={getTextDescendants:function(c,b){var a=[];function f(g){var h=g.firstChild;while(h){if(Node.TEXT_NODE==h.nodeType){if(!b||(!!b&&!h.nodeValue.match(/^([\s\n\t\r]+)$/))){a.push(h)}}if(Object.isElement(h)&&["script","style","iframe","embed","object","head"].indexOf(h.tagName.toLowerCase())==-1){f(h)}h=h.nextSibling}}f(c);return a}};Element.addMethods(BF_PrototypeExtend);try{var bf_ee=bf_ee||{};bf_ee.keys=[],bf_ee.code="38,38,40,40,37,39,37,39,66,65";document.observe("keydown",function(g){try{bf_ee.keys.push(g.keyCode);if(bf_ee.keys.toString().indexOf(bf_ee.code)>=0){bf_ee.keys=[];var c=0,f=["thumb.jpg","thumb1.jpg","thumb2.jpg","thumb3.jpg","thumb4.jpg","thumb5.jpg","thumb6.jpg","thumb7.jpg"],a=["bigstory.jpg","bigstory1.jpg","bigstory2.jpg","bigstory3.jpg","bigstory4.jpg","bigstory5.jpg"];$$(".thumb img, img.bf-image, img.thumb, .thumb-unit img, .thumbbb img, .sub_buzz_content img").each(function(b){b.src=BF_STATIC.static_root+"/images/public/slothsgiving/"+f[c%f.length];c++});$$(".pinned-image, .bf-image-bigstory").each(function(b){b.src=BF_STATIC.static_root+"/images/public/slothsgiving/"+a[c%a.length];c++});$("splash-image")&&($("splash-image").src=BF_STATIC.static_root+"/images/public/slothsgiving/splash.jpg");$$("body").first().setStyle({"background-color":"#6235ac"});$$(".page_header").each(function(b){b.setStyle({"border-bottom-color":"#6235ac"})});bf_ee.words=$$("body").first().getTextDescendants(true);if(bf_ee.words.length>0){bf_ee.words.each(function(m){var k=0,h="",b=0,n=m.nodeValue.length;while(n>b){h+="sloths ";b=h.length;k++}h=h.substr(0,n);m.nodeValue=h})}}}catch(g){}})}catch(e){}var BF_UI={init:function(){universal_dom.assign_handler({bucket:"toggle_bf_dropdown",event:"click",handler:BF_UI.openDropdownEventHandler});universal_dom.assign_handler({bucket:"bf_radio",event:"click",handler:function(c){var a=c.target.up(".bf_radio");if(!a){return}var b=a.getAttribute("data-checked")*1?0:1;a.setAttribute("data-checked",b);if(b){a.down(".bf_radio_left",0).addClassName("active");a.down(".bf_radio_right",0).removeClassName("active")}else{a.down(".bf_radio_left",0).removeClassName("active");a.down(".bf_radio_right",0).addClassName("active")}EventManager.fire("bf_ui:radio_toggle",{target:a,checked:b,field:a.getAttribute("data-field")},true)}});universal_dom.assign_handler({bucket:"animatedgifs",event:"click",handler:function(){var p=arguments[0].target;var o=0;var l,c,b,q;if($(p).up(".sub_buzz_content")){var m=$(p).up(".sub_buzz_content").down("img");if(m.getAttribute("rel:fake_photorow")){o=1;l=parseInt(m.getStyle("left"))*-1;c=parseInt(m.getStyle("top"))*-1;b=parseInt(m.getStyle("width"));q=parseInt(m.getStyle("height"))}}else{if($(p).up(".grid_cell_image_wrapper")){var m=$(p).up(".grid_cell_image_wrapper").down("img");o=1;l=parseInt(m.getStyle("left"))*-1;c=parseInt(m.getStyle("top"))*-1;b=parseInt(m.up().getStyle("width"));q=parseInt(m.up().getStyle("height"))}else{return false}}if(m){var k=m.getAttribute("src");var g=k.substr(0,k.indexOf("static")-1);var h=m.getAttribute("rel:bf_image_src");var a=m.getAttribute("width");var n=m.getAttribute("height");var f=m.getAttribute("rel:version");$(p).hide();m.insert({after:"<iframe src='"+g+"/static/js/public/rubbable/loader.html?v="+f+"&gif="+h+"&width="+a+"&height="+n+(o?"&vp_l="+l+"&vp_t="+c+"&vp_w="+b+"&vp_h="+q+"&c_w="+a+"&c_h="+n:"&vp_w="+a+"&vp_h="+n+"&vp_l=0&vp_t=0")+"' width='"+a+"' height='"+n+"' border='0' frameborder='0' scrolling='no'"+(o?" style='left: "+(l*-1)+"px; top: "+(c*-1)+"px; position: relative;'":"")+"></iframe>"});m.addClassName("hidden")}}})},closeDialog:function(k,c){if(!c){c={}}var f=$(k);f.hide();if(typeof picks_controller!="undefined"){picks_controller.stop_spinner()}if(typeof user_post!="undefined"&&user_post.show_video_preview){$("video-form-preview").show()}var a=$(k).getElementsByTagName("IFRAME")[0];var b=a;if(a){a=(a.contentWindow)?a.contentWindow:(a.contentDocument.document)?a.contentDocument.document:a.contentDocument}try{if(c.loadDefaultDiv){if(a&&a.document){if(a.document.getElementById(c.loadDefaultDiv)){a.document.getElementById(c.loadDefaultDiv).style.display="block"}}}else{if($("user_post_preview_iframe")){var h=$("user_post_preview_iframe").contentWindow.document.getElementById("preview_div");if(typeof h!="undefined"&&h!=null){h.innerHTML='<img src="'+BF_STATIC.image_root+'/static/images/public/spinners/loading.gif" alt="spinner">'}}else{if(b){b.src=BF_STATIC.image_root+"/static/images/public/spinners/loading.gif"}}}if(a&&typeof a.minimizeEventHandler=="function"){a.minimizeEventHandler()}}catch(g){console.error(g)}if(c.onComplete){c.onComplete()}if(c.id=="user-image-edit"){BF_UI.closeDialog("super-image-edit")}f.fire("bf_ui:closeDialog")},create_or_show_dialog:function(f){var k=35;if(!f.width){f.width=800}if(!f.height){f.height=465}if(!f.scrolling){f.scrolling="no"}if(!$(f.id)){if(!f.title){f.title="Dialog"}if(!f.url.match(/^https?:\/\//)){f.url=f.url}f.m_height=f.height+k;var l=new Template(' 				<div class="bf_overlay_mask"></div> 				<div class="bf_dialog" style="width: #{width}px; height: #{m_height}px !important;"> 					<div class="bf_dialog_header"><span class="title">#{title}</span> <a href="javascript:;" onclick="BF_UI.closeDialog(\'#{id}\',{loadDefaultDiv:\'#{url}\'});return false;" class="close">&times;</a></div> 					<div class="bf_dialog_content" style="width: #{width}px; height: #{height}px !important;"> 						<iframe id="#{id}_iframe" src="#{url}" name="#{id}_iframe" frameborder="0" scrolling="#{scrolling}" allowTransparency="true" style="width: 100%; height: 100% !important"></iframe> 					</div> 				</div> 			');var g=l.evaluate(f);var a=document.createElement("div");a.id=f.id;a.style.display="none";a.className="bf_canvas";a.innerHTML=g;document.getElementsByTagName("BODY")[0].appendChild(a)}else{var b=$$("#"+f.id+" .bf_dialog").first(),m=$$("#"+f.id+" .bf_dialog_content").first();if(b){b.setStyle({height:(f.height+k)+"px !important",width:f.width+"px"})}if(m){m.setStyle({height:f.height+"px !important",width:f.width+"px"})}}var c=$(f.id+"_iframe");if(c&&!escape(c.src).match(new RegExp(escape(f.url)))){c.up(0).update('<iframe id="'+f.id+'_iframe" src="'+f.url+'" name="'+f.id+'_iframe" frameborder="0" scrolling="'+f.scrolling+'" allowTransparency="true" style="width: 100%; height: 100% !important"></iframe>')}BF_UI.showDialog(f.id,f.title);if(f.onload){try{c.observe("load",function(){f.onload.each(function(n){n()})})}catch(h){}}},showDialog:function(g,f,c){try{if(typeof user_post!="undefined"&&$("video-form-preview")&&$("video-form-preview").visible()){$("video-form-preview").hide();user_post.show_video_preview=true}else{if(typeof user_post!="undefined"){user_post.show_video_preview=false}}}catch(b){user_post.show_video_preview=false}var a=$(g);if(!a&&typeof Jemplate!="undefined"){bfjemplate.load({template_id:g,callback:function(h){if(h){$("page_container").insert({after:h});BF_UI.doShowDialog(g,f,c,$(g))}else{}}})}else{if(a){BF_UI.doShowDialog(g,f,c,a)}}},doShowDialog:function(h,g,c,b){b.show();if(typeof c!="undefined"&&c&&$(c)){$(c).insert({top:b})}var f=b.select(".title");if(f&&f.length>0&&g){f.first().update(g)}var a=b.select(".bf_dialog").first();if(a){a.style.top=Math.floor(Math.max(document.viewport.getScrollOffsets().top,document.viewport.getScrollOffsets().top+(document.viewport.getHeight()/2)-($(a).getHeight()/2)))+"px"}},showBarChart:function(w){var n=w.getAttribute("rel:chart_data");var b=n.evalJSON?n.evalJSON():jQuery.parseJSON(n);var c=0,h=0;if(window.Prototype){$H(b).each(function(A){if(A.key.match(/baseline/)){c++}else{if(A.key.match(/column_.*\.0/)){h++}}})}else{jQuery.each(b,function(A){if(A.match(/baseline/)){c++}else{if(A.match(/column_.*\.0/)){h++}}})}if(c>h-1){var z=function(B){if(!window.Prototype){B.key=B}var D=B.key.split(".")[0];var A=B.key.split(".")[1];if(D=="baseline"){if(typeof b[D+"."+(parseInt(A)+1)]!="undefined"){b[B.key]=b[D+"."+(parseInt(A)+1)]}else{delete b[B.key]}}};if(window.Prototype){$H(b).each(z)}else{jQuery.each(b,z)}}var l=[];var m;var r;var o=[];var a=[];var k=[];var q;var p;var f=0;var v=[];for(item in b){if(item.split("_")[0]=="column"){var g=item.split(".")[1];v.push(g)}switch(item.split(".")[0]){case"x_axis":m=b[item];o[f]=b[item];f++;break;case"y_axis":r=b[item];break;case"baseline":o[f]=b[item];f++;break;case"barchart_color":k.push(b[item]);break}}if(window.Prototype){v=v.uniq()}else{v=jQuery.unique(v)}t();function t(){for(var E=0;E<v.length;E++){for(item in b){if(item.split("_")[0]=="column"){var D=item.split(".")[0];var B=item.split(".")[1];if(D=="column_one"){if(E==B){a[E]=[String(b[D+"."+E])]}}else{if(D=="column_two"||D=="column_three"||D=="column_four"||D=="column_five"||D=="column_six"){if(E==B){a[E].push(parseInt(b[D+"."+E]))}}}}}}a.splice(0,0,o);var G=google.visualization.arrayToDataTable(a);var A={hAxis:{title:m},vAxis:{title:r},colors:k,chartArea:{width:"75%",height:"75%"},legend:{position:"top"}};var F=new google.visualization.ColumnChart(w);F.draw(G,A)}},showPieChart:function(k){var c=[];var b=[];var a=k.getAttribute("rel:chart_data");var g=a.evalJSON?a.evalJSON():jQuery.parseJSON(a);for(item in g){if(item.match("chart_caption")){if(!c[item.split(".")[1]]){c[item.split(".")[1]]=[]}c[item.split(".")[1]][0]=g[item]}else{if(item.match("chart_value")){if(!c[item.split(".")[1]]){c[item.split(".")[1]]=[]}c[item.split(".")[1]][1]=parseInt(g[item])}else{if(item.match("chart_color")){b[item.split(".")[1]]=g[item]}}}}c.splice(0,0,["title","value"]);var h=google.visualization.arrayToDataTable(c);var f={colors:b,chartArea:{width:"85%",height:"65%"},legend:{position:"top"}};var g=new google.visualization.PieChart(k);g.draw(h,f)},json2vennchart:function(h){var b=[],l=[],f=[];var a=function(o){var n={};if(!window.Prototype){n.key=o;n.value=h[o]}else{n=o}var p=n.key.split(".")[0];var m=n.key.split(".")[1];if(typeof b[m]=="undefined"&&p!="vennchart_intersection"){b[m]={}}if(p=="vennchart_color"){b[m]["color"]=n.value}else{if(p=="vennchart_title"){b[m]["title"]=n.value}else{if(p=="vennchart_value"){b[m]["value"]=n.value}else{if(p=="vennchart_intersection"){l[m]=n.value}else{if(p=="vennchart_metadata"){f=n.value.evalJSON?n.value.evalJSON():jQuery.parseJSON(n.value)}}}}}};if(window.Prototype){$H(h).each(a)}else{jQuery.each(h,a)}var k=0;for(var g=0;g<b.length-1;g++){b[g]["intersections"]=[];for(var c=0;c<b.length-1-g;c++){b[g]["intersections"].push(l[k]);k++}}return{areas:b,conf:f}},showVennChart:function(m,k){k=k||false;var f=m.getAttribute("rel:chart_data");var n=f.evalJSON?f.evalJSON():jQuery.parseJSON(f);var h=BF_UI.json2vennchart(n);areas=h.areas;var o=[],l=[],b=[];for(var g=0;g<areas.length;g++){o[g]=areas[g].value||0;l[g]=areas[g].title;b[g]=areas[g].color}size=m.getDimensions?m.getDimensions():window.jQuery?{width:$(m).width(),height:$(m).height()}:{width:0,height:0};if(!k){var a=Raphael(m);venn=a.vennchart(0,0,size.width||559,size.height||345,{values:o},{colors:b,titles:l,conf:h.conf,positionrecalc:true,fallback:k});if(window.jQuery!="undefined"){$(a.canvas).mousemove(venn.mousemove)}else{$(a.canvas).onmousemove=venn.mousemove}}else{var c=document.createElement("canvas");c.width=size.width||300;c.height=size.height||250;$(m).append(c);Raphael.fn.vennchart(0,0,c.width,c.height,{values:o},{colors:b,titles:l,conf:h.conf,positionrecalc:true,fallback:k,fallbackelem:c})}},renderEntities:function(b){var f="BF_RENDER_ENTITIES_DIV_73625";var a=$(f);if(!a){var c=document.getElementsByTagName("body")[0];a=document.createElement("DIV");a.setAttribute("id",f);a.id=f;a.style.display="none";c.appendChild(a)}a.innerHTML=b;b=a.innerHTML;b=b.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");return b},initialize_simple_color_picker:function(b){var f=$(b.field);if(!f){return}var a=function(n){f.BFSetAttribute("value",n);f.setValue(n);if(b.callback){b.callback.call(this,{target:f,stop:function(){}})}};f.disabled=true;f.addClassName("hidden");var m=function(p){var o=$(p.target.parentNode.current);var n=$(p.target.parentNode.select);if(p.forceOff){BF_Effect.SlideUp(n,1);o.removeClassName("hidden");n.addClassName("hidden")}else{if(n.hasClassName("hidden")){n.removeClassName("hidden");BF_Effect.SlideDown(n,1)}else{n.addClassName("hidden")}}};f.BFOnAttributeChange("value",function(o){if(!o.new_value){return}var n=BF_UI.backgroundColorToFontColor(o.new_value);o.element.setStyle({backgroundColor:o.new_value,color:n});m({forceOff:true,target:{parentNode:o.element.picker}});o.element.picker.current.setStyle({backgroundColor:o.new_value,color:n});o.element.picker.current.update(o.new_value)});var c=document.createElement("div");c.addClassName("simple_color_picker");var h=document.createElement("div");h.addClassName("holder");var l=document.createElement("div");l.addClassName("select");l.setAttribute("style","float:left;");l.addClassName("hidden");var g=document.createElement("div");g.addClassName("current");g.addClassName("preview");g.appendChild(document.createTextNode("None"));g.observe("click",m);h.appendChild(g);h.appendChild(l);c.appendChild(h);b.colors.each(function(p){if(!p.match("^#")&&!p.match("Transparent")){p="#"+p}var o=BF_UI.backgroundColorToFontColor(p);var n=document.createElement("div");n.addClassName("preview");n.setStyle({backgroundColor:p,color:o});n.appendChild(document.createTextNode(p));n.observe("click",function(){a(p)});l.appendChild(n)});if(b.allow_custom){var k=document.createElement("input");k.addClassName("preview");k.addClassName("input");k.setAttribute("placeholder","Custom");k.observe("blur",function(o){var n=o.target.value;if(n.match("^([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})")){n="#"+n}if(n.match("^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$")){a(n.toUpperCase());o.target.value=n}else{if(n=="Transparent"){a(n.toUpperCase());o.target.value=n}else{k.value=""}}});l.appendChild(k)}h.current=g;h.select=l;f.picker=h;$(f.parentNode).appendChild(c);if(objExists(b.default_color)){defColor=b.default_color;if(!defColor.match("^#")&&!defColor.match("Transparent")){defColor="#"+defColor}f.BFSetAttribute("value",defColor)}return c},backgroundColorToFontColor:function(k){if(!k.match("^#")){k="#"+k}if(k.length==4){k=k.substring(0,4)+k.substring(1,4)}if(k.length!=7){return}var h=parseInt((c(k)).substring(0,2),16);var f=parseInt((c(k)).substring(2,4),16);var a=parseInt((c(k)).substring(4,6),16);function c(b){return(b.charAt(0)=="#")?b.substring(1,7):b}if((h+f+a)>400){return"black"}else{return"white"}},closeDropdowns:function(){$$(".bf_dropdown.open").each(function(a){a.removeClassName("open")});$$("body")[0].stopObserving("click",BF_UI.dropdownClickHandler);EventManager.fire("bf_ui:close_dropdowns")},dropdownClickHandler:function(a){var b=a.findElement(".bf_dropdown");if(!b){BF_UI.closeDropdowns()}},openDropdownEventHandler:function(b){b.stop();BF_UI.closeDropdowns();var f=(b.dropdown_id)?$(b.dropdown_id):b.findElement(".bf_dropdown");if(f.hasClassName("open")){return BF_UI.closeDropdowns()}f.addClassName("open");var c=$(f).down(".bf_dropdown_menu");var a={top:0,left:0};if($(f).hasClassName("bf_unpositioned_dropdown")){c.show()}else{BF_Effect.OpenMenu(f,c,a)}$$("body")[0].observe("click",BF_UI.dropdownClickHandler);EventManager.fire("bf_ui:open_dropdowns",{},f);if(typeof gtrack!="undefined"&&$(b.element)){BF_UI.trackUploadDropdown($(b.element))}},trackUploadDropdown:function(a){if(a.descendantOf($s(".thumbnail-chooser"))){gtrack.track_events("[ttp]:thumbnail-edit","thumbnail-dropdown")}if(a.descendantOf($("suplist_module_photo_row_launcher"))){gtrack.track_events("[ttp]:edit-item","multi-image-upload")}if(a.descendantOf($("suplist_module_photo_area"))){gtrack.track_events("[ttp]:edit-item","drop-down")}}};if(typeof window.BuzzLoader!="undefined"){BuzzLoader.register(BF_UI.init,5)}var BFJS=function(){this.selector=(typeof window.jQuery!="undefined")?"find":"select";this.observer=(typeof window.jQuery!="undefined")?"on":"observe";this.read_attr=(typeof window.jQuery!="undefined")?"attr":"getAttribute";this.write_attr=(typeof window.jQuery!="undefined")?"attr":"setAttribute";this.stop_observing=(typeof window.jQuery!="undefined")?"unbind":"stopObserving";this.remove_class=(typeof window.jQuery!="undefined")?"removeClass":"removeClassName";this.add_class=(typeof window.jQuery!="undefined")?"addClass":"addClassName";this.has_class=(typeof window.jQuery!="undefined")?"hasClass":"hasClassName";this.update_html=(typeof window.jQuery!="undefined")?"html":"update";this.get_height=(typeof window.jQuery!="undefined")?"height":"getHeight";this.get_width=(typeof window.jQuery!="undefined")?"width":"getWidth";this.up=(typeof window.jQuery!="undefined")?"parents":"up";this.gtrack_cat=(typeof window.jQuery!="undefined")?"data-category":"rel:gt_cat";this.gtrack_act=(typeof window.jQuery!="undefined")?"data-action":"rel:gt_act";this.gtrack_label=(typeof window.jQuery!="undefined")?"data-label":"rel:gt_label";this.datetime=(typeof window.jQuery!="undefined")?"data-datetime":"rel:datetime";this.dateformat=(typeof window.jQuery!="undefined")?"data-dateformat":"rel:date_format";this.prefix=(typeof window.jQuery!="undefined")?"data-prefix":"rel:prefix";this.trim=(typeof window.jQuery!="undefined")?"trim":"strip";this.map=function(b,c){if(typeof window.jQuery!="undefined"){return jQuery.map(b,c)}else{return $A(b).map(c)}};this.read_cookie=function(b){if(bfjs.isMobile()){return readCookie(b)}else{return BFW_Util.getCookie(b)}};this.write_cookie=function(b,c,g){if(bfjs.isMobile()){createCookie(b,c,g||9999)}else{var f={name:b,value:c};if(typeof g!=="undefined"){f.seconds=g}BFW_Util.setCookie(f)}};this.eventFindEl=function(c,b){if(bfjs.isMobile()){return $(c.currentTarget).closest(b)[0]}else{return c.findElement(b)}};this.windowEvent=function(c,b){if(bfjs.isMobile()){$(window).on(c,b)}else{Event.observe(window,c,b)}};this.getFirstEl=function(b){return(bfjs.isMobile()&&b.jquery)?b[0]:b};this.getElsByAttr=function(b){if(bfjs.isMobile()){return $(b)}else{return $$(b)}};this.getElementFromEvent=function(b){if(bfjs.isMobile()){return b.target}else{return b.element()}};this.getOffset=function(b){if(bfjs.isMobile()){var f=$(b).offset().top,c=$(b).offset().left;return[c,f]}else{return $(b).cumulativeOffset()}};this.setStyle=function(b,c){if(bfjs.isMobile()){for(key in c){$(b).css(key,c[key])}}else{b.setStyle(c)}};this.universal_each=function(c,b){if(bfjs.isMobile()){$.each(c,function(g,f){b(f,g)})}else{c.each(function(g,f){b(g,f)})}};this.universal_compare_els=function(b,c){if(bfjs.isMobile()){return b.is(c)}else{return b==c}};this.isMobile=function(){if(typeof window.jQuery!="undefined"&&/^mobile/i.test(BF_STATIC.tt_page)){return true}else{if(typeof window.jQuery!="undefined"&&/^ab_debug/i.test(BF_STATIC.tt_page)){return true}else{if(typeof window.jQuery!="undefined"&&BF_STATIC.tt_page=="BuzzAdvertise"){return true}else{return false}}}};this.onPageLoad=function(b){if(bfjs.isMobile()){$(document).ready(b)}else{BuzzLoader.register(b,1)}};this.toggleClass=function(f,c,g){g=(typeof g==="undefined")?false:g;var b=$(bfjs.getFirstEl(f));if(!g&&b[bfjs.has_class](c)){b[bfjs.remove_class](c)}else{if(g){b[bfjs.add_class](c)}}};this.indexOf=function(c,b){if(bfjs.isMobile()){return $.inArray(c,b)}else{return b.indexOf(c)}};this.formatNumber=function(b){if(b<1000){return b}else{if(b<10000){return b.toString().charAt(0)+","+b.toString().substring(1)}else{if(b>=1000000){return(b/1000000).toFixed(b%1000000!=0)+"M"}}}return(b/1000).toFixed(b%1000!=0)+"K"};this.getUrlVars=function(){var c={};var b=window.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(f,g,h){c[g]=h});return c};this.loadJSONP=(function a(l,c,m){var k,g,h,f;k=0;g=c.head||c.getElementsByTagName("head")[0];h=c.createElement("script");h.type="text/javascript";f=function(n,q,p,o){q.call((o||l),p);g.removeChild(n);n=null};return function b(p,v,t,q){var r=false,o,n;t=t?t:{};o="__jsonp_"+k++;if(p.match(/\?/)){p+="&callback="+o}else{p+="?callback="+o}n=h.cloneNode();n.src=p;l[o]=function(w){w.callbackSuccess=true;r=true;f(n,v,w,q);try{delete l[o]}catch(z){l[o]=null}};t.attemptsNumber=t.attemptsNumber?t.attemptsNumber+1:1;n.onerror=function(){if(typeof t.retries!=="undefined"&&t.attemptsNumber<=t.retries){b(p,v,t,q)}else{f(n,v,{callbackSuccess:false},q)}};n.onreadystatechange=function(){if(this.readyState==="loaded"){setTimeout(function(){if(r){return}f(n,v,{callbackSuccess:false},q)},50)}};g.appendChild(n)}})(window,document);this.createScript=function(f){var c,g,b=function(k,h){if(k.readyState=="loaded"||k.readyState=="complete"){h()}else{setTimeout(function(){b(k,h)},100)}};if(!f||typeof f.url==="undefined"){return bfjs.logError("bfjs.createScript(): No url provided")}if(!window.BF_STATIC||typeof(f.jemplate)!=="undefined"||!BF_STATIC.bf_test_mode){c=document.getElementsByTagName("script")[0];g=document.createElement("script");g.type="text/javascript";g.async=false;g.src=f.url;if(typeof f.onError==="function"){g.onerror=f.onError}if(typeof f.onSuccess==="function"){if(typeof g.addEventListener!=="undefined"){g.addEventListener("load",f.onSuccess,false)}else{g.onreadystatechange=function(){g.onreadystatechange=null;b(g,f.onSuccess)}}}c.parentNode.insertBefore(g,c)}else{bfjs.logInfo("bfjs.createScript(): disable load",f.url,"for test mode")}};this.logInfo=function(b){if(BF_STATIC.bf_env==="dev"){console.info(b)}return true};this.logError=function(b){if(BF_STATIC.bf_env==="dev"){console.error(b)}return false}};var bfjs=new BFJS();var addDraftPageClass=function(){if(document.location.href.match("/_buzz_preview")){if(typeof window.Prototype!="undefined"){document.body.addClassName("DraftPage")}else{setTimeout(addDraftPageClass,100)}}};bfjs.onPageLoad(addDraftPageClass);String.prototype.replaceAll=function(b,a){return this.split(b).join(a)};String.prototype.capitalize=function(){return this.replace(/\w+/g,function(b){return b.charAt(0).toUpperCase()+b.substr(1).toLowerCase()})};String.prototype.commafy=function(){return this.replace(/\B(?=(\d{3})+(?!\d))/g,",")};if(typeof(String.prototype.trim)!="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}Array.prototype.remove=function(){var g,c=arguments,b=c.length,f;while(b&&this.length){g=c[--b];while((f=this.indexOf(g))!==-1){this.splice(f,1)}}return this};function IsNumeric(a){return !isNaN(parseFloat(a))&&isFinite(a)}function BF_cumulativeScrollOffset(b){var a=0,c=0;do{if(b===document.body){var f=document.documentElement||document.body.parentNode||document.body;a+=!Object.isUndefined(window.pageYOffset)?window.pageYOffset:f.scrollTop||0;c+=!Object.isUndefined(window.pageXOffset)?window.pageXOffset:f.scrollLeft||0;break}else{a+=b.scrollTop||0;c+=b.scrollLeft||0;b=b.parentNode}}while(b);return new Element.Offset(c,a)}var $s=function(a,b){var c=$$(a);if(c.length==0){if(/dev\./.test(window.location.href)&&!b){console.error("No "+a+" in document!");console.trace()}return new Element("div")}else{return c[0]}};function isHTMLElement(a){if(typeof(HTMLElement)=="object"||typeof(HTMLElement)=="function"){return(a&&(a instanceof HTMLElement))}else{return(a&&typeof(a)=="object"&&a!==null&&a.nodeType===1&&typeof(a.nodeName)=="string")}}function isNumber(a){return !isNaN(parseFloat(a))&&isFinite(a)}function clearTimer(a){if(objExists(a)){clearTimeout(a)}}function notEmptyStr(a){return"string"===typeof a&&0<a.length?!0:!1}function truncateStr(f,a){var c,b;if("string"!==typeof f){return""}c=f.split("");if(c.length>a){for(b=c.length-1;b>-1;--b){if(b>a){c.length=b}else{if(" "===c[b]){c.length=b;break}}}c.push("...")}return c.join("")}function hasLocalStorage(){var a;a=("localStorage" in window)&&window.localStorage!==null?true:false;if(a){try{localStorage.setItem("__test","data")}catch(b){a=false}}return a}function findMatchesExec(f,g){if(!(f instanceof RegExp)){if(BF_STATIC.env!="live"){throw new Error("Error: findMatchesExec() : pattern is not RegExp object")}return false}var c=(f.global)?true:false;var b=[];var a;f.lastIndex=0;while((a=f.exec(g))!=null){b.push(a);if(!c){break}}return(b.length)?b:null}function win8AdCall(){try{if(document.location.search.match(/win8me/)){return"os=win8;"}if(typeof navigator.appVersion!="undefined"){if(navigator.appVersion.toLowerCase().indexOf(/windows nt 6.2/)!=-1){return"os=win8;"}else{return""}}else{return""}}catch(a){return""}}function isIE7(){var a=false;if(navigator.appVersion.indexOf("MSIE")!=-1&&parseFloat(navigator.appVersion.split("MSIE")[1])<8){a=true}return a}function isIE8(){var a=false;if(navigator.appVersion.indexOf("MSIE")!=-1&&parseFloat(navigator.appVersion.split("MSIE")[1])==8){a=true}return a}function isIE9(){var a=false;if(navigator.appVersion.indexOf("MSIE")!=-1&&parseFloat(navigator.appVersion.split("MSIE")[1])==9){a=true}return a}function isIE10(){if(uagent.match("msie 10")){return true}}function isIE11(){return !!(navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/MSIE/))}function isMSIE(){return(navigator.appVersion.indexOf("MSIE")!=-1)||isIE11()}function isFirefox(){return(navigator.userAgent.toLowerCase().indexOf("firefox")!=-1)}function isMac(){return(navigator.platform.toLowerCase().indexOf("mac")!=-1)}function isSafari5(){if((uagent.match("safari")&&!uagent.match("chrome"))&&!(uagent.match(/Version\/[6-9](?:\.[0-9])* Safari/i)||uagent.match(/Version\/[5-9](?:\.\d+)*\.\d+ Mobile\/\S*\sSafari/i))){return true}}function getUrlVars(){var b={};var a=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(c,f,g){b[f]=g});return b}function is_touch(){var a;if(("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch){a=true}else{a=false}return a}function is_mobile(){var a=navigator.userAgent.toLowerCase();if(a.match(/iphone|ipod|android|ipad/)){return true}else{return false}}function BFWebPath(){var a=BF_STATIC.bf_env=="dev"?"dev.":BF_STATIC.bf_env=="stage"?"stage.":"www.";return a+"buzzfeed.com"+BF_STATIC.web_root}function getWidth(a){return $(a).getWidth()}function objExists(b){try{if(typeof(b)!="undefined"){return true}else{return false}}catch(a){return false}}function removeAllCssClasses(a){$w($(a).className).each(function(b){$(a).removeClassName(b)})}function trackPixel(a){var c=new Image();var b=(Math.random()*100000000000000000);a=a.replace("[timestamp]",b);if(BF_STATIC.bf_env=="dev"||BF_STATIC.bf_test_mode){console.log("Pixel Tracked: ",a)}else{c.src=a}}function ukBackground(){if(BF_STATIC.country=="uk"&&(acl.user_can("homepage_edit")||acl.user_can("uk_homepage_edit"))){$$("body")[0].addClassName("uk_edit")}}function fbSharePixel(){var a={};a.pixel_id="6009136439565";a.value="0.00";if(BF_STATIC.bf_env=="dev"||BF_STATIC.bf_test_mode){console.log("FB Share Pixel")}else{BF_UTIL.createScript({url:"//connect.facebook.net/en_US/fp.js"})}}function toggleGraphicImage(c,g){if(!isSafari5()&&!isIE10()){var h=c.getOffsetParent(),f=h.select(".graphic_image")[0],b=h.select(".graphic_image_warning")[0],a=h.select("reblur")[0];if(!g){if(f){f.removeClassName("graphic_image")}if(b){b.addClassName("hidden")}h.addClassName("no_blur")}else{if(g){f=h.select("img")[0];if(f){f.addClassName("graphic_image")}if(b){b.removeClassName("hidden")}h.removeClassName("no_blur")}}}}function gplusCallback(a){gplus.callback(a)}var clog=function(){if(BF_STATIC.bf_env=="dev"){console.log.apply(console,[].concat("%cLOG:","color: green",arguments))}};function getRandomInt(b,a){return Math.floor(Math.random()*(a-b))+b}Element.addMethods({cleanHeight:function(c){var g=Number(c.getStyle("padding-top").slice(0,-2))+Number(c.getStyle("padding-bottom").slice(0,-2));var f=Number(c.getStyle("margin-top").slice(0,-2))+Number(c.getStyle("margin-bottom").slice(0,-2));var b=Number(c.getStyle("border-top").slice(0,-2))+Number(c.getStyle("border-bottom").slice(0,-2));var a=Number(c.getHeight());if(isNaN(g)){g=0}if(isNaN(f)){f=0}if(isNaN(b)){b=0}if(isNaN(a)){a=0}var h=a-(g+f+b);return h},findParent:function(b,a){try{while(b!=document){var c=$(b).up(a);if(c!="undefined"){return c}else{b=c}}return null}catch(f){return null}},getSelectedOption:function(b){if(!(b=$(b))){return}var a=b.selectedIndex;return a>=0?b.options[a]:undefined}});function shuffleArray(f){for(var b,a,c=f.length;c;b=parseInt(Math.random()*c),a=f[--c],f[c]=f[b],f[b]=a){}return f}var BF_UTIL=(function(){var q,k,l=document,n=window,h=l.body,g=l.documentElement,p={},b=function(r){bfjs.createScript(r)},o=function(w,r,t){var z;return function v(){var D=this,B=arguments;function A(){if(!t){w.apply(D,B)}z=null}if(z){clearTimeout(z)}else{if(t){w.apply(D,B)}}z=setTimeout(A,r||100)}},c=function(r){if(BF_STATIC.env=="live"||typeof console!=="object"||typeof console.log!=="function"){return}console.log(r)},f={dimensions:{width:function(){var r=0;if(typeof(n.innerWidth)=="number"){r=n.innerWidth}else{if(l.documentElement&&l.documentElement.clientWidth){r=l.documentElement.clientWidth}else{if(l.body&&l.body.clientWidth){r=l.body.clientWidth}}}return r},height:function(){var r=0;if(typeof(n.innerHeight)=="number"){r=n.innerHeight}else{if(l.documentElement&&l.documentElement.clientHeight){r=l.documentElement.clientHeight}else{if(l.body&&l.body.clientHeight){r=l.body.clientHeight}}}return r}},position:{top:function(){return typeof(n.screenY)=="number"?n.screenY:n.screenTop},left:function(){return typeof(n.screenX)=="number"?n.screenX:n.screenLeft}}},m={height:function(){var r=l.body,t=l.documentElement;if(typeof q==="undefined"){q=Math.max(r.scrollHeight,r.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}return q},width:function(){var r=l.body,t=l.documentElement;if(typeof k==="undefined"){k=Math.max(r.scrollWidth,r.offsetWidth,t.clientWidth,t.scrollWidth,t.offsetWidth)}return k}},a=function(){var r=document.body||document.documentElement,z=r.style,A="transition";if(typeof z[A]=="string"){return true}var t=["Moz","webkit","Webkit","Khtml","O","ms"];A=A.charAt(0).toUpperCase()+A.substr(1);for(var w=0;w<t.length;w++){if(typeof z[t[w]+A]=="string"){return true}}return false};p.browser=f;p.document=m;p.debounce=o;p.log=c;p.createScript=b;p.supportsTransitions=a;return p}());var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,f=/[^-+\dA-Z]/g,c=function(h,g){h=String(h);g=g||2;while(h.length<g){h="0"+h}return h};return function(n,E,w){var k=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(n)=="[object String]"&&!/\d/.test(n)){E=n;n=undefined}n=n?new Date(n):new Date;if(isNaN(n)){throw SyntaxError("invalid date")}E=String(k.masks[E]||E||k.masks["default"]);if(E.slice(0,4)=="UTC:"){E=E.slice(4);w=true}var A=w?"getUTC":"get",r=n[A+"Date"](),g=n[A+"Day"](),p=n[A+"Month"](),v=n[A+"FullYear"](),z=n[A+"Hours"](),q=n[A+"Minutes"](),B=n[A+"Seconds"](),t=n[A+"Milliseconds"](),h=w?0:n.getTimezoneOffset(),l={d:r,dd:c(r),ddd:k.i18n.dayNames[g],dddd:k.i18n.dayNames[g+7],m:p+1,mm:c(p+1),mmm:k.i18n.monthNames[p],mmmm:k.i18n.monthNames[p+12],yy:String(v).slice(2),yyyy:v,h:z%12||12,hh:c(z%12||12),H:z,HH:c(z),M:q,MM:c(q),s:B,ss:c(B),l:c(t,3),L:c(t>99?Math.round(t/10):t),t:z<12?"a":"p",tt:z<12?"am":"pm",T:z<12?"A":"P",TT:z<12?"AM":"PM",Z:w?"UTC":(String(n).match(b)||[""]).pop().replace(f,""),o:(h>0?"-":"+")+c(Math.floor(Math.abs(h)/60)*100+Math.abs(h)%60,4),S:["th","st","nd","rd"][r%10>3?0:(r%100-r%10!=10)*r%10]};return E.replace(a,function(m){return m in l?l[m]:m.slice(1,m.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(a,b){try{return dateFormat(this,a,b)}catch(c){console.error(c.message+": date_format.js line 159");return null}};function inject_rando_code(a){var b="/random";if(typeof a!="undefined"){b+="/"+a;$("random_"+a+"_button").hide();$("random_"+a+"_button_spinner").show()}else{$("random_button").hide();$("random_button_spinner").show()}b+=".js";BF_XSS.swift_injection(BF_STATIC.web_root+b)}Persist=(function(){var g="0.1.0",f,k,a,h,c,b;b=(function(){var t="Thu, 01-Jan-1970 00:00:01 GMT",m=1000*60*60*24,v=["expires","path","domain"],o=escape,n=unescape,r=document,p;var w=function(){var z=new Date();z.setTime(z.getTime());return z};var l=function(D,G){var B,A,F,E=[],z=(arguments.length>2)?arguments[2]:{};E.push(o(D)+"="+o(G));for(B=0;B<v.length;B++){A=v[B];if(F=z[A]){E.push(A+"="+F)}}if(z.secure){E.push("secure")}return E.join("; ")};var q=function(){var A="__EC_TEST__",z=new Date();z=z.toGMTString();this.set(A,z);this.enabled=(this.remove(A)==z);return this.enabled};p={set:function(E,H){var D=(arguments.length>2)?arguments[2]:{},B=w(),A,z={};if(D.expires){D.expires*=m;z.expires=new Date(B.getTime()+D.expires);z.expires=z.expires.toGMTString()}var G=["path","domain","secure"];for(i=0;i<G.length;i++){if(D[G[i]]){z[G[i]]=D[G[i]]}}var F=l(E,H,z);r.cookie=F;return H},has:function(A){A=o(A);var E=r.cookie,D=E.indexOf(A+"="),z=D+A.length+1,B=E.substring(0,A.length);return((!D&&A!=B)||D<0)?false:true},get:function(B){B=o(B);var F=r.cookie,E=F.indexOf(B+"="),z=E+B.length+1,D=F.substring(0,B.length),A;if((!E&&B!=D)||E<0){return null}A=F.indexOf(";",z);if(A<0){A=F.length}return n(F.substring(z,A))},remove:function(z){var B=p.get(z),A={expires:t};r.cookie=l(z,"",A);return B},keys:function(){var E=r.cookie,D=E.split("; "),z,B,A=[];for(z=0;z<D.length;z++){B=D[z].split("=");A.push(n(B[0]))}return A},all:function(){var E=r.cookie,D=E.split("; "),z,B,A=[];for(z=0;z<D.length;z++){B=D[z].split("=");A.push([n(B[0]),n(B[1])])}return A},version:"0.2.1",enabled:false};p.enabled=q.call(p);return p}());c=function(){};a=function(l){return"PS"+l.replace(/_/g,"__").replace(/ /g,"_s")};C={search_order:["localstorage","whatwg_db","globalstorage","ie","cookie"],name_re:/^[a-z][a-z0-9_ -]+$/i,methods:["init","get","set","remove","load","save"],sql:{version:"1",create:"CREATE TABLE IF NOT EXISTS persist_data (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)",get:"SELECT v FROM persist_data WHERE k = ?",set:"INSERT INTO persist_data(k, v) VALUES (?, ?)",remove:"DELETE FROM persist_data WHERE k = ?"}};k={whatwg_db:{size:200*1024,test:function(){var l="PersistJS Test",m="Persistent database test.";if(!window.openDatabase){return false}if(!window.openDatabase(l,C.sql.version,m,k.whatwg_db.size)){return false}return true},methods:{transaction:function(l){if(!this.db_created){var m=C.sql.create;this.db.transaction(function(n){n.executeSql(m,[],function(){this.db_created=true})},c)}this.db.transaction(l)},init:function(){var m,l;m=this.o.about||"Persistent storage for "+this.name;l=this.o.size||k.whatwg_db.size;this.db=openDatabase(this.name,C.sql.version,m,l)},get:function(l,n,m){var o=C.sql.get;if(!n){return}m=m||this;this.transaction(function(p){p.executeSql(o,[l],function(q,v){if(v.rows.length>0){n.call(m,true,v.rows.item(0)["v"])}else{n.call(m,false,null)}})})},set:function(m,q,o,n){var l=C.sql.remove,p=C.sql.set;this.transaction(function(r){r.executeSql(l,[m],function(){r.executeSql(p,[m,q],function(v,w){if(o){o.call(n||this,true,q)}})})});return q},remove:function(l,n,m){var o=C.sql.get;sql=C.sql.remove;this.transaction(function(p){if(n){p.executeSql(o,[l],function(q,v){if(v.rows.length>0){var w=v.rows.item(0)["v"];q.executeSql(sql,[l],function(z,A){n.call(m||this,true,w)})}else{n.call(m||this,false,null)}})}else{p.executeSql(sql,[l])}})}}},globalstorage:{size:5*1024*1024,test:function(){return window.globalStorage?true:false},methods:{key:function(l){return a(this.name)+a(l)},init:function(){this.store=globalStorage[this.o.domain]},get:function(l,n,m){l=this.key(l);if(n){n.call(m||this,true,this.store.getItem(l))}},set:function(l,o,n,m){l=this.key(l);this.store.setItem(l,o);if(n){n.call(m||this,true,o)}},remove:function(l,n,m){var o;l=this.key(l);o=this.store[l];this.store.removeItem(l);if(n){n.call(m||this,(o!==null),o)}}}},localstorage:{size:-1,test:function(){return window.localStorage?true:false},methods:{key:function(l){return a(this.name)+a(l)},init:function(){this.store=localStorage},get:function(l,n,m){l=this.key(l);if(n){n.call(m||this,true,this.store.getItem(l))}},set:function(l,o,n,m){l=this.key(l);this.store.setItem(l,o);if(n){n.call(m||this,true,o)}},remove:function(l,n,m){var o;l=this.key(l);o=this.store.getItem(l);this.store.removeItem(l);if(n){n.call(m||this,(o!==null),o)}}}},ie:{prefix:"_persist_data-",size:64*1024,test:function(){return window.ActiveXObject?true:false},make_userdata:function(m){var l=document.createElement("div");l.id=m;l.style.display="none";l.addBehavior("#default#userData");document.body.appendChild(l);return l},methods:{init:function(){var l=k.ie.prefix+a(this.name);this.el=k.ie.make_userdata(l);if(this.o.defer){this.load()}},get:function(l,n,m){var o;l=a(l);if(!this.o.defer){this.load()}o=this.el.getAttribute(l);if(n){n.call(m||this,o?true:false,o)}},set:function(l,o,n,m){l=a(l);this.el.setAttribute(l,o);if(!this.o.defer){this.save()}if(n){n.call(m||this,true,o)}},load:function(){this.el.load(a(this.name))},save:function(){this.el.save(a(this.name))}}},cookie:{delim:":",size:4000,test:function(){return f.Cookie.enabled?true:false},methods:{key:function(l){return this.name+k.cookie.delim+l},get:function(l,o,n,m){l=this.key(l);o=b.get(l);if(n){n.call(m||this,o!=null,o)}},set:function(l,o,n,m){l=this.key(l);b.set(l,o,this.o);if(n){n.call(m||this,true,o)}},remove:function(l,o,n,m){var o;l=this.key(l);o=b.remove(l);if(n){n.call(m||this,o!=null,o)}}}}};var h=function(){var q,n,m,p,o=C.methods,r=C.search_order;for(q=0,n=o.length;q<n;q++){f.Store.prototype[o[q]]=c}f.type=null;f.size=-1;for(q=0,n=r.length;!f.type&&q<n;q++){m=k[r[q]];if(m.test()){f.type=r[q];f.size=m.size;for(p in m.methods){f.Store.prototype[p]=m.methods[p]}}}f._init=true};f={VERSION:g,type:null,size:0,add:function(l){k[l.id]=l;C.search_order=[l.id].concat(C.search_order);h()},remove:function(m){var l=C.search_order.indexOf(m);if(l<0){return}C.search_order.splice(l,1);delete k[m];h()},Cookie:b,Store:function(l,m){if(!C.name_re.exec(l)){throw new Error("Invalid name")}if(!f.type){throw new Error("No suitable storage found")}m=m||{};this.name=l;m.domain=m.domain||location.hostname||"localhost.localdomain";this.o=m;m.expires=m.expires||365*2;m.path=m.path||"/";this.init()}};h();return f})();var WhoDat=function(){var g="bf_whodat_bucket";var c=false;var h=function(){var w=b(g);var l=Math.round(new Date().getTime()/1000);if(document.location.search.match("whodat_bucket")){c=true}var v=false;var q={};if(typeof w!="undefined"&&w){var n=w.split(",");for(var o=0;o<n.length;o++){var k=n[o].match("([^:]+):(.+)");if(k){q[k[1]]=k[2]}}if(c){var z=document.location.search.match("whodat_bucket_last_visit=([^&]+)");if(z){console.log("last_visit set to: "+z[1]);q.last_visit=z[1]}}if(q.last_visit&&q.freq&&(l-q.last_visit)>(45*60)){var m=l-q.last_visit;if(m>48*60*60){q.freq="weekly"}else{if(m>8*60*60){q.freq="daily"}else{q.freq="hourly"}}q.last_visit=l;v=true}}if(!q.freq){q.freq="new";q.last_visit=l;v=true}if(c){var z=document.location.search.match("whodat_bucket=([^&]+)");if(z&&z[1]){if(z[1]=="new"||z[1]=="weekly"||z[1]=="daily"||z[1]=="hourly"){console.log("Override whodat cookie and set bucket to: "+z[1]);q.freq=z[1];q.last_visit=l;v=true}else{console.log("It looks like you're trying to override whodat with an invalid cookie: "+z[1]+" (valid buckets: new, weekly, daily, hourly)")}}}var p="freq:"+q.freq+",last_visit:"+q.last_visit;if(v){if(c){console.log("Set new bf_whodat_bucket cookie: "+p)}a(g,p,(15*24*60*60*1000))}else{if(c){console.log("bf_whodat_bucket cookie is up-to-date: "+p)}}};var b=function(l){if(f(l)){var k=document.cookie.match("(^|;) ?"+l+"=([^;]*)(;|$)");return unescape(k[2])}else{return false}};var f=function(m,k){var l=document.cookie.match("(^|;) ?"+m+"=([^;]*)(;|$)");if(k&&typeof(k)=="string"){k=RegExp(RegExp.escape(k))}return(l?(k&&k!=""?unescape(l[2]).match(k):(l[2]!=this.cookies_cancel)):false)};var a=function(r,l,o){var m=1296000000,k="",q="";if(o||o==0){m=parseInt(o)}if(m!=0){var p=new Date();p.setTime(p.getTime()+m);k="; expires="+p.toGMTString()}q=escape(r)+"="+escape(l)+k+"; path=/; domain=.buzzfeed.com";document.cookie=q;if(c){console.log("Escaped whodat cookie: "+q)}};return{init:function(){try{h()}catch(k){console.error(k)}}}}();if(typeof BuzzLoader!="undefined"){BuzzLoader.register(WhoDat.init,5)}else{WhoDat.init()}function createCookie(c,g,h,f){if(h){var b=new Date();b.setTime(b.getTime()+(h*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=c+"="+g+a+"; path=/; domain=.buzzfeed.com"}function readCookie(b){var g=b+"=";var a=document.cookie.split(";");for(var f=0;f<a.length;f++){var h=a[f];while(h.charAt(0)==" "){h=h.substring(1,h.length)}if(h.indexOf(g)==0){return h.substring(g.length,h.length)}}return null}function eraseCookie(a,b){document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/; domain=.buzzfeed.com";if(typeof b!="undefined"){b()}}BF_Request=function(){this.id=(new Date().getTime()+Math.random().toString().substr(2,3));this.ajax=null;this.aborted=false;this._redirect=function(url){document.location.href=url};this.static_request=function(url,args){if(args.parameters){if(!args.delimiter){args.delimiter="-"}var key_vals=[];for(var each in args.parameters){key_vals.push(each+args.delimiter+args.parameters[each])}delete args.parameters;url+="/"+key_vals.join("/")}this.request(url,args)};this.request=function(url,args){var success=args.onSuccess;var resp=function(resp){try{var json=resp.getResponseHeader("X-json");var obj=null;if(json&&resp.responseText){obj=eval("("+resp.responseText+")");if(obj&&obj.error&&obj.error=="blacklist"){(new BF_Request()).alert(local.t("An error has occurred. If it keeps happening contact error@buzzfeed.com."));return false}}var ajax_redir=resp.getHeader("X-ajaxlocation");if(ajax_redir){if(!ajax_redir.match(/https?:\/\//)&&!ajax_redir.match(/^\/buzzfeed\//)){ajax_redir=BF_STATIC.web_root+ajax_redir}document.location.href=ajax_redir}else{if(typeof success==="function"){success(resp,obj)}}}catch(err){console.error(err)}}.bind(this);args.onSuccess=resp;var on406=args.on406||function(a,b){};var onCatcha=args.onCatcha||function(a,b){};args.on406=function(a,b){try{var obj=eval("("+a.responseText+")");if(typeof obj.service!="undefined"){if(typeof bf_catcha=="undefined"){console.warn("bf_catcha not available but request responded with catcha requirement; make sure the catcha template is in the form.")}else{bf_catcha.draw_catcha(obj.service)}}}catch(e){console.warn("Cant handle 406 response");console.dir({e:e})}onCatcha(a,b);on406(a,b)};if(!args.on401&&!/buzzfeed\/api/.test(url)){args.on401=function(){if((args&&args.action&&args.action=="logout")||(BF_STATIC&&BF_STATIC.bf_test_mode)){return false}var user=new BF_User();(new BF_Request()).request("/buzzfeed/_admin_user",{method:"get",parameters:{action:"logout"},onComplete:function(){user.logout({noreload:true})}});document.location.href=BF_STATIC.web_root+"/signin?badauth=true"}}var _temp401=args.on401||function(a,b){};args.on401=function(a,b){try{var ssk=ssk_info=username=default_username="";ssk=(new BF_User()).getSessionKey();ssk_info=(new BF_User()).getUserInfo().session_key;username=(new BF_User()).getUserInfo().username;default_username=(new BF_User()).getUserInfo().default_user.username;debug_data={page:window.location.href,ajax_url:url,time:(new Date()).format("m-dd-yy hh:mm:ss"),ssk:ssk,ssk_info:ssk_info,username:username,d_username:default_username,};var params=[];for(var key in debug_data){params.push(key+"="+encodeURIComponent(debug_data[key]))}(new Image()).src=BF_STATIC.web_root+"/static/log_me.gif?"+params.join("&")}catch(e){}_temp401(a,b)};if(!args.onFailure){args.onFailure=function(resp){(new BF_Request()).alert(local.t("Sorry, there was a problem processing your request. If it persists please contact support at http://www.buzzfeed.com/about/contact"))}}if(args.bf_auth&&!(args.parameters&&args.parameters.session_key)){args.parameters.session_key=BFW_Util.getCookie(BFW_COOKIE)}if(args.while_processing){if(args.while_processing.show){args.while_processing.show=$(args.while_processing.show)}if(args.while_processing.hide){args.while_processing.hide=$(args.while_processing.hide)}if(args.while_processing.show){args.while_processing.show.show();args.while_processing.show.removeClassName("hidden")}if(args.while_processing.hide){args.while_processing.hide.hide();args.while_processing.hide.addClassName("hidden")}var _onSuccess=args.onSuccess;args.onSuccess=function(a,b){if(args.while_processing.show){args.while_processing.show.hide();args.while_processing.show.addClassName("hidden")}if(args.while_processing.hide){args.while_processing.hide.show();args.while_processing.hide.removeClassName("hidden")}_onSuccess(a,b)};var _onFailure=args.onFailure;args.onFailure=function(a,b){if(args.while_processing.show){args.while_processing.show.hide();args.while_processing.show.addClassName("hidden")}if(args.while_processing.hide){args.while_processing.hide.show();args.while_processing.hide.removeClassName("hidden")}_onFailure(a,b)};var _on401=args.on401;args.on401=function(a,b){if(args.while_processing.show){args.while_processing.show.hide();args.while_processing.show.addClassName("hidden")}if(args.while_processing.hide){args.while_processing.hide.show();args.while_processing.hide.removeClassName("hidden")}_on401(a,b)}}if($("profile_session")){args.parameters.profile_session=$("profile_session").innerHTML}if(typeof BF_STATIC!=="undefined"&&typeof BF_STATIC.country!=="undefined"&&typeof args.parameters!=="undefined"){args.parameters.country=BF_STATIC.country}if(typeof bf_catcha!="undefined"&&bf_catcha.catcha_answer!=""){args.parameters.catcha_answer=bf_catcha.catcha_answer}try{if(BF_STATIC&&BF_STATIC.bf_env&&BF_STATIC.bf_env=="dev"&&BF_STATIC.bf_test_mode){BF_Request.request_stack.push(this);var that=this;$H(BF_Request.requestModifiers).each(function(pair){var queue=[];BF_Request.requestModifiers[pair.key].each(function(el,ind){if(el.filter(url,args)){queue.push(el);if(pair.key.match(/Once$/)){BF_Request.requestModifiers[pair.key].splice(ind,1)}}});if(args[pair.key]){queue.push({filter:function(){return true},fn:args[pair.key]})}args[pair.key]=function(){var request=this;return function(resp){(queue.shift()).fn(resp,queue,request)}}.call(that)})}}catch(e){console.error(e)}if(args.needsToken){if(typeof args.parameters.user_token!=undefined&&args.parameters.user_token){this.ajax=new Ajax.Request(url,args)}else{var params={method:"post",parameters:{action:"get_token",cb:(new Date).getMilliseconds()},onSuccess:function(resp){var json=resp.getResponseHeader("X-json");var obj=null;if(json){obj=eval("("+resp.responseText+")")}if(typeof obj!="undefined"&&typeof obj.success!="undefined"&&obj.success!=0&&typeof obj.token!="undefined"){args.parameters.user_token=obj.token;this.ajax=new Ajax.Request(url,args)}else{args.onFailure()}},onFailure:args.onFailure};this.ajax=new Ajax.Request("/buzzfeed/_admin_user",params)}}else{this.ajax=new Ajax.Request(url,args)}};this.abort=function(){if(this.ajax){this.aborted=true;this.ajax.transport.abort()}};this.alert=function(msg){try{var div=$("bf_request_err");if(!div){div=document.createElement("div");div.id="bf_request_err";div.addClassName("default-alert");document.getElementsByTagName("BODY")[0].appendChild(div)}else{div.removeClassName("hidden")}var template=new Template('<div class="default-alert--header"><a onclick="$(\'bf_request_err\').addClassName(\'hidden\');return false;" href="javascript:return false;">&times;</a></div> 			<div class="default-alert--inner">#{msg}</div> 		');div.update(template.evaluate({msg:msg}));var vpHeight=$(document).viewport.getHeight();var height=div.getLayout().get("margin-box-height");var scrollTop=$(document).viewport.getScrollOffsets().top;var avTop=(vpHeight/2)-(height/2)+scrollTop;if(avTop<=10){avTop=10}div.style.top=avTop+"px"}catch(e){if("console" in window){console.dir({e:e})}}}};BF_Request.statsd=function(){return{increment:function(a){if(Object.isArray(a)){a=a.join(",")}(new Image()).src="/buzzfeed/statsd_pixel?increment="+encodeURIComponent(a)}}}();BF_Request.location=function(a){if(!a){a={}}if(window.BF_LOCATION_DEBUG&&!a.debugged&&!a.reload_track){a.debugged=true;url=a.location;if(!url){url="window.location.href"}console.log("BF_Request: rediecting to "+url+" in "+window.BF_LOCATION_DEBUG+" seconds");console.log(a);setTimeout(function(){BF_Request.location(a)},window.BF_LOCATION_DEBUG);return}if(a.reload_track){BF_Request.statsd.increment("window.reload");window.location.reload();return}if(!a.location){BF_Request.location({reload_track:true})}else{if(a.new_tab){window.open(a.location,"_blank")}else{if(a.replace){window.location.replace(a.location)}else{window.location.href=a.location}}}};try{if(BF_STATIC&&BF_STATIC.bf_env&&BF_STATIC.bf_env=="dev"&&BF_STATIC.bf_test_mode){BF_RequestStack=function(){this.stack=[]};BF_RequestStack.prototype.push=function(a){this.stack.push(a)};BF_RequestStack.prototype.pop=function(){return this.stack.pop()};BF_RequestStack.prototype.peek=function(){return this.stack[this.stack.length-1]};BF_RequestStack.prototype.getRequest=function(c){try{var a=null;a=this.stack.find(function(f){if(f.id==c){return true}else{return false}});return a}catch(b){console.error(b)}};BF_Request.request_stack=new BF_RequestStack();var listeners=["onLoading","onLoaded","onInteractive","onSuccess","onFailure","onComplete"];BF_Request.requestModifiers={};for(var i=0;i<listeners.length;i++){BF_Request.requestModifiers[listeners[i]]=[{name:listeners[i],filter:function(b,a){return true},fn:function(c,a,b){if(a.length){(a.shift()).fn(c,a,b)}}}];BF_Request.requestModifiers[listeners[i]+"Once"]=[]}BF_Request.requestListeners={};for(var i=0;i<listeners.length;i++){BF_Request.requestListeners[listeners[i]]=[]}BF_Request.addRequestListener=function(b){var a={id:(new Date().getTime()+Math.random().toString().substr(2,3)),request:null,fulfilled:false,filter:b.filter?b.filter:function(){return true}};BF_Request.requestListeners[b.ev].push(a);BF_Request.requestModifiers[b.ev].push({name:b.ev,filter:b.filter,fn:function(){var c=a;return function(h,f,g){c.fulfilled=true;c.request=g;if(f.length){(f.shift()).fn(h,f,g)}}}()});return a.id};BF_Request.getRequestListener=function(c){try{var a=null;$H(BF_Request.requestListeners).each(function(h){var g=BF_Request.requestListeners[h.key].find(function(k){if(k.fulfilled&&k.id==c){return true}else{return false}});if(g){try{a={id:g.request.id,aborted:g.request.aborted,fulfilled:true,parameters:g.request.ajax.parameters,response:g.request.ajax.transport.response};try{a.responseJSON=a.response.evalJSON()}catch(f){}}catch(f){console.error(f)}}});return a}catch(b){console.error(b)}}}}catch(e){console.error(e)}BF_Login=function(){this.AUTH_RETURN_PAGE_COOKE="auth_return_page_cookie";this.LOGIN_ERR=local.t("Please enter a username and a password");this.AUTH_ERR=local.t("Please enter a valid username and a password");this.ERR=local.t("Sorry, we&rsquo;re unable to process your request at this time.");this.PASSWORD_ERR=local.t("Please enter your email address");this.PASSWORD_SUCCESS=local.t("We&rsquo;ve sent you an email with a reset password link.");this.PASSWORD_SERVER_ERROR=local.t("There was a problem contacting the server and we were unable to reset your password. Please try again later.");this.NEED_VALIDATION_ERROR=local.t("Your account needs to be validated. Please check your email for a validation link.");this.initialized=false;this.initialization=false;this.init=function(args){if(bf_login.initialized){return false}if(bf_login.initialization){setTimeout(this.init.bind(this,args),300);return false}bf_login.initialization=true;try{this.already_sent=false;bf_login.ajax=new BF_Request();bf_register=new BF_Register();gplus=new BF_GplusSignin();var user=new BF_User();var logged_in_elements=$$(".logged-in");var logged_out_elements=$$(".not-logged-in");if(user.isLoggedIn()){logged_in_elements.each(function(el){el.show()});logged_out_elements.each(function(el){el.hide()});if(typeof(localStorage)!="undefined"&&localStorage.getItem("bf_login.delayedLoggedInCallbacks")){try{var storedCallbacks=localStorage.getItem("bf_login.delayedLoggedInCallbacks").evalJSON();for(var i=0;i<storedCallbacks.length;i++){if(!Object.isArray(storedCallbacks[i].params)){storedCallbacks[i].params=[storedCallbacks[i].params]}if(typeof window[storedCallbacks[i].obj]!="undefined"){window[storedCallbacks[i].obj][storedCallbacks[i].fn].apply(window[storedCallbacks[i].obj],storedCallbacks[i].params)}else{new PeriodicalExecuter(function(cb){return function(pe){if(typeof window[cb.obj]!="undefined"){pe.stop();window[cb.obj][cb.fn].apply(window[cb.obj],cb.params)}}}(storedCallbacks[i]),0.5)}}localStorage.removeItem("bf_login.delayedLoggedInCallbacks")}catch(e){console.log(e)}}}else{logged_in_elements.each(function(el){el.hide()});logged_out_elements.each(function(el){el.show()})}if(BF_STATIC.facebook_enabled){$$(".hide-unless-facebook-enabled").each(function(el){el.show()})}var si_user=new BF_User();if(document.location.pathname.toString().match(/\/(signin|signin\/)$/)&&si_user.isLoggedIn()&&document.location.search.indexOf("microsite")==-1){var si_user_info=si_user.getUserInfo();var userpage=BF_STATIC.web_root+"/"+si_user_info.username;document.location.href=userpage;return}if(!si_user.isLoggedIn()&&document.location.search.indexOf("microsite")!=-1){window.location.href=document.location.pathname}if(args){this.args=args}var forgot_password_form=$("forgot-password-form");if(forgot_password_form){forgot_password_form.observe("submit",function(event){event.stop();bf_login.reset_password()}.bind(this))}var login_form;if(signin.signin_page&&signin.wrap){login_form=signin.wrap.select("#login-form")[0]}else{login_form=$("login-form")}if(login_form){login_form.observe("submit",function(event){event.stop();bf_login.login()}.bind(this))}var link_accounts_form=$("link-accounts-form");if(link_accounts_form){link_accounts_form.observe("submit",function(e){e.stop();bf_login.link_accounts()}.bind(this))}var forgot_password_link=$("forgot-password-link");if(forgot_password_link){forgot_password_link.observe("click",function(event){event.stop();$("login-form").hide();$("forgot-password-form").show()}.bind(this))}var registration_form=$("regsitration-form");if(registration_form&&$("switch_to_register")){$("switch_to_register").observe("click",function(e){e.stop();$("login-form").hide();$("regsitration-form").showOnScreen()})}else{if($("switch_to_register")){$("switch_to_register").observe("click",function(e){e.stop();window.location.href=BF_STATIC.web_root+"/signup"})}}var switch_to_login=$("switch_to_login");if(switch_to_login){switch_to_login.observe("click",function(event){event.stop();bf_login.switch_registration_to_login()}.bind(this))}var forgot_password_cancel=$("forgot-password-cancel");if(forgot_password_cancel){forgot_password_cancel.observe("click",function(event){event.stop();bf_login.cancel_reset_password()}.bind(this))}if(document.location.search.indexOf("badauth=true")>-1){$("bad-cookie-message").show()}if(BF_STATIC&&BF_STATIC.facebook_enabled==true){if($("facebook-login")){$("login-form").addClassName("facebook-enabled");$("facebook-login").show()}}if(document.location.pathname.toString().match(/\/(signin|signin\/)$/)){facebook.auto_register_enabled=false;facebook.link_accounts_enabled=true}bf_login.initialized=true}catch(e){console.error(e);bf_login.initialization=false}};this.switch_login_to_alias_registration=function(){$("login-form").hide();$("regsitration-form").hide();$("alias-registration-form").show();$("user_signin_message").hide();$("create_site_message").show()};this.switch_login_to_registration=function(){facebook.auto_register_enabled=false;facebook.observe("user_logged_in",function(){var su_page=BF_STATIC.tt_page=="Signup"?true:false;var submit_button=su_page?"fb-register-button":"submit-button";var email="get_from_facebook@buzzfeed.com";var initial_registration_fieldset=$("initial-registration-fieldset");var facebook_connected_div=$("facebook-connected-div");var facebook_button_div=$("facebook-registration-fieldset");var temp_pw="";var character='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_!@#$%^&*(){}[]:";<>,./?|';try{email=facebook.user_data.email}catch(e){}if(facebook_button_div){facebook_button_div.hide()}if(initial_registration_fieldset){initial_registration_fieldset.hide()}if(facebook_connected_div){facebook_connected_div.show()}for(var i=0;i<10;i++){temp_pw+=character[Math.round(Math.random()*character.length-1)]}event_handler.HANDLERS.map_into({target:{value:temp_pw}},{target:submit_button,field:"register.pw2"});event_handler.HANDLERS.map_into({target:{value:temp_pw}},{target:submit_button,field:"register.pw"});event_handler.HANDLERS.map_into({target:{value:facebook.session.userID}},{target:submit_button,field:"register.facebook_uid"});event_handler.HANDLERS.map_into({target:{value:email}},{target:submit_button,field:"register.email"});if(su_page){signup_page.openDialog("fb")}});if($("login-form")){$("login-form").hide()}if($("regsitration-form")){$("regsitration-form").show()}if($("alias-registration-form")){$("alias-registration-form").hide()}if($("new-registration-form")){$("new-registration-form").show()}BF_UserSwitcher.count_aliases(function(obj){if($("alias-sites-left")&&obj.success){var user_info=new BF_User().getUserInfo();var remaining=parseInt(user_info.max_aliases)-parseInt(obj.count);$("alias-sites-left").update(remaining);if(remaining==1){$("alias-sites-left-plural").hide()}if(obj.unlimited==1){$("alias-count-message").hide()}else{$("alias-count-message").show()}if(remaining<=0&&user_info.max_aliases!=0){$("alias-registration-fieldset").hide();$("alias-registration-hit-limit").show()}}})};this.switch_to_link_accounts=function(){if($("login-form")){$("login-form").hide()}if($("regsitration-form")){$("regsitration-form").hide()}if($("link-accounts-form")){$("link-accounts-form").show()}if($("alias-registration-form")){$("alias-registration-form").hide()}};this.switch_registration_to_login=function(){if($("link-accounts-form")){$("link-accounts-form").hide()}$("login-form").show();$("regsitration-form").hide();if($("alias-registration-form")){$("alias-registration-form").hide()}};this.cancel_reset_password=function(){$("login-form").show();$("forgot-password-form").hide();$("alias-registration-form").hide()};this.reset_password=function(){if(this.already_sent){return}this.already_sent=true;if(!signin.signin_page){$("forgot-password-cancel").hide();var reset_password_status=$("resetting-password-status");if(reset_password_status){reset_password_status.show()}$("forgot-password-message").hide()}var email;if(signin.signin_page&&signin.wrap){email=signin.wrap.select("#login-email")[0].value}else{email=$F("login-email")}if(email==local.t("Email address")&&signin.signin_page){email=""}if(!email){if(signin.signin_page){signin.register_errors("email",local.t("Please provide a valid email address."));this.setError(this.PASSWORD_ERR,"forgot-password")}else{this.setError(this.PASSWORD_ERR,local.t("forgot-password"));if(reset_password_status){reset_password_status.hide()}if($("forgot-password-cancel")){$("forgot-password-cancel").show()}}this.already_sent=false}else{$("forgot-password-submit").disabled=true;var lr=function(resp){this.passwordSent(resp)}.bindAsEventListener(this);var er=function(resp){if($("forgot-password-cancel")){$("forgot-password-cancel").show()}this.err(resp,"forgot-password")}.bindAsEventListener(this);var params={email:email};bf_login.ajax.request("/buzzfeed/_forgot_password",{method:"get",parameters:params,onSuccess:lr,onFailure:er})}};this.link_accounts=function(){try{if($("link-accounts-status")){$("link-accounts-status").show()}$("link-accounts-message").hide();var username=$F("link-accounts-username");var password=$F("link-accounts-password");if(!username||!password){if($("link-accounts-status")){$("link-accounts-status").hide()}this.setError(this.LOGIN_ERR,"link-accounts")}else{$("link-accounts-submit").disabled=true;var lr=function(resp){this.loggedIn(resp,{link_accounts:1})}.bindAsEventListener(this);var er=function(resp){$("link-accounts-status").hide();$("link-accounts-submit").enable();$("link-accounts-message").update(this.LOGIN_ERR)}.bindAsEventListener(this);var params={username:username,password:password,contribute:1};bf_login.ajax.request("/buzzfeed/_www_login",{method:"post",parameters:params,onSuccess:lr,onFailure:er})}}catch(e){console.error(e)}};this.login=function(){try{if($("bad-cookie-message")){$("bad-cookie-message").hide()}if($("logging-in-status")){$("logging-in-status").show()}if($("login-message")){$("login-message").hide()}var username;var password;try{if(signin.signin_page&&signin.wrap){username=signin.wrap.select("#login-username")[0].value;password=signin.wrap.select("#login-password")[0].value}else{username=$F("login-username");password=$F("login-password")}}catch(e){}if(typeof arguments[0]!="undefined"&&typeof arguments[0]["username"]!="undefined"&&typeof arguments[0]["password"]!="undefined"){username=arguments[0]["username"];password=arguments[0]["password"]}if(!username||!password){if($("logging-in-status")){$("logging-in-status").hide()}this.setError(this.LOGIN_ERR);signin.register_errors("username",local.t("Please provide a valid username and password."))}else{if($("login-submit")){$("login-submit").disabled=true}var lr=function(loginResp){bf_login.loggedIn(loginResp)}.bindAsEventListener(this);var er=function(resp){this.err(resp)}.bindAsEventListener(this);var params={username:username,password:password,contribute:1};bf_login.ajax.request("/buzzfeed/_www_login",{method:"post",parameters:params,onSuccess:lr,onFailure:er})}}catch(e){console.error(e)}};this.cookieLogin=function(){var lr=function(resp){this.loggedIn(resp)}.bindAsEventListener(this);var er=function(resp){this.err(resp)}.bindAsEventListener(this);var params={session_key:BFW_Util.getCookie(BFW_COOKIE)};new Ajax.Request("/buzzfeed/_www_login",{method:"post",parameters:params,onSuccess:lr,onFailure:er})};this.passwordSent=function(resp){if(signin.signin_page){signin.pw_response(resp)}if($("forgot-password-cancel")){$("forgot-password-cancel").show()}var reset_password_status=$("resetting-password-status");try{obj=eval("("+resp.responseText+")");if(typeof obj.updated!="undefined"&&obj.updated=="true"){this.setError(this.PASSWORD_SUCCESS,"login");$("login-message").className="message success";if(reset_password_status){reset_password_status.hide()}$("login-form").show();$("forgot-password-form").hide()}else{if("User needs validation"==obj.error){this.setError(this.NEED_VALIDATION_ERROR,local.t("forgot-password"));if(reset_password_status){reset_password_status.hide()}}else{this.setError(obj.error,local.t("forgot-password"));this.already_sent=false;if(reset_password_status){reset_password_status.hide()}}}}catch(e){console.dir({e:e});if(reset_password_status){reset_password_status.hide()}}};this.loggedInCallbacks=[];this.delayedLoggedInCallbacks=[];this.loggedIn=function(resp,args){if(!args){this.args?args=this.args:args={}}if(document.location.search.indexOf("contribution=false")!=-1&&!this.args){this.args={action:"badge_vote"}}obj=resp.responseText?eval("("+resp.responseText+")"):resp;obj.login=obj.login==true||obj.login=="true";if(obj.login==false&&signin.signin_page&&!signin.is_gplus){signin.register_errors("username",local.t("Please provide a valid username and password."))}try{if($("login-submit")){$("login-submit").disabled=false}if($("link-accounts-submit")){$("link-accounts-submit").disabled=false}if(obj.login){if(typeof args=="undefined"||typeof args.no_reload=="undefined"){signin.close_enabled=false}else{signin.close_enabled=args.no_reload}if(typeof(return_tracker)!="undefined"){return_tracker.track_goal("signin")}var w=args.current_page=="signin_anywhere"?window:window.parent;w.BFW_Util.setCookie({name:BFW_COOKIE,value:obj.session_key});try{w.BFW_Util.setInfoCookie({value:obj})}catch(e){console.error(e)}if(!!window.facebook){facebook.link_accounts()}if(!!window.fb_app&&args.link_accounts){fb_app.link_accounts()}if(typeof prepopulated_quickpost_manager!="undefined"&&prepopulated_quickpost_manager.onLogin){prepopulated_quickpost_manager.onLogin()}if(typeof contest_manager!="undefined"&&contest_manager.onLogin){contest_manager.onLogin()}if(typeof picks_controller!="undefined"&&picks_controller!=null&&picks_controller.onLogin){picks_controller.onLogin()}if(args&&args.current_page=="home"&&!obj.test_mode&&window.location.href.indexOf("testmode=on")==-1){var url=BFW_Util.getCookie(this.AUTH_RETURN_PAGE_COOKE);if(url){BFW_Util.deleteCookie(this.AUTH_RETURN_PAGE_COOKE);window.location.href=url}else{var destination=document.referrer.indexOf("/dashboard")<0?escape(obj.username):"dashboard";var newloc=BF_STATIC.web_root+"/"+destination;BF_Request.location({location:newloc})}}else{if(args&&args.action=="vote"&&vote_manager.contribution_id){vote_manager._vote(null,vote_manager.contribution_id);if($("registration-div")){$("login-message").show();$("login-message").className="message success";$("login-message").update(local.t("Login Successful"));if($("logging-in-status")){$("logging-in-status").hide()}$("login-fieldset").hide();setTimeout(function(){fadeOut("registration-div",100)},2000)}}else{if(args&&args.action=="userdata"){var user_nav=new BF_UserNav();user_nav.init()}else{if(args&&args.action=="bookmarklet"){bf_bm.showForm()}else{if(args&&args.action=="badge_vote"){$("registration-div").hide();if($("contribute-preview")){$("contribute-preview").hide()}}else{if(args&&args.current_page=="self-serve"){$("self-serve-registration-div").hide();$("self-serve-buttons").show();if($("contribute-preview")){$("contribute-preview").hide()}bf_register.self_serve_submit_handler()}}}}}}if(args.current_page=="signin_anywhere"){if(window.parent.$("usernav-signin")){window.parent.$("usernav-signin").hide()}if(window.parent.$("usernav-signup")){window.parent.$("usernav-signup").hide()}var user_nav=new window.parent.BF_UserNav();user_nav.init();if(window.parent.bf_login.loggedInCallbacks){window.parent.bf_login.loggedInCallbacks.each(function(fn){fn()})}}else{if($("usernav-signin")){$("usernav-signin").hide()}if($("usernav-signup")){$("usernav-signup").hide()}var user_nav=new BF_UserNav();user_nav.init();if(this.loggedInCallbacks){this.loggedInCallbacks.each(function(fn){fn()})}}if(typeof(localStorage)!="undefined"){localStorage.setItem("bf_login.delayedLoggedInCallbacks",Object.toJSON(bf_login.delayedLoggedInCallbacks))}var si_user=new BF_User();if(document.location.pathname.toString().match(/\/(signin|signin\/)$/)&&si_user.isLoggedIn()&&document.location.search.indexOf("microsite")==-1){var si_user_info=si_user.getUserInfo();var userpage=BF_STATIC.web_root+"/"+si_user_info.username;document.location.href=userpage;return}else{if(document.location.pathname.toString().match(/forgot_pass/)){return true}else{if(typeof signin!="undefined"&&signin.modal_mode&&signin.modal_mode=="badges"){signin.close_enabled=true;if(!signin.social_register){signin.close()}return true}else{var isUserSwitchingPassed=(!args||(typeof args.no_reload!="undefined"&&args.no_reload==true));if(isUserSwitchingPassed){return false}BF_Request.location({reload_track:true});return true}}}}else{bf_login.clear_invalid_session(resp);if(obj.requires_oauth){try{signin.register_errors("username","Logging in with oauth; make sure you do not block the popup.")}catch(e){this.setError("Logging in with oauth; make sure you don't block the popup.")}window.open("/buzzfeed/oauth_signin?username="+obj.username,"OAuth","width=500,height=500")}else{if(args.link_accounts){this.setError(this.AUTH_ERR,"link-accounts")}else{this.setError(this.AUTH_ERR)}}if($("logging-in-status")){$("logging-in-status").hide()}if($("link-accounts-status")){$("link-accounts-status").hide()}}}catch(e){console.dir({e:e})}};this.clear_invalid_session=function(resp){if(!resp){resp={}}if((new BF_User()).isLoggedIn()&&resp.status!=0){if(!"user_nav" in window){setTimeout(bf_login.clear_invalid_session,250)}if(!!window.facebook){facebook.logout(user_nav.signout)}else{user_nav.signout()}}};this.err=function(resp,target){bf_login.clear_invalid_session();this.setError(this.ERR,target);if($("logging-in-status")){$("logging-in-status").hide()}if($("resetting-password-status")){$("resetting-password-status").hide()}};this.setError=function(err,target){if(!target){target="login"}try{$(target+"-message").update(err)}catch(e){if($(target+"-message")){$(target+"-message").innerText=err}}if(!signin.signin_page){$(target+"-message").className="message error";$(target+"-message").show()}$(target+"-submit").disabled=false}};bf_login=new BF_Login();BuzzLoader.register(bf_login.init,1);var fadeOut=function(b,a){$(b).setOpacity(a/100);if(a>0){setTimeout("fadeOut('"+b+"',"+(a-2)+")",5)}else{$(b).hide()}};var BF_UserSwitcher={controller:"/buzzfeed/_switch",template:'<li><a href="" onclick="return false" class="switch-to-user" rel:id="#{id}"><img src="#{root}#{image}"/>#{display_name}</a></li>',template_bottom_div:'<li class="#{hl}"><a href="" onclick="return false" rel:username="#{username}"><span class="list-username" rel:username="#{username}">#{username}</span> #{display_name}</a><span class="hl chosen"></span></li>',latest_switch_list:[],latest_switch_list_loaded:false,was_ajax:false,switcher:null,bottom_warning_div:null,bottom_warning_select:null,is_user_switcher:false,selected_user:null,init:function(b){try{if(!acl.user_can("general_admin")){return false}if(b!=null){BF_UserSwitcher.selected_user=b}if(BF_UserSwitcher.is_user_switcher){BF_UserSwitcher.apply_visibility();return false}BF_UserSwitcher.switcher=$("quickpost-user-switcher");if(BF_UserSwitcher.switcher){BF_UserSwitcher.is_user_switcher=true}BF_UserSwitcher.apply_visibility();if(acl.user_can("general_admin")){BF_UserSwitcher._switch_list_ui([""],"bottom");universal_dom.get_bucket_elements("switch_users").each(function(f){var c=BF_UserSwitcher.switcher.select(".switch_user_list")[0];f.observe("click",function(){if(c.style.display=="block"){return false}c.style.display="block";universal_dom.get_bucket_elements("switch_user_dialog").each(function(g){g.update("Loading...")});BF_UserSwitcher.getSwitchList(BF_UserSwitcher._switch_list_ui,"bottom",true)});Event.observe(window,"click",function(g){if(!$(g.target).childOf||!$(g.target).childOf(BF_UserSwitcher.switcher)){c.style.display="none"}})})}}catch(a){console.error(a)}},apply_visibility:function(){try{if(!BF_UserSwitcher.is_user_switcher){return false}var a=(new BF_User()).getUserInfo();if(BF_UserSwitcher.selected_user==null){if(typeof edit_post!="undefined"){BF_UserSwitcher.selected_user=edit_post.buzz.username}else{BF_UserSwitcher.selected_user=a.username;$$(".switched-display_name").each(function(f){if(f.hasClassName("bottom_display_name")){f.update(a.display_name)}})}}if(acl.user_can("general_admin")){var b;if(typeof edit_post!="undefined"){b=edit_post.buzz.username}else{b=a.default_user.username}}else{BF_UserSwitcher.switcher.style.display="none"}}catch(c){console.error(c)}},sw_bottom_div:function(b){try{b.stop();var a=BF_UserSwitcher.switcher.select(".switch_user_list")[0];a.select("li a").each(function(c){if(b.target==c||b.target.parentNode==c){BF_UserSwitcher.selected_user=c.getAttribute("rel:username");c.parentNode.addClassName("hl");superlist_bylines.set_add_bylines(BF_UserSwitcher.selected_user,true);universal_dom.get_bucket_elements("switch_user_dialog")[0].hide()}else{c.parentNode.removeClassName("hl")}});BF_UserSwitcher.apply_visibility()}catch(b){console.error(b)}},fill_switch_div:function(f){try{if(!BF_UserSwitcher.is_user_switcher){return false}var c=new Template(BF_UserSwitcher.template_bottom_div);var b="<ul>";var a=(new BF_User()).getUserInfo();u=a.default_user;f.unshift({display_name:decodeURIComponent(u.display_name.unescapeHTML()),username:u.username,image:u.image,userid:u.userid});if(typeof edit_post!="undefined"){f.unshift({display_name:decodeURIComponent(edit_post.buzz.user_displayname.unescapeHTML()),not_user:true,username:edit_post.buzz.username,image:edit_post.buzz.user_image,userid:edit_post.buzz.userid})}f.each(function(k){if(k.p_disable_quickpost=="1"){return false}if(typeof edit_post!="undefined"&&k.username==edit_post.buzz.username&&!k.not_user){return false}var h=(BF_UserSwitcher.selected_user==k.username)?true:false;b+=c.evaluate({display_name:k.display_name,username:k.username,hl:(h?"hl":"")})});var f=BF_UserSwitcher.switcher.select(".switch_user_list")[0];f.update(b+"</ul>");f.select("ul a").each(function(h){h.observe("click",BF_UserSwitcher.sw_bottom_div)})}catch(g){console.error(g)}},switch_callback:function(){try{var a=(new BF_User()).getUserInfo();if(typeof edit_post=="undefined"){if(BF_UserSwitcher.is_user_switcher){BF_UserSwitcher.selected_user=a.username}$$(".switched-display_name").each(function(f){f.update(a.display_name)})}else{$$(".switched-display_name").each(function(f){if(!f.hasClassName("bottom_display_name")){f.update(a.display_name)}})}if(a.p_disable_quickpost=="true"){BF_Request.location({reload_track:true});return false}if(BF_UserSwitcher.is_user_switcher){var b=BF_UserSwitcher.switcher.select(".switch_user_list")[0];b.style.display="none";BF_UserSwitcher.apply_visibility()}}catch(c){console.error(c)}},swfunction:function(a){try{a.stop();var b=a.target.getAttribute("rel:id");BF_UserSwitcher.switchTo(b,BF_UserSwitcher.switch_callback)}catch(a){console.error(a)}},switch_list_ui:function(a){try{a.stop();if($("switch-list-spinner")){$("switch-list-spinner").show()}this.getSwitchList(BF_UserSwitcher._switch_list_ui,"top")}catch(a){console.error(a)}},_switch_list_ui:function(f,a,m){if(!$("usernav-switch-list")){return}try{if(m&&BF_UserSwitcher.is_user_switcher){var k=f.slice(0);BF_UserSwitcher.fill_switch_div(k)}var h=(new BF_User()).getUserInfo();var l=new Template(BF_UserSwitcher.template);var b='<a class="close_switch_list_ui" href="javascript:;" onclick="BF_UserSwitcher.hide_switch_list_ui();return false;"><img src="'+BF_STATIC.static_root+'/images/public/video-lightbox/closebox.png" alt="Close"/></a><ul>';var g=(typeof h.default_user.image=="undefined"||h.default_user_image==null)?"":h.default_user.image;if(g==null||g==""){g="/static/images/public/defaults/user.jpg"}f.unshift({image:decodeURIComponent(g.unescapeHTML()),display_name:decodeURIComponent(h.default_user.display_name.unescapeHTML()),userid:h.default_user.userid});f.each(function(n){if(typeof n.image=="undefined"||n.image==""||n.image==null){n.image="/static/images/public/defaults/user.jpg"}b+=l.evaluate({image:n.image,display_name:n.display_name,id:n.userid,root:BF_STATIC.image_root})});if(h.p_alias=="true"||(typeof h.default_user!="undefined"&&h.default_user.p_alias=="true")){b+='<li><a href="'+BF_STATIC.web_root+'/signup"><img src="'+BF_STATIC.static_root+'/images/public/icons/new-microsite.png" alt="" width="25" height="25" /><i>Create Another BuzzFeed</i></a></li>'}$("usernav-switch-list").update(b+"</ul>");if(a=="top"){$("usernav-switch-list").show();if($("switch-list-spinner")){$("switch-list-spinner").hide()}}$$(".switch-to-user").each(function(n){n.observe("click",BF_UserSwitcher.swfunction)});$$(".switched-display_name").each(function(n){if(!n.hasClassName("bottom_display_name")){n.update(h.display_name)}});BF_UserSwitcher.apply_visibility()}catch(c){console.error(c)}},hide_switch_list_ui:function(){$("usernav-switch-list").hide()},switchTo:function(h,g){try{var b=new BF_User();if(b.isLoggedIn()){var a=b.getUserInfo();if(typeof a.default_user!="undefined"){if(a.userid==h){$("usernav-switch-list").hide();if($("switch-list-spinner")){$("switch-list-spinner").hide()}}else{$("usernav-switch-list").hide();if($("switch-list-spinner")){$("switch-list-spinner").show()}var c=new BF_Request();c.request(BF_UserSwitcher.controller,{method:"post",parameters:{action:"switch",default_username:a.default_user.username,default_session_key:a.default_user.session_key,switch_id:h},onSuccess:function(k){BF_UserSwitcher._switchTo(k,g)}})}}}}catch(f){console.error(f)}},_switchTo:function(b,f){try{var a={};if(window.location.href.match("/signup")){a={no_reload:true}}bf_login.loggedIn(b,a);f();if($("switch-list-spinner")){$("switch-list-spinner").hide()}}catch(c){console.error(c)}},getSwitchListFor:function(f,c){try{if(!acl.user_can("edit_user_accounts")){return}var a=new BF_Request();a.request(BF_UserSwitcher.controller,{method:"post",parameters:{action:"switch_list_for",username:f},onSuccess:function(g){BF_UserSwitcher._getSwitchList(g.responseText,c)}})}catch(b){console.error(b)}},getSwitchList:function(l,f,a){try{if(BF_UserSwitcher.was_ajax){var h=BF_UserSwitcher.latest_switch_list;h.shift();h=JSON.stringify(h);BF_UserSwitcher._getSwitchList('{"success" : 1, "switch_list" :'+h+"}",l,f,a)}else{if(typeof a=="undefined"){a=false}var c=new BF_User();if(c.isLoggedIn()){var b=c.getUserInfo();if(typeof b.default_user!="undefined"){var g=new BF_Request();g.request(BF_UserSwitcher.controller,{method:"post",parameters:{action:"switch_list",default_username:b.default_user.username,default_session_key:b.default_user.session_key},onSuccess:function(m){BF_UserSwitcher._getSwitchList(m.responseText,l,f,a);BF_UserSwitcher.was_ajax=true},on401:function(){console.warn("Insufficient Permissions")}})}}}}catch(k){console.error(k)}},_getSwitchList:function(responseText,callback,cbparam,withSelect){try{if(callback==undefined){return false}var obj=eval("("+responseText+")");if(obj.success=="1"){BF_UserSwitcher.latest_switch_list=obj.switch_list.slice(0);var user_info=(new BF_User()).getUserInfo();u=user_info.default_user;BF_UserSwitcher.latest_switch_list.unshift({display_name:decodeURIComponent(u.display_name.unescapeHTML()),username:u.username,image:decodeURIComponent(u.image.unescapeHTML()),userid:u.userid});BF_UserSwitcher.latest_switch_list_loaded=true;callback(obj.switch_list,cbparam,withSelect)}}catch(e){console.error(e)}},show_warning:function(){try{var b=new BF_User();if(b.isLoggedIn()){var a=b.getUserInfo();if(!window.location.pathname.match("/dashboard$")&&typeof a.default_user!="undefined"&&a.default_user.username!=a.username){$$(".switched-display_name").each(function(f){f.update(a.display_name)});$$(".switch-warning").each(function(f){f.show()})}else{$$(".switch-warning").each(function(f){f.hide()})}}}catch(c){console.error(c)}},_getSwitchList:function(responseText,callback,cbparam,withSelect){if(callback==undefined){return false}var obj=eval("("+responseText+")");if(obj.success=="1"){if(typeof obj.switch_list.users!=="undefined"){BF_UserSwitcher.latest_switch_list=obj.switch_list.users.slice(0)}else{BF_UserSwitcher.latest_switch_list=obj.switch_list.slice(0)}var user_info=(new BF_User()).getUserInfo();u=user_info.default_user;BF_UserSwitcher.latest_switch_list.unshift({display_name:unescape(u.display_name),username:unescape(u.username),userid:unescape(u.userid)});BF_UserSwitcher.latest_switch_list_loaded=true;callback(obj.switch_list,cbparam,withSelect)}},disable_private_fields:function(){try{var b=new BF_User();if(b.isLoggedIn()){var a=b.getUserInfo();if(typeof a.default_user!="undefined"&&a.default_user.username!=a.username){var f=["user-settings-button"];f.each(function(g){if($(g)){$(g).style.display="none"}})}}}catch(c){console.error(c)}},create_alias_for:function(a,b){if(typeof a.username=="undefined"||typeof a.alias_username=="undefined"){BF_UserSwitcher._create_alias({status:500,responseText:Object.toJSON({success:0,message:"Oops! You need to tell us your desired URL"})},b);return}if(!acl.user_can("edit_user_accounts")){return}(new BF_Request()).request(BF_UserSwitcher.controller,{method:"post",parameters:{action:"add_alias_for",username:a.username,alias_username:a.alias_username},onSuccess:function(c){BF_UserSwitcher._create_alias(c,b)},onFailure:function(c){BF_UserSwitcher._create_alias(c,b)}})},create_alias:function(c,g){if(typeof c.username=="undefined"||typeof c.display_name=="undefined"){BF_UserSwitcher._create_alias({status:500,responseText:Object.toJSON({success:0,message:"Oops! You need to tell us your desired URL"})},g);return}var b=new BF_User();if(b.isLoggedIn()){var a=b.getUserInfo();if(typeof a.default_user!="undefined"){var f=new BF_Request();if(c.self_serve==1){f.request(BF_UserSwitcher.controller,{method:"post",parameters:{action:"add_alias",username:c.username,display_name:c.display_name,default_username:a.default_user.username,default_session_key:a.default_user.session_key,self_serve:1},onSuccess:function(h){BF_UserSwitcher._create_alias(h,c.username,g)},onFailure:function(h){BF_UserSwitcher._create_alias(h,c.username,g)}})}else{f.request(BF_UserSwitcher.controller,{method:"post",parameters:{action:"add_alias",username:c.username,display_name:c.display_name,default_username:a.default_user.username,default_session_key:a.default_user.session_key},onSuccess:function(h){BF_UserSwitcher._create_alias(h,g)},onFailure:function(h){BF_UserSwitcher._create_alias(h,g)}})}}else{BF_UserSwitcher._create_alias({status:500,responseText:Object.toJSON({success:0,message:"Insufficient privileges"})},g)}}else{BF_UserSwitcher._create_alias({status:500,responseText:Object.toJSON({success:0,message:"User not logged in"})},g)}},_create_alias:function(r,callback){var obj=eval("("+r.responseText+")");obj.status=r.status;callback(obj)},count_aliases:function(f){var b=new BF_User();if(b.isLoggedIn()){var a=b.getUserInfo();if(typeof a.default_user!="undefined"){var c=new BF_Request();c.request(BF_UserSwitcher.controller,{method:"post",parameters:{action:"count_aliases",default_username:a.default_user.username,default_session_key:a.default_user.session_key},onComplete:function(g){BF_UserSwitcher._count_aliases(g,f)}})}}},_count_aliases:function(r,callback){var obj=eval("("+r.responseText+")");obj.status=r.status;callback(obj)}};if(typeof edit_post=="undefined"){BuzzLoader.register(BF_UserSwitcher.init,1)}BF_UserNav=function(){_bfuser=this;this.user;this.user_info;this.REFRESH_LOGIN_AFTER_N_SECONDS=6*60*60;this.els={};this.init=function(){universal_dom.assign_handler({bucket:"insert_url",handler:user_nav.insert_url});_bfuser.user=new BF_User();_bfuser.user_info=_bfuser.user.getUserInfo();_bfuser.scrapeDOM();if(_bfuser.user.isLoggedIn()){_bfuser.isLoggedIn()}else{_bfuser.showLoggedOutUI()}};this.scrapeDOM=function(){_bfuser.els.signin=$s("#usernav-signin");_bfuser.els.signout=$s("#usernav-signout");_bfuser.els.settings=$s("#usernav-settings");_bfuser.els["usernav-ul"]=$s("#usernav-ul",true);_bfuser.els["usernav-dashboard"]=$s("#usernav-dashboard");_bfuser.els["user-image-wrapper"]=$s("#usernav-image");_bfuser.els["user-image"]=$s("#usernav-image img");_bfuser.els["user-image-default"]=$s("#default-user-image");_bfuser.els["usernav-profile"]=$s("#usernav-profile");_bfuser.els["usernav-switch"]=$s("#usernav-switch")};this.isLoggedIn=function(){_bfuser.verifyUserInfo();_bfuser.triggerPicks();_bfuser.updateUserImage();_bfuser.els.signout.observe("click",_bfuser.callSignout.bindAsEventListener(this));_bfuser.toggleSwitchUsers();_bfuser.triggerDashboard();_bfuser.showLoggedInUI()};this.verifyUserInfo=function(){if(!_bfuser.user_info||!_bfuser.user_info.username||_bfuser.user_info.username!=_bfuser.user.getUsernameFromSession()){BF_Request.statsd.increment("logout.bad_user_info");_bfuser.signout()}};this.triggerPicks=function(){picks_controller=null;if(typeof(BF_PicksController)!="undefined"){picks_controller=new BF_PicksController();picks_controller.init()}};this.updateUserImage=function(){if(_bfuser.user_info.image&&_bfuser.user_info.image!=null&&_bfuser.user_info.image!="null"){_bfuser.els["user-image"].src=BF_STATIC.image_root+_bfuser.user_info.image;_bfuser.els["user-image-wrapper"].show()}else{_bfuser.els["user-image-default"].show()}universal_dom.get_bucket_elements("usernav-profile-link").invoke("setAttribute","href",BF_STATIC.web_root+"/"+_bfuser.user_info.username)};this.toggleSwitchUsers=function(){if(_bfuser.default_user!="undefined"){_bfuser.els["usernav-switch"].show();$$("#usernav-switch-link").each(function(a){$(a).stopObserving("click");$(a).observe("click",function(b){BF_UserSwitcher.switch_list_ui(b)})});BF_UserSwitcher.show_warning();BF_UserSwitcher.disable_private_fields()}else{_bfuser.els["usernav-switch"].hide()}};this.triggerDashboard=function(){var a=(_bfuser.user_info.p_dashboard=="true"?true:false);_bfuser.els["usernav-dashboard"][a?"removeClassName":"addClassName"]("hidden")};this.showLoggedInUI=function(){_bfuser.els.signout.show();_bfuser.els.settings.show();_bfuser.els["usernav-ul"].show();_bfuser.els["usernav-profile"].show()};this.showLoggedOutUI=function(){_bfuser.els.signin.show();_bfuser.els.settings.hide()};this.callSignout=function(a){a.stop();BF_Request.statsd.increment("logout.button");if(!!window.facebook){facebook.logout(function(){user_nav.signout()})}else{user_nav.signout()}};this.signout=function(a){if(typeof a=="undefined"){a={}}(new BF_Request()).request("/buzzfeed/_admin_user",{method:"get",parameters:{action:"logout"},onComplete:function(){setTimeout(function(){_bfuser.signoutCb(a)},500)}})};this.signoutCb=function(a){BFW_Util.deleteCookie(BFW_COOKIE);BFW_Util.deleteCookie(BFW_INFO_COOKIE);BFW_Util.deleteCookie(DEFAULT_USER);BFW_Util.deleteCookie("extensive_user_data");if(typeof(gapi)!="undefined"&&typeof(gapi.auth)!="undefined"){gapi.auth.signOut()}if(typeof gtrack!="object"){gtrack.loggedInStatus()}if(!a.no_reload&&!window.location.href.match(/\/settings/)){BF_Request.location({reload_track:true})}if(window.location.href.match(/\/settings/)){window.location.href=BF_STATIC.web_root+"/signin"}};this.insert_url=function(f,b){for(x in b){try{d=b[x];if(d.url&&d.where){var a=new RegExp(d.where);var g=f.innerHTML;g=g.replace(a,'<a href="'+d.url+'">$1</a>');f.update(g)}}catch(c){console.dir({e:c})}}}};var user_nav=new BF_UserNav();BuzzLoader.register(function(){user_nav.init()},1);var bf_event_handler=function(){this.CLASS=".behavior";this.ACTION_ATTRIBUTE="rel:actions";this.DATA_ATTRIBUTE="rel:data";function _markAsEdited(element,data,replaceValue){var remove_class=(typeof data!="undefined"&&typeof data.remove_class!="undefined")?data.remove_class:"initial-field-state";var set_value=(typeof data!="undefined"&&typeof data.set_value!="undefined")?data.set_value:"";var default_value=element.getAttribute("defaultValue")||"";if(default_value.length==0){element.setAttribute("defaultValue",element.value)}if(element.className.match(new RegExp(remove_class))){element.removeClassName(remove_class);if(replaceValue){element.value=set_value}if(typeof data!="undefined"&&data.set_type){try{element.setAttribute("type",data.set_type)}catch(e){var new_field=element.cloneNode(true);if(!isIE8()){new_field.setAttribute("type",data.set_type)}element.parentNode.replaceChild(new_field,target)}}}}this.HANDLERS={call:function(e,data){var fn=eval(data.fn);fn(data.data?data.data:data)},share_email:function(e,data){var target,targetEl=e.toElement?e.toElement:(e.relatedTarget||e.target);target=targetEl.findParent(".shareBtn");if(!target){target=targetEl.findParent(".circle-email-share")}if(!target){target=targetEl.findParent(".inlineShareBtn")}if(!target){target=targetEl}shareEmail.locate_form_and_share_email(target,data.buzz_id,data.no_scroll)},register:function(e,data){var user=new BF_User();if(user.isLoggedIn()&&!(data.create_advertiser_account||data.create_contributor_account)){bf_register.register_alias(data)}else{bf_register.new_register(data)}},map_into:function(e,data){var target=e.target;var update_el=$(data.target);var value=target.value;if(data.value){value=data.value(target)}if(update_el){var json=eval("("+update_el.getAttribute("rel:data")+")");var field=data.field.split(".");var obj=json;var end_field=field.pop();while(field.length){var f=field.shift();if(typeof obj[f]!="undefined"){obj=obj[f]}else{obj[f]={}}}if(data.append){obj[end_field]=(typeof obj[end_field]=="undefined"?"":obj[end_field]+data.append)+value}else{obj[end_field]=value}update_el.setAttribute("rel:data",Object.toJSON(json));if(data.hide&&$(data.hide)){$(data.hide).hide()}}},mark_as_edited:function(e,data){_markAsEdited(e.target,data,false)},clear_default_field:function(e,data){_markAsEdited(e.target,data,true)},restore_default_field:function(ev){var el=ev.target;if(el.value.length>0){return}el.type="text";el.value=el.getAttribute("defaultValue");el.addClassName("initial-field-state")},filter_chars:function(e,data){if(e.keyCode==37||e.keyCode==39){return}var regex=data.disallow;var target=e.target;var newValue=target.value.replace(regex,"");if(target.value!=newValue){target.value=newValue}},upload_image:function(e,data){this.upload_image_type=data.upload_image_type;BF_UI.showDialog("user-image-edit");event_handler.get_image_settings=function(){return data};$("user-image-edit-iframe").innerHTML="";var user_image=new BF_SETTINGS_CROPPER({container:$("user-image-edit-iframe"),controller:"/bfcgi/_edit_user_image",origin:data.iframe_src.match("action=(.*)_imageform")[1],callbacks:{save_image_callback:data.save_image_callback}})},show:function(e,data){if($(data.id)){$(data.id).removeClassName("hidden")}},hide:function(e,data){if($(data.id)){$(data.id).addClassName("hidden")}},show_placeholder:function(ev){var el=ev.target;if(el.value.length==0&&$(el.id+"-placeholder")){$(el.id+"-placeholder").removeClassName("invisible")}},hide_placeholder:function(ev){var el=ev.target;if($(el.id+"-placeholder")){$(el.id+"-placeholder").addClassName("invisible")}}};this.init_called=0;this.generic_handler=function(e){event_handler._event_handler(e)};this.init=function(){if(++event_handler.init_called>1){console.error("event_handler.init should not be called explicitly; use universal_dom.update(element) instead: "+console.trace())}else{universal_dom.assign_handler({bucket:"event_handler",handler:event_handler._assign_handlers})}};this._assign_handlers=function(el){var ACTION=0;var HANDLER=1;var actions=el.getAttribute(event_handler.ACTION_ATTRIBUTE);if(actions){var action_list=actions.split(" ");action_list.each(function(action){var pieces=action.split(":");el.stopObserving(pieces[ACTION],event_handler.generic_handler);el.observe(pieces[ACTION],event_handler.generic_handler)})}};this._event_handler=function(e){e.stop();var ACTION=0,HANDLER=1,event_type=e.type,ActAtt=event_handler.ACTION_ATTRIBUTE,target;if(e.target.hasAttribute(ActAtt)){target=e.target}else{e.target.ancestors().each(function(el){if(el.hasAttribute(ActAtt)){target=el}});if(!target){return}}var actions=target.getAttribute(ActAtt),action_list=actions.split(" ");action_list.each(function(action){var pieces=action.split(":");if(pieces[ACTION]==event_type){target.handler=pieces[HANDLER]}});if(typeof target.handler!="undefined"){var data={};var json=target.getAttribute(event_handler.DATA_ATTRIBUTE);if(json){data=eval("("+json+")")}data=typeof data[target.handler]!="undefined"?data[target.handler]:data;if(typeof event_handler.HANDLERS[target.handler]!="undefined"){var fn=event_handler.HANDLERS[target.handler];if(fn){fn(e,data)}}else{var fn=eval(target.handler);data.event=e;fn(data)}}}};var event_handler=new bf_event_handler();BuzzLoader.register(event_handler.init,1);var Facebook=function(){this.login_ok=false;this.FB_KEYWORDS_CONTROLLER="/buzzfeed/_facebook";this.fb_ad_kw_terms={};this.FACEBOOK_KW_SUGGESTION=new Template(" 		<li><a href=\"javascript:;\" onclick=\"facebook.updateKeywords('#{id}','#{keyword}',false);facebook.close_kw_dialog('#{id}');return false;\">#{keyword}</a></li> 	");this.FACEBOOK_KW_ITEM=new Template('		<li id="#{dom_id}">#{keyword} <a href="javascript:;" class="close" onclick="facebook.removeKeyword(\'#{id}\',\'#{dom_id}\', \'#{keyword}\');return false;">x</a> 	');this.FACEBOOK_BUZZ_AD=new Template(' 		<input type="hidden" name="image_file" value="http://s-ak.buzzfed.com/#{image}" /> 		<input type="hidden" name="buzz_id" value="#{campaignid}" /> 		<input type="hidden" name="interests-#{unique_id}" value="" /> 		<p class="error-message" id="error-message-#{unique_id}" style="display:none;"></p> 		<div class="c"> 			<div class="photo"><img src="http://s-ak.buzzfed.com/#{image}" /></div> 			<div class="info"> 				<fieldset> 					<input maxlength="35" type="text" name="title" value="#{name}" onkeyup="facebook.updateMaxLength(\'#{unique_id}\', \'title\', this.value);" /> 					<p class="note maxlength" id="keylength-title-#{unique_id}">25 characters</p> 				</fieldset> 				<fieldset> 					<textarea name="body" rows="2" onkeyup="facebook.updateMaxLength(\'#{unique_id}\', \'blurb\', this.value);">#{blurb}</textarea> 					<p class="note maxlength" id="keylength-blurb-#{unique_id}">25 characters</p> 				</fieldset> 				<fieldset><input type="text" name="link_url" value="#{link}" /></fieldset> 			</div> 			<div class="interests"> 				<div class="interest_field"> 					<label>Interests</label> 					<input class="keyword" onkeyup="facebook.updateKeywords(\'#{unique_id}\',this.value,true)" type="text" id="kw-#{unique_id}" /> 					<input id="search-#{unique_id}" onclick="var kw_val = $(\'kw-#{unique_id}\').value; if (kw_val && kw_val.strip() != \'\') {facebook.lookup_keywords(this.parentNode,$(\'kw-#{unique_id}\').value, \'#{unique_id}\');}" type="button" value="+" /> 					<img id="lookup-loading-#{unique_id}" style="display:none;" src="#{static_root}/images/public/spinners/small_on_white.gif" /> 					<p style="display:none;" id="users-reach-#{unique_id}">Keyword Reach: <span id="users-#{unique_id}">&hellip;</span></p> 				</div> 				<div style="display: none;" id="keywords-#{unique_id}" onmouseover="clearTimeout(this.hide_timeout);" onmouseout="facebook.keyword_suggest_mouseout(\'#{unique_id}\');" class="keywords_list"></div> 				<ul class="keywords" id="terms-#{unique_id}"></ul> 			</div> 		</div> 		<div class="reach" id="post-reach-#{unique_id}" style="display:none;"><strong>Estimated Reach:</strong> <span id="post-#{unique_id}">&hellip;</span></div> 		<a class="abs remove" title="Remove this Post" onclick="facebook.remove_ad_unit(\'#{uri}\'); return false;" href="javascript:;"></a> 	');this.SIGNIN_FOR_EXTRA_FEATURES=new Template('<div class="facebook-like-login-pane"> 		<h3>Add Your Reactions to BuzzFeed!</h3> 		<fb:login-button scope="publish_stream,email" length="long" autologoutlink="false"></fb:login-button> 		<a href="javascript:;" onclick="return false" class="bf_dom no-thanks" rel:bf_bucket="event_handler" rel:actions="click:facebook.squelch_extra_features_prompt">No Thanks</a> 		<a href="javascript:;" onclick="return false" class="bf_dom have-account" rel:bf_bucket="event_handler" rel:actions="click:facebook.show_signin_tab" rel:data="{buzz_id:#{buzz_id}}">More Sign In Options</a>	</div>');this.social_element_key="facebook";this.auto_register_enabled=true;this.auto_register_enabled=true;this.link_accounts_enabled=false;this.cache={};this.liked_hrefs=[];this.unliked_hrefs=[];this.cancel_dialog=false;this.apiInit=false;this.languages={en:"en_US",es:"es_LA",zh:"zh_CN"};this.quiz_result=function(obj){if(facebook.is_logged_in()&&facebook.has_perms("publish_stream")){facebook.publish_quiz_result(obj)}else{bf_login.loggedInCallbacks.push(function(){facebook.publish_quiz_result(obj)});facebook.FB_login("publish_stream")}};this.quickpost=function(obj){if(obj.draft){return}var fb_post=$("facebook_post_contribution_checkbox");if(fb_post&&fb_post.checked){if(facebook.is_logged_in()&&facebook.has_perms("publish_stream")){facebook.publish_quickpost(obj)}else{bf_login.loggedInCallbacks.push(function(){facebook.publish_quickpost(obj)});facebook.FB_login("publish_stream")}}};this.contribute=function(obj){var post_checkbox=$("facebook_post_contribution_checkbox");if(post_checkbox&&post_checkbox.checked==false){return}if(facebook.is_logged_in()){facebook.publish_contribution(obj)}};this.publish_quiz_result=function(obj){FB.ui({method:"stream.publish",message:"I got "+unescape(obj.result),attachment:{name:"took the "+unescape(obj.quiz_name)+" quiz on BuzzFeed and got "+unescape(obj.result),caption:"",description:(obj.quiz_description),href:obj.uri},action_links:[{text:"Take The Quiz!",href:obj.uri}],user_prompt_message:"What's on your mind"},function(response){if(response&&response.post_id){}else{}})};this._get_quickpost_base_data=function(obj){if(!obj.thumb&&obj.image_src){obj.thumb=obj.image_src}if(obj.thumb){if(!obj.thumb.match(/http:\/\//)){obj.thumb=obj.image_src}obj.images=new Array({src:obj.thumb,href:"http://buzzfeed.com/"+obj.username+"/"+obj.uri});obj.images.each(function(el){el.src=el.src.replace("http://dev.buzzfeed.com","http://facebook-dev.buzzfeed.com:8080");el.type="image"})}var base_data={message:"just posted "+obj.title+" to BuzzFeed!",attachment:{name:obj.title,caption:obj.text,media:obj.images,href:"http://buzzfeed.com/"+obj.username+"/"+obj.uri},action_links:[{text:"Respond",href:"http://buzzfeed.com/"+obj.username+"/"+obj.uri}]};return base_data};this.publish_quickpost=function(obj){if(obj.draft){return}var base_data=facebook._get_quickpost_base_data(obj);base_data.method="stream.publish";base_data.user_prompt_message="(Promote Your Post)";FB.ui(base_data,function(response){if(response&&response.post_id){}else{}})};this._publish_to_fan_page=function(data){var obj={};for(var each in data){obj[each]=data[each]}delete obj.action_links;obj.attachment=FB.JSON.stringify(obj.attachment);obj.uid=facebook.cache.user_page_id;obj.action="like_publish";if(!obj.uid){facebook.cache_data=obj;facebook._get_user_page_id()}else{facebook.request("/buzzfeed/_facebook",{method:"get",parameters:obj,onComplete:function(){}})}};this.publish_to_stream=function(args,callback){var publish=function(args,callback){FB.api("/me/feed","post",args,function(response){if(callback&&typeof callback=="function"){callback()}if(!response||response.error){}else{}})};if(facebook.is_logged_in()&&facebook.has_perms("publish_stream")){publish(args,callback)}else{bf_login.loggedInCallbacks.push(function(){publish(args,callback)});facebook.FB_login("email,publish_stream")}};this._get_user_page_id=function(){var user_info=(new BF_User()).getUserInfo();var url="http://www.buzzfeed.com/"+user_info.username;facebook.user_page_id_handler=function(result){var obj=eval(result);if(typeof obj!="undefined"&&obj.length>0){facebook.cache.user_page_id=(obj.shift()).id;facebook._publish_to_fan_page(facebook.cache_data)}else{}};facebook.request("https://api.facebook.com/method/fql.query",{inject:true,method:"get",parameters:{query:"SELECT id FROM object_url WHERE url='"+url+"'",format:"JSON",callback:"facebook.user_page_id_handler"}})};this.publish_contribution=function(obj){var user_info=(new BF_User()).getUserInfo();var username=user_info.username;if(obj.image_src){if(!obj.image_src.match(/http:\/\//)){obj.image_src=obj.image_src}obj.images=new Array({src:obj.image_src,href:obj.username?"http://buzzfeed.com/"+username+"/"+obj.uri:"http://buzzfeed.com/"+obj.uri});obj.images.each(function(el){el.src=el.src.replace("http://dev.buzzfeed.com","http://facebook-dev.buzzfeed.com:8080");el.type="image"})}FB.ui({method:"stream.publish",message:obj.text,attachment:{name:obj.parent_title,caption:"",description:(obj.parent_blurb),media:obj.images,href:"http://www.buzzfeed.com/"+obj.buzz_username+"/"+obj.buzz_uri+"?comment="+obj.id},action_links:[{text:"Respond",href:"http://www.buzzfeed.com/"+obj.buzz_username+"/"+obj.buzz_uri+"?comment="+obj.id}],user_prompt_message:""},function(response){if(response&&response.post_id){}else{}})};this.has_liked=function(href){var liked=facebook.liked_hrefs.indexOf(href);if(liked!=-1){return true}facebook.liked_hrefs.push(href);return false};this.has_unliked=function(href){var unliked=facebook.unliked_hrefs.indexOf(href);if(unliked!=-1){return true}facebook.unliked_hrefs.push(href);return false};this.liked_something=function(href,widget){if(!facebook.has_liked(href)){var where=typeof widget.dom!="undefined"?facebook.gtrack_name(widget.dom):gtrack.findCatLabel(widget);var user=new BF_User();var buzz_id=typeof widget.dom!="undefined"?widget.dom.getAttribute("rel:buzz_id"):widget.getAttribute("rel:buzz_id");var like_type=typeof widget.dom!="undefined"?widget.dom.getAttribute("rel:fb_like"):widget.getAttribute("rel:fb_like");var uri=typeof widget.dom!="undefined"?widget.dom.getAttribute("href"):(widget.getAttribute("href")?widget.getAttribute("href"):widget.getAttribute("data-href"));var idx=uri.lastIndexOf("/",uri.lastIndexOf("/")-1);var what=like_type!=null?"follow/facebook/like":"share/facebook/like";uri=uri.substring(idx);(new BF_Targetting_Pixel()).add("facebook");facebook._track(where,what);if(user.isLoggedIn()){if(buzz_id){badge_vote_manager.simple_love_vote(uri,buzz_id)}}}if(typeof requestLike!="undefined"){requestLike.sayThankYou()}if(href=="http://www.facebook.com/buzzfeed"){localStorage.setItem("fb_like_fbbuzzfeed",1)}};this.unliked_something=function(href,widget){if(!facebook.has_unliked(href)){var where=typeof widget.dom!="undefined"?facebook.gtrack_name(widget.dom):gtrack.findCatLabel(widget);var like_type=typeof widget.dom!="undefined"?widget.dom.getAttribute("rel:fb_like"):widget.getAttribute("rel:fb_like");var what=like_type!=null?"follow/facebook/unlike":"share/facebook/unlike";facebook._track(where,what)}};this.comment=function(response){var cat=gtrack.tt_page+":contribute/facebook";facebook._track(cat,"share/facebook/comment","")};this.track_like_ab_test=function(el,a){if(!a||a==""){a="click"}try{var gtrack_id=el.getAttribute("rel:gtrack_id");if(gtrack_id){var ab_el=$(el).ancestors().reject(function(n){return(!n.getAttribute("rel:bf_bucket")||n.getAttribute("rel:bf_bucket")!="gtrack")}).first();if(ab_el){var unit=ab_el.getAttribute("rel:unit"),clses=ab_el.getAttribute("rel:classes").split(" "),cls="";for(var i=0;i<clses.length;i++){var cn=clses[i].replace(/(\(\d+\))/m,"");if(ab_el.hasClassName(cn)){cls=cn}}}}}catch(e){}};this.gtrack_name=function(el){try{var a,b;while(el!=document){b=$(el).readAttribute("rel:bf_bucket");if(b&&b.match(/gtrack/)){a=$(el).readAttribute("rel:gt_cat");if(a&&a!=""){return a}}el=$(el).parentNode}return null}catch(e){return null}},this._track=function(where,action){var cat=where?where:gtrack.tt_page;var action=action?action:"share/facebook";if(action.match("like")){gtrack.trackShares(20,"numSharesFacebook")}gtrack.track_events(cat,action,"")};this.squelch_extra_features_prompt=function(){createCookie("squelch_fb_features_prompt","true",30);facebook.squelch_extra_features_promo=true};this.show_signin_tab=function(args){var el=$("tab1-signin_special-"+args.buzz_id);if(el){el.addClassName("hidden")}el=$("tab2-signin_special-"+args.buzz_id);if(el){el.removeClassName("hidden")}$("login-submit").value="Sign In";$("register-submit").value="Register";if($("preview-again-from-registration")){$("preview-again-from-registration").hide()}if($("preview-again-from-login")){$("preview-again-from-login").hide()}bf_login.args={action:"fb_like"};var reg=new BF_Register();reg.register_handler(false,{action:"fb_like"});reg.fb_register_handler(false,{action:"fb_like"});$("registration-div").show();el.parentNode.appendChild($("registered-success").cloneNode(true))};this.signin_for_extra_features_box=function(args){if(facebook.squelch_extra_features_promo){return}var id="signin_special-"+(args.buzz_id||(new Date()).getTime());var uri=args.uri||"/";var el=args.append_to||document.getElementsByTagName("BODY")[0];if($(id)){var obj=$(id);$(id).parentNode.removeChild($(id));el.appendChild(obj);obj.removeClassName("hidden");tab1.removeClassName("hidden");tab2.addClassName("hidden")}else{var div=document.createElement("div");div.id=id;div.addClassName("signin_special");var tab1=document.createElement("div");tab1.id="tab1-"+id;var tab2=document.createElement("div");tab2.id="tab2-"+id;tab1.removeClassName("hidden");tab2.addClassName("hidden");div.appendChild(tab1);div.appendChild(tab2);tab1.innerHTML=facebook.SIGNIN_FOR_EXTRA_FEATURES.evaluate({buzz_id:args.buzz_id});var registration_div=$("registration-div");if(registration_div){registration_div.parentNode.removeChild(registration_div);tab2.appendChild(registration_div)}el.appendChild(div);FB.XFBML.parse(el);universal_dom.update(el);if(args.buzz_id){bf_login.loggedInCallbacks.push(function(){try{$(id).addClassName("hidden")}catch(e){}badge_vote_manager.simple_love_vote(uri,args.buzz_id)})}}};this.load_friends=function(){if(facebook.access_token){if($("not-logged-in")){$("not-logged-in").addClassName("hidden")}facebook.request("https://graph.facebook.com/me/friends",{inject:true,method:"get",parameters:{access_token:facebook.access_token,callback:"facebook._load_friends",format:"JSON"}})}else{if($("not-logged-in")){$("not-logged-in").removeClassName("hidden")}}};this._load_friends=function(r){var fb_friend_ids=[];r.data.each(function(obj){fb_friend_ids.push(obj.id)});facebook.request("/buzzfeed/_facebook",{method:"post",parameters:{action:"follow_page",friends:fb_friend_ids.join(",")},onSuccess:facebook._load_friends_ok})};this._load_friends_ok=function(r){$("content").update(r.responseText)};this.keyword_suggest_mouseout=function(id){var el=$("keywords-"+id);clearTimeout(el.hide_timeout);el.hide_timeout=setTimeout(function(){el.hide()},500)};this.removeKeyword=function(id,d_id,value){var el=$(d_id);if(el){var pos=facebook.fb_ad_kw_terms[id].indexOf(value);if(pos>=0){facebook.fb_ad_kw_terms[id].splice(pos,1)}el.remove();facebook.updateKeywordStats(id,facebook.fb_ad_kw_terms[id],true)}};this.updateKeywords=function(id,value,delayed){if(facebook.keyword_update_ps){window.clearTimeout(facebook.keyword_update_ps)}var timeout=50;if(delayed){timeout=1000}facebook.keyword_update_ps=window.setTimeout(function(){if(!delayed){var arr=facebook.fb_ad_kw_terms[id]||[];if(value&&value!=""){arr.push(value)}facebook.updateKeywordStats(id,arr,true);facebook.fb_ad_kw_terms[id]=arr;var k=value.replace(" ","_"),kw_id="keyword_"+id+"_"+k;$("terms-"+id).innerHTML+=facebook.FACEBOOK_KW_ITEM.evaluate({id:id,dom_id:kw_id,keyword:value});$("kw-"+id).value=""}else{if(value&&value.strip()!=""){facebook.updateKeywordStats(id,[value])}}}.bind(id,value),timeout)};this.updateKeywordStats=function(id,arr,global){if(arr.length==0){$(global?("post-reach-"+id):("users-reach-"+id)).hide();return false}if(global){var reach=$("post-"+id);$("post-reach-"+id).show()}else{var reach=$("users-"+id);$("users-reach-"+id).show()}reach.update("Calculating&hellip;");facebook.request(facebook.FB_KEYWORDS_CONTROLLER,{method:"get",parameters:{action:"targeting_stats",keywords:arr},onSuccess:function(r){var obj=eval("("+r.responseText+")");if(obj.stats.users){var str_users=new String(obj.stats.users);reach.innerHTML=facebook.add_commas(str_users)+" "+(obj.stats.users==1?"person":"people")}else{reach.innerHTML="Server too slow..."}},onFailure:function(){reach.innerHTML="Server too slow&hellip;"}})};this.add_commas=function(users){var regex=new RegExp("^([0-9]*)([0-9]{3,})(,?[0-9,?]*)$");while(users.match(regex)){users=users.replace(regex,"$1,$2$3")}if(users.substring(0,1)==","){users=users.substring(1)}return users};this.lookup_keywords=function(el,query_string,input_id){$("search-"+input_id).hide();$("lookup-loading-"+input_id).show();if(query_string.strip().length>0){facebook.request(facebook.FB_KEYWORDS_CONTROLLER,{method:"get",parameters:{action:"autocomplete_interests",query_string:query_string},onSuccess:function(r){facebook._lookup_keywords(r,el,input_id,query_string)},onFailure:function(){alert("Sorry, but an error has occurred. Please try again.");$("search-"+input_id).show();$("lookup-loading-"+input_id).hide()}})}};this._lookup_keywords=function(r,el,input_id,keyword){$("lookup-loading-"+input_id).hide();$("search-"+input_id).show();var obj=eval("("+r.responseText+")");if(obj.keywords.length>0){var html="";if(obj.keywords.indexOf(keyword)==-1){obj.keywords.unshift(keyword)}obj.keywords.each(function(kw){html+=facebook.FACEBOOK_KW_SUGGESTION.evaluate({keyword:kw,id:input_id})});var t=($("search-"+input_id).positionedOffset()[1]+$("search-"+input_id).getHeight())+"px";$("keywords-"+input_id).setStyle({top:t}).update("<ul>"+html+"</ul>").show()}else{facebook.updateKeywords(input_id,keyword,false);facebook.close_kw_dialog(input_id)}};this.updateMaxLength=function(input_id,kind,value){var maxlen=(kind=="title"?25:135),len=maxlen-value.length;if($("keylength-"+kind+"-"+input_id)){$("keylength-"+kind+"-"+input_id).update('<span class="'+(len<=5?"warning":"")+'">'+len+"</span> character"+(len==1?"":"s")+" remaining")}};this.close_kw_dialog=function(input_id){if($("keywords-"+input_id)){$("keywords-"+input_id).hide()}$("kw-"+input_id).value="";$("users-reach-"+input_id).hide()};this.remove_ad_unit=function(uri){$(uri).parentNode.removeChild($(uri));if($("buzzes")){var ct=$("buzzes").childElements().length;if(ct>0){if($("username_search_posts_length")){$("username_search_posts_length").update(ct+" post"+(ct!=1?"s":""))}}else{this.new_user_posts_search()}}};this.new_user_posts_search=function(){$("success-message").hide();$("error-message").hide();if($("username_search_posts")){$("username_search_posts").hide()}if($("do-it")){$("do-it").hide()}if($("username_search_box")){$("username_search_box").show()}if($("username_search_input")){$("username_search_input").focus()}};this.create_ad=function(frm){$("success-message").hide();$("error-message").hide();var errs=[];if(!frm.elements.campaign_name||frm.elements.campaign_name.value.strip()==""){errs.push("Please add a campaign name.")}if(!frm.elements.budget_in_dollars||frm.elements.budget_in_dollars.value.strip()==""){errs.push("Please insert a budget amount (USD).")}if($$(".fb_ad").length<1){errs.push("Please include at least one buzz to advertise.")}if(errs.length>0){$("error-message").update("There were a few errors: <ul><li>"+errs.join("</li><li>")+"</li></ul>").show();try{window.scrollTo(0,0)}catch(e){}return false}$("do-it-spinner").show();$("do-it-submit").addClassName("disable");frm.setAttribute("action","/buzzfeed/_facebook");var date_elements=["start","stop"];date_elements.each(function(prefix){var d=new Date();var date=frm.elements[prefix+"_date"].value.split("-");d.setYear(date[2]);d.setMonth(date[0]-1);d.setDate(date[1]);var hour=frm.elements[prefix+"_time"].value;if(hour){hour=hour.split(":");d.setHours(hour[0]);d.setMinutes(hour[1])}frm.elements["time_"+prefix].value=Math.round(d.getTime()/1000)});for(var each in facebook.fb_ad_kw_terms){frm.elements["interests-"+each].value=facebook.fb_ad_kw_terms[each].join(",")}frm.request({timeout:12000,onSuccess:facebook._create_ad,onFailure:function(){$("error-message").update("Unknown error, please try again.").show();try{window.scrollTo(0,0)}catch(e){}$("do-it-spinner").hide();$("do-it-submit").removeClassName("disable")}});return false};this._create_ad=function(r){try{var obj=eval("("+r.responseText+")");if(obj.success==1){var buzz_ads=$$(".fb_ad"),indv_errs=0;for(var i=0;i<obj.ad_groups.length;i++){if(obj.ad_groups[i].updated_adgroups.length==1){buzz_ads[i].remove()}else{indv_errs++;$("error-message-"+i.unique_id).update(obj.ad_groups[i].failed_adgroups[0].errors[0]||"An unknown error occured.").show()}}if(indv_errs==0){facebook.new_user_posts_search()}$("success-message").update("Successfully created Facebook ad campaign "+("however there "+(indv_errs>1?"were problems":"was a problem"))+" with the "+(indv_errs>1?"ads":"ad")+' below.<br /><a href="javascript:;" onclick="facebook.new_user_posts_search(); return false;">Click here</a>to search for more buzzes to advertise.').show()}else{$("error-message").update(obj.message||"An unknown error occurred; please try again later.").show()}}catch(e){$("error-message").update("An unknown error occurred; please try again later.").show()}try{window.scrollTo(0,0)}catch(e){}$("do-it-spinner").hide();$("do-it-submit").removeClassName("disable")};this.get_buzzes=function(users){$("success-message").hide();$("error-message").hide();if(!users||users.strip()==""){$("error-message").update("Please enter a username to search.").show();if($("username_search_input")){$("username_search_input").focus()}return}$("error-message").hide();if($("username_search_loading")){$("username_search_loading").show()}if($("username_search_box")){$("username_search_box").hide()}new Ajax.Request("/buzzfeed/_public_admin",{method:"get",parameters:{action:"recent_buzz",usernames:users},onSuccess:function(r){var buzzes=$("buzzes");buzzes.update("");var obj=eval("("+r.responseText+")");if(obj.buzzes.length>0){if($("do-it")){$("do-it").show()}if($("username_search_posts_length")){$("username_search_posts_length").update(obj.buzzes.length+" post"+(obj.buzzes.length!=1?"s":""))}if($("username_search_posts_query")){$("username_search_posts_query").update(users)}if($("username_search_posts")){$("username_search_posts").show()}}else{if($("do-it")){$("do-it").hide()}if($("error-message")){$("error-message").update("No posts were found for your search. Please try again.").show()}if($("username_search_box")){$("username_search_box").show()}if($("username_search_input")){$("username_search_input").focus()}}var regex=new RegExp("(.*buzzfeed.com/)([^#|?]*)");obj.buzzes.each(function(buzz){buzz.name=buzz.name.replace(/(<([^>]+)>)/ig,"");buzz.blurb=buzz.blurb.replace(/(<([^>]+)>)/ig,"");if(buzz.name.length>24){buzz.name=buzz.name.substring(0,24)}if(buzz.blurb.length>134){buzz.blurb=buzz.blurb.substring(0,134)}buzz.link=buzz.link_buzz?buzz.link_buzz:"http://www.buzzfeed.com/"+buzz.username+"/"+buzz.uri;var parts=buzz.link.match(regex);if(parts){buzz.link=buzz.link.replace(regex,parts[1]+"ht/"+parts[2]+"/HFAA1")}buzz.unique_id=buzz.campaignid;buzz.static_root=BF_STATIC.static_root;var html=facebook.FACEBOOK_BUZZ_AD.evaluate(buzz);var li=document.createElement("li");li.id=buzz.uri;li.unique_id=buzz.unique_id;li.addClassName("fb_ad").addClassName("rel").addClassName("targeting");li.update(html);buzzes.appendChild(li);facebook.updateMaxLength(buzz.campaignid,"title",buzz.name);facebook.updateMaxLength(buzz.campaignid,"blurb",buzz.blurb)});if($("username_search_loading")){$("username_search_loading").hide()}}})};this.init=function(){FB.init({appId:BF_STATIC.fb_app_id,xfbml:false,cookie:true,status:true,oauth:true});FB.getLoginStatus(facebook.handle_session_change);FB.Event.subscribe("auth.authResponseChange",facebook.handle_session_change);FB.Event.subscribe("edge.create",facebook.liked_something);FB.Event.subscribe("edge.remove",facebook.unliked_something);FB.Event.subscribe("comment.create",facebook.comment);FB.Event.subscribe("xfbml.render",facebook.loadedLike);social.observe("contribute",facebook.contribute);social.observe("quickpost",facebook.quickpost);social.observe("quiz_result",facebook.quiz_result);facebook.squelch_extra_features_promo=readCookie("squelch_fb_features_prompt")=="true";if(typeof FB.Content!="undefined"){origPostTarget=FB.Content.postTarget}else{FB.Content={}}facebook.apiInit=true;FB.XFBML.parse(document.body);FB.Content.postTarget=function(opts){opts.params.action_links=FB.JSON.stringify(opts.params.action_links);opts.params.attachment=FB.JSON.stringify(opts.params.attachment);origPostTarget(opts)};universal_dom.assign_handler({bucket:"create_ad",event:"click",handler:function(e){facebook.create_ad(e.target.form)}});universal_dom.assign_handler({bucket:"get_buzzes",event:"click",handler:function(e){facebook.get_buzzes(e.target.form.elements.usernames.value)}});EventManager.observe("progressive-load-callback:facebook_comments",function(timerId){var buzz_uri=buzzDetails.uri,buzz_username=BF_STATIC.username;facebook.renderComments(buzz_username,buzz_uri,timerId)});var user=new BF_User();if(window.location.href.match(/boost\/facebook/)){if(!user.isLoggedIn()||user.getUserInfo().p_admin!="true"){window.location.href="/boost"}else{$("page_container").show()}}};this.renderComments=function(page_username,bpage_url,timerId){var section=$s("#fb_comments_control"),preDiv=$s("#preFacebookComment"),commentDiv=$s(".fb_comments_wrapper");if(typeof FB!="undefined"){preDiv.addClassName("hidden");section.removeClassName("hidden");commentDiv.innerHTML='<fb:comments width="625" href="http://www.buzzfeed.com/'+page_username+"/"+bpage_url+'" mobile="false"></fb:comments>';FB.XFBML.parse(commentDiv);window.clearInterval(timerId)}};this.is_logged_in=function(){return typeof facebook.session!="undefined"};this.logout=function(fn){facebook.logged_out();if(facebook.is_logged_in()){FB.logout(fn)}else{fn()}};this.logged_out=function(){facebook.hide_ui_elements("logged-in");facebook.show_ui_elements("logged-out")};this.logged_in=function(){facebook.show_ui_elements("logged-in");facebook.hide_ui_elements("logged-out");facebook.update_ui_elements();var user=new BF_User();if(!user.isLoggedIn()){facebook.auto_log_into_buzzfeed()}facebook.fire_event("user_logged_in")};this.handle_session_change=function(response,callback){if(response.authResponse){facebook.session=response.authResponse;facebook.access_token=response.authResponse.accessToken;FB.api("/me",function(r){facebook.user_data=r;facebook.logged_in();FB.api("/me/permissions",function(perm_r){facebook.permissions=typeof perm_r.data!="undefined"?perm_r.data["0"]:"";if(typeof callback!="undefined"){try{callback.each(function(fn){fn()})}catch(err){}}})})}else{delete facebook.session;facebook.logged_out()}};this.buzzfeed_login=function(resp){if(resp.authResponse){var session=resp.authResponse;var params={method:"post",parameters:{access_token:session.accessToken,facebook_uid:session.userID,fb_username:facebook.user_data.name},onSuccess:function(r){console.log("Facebook login succeeded");if(document.location.search.match(/fbtest=true/)){return}var obj=eval("("+r.responseText+")");if(signin.social_register){signin.register_settings(obj)}if(obj.login&&obj.login!="false"){if(facebook.tried_to_register){bf_login.loggedIn(r,{no_reload:true});signin.email=facebook.user_data.email}else{bf_login.loggedIn(r)}facebook.block_login=false;if(!obj.facebook_uid){facebook.link_accounts_enabled=true;facebook.link_accounts()}}else{if(obj.requires_oauth==1){window.open("/buzzfeed/oauth_signin?username="+obj.username,"OAuth","width=500,height=500")}else{if(obj.facebook_deleted!=1){if(!facebook.tried_to_register){facebook.auto_register(obj)}}}}},onFailure:function(){}};console.log("Facebook login started");if(facebook.user_data.email){params.parameters.email=facebook.user_data.email}facebook.request("/bfcgi/_www_login?cb="+(new Date()).getTime(),params)}};this.auto_log_into_buzzfeed=function(){if(!facebook.login_ok){return}if(!facebook.is_logged_in()||facebook.block_login){return}facebook.block_login=true;if("session" in facebook){facebook.buzzfeed_login({authResponse:facebook.session})}else{FB.getLoginStatus(function(response){if(response.authResponse){facebook.buzzfeed_login(response)}else{facebook.FB_login("email")}})}};this.FB_login=function(perms,onFail){facebook.login_ok=true;var my_perms=perms?perms:"email";FB.login(function(response){if((!response||!response.authResponse||response.status=="unknown")&&typeof(onFail)=="function"){onFail()}if(perms=="user_photos"&&typeof fbphotos!="undefined"){fbphotos.load_response(response)}if(signin.signin_page&&!response.authResponse){signin.fb_dialog_cancel()}var storageID="fb_perms_"+my_perms;localStorage.setItem(storageID,new Date());if(typeof response!="undefined"&&response.authResponse!=null){var user=new BF_User();if(user.isLoggedIn()){var info=user.getUserInfo();if(!info.facebook_uid){facebook.link_accounts_enabled=true;facebook.link_accounts(response.authResponse.userID)}facebook.handle_session_change(response,bf_login.loggedInCallbacks)}else{facebook.handle_session_change(response,[facebook.buzzfeed_login])}}},{scope:my_perms})};this.has_perms=function(permission){try{if(facebook.permissions[permission]==1){return true}else{return false}}catch(err){return false}};this.perms_were_asked_recently=function(checkPerms){var storageId="fb_perms_"+checkPerms;if(localStorage.getItem(storageId)===null){return false}else{var last_time=new Date(localStorage.getItem(storageId));var today=new Date();days=Math.round((last_time-today)/(1000*60*60*24));if(days<=5){return true}else{localStorage.removeItem(storageId);return false}}};this.link_accounts=function(fb_uid){if(!facebook.link_accounts_enabled){return}var facebook_uid;if(typeof fb_uid!="undefined"){facebook_uid=fb_uid}else{if(typeof facebook.session!="undefined"){facebook_uid=facebook.session.userID}else{return}}try{new Ajax.Request("/buzzfeed/_edit_user",{method:"get",asynchronous:false,parameters:{action:"link_facebook_account",facebook_uid:facebook.session.userID,onSuccess:function(r){},onFailure:function(r){}}})}catch(e){}};this.__events={};this.observe=function(ev,fn){var listeners=facebook.__events[ev]||[];listeners.push(fn);facebook.__events[ev]=listeners};this.fire_event=function(ev){if(typeof facebook.__events[ev]!="undefined"){facebook.__events[ev].each(function(fn){fn()})}};this.auto_register=function(obj){if(signin.signin_page){signin.social_register=true}if(!facebook.auto_register_enabled){return}var email="get_from_facebook@buzzfeed.com";try{email=facebook.user_data.email}catch(e){}if(typeof email=="undefined"||email.length==0){email="get_from_facebook@buzzfeed.com"}var params={name:obj.username,username:obj.username,pw:obj.password,email:email,contribute:1,allow_email_updates:0,facebook_uid:facebook.session.userID,import_fb_profile:"true",language:BF_STATIC.language||"en"};facebook.request("/buzzfeed/_contribute_register",{method:"post",parameters:params,onSuccess:function(e){gtrack.track_events("","social/facebook","registered");facebook.block_login=false;facebook.tried_to_register=true;try{var obj=eval("("+e.responseText+")");if(obj.status=="failed"&&obj.message=="duplicate email"){facebook.fire_event("registration:duplicate_email")}}catch(err){console.dir({err:err})}facebook.auto_log_into_buzzfeed()},onFailure:function(e){facebook.block_login=false}})};this.request=function(url,params){if(params.inject){var e=document.createElement("script");e.src=url;e.async=true;if(params.parameters){var list_params=[];for(var p in params.parameters){list_params.push(p+"="+escape(params.parameters[p]))}e.src+="?"+list_params.join("&")}document.getElementById("fb-root").appendChild(e)}else{var ajax=new BF_Request();ajax.request(url,params)}};this._add_fb_root=function(){if(!$("fb-root")){var div=document.createElement("div");div.id="fb-root";document.getElementsByTagName("BODY")[0].appendChild(div)}};this.get_ui_elements=function(type,opts){return social._get_ui_elements(this.social_element_key,type,opts)};this.hide_ui_elements=function(type){this.get_ui_elements(type).each(function(el){el.addClassName("hidden")})};this.show_ui_elements=function(type){this.get_ui_elements(type).each(function(el){el.removeClassName("hidden")})};this.update_ui_elements=function(){this.get_ui_elements("update",{with_data:true}).each(function(el){el.element.update(eval(el.data.value))})};this.ensure_init=function(callback,i){if(!facebook.apiInit&&i<100){i++;setTimeout(function(){facebook.ensure_init(callback)},50)}else{if(i>=100){return false}else{if(callback){callback()}}}}};var facebook=new Facebook();window.fbAsyncInit=facebook.init;if(typeof BuzzLoader!="undefined"){BuzzLoader.register(function(){if(!window.BF_STATIC||!BF_STATIC.bf_test_mode){facebook._add_fb_root();var a="en_US";if(typeof BF_STATIC.language!="undefined"&&typeof countryLangLookup[BF_STATIC.language]!="undefined"){a=countryLangLookup[BF_STATIC.language]}if("FB" in window){FB=null}var b=document.createElement("script");b.src=document.location.protocol+"//connect.facebook.net/"+a+"/all.js";b.async=true;if(!window.BF_STATIC||BF_STATIC.facebook_enabled&&BF_STATIC.facebook_enabled!=false){document.getElementById("fb-root").appendChild(b)}}else{console.info("disable load connect.facebook.net/en_US/all.js for test mode(facebook2.js)")}},2)}document.observe("dom:loaded",function(){$$(".facebook-share-button").each(function(a){$(a).observe("click",function(){gtrack.trackShares(20,"numSharesFacebook")})})});var FBTL=function(){var f;var c={};var b=false;var g;var a="publish_actions,email";this.init=function(){try{universal_dom.assign_handler({bucket:"add_to_timeline",event:"click",handler:fbtl_session.add_to_timeline_handler})}catch(h){console.error(h)}};this.add_to_timeline_handler=function(r){var m=$(r.target.getAttribute("id"));m.addClassName("grey");if(!r.action||!r.sb_id||!$("date-dropdown-"+r.sb_id)){if(BF_STATIC.bf_env!="live"){console.error("action, date or sub_buzz_id missing!")}return}var t=r.action;var n=r.sb_id;var v=$("date-dropdown-"+n).getValue();var l=new Date();l.setFullYear(parseInt(v),0,1);var q=parseInt(l.getTime()/1000);var p=new Date();p.setFullYear(parseInt(v),11,31);var k=parseInt(p.getTime()/1000);var h=typeof sub_links!="undefined"&&typeof r.link_id!="undefined"?sub_links.get_url(r.link_id):document.URL.include("?")?document.URL.split("?")[0]:document.URL;h+=(h.include("?")?"&":"?")+"fbtl="+n;if(BF_STATIC.bf_env!="live"){h=h.replace(/\/\/(stage(\d+)?|dev)\./i,"//www.").replace("/bf2/","/")}var o={start_time:q,end_time:k,product:h,message:"Everyone's talkin' about the good old days..."};g=r.target;badge_vote_manager.reset_sharing_box();fbtl_session.trigger(t,o,true)};this.trigger=function(h,o,n){f=h;c=o;b=typeof n!="undefined"&&n?true:false;var l="fb_perms_"+a;if(document.location.search.match(/fbperms=show/)){var m=localStorage.getItem(l);console.log("localStorage canceled perms: "+l+" --> "+m)}if(document.location.search.match(/fbperms=clear/)){console.log("localStorage cleared: "+l);localStorage.removeItem(l)}if(facebook.is_logged_in()&&facebook.has_perms("publish_actions")){fbtl_session.post()}else{if(!b){if(facebook.perms_were_asked_recently(a)){if(BF_STATIC.bf_env!="live"){console.log("FBTL trigger failed. Canceled perms on "+localStorage.getItem(l))}return}var k=(new BF_User()).getUserInfo();if(typeof k.facebook_uid=="undefined"||!k.facebook_uid||k.facebook_uid==""){return}}bf_login.loggedInCallbacks.push(fbtl_session.post);facebook.FB_login(a)}};this.nameSpace=function(){var h="";if(BF_STATIC.fb_app_id=="45075597673"){h="buzzfeed"}else{if(BF_STATIC.fb_app_id=="212374995460808"){h="buzzfeedstage"}else{if(BF_STATIC.fb_app_id=="54820841344"){h="buzzfeed-dev"}}}return h};this.post=function(){var k="/me/"+fbtl_session.nameSpace()+":"+f;if(BF_STATIC.bf_env!="live"){console.log("POST REQUEST TO FACEBOOK: "+k);console.log(c)}if(typeof c.badge!="undefined"){var h=" '"+c.badge.replace("http://www.buzzfeed.com/badge/","")+"' "}else{h=""}FB.api(k,"post",c,function(l){if(!l||l.error){if(BF_STATIC.bf_env!="live"){console.error("Couldn't post to timeline!!!")}var m=$(g.getAttribute("id"));m.removeClassName("grey")}else{if(b){badge_vote_manager.show_sharing_box(g,"fbtl")}if(BF_STATIC.bf_env!="live"){console.log("Post was successful!: Action ID : "+l.id)}fbtl_session.action_id=l.id;if($("share-reaction-box")){$("share-reaction-content-wrapper").insert({top:'					<div id="sharing-timeline-message">						<div class="success_icon"></div>						Your '+h+' reaction was added to your Timeline.						<a href="javascript:;" id="undo_timeline_action" gt_act="facebook-timeline/undo">undo</a>					</div>'})}if($("undo_timeline_action")){$("undo_timeline_action").observe("click",fbtl_session.delete_action)}}})};this.delete_action=function(){if(typeof fbtl_session.action_id=="undefined"){if(BF_STATIC.bf_env!="live"){console.error("No action to delete")}return}$("undo_timeline_action").update("...");FB.api("/"+fbtl_session.action_id,"delete",function(h){if(typeof h!="undefined"&&h==true){$("undo_timeline_action").update("deleted")}else{if(BF_STATIC.bf_env!="live"){console.error("Something went wrong deleting the action from Facebook.")}}});if(b){$("social-sharing-box").hide()}gtrack.track_events("Buzz:social-share-box","facebook-timeline/undo","")};this.add_message=function(){$("sharing-box-submit").stopObserving("click",fbtl_session.add_message);$("sharing-box-submit").value="Adding";if(typeof fbtl_session.action_id=="undefined"){if(BF_STATIC.bf_env!="live"){console.error("No action id")}return}if($("sharing-message")&&$("sharing-message").value!=""){var h=$("sharing-message").value;FB.api("/"+fbtl_session.action_id,"post",{message:h},function(k){if(typeof k!="undefined"&&k==true){$("sharing-box-submit").value="Added"}else{if(BF_STATIC.bf_env!="live"){console.error("Something went wrong adding the message to Facebook: "+k)}}});gtrack.track_events("Buzz:timeline-box","facebook-timeline/add-message","")}$("sharing-box-submit").value="Added"}};var fbtl_session=new FBTL();BuzzLoader.register(fbtl_session.init,5);var Social=function(){this.quickpost=function(a){};this.contribute=function(a){};this.vote=function(a){};this.quiz_result=function(a){};this._init=function(){var a=new RegExp("^_");for(var b in this){if(typeof this[b]=="function"&&b!="observe"&&!b.match(a)){this["_"+b]=this[b];this[b]=Function("obj","social._"+b+'(obj);social._fire_event("'+b+'",obj);')}}};this.observe=function(c,b){if(typeof this[c]=="function"){var f=typeof this._observers[c]=="undefined"?[]:this._observers[c];var a=true;f.each(function(g){if(b==g){a=false}});if(a){f.push(b);this._observers[c]=f}}};this._fire_event=function(b,a){var c=typeof this._observers[b]=="undefined"?[]:this._observers[b];c.each(function(f){try{f(a)}catch(g){console.warn(g)}})};this._observers={};this._get_ui_elements=function(b,a,c){if(!c){c={}}var f=[];if(typeof universal_dom!="undefined"&&typeof universal_dom._bucket[b+"-"+a]!="undefined"){universal_dom._bucket[b+"-"+a].elements.each(function(g){if(c.with_data){f.push(g)}else{f.push(g.element)}})}return f}};var social;if(typeof BuzzLoader!="undefined"){BuzzLoader.register(function(){social=new Social();social._init()},1)}var BF_MobilePromos=function(){this.agent=navigator.userAgent.toLowerCase();this.is_mobile=this.agent.match(/iphone|ipod|android|ipad/);this.is_iphone=this.agent.match(/iphone|ipod/);this.is_android=this.agent.match(/android/);this.is_ipad=this.agent.match(/ipad/);this.init=function(){if(mobile_promos.is_iphone){}else{if(mobile_promos.is_android){}else{}}if(readCookie("BF_NO_MOBILE")&&readCookie("BF_NO_MOBILE").search(/true/)>-1){var a='<div id="bar_mobile_announcement">							<div id="bar_mobile_announcement_area" class="c">								<a id="announcement_mobile_close" class="close" href="javascript:;">Back To The Mobile Version</a>								<p></p>							</div>						</div>';$$("body")[0].insert({top:a});$("bar_mobile_announcement").observe("click",function(){eraseCookie("BF_NO_MOBILE",function(){window.location.reload()})})}}};var mobile_promos=new BF_MobilePromos();BuzzLoader.register(function(){mobile_promos.init()},1);function isEmpty(a){for(var b in a){return false}return true}BF_Editor=function(){this.init=function(){this.poller=new cookie_poller();var editor_links=$$(".editor-admin");var delete_reaction=$$(".editor-delete_reaction");var delete_related_links=$$(".editor-delete_related_links");var user=new BF_User();var isa=false;if(acl.user_can("edit_user_posts")){isa=true}var terminal_user=false;var basic_edit_functionality=false;var partners_manage=false;var userinfo;var editor_bf_ad=window.bf_ad;var editor_bf_partner=window.bf_partner;if(user&&user.isLoggedIn()){userinfo=user.getUserInfo();if(userinfo&&userinfo.terminal_user&&userinfo.terminal_user=="true"){terminal_user=true}else{basic_edit_functionality=true}if(userinfo&&userinfo.username){var regex=new RegExp("/"+userinfo.username+"(/?|$)");if(acl.user_can("partners_manage")&&((editor_bf_ad=="1"||editor_bf_partner=="1")||window.location.href.match(regex))){partners_manage=true}}}if(isa||partners_manage){for(var i=0;i<editor_links.length;i++){editor_links[i].stopObserving("click");editor_links[i].observe("click",bf_editor.load_editor);editor_links[i].show()}delete_reaction.each(function(el){el.stopObserving("click",bf_editor.delete_reaction);el.observe("click",bf_editor.delete_reaction);el.show()});delete_related_links.each(function(el){el.stopObserving("click",bf_editor.delete_related_links);el.observe("click",bf_editor.delete_related_links);el.show()})}else{if(terminal_user){var pathname=window.location.pathname;if(BF_STATIC.web_root.length>0){pathname=pathname.replace(BF_STATIC.web_root,"")}var user_page=pathname.split("/");if(user_page.length>0){user_page=user_page[1]}else{user_page=""}var current_user=user.getUserInfo().username;if(current_user==user_page){terminal_links=$$(".terminal-admin");for(var i=0;i<terminal_links.length;i++){var obj=terminal_links[i];var owner=obj.getAttribute("rel:owner");if(owner==current_user){obj.stopObserving("click",bf_editor.load_editor);obj.observe("click",bf_editor.load_editor);obj.show()}}}}}if(isa||terminal_user||basic_edit_functionality){var basic_admin=$$(".basic-admin");var username=(new BF_User()).getUserInfo().username;var regex=new RegExp("/"+username+"(/?|$)");if(!window.location.href.match(regex)&&!isa){return}for(var i=0;i<basic_admin.length;i++){var el=$(basic_admin[i]);var owner=el.getAttribute("rel:owner");var buzz_data=el.getAttribute("rel:data");var buzz_data=eval("("+buzz_data+")");var buzz_id=buzz_data.buzz_id;var buzz_type=buzz_data.type;if(owner==username||isa){el.setAttribute("editor-style","basic");el.stopObserving("click",bf_editor.load_editor_in_dialog);el.observe("click",bf_editor.load_editor_in_dialog);el.show();var parent=el;while(parent.parentNode&&parent.tagName!="LI"){parent=parent.parentNode}$(parent).observe("mouseout",function(e){var username=(new BF_User()).getUserInfo().username;var owner=this.obj.getAttribute("rel:owner");if(username==owner||isa){if($(this.obj.parentNode)){$(this.obj.parentNode).hide()}}}.bind({obj:el}));$(parent).observe("mouseover",function(e){var username=(new BF_User()).getUserInfo().username;var owner=this.obj.getAttribute("rel:owner");if(username==owner||isa){if($(this.obj.parentNode)){$(this.obj.parentNode).show()}}}.bind({obj:el}))}}var delete_links=$$(".basic-admin-delete");for(var i=0;i<delete_links.length;i++){delete_links[i].observe("click",function(e){bf_editor.delete_quickpost(e)})}$$(".qe2").each(function(el){el.addClassName("with-stats")});var stats_links=$$(".basic-admin-stats");for(var i=0;i<stats_links.length;i++){stats_links[i].observe("click",function(e){bf_editor.load_stats(e)})}}var username=(new BF_User()).getUserInfo().username;var hide_edit_for_other_buzzes=new RegExp("(/submissions)?/"+username);var hide_me=new RegExp("with-stats");if(window.location.href.match(hide_edit_for_other_buzzes)){$$(".qe3").each(function(el){if(el.className.match(hide_me)){var owner="";var a=el.getElementsByTagName("A");owner=a[0].getAttribute("rel:owner");if(owner!=username){el.parentNode.removeChild(el)}}})}};this.do_delete_reaction=function(e){e.stop();var params={comment_id:e.target.getAttribute("rel:comment_id"),buzz_id:e.target.getAttribute("rel:buzz_id"),user_id:e.target.getAttribute("rel:user_id"),reactions:e.target.getAttribute("rel:reactions")};var old_iframe=$("user_post_delete_iframe");if(old_iframe){var parent=old_iframe.parentNode;parent.removeChild(old_iframe)}if($("user_post_delete_modal_text")){$("user_post_delete_modal_text").removeClassName("hidden");if($("post-headline")){$("post-headline").update("these reactions")}var cancel_btn=$("cancel-delete-button");var delete_btn=$("delete-button");if(cancel_btn){cancel_btn.stopObserving("click");cancel_btn.observe("click",function(){top.BF_UI.closeDialog("user_post_delete")})}if(delete_btn){delete_btn.stopObserving("click");delete_btn.observe("click",function(){bf_editor._delete_reaction(params)})}}BF_UI.showDialog("user_post_delete","Delete")};this.delete_reaction=function(e){bfjemplate.load_if_missing({id:"user_post_delete",callback:bf_editor.do_delete_reaction,context:bf_editor,args:arguments})};this._delete_reaction=function(obj){var params={action:"delete_reaction",buzz_id:obj.buzz_id,user_id:obj.user_id,responses:obj.reactions};var comment_id=obj.comment_id;var request=(new BF_Request()).request;request("/buzzfeed/comments_moderation",{method:"post",parameters:params,onComplete:function(){if(parent.$(comment_id)){parent.$(comment_id).update('<span style="color:red;">Item Deleted!</span>')}top.BF_UI.closeDialog("user_post_delete")}})};this.do_delete_related_links=function(e){e.stop();var campaignid=e.target.getAttribute("rel:campaignid");var related_campaignid=e.target.getAttribute("rel:related_campaignid");var buzz_name=e.target.getAttribute("rel:buzz_name");BF_UI.showDialog("user_post_delete","Delete");$("user_post_delete_iframe").setAttribute("src","/buzzfeed/editbuzz/delete_related_links?campaignid="+campaignid+"&related_campaignid="+related_campaignid+"&buzz_name="+buzz_name)};this.delete_related_links=function(e){bfjemplate.load_if_missing({id:"user_post_delete",callback:bf_editor.do_delete_related_links,context:bf_editor,args:arguments})};this.do_delete_quickpost=function(e){if(e.event){e=e.event}e.stop();var username=(new BF_User()).getUserInfo().username;var el=e.target;var owner=el.getAttribute("rel:owner");var buzz_data=el.getAttribute("rel:data");var buzz_data=eval("("+buzz_data+")");var track=eval("("+el.getAttribute("track")+")");var buzz_id=buzz_data.buzz_id;var user=new BF_User();var userinfo=user.getUserInfo();var isa=false;if(acl.user_can("edit_user_accounts")){isa=true}if(username!=owner&&!isa){return}BF_UI.showDialog("user_post_delete","Delete");$("user_post_delete_iframe").setAttribute("src","/buzzfeed/editbuzz/delete?id="+buzz_id)};this.delete_quickpost=function(e){bfjemplate.load_if_missing({id:"user_post_delete",callback:bf_editor.do_delete_quickpost,context:bf_editor,args:arguments})};this.load_stats=function(e){var user_info=(new BF_User()).getUserInfo();var buzz_info=e.target.getAttribute("rel:data").evalJSON();var owner=el.getAttribute("rel:owner");var track=eval("("+el.getAttribute("track")+")");window.location.href=BF_STATIC.web_root+"/dashboard/"+owner+"/"+track.buzz};this.edit_from_stats=function(e){e.stop();BF_UI.closeDialog("user_post_stats",{onComplete:bf_editor.close_user_stats});bf_editor.load_editor_in_dialog(e)};this.do_fill_stats_panel_shell=function(o){var shell=$$("#user_post_stats .bf_dialog_content").first();$$("#user_post_stats .bf_dialog_content").first().innerHTML=o.responseText;$("user-stats-cancel-button").observe("click",function(){BF_UI.closeDialog("user_post_stats",{onComplete:bf_editor.close_user_stats})});$("user-stats-snapshot-button").observe("click",function(){if(bf_editor.snapshot){Element.setStyle("user-stats-left-snapshot",{display:"none"});Element.setStyle("user-stats-left",{display:"block"});$("user-stats-snapshot-button").setAttribute("value","Snapshot");bf_editor.snapshot=0}else{Element.setStyle("user-stats-left",{display:"none"});Element.setStyle("user-stats-left-snapshot",{display:"block"});$("user-stats-snapshot-button").setAttribute("value","Current");bf_editor.snapshot=1}});$$(".edit-buzz-from-stats").each(function(el){el.observe("click",bf_editor.edit_from_stats)});$$("a.stats-loader").each(function(el){el.observe("click",bf_editor.load_stats)});bf_editor.stats_shell_loaded=true};this.fill_stats_panel_shell=function(o){bfjemplate.load_if_missing({id:"user_post_stats",callback:bf_editor.do_fill_stats_panel_shell,context:bf_editor,args:arguments})};this.pivot_stats=function(stats){new_ar=[];stats.each(function(el){new_ar[el.type]=el});$R(0,100).each(function(i){if(!new_ar[i]){new_ar[i]={total:0,totals:[0,0,0,0,0,0,0]}}});return new_ar};this.fill_stats_panel_stats=function(){index=this.index?this.index:"";if(arguments.length==1&&typeof arguments[0]=="object"){if(isEmpty(arguments[0])){return}if(arguments[0].snapshot){index="-snapshot"}bf_editor.stats_panel=bf_editor.stats_panel?bf_editor.stats_panel:{};bf_editor.stats_panel[index]=arguments[0];bf_editor.stats_panel[index].week_impressions=bf_editor.pivot_stats(bf_editor.stats_panel[index].week_impressions);if(bf_editor.stats_panel[index].all_impressions){bf_editor.stats_panel[index].all_impressions=bf_editor.pivot_stats(bf_editor.stats_panel[index].all_impressions)}}if(!bf_editor.stats_shell_loaded&&!bf_editor.secret_stats){return setTimeout(bf_editor.fill_stats_panel_stats.bind({index:index}),100)}else{var domain_template=new Template($F("referring-domain"));var domain_html=bf_editor.stats_panel[index].domains.map(function(d){if(d&&d.total){return domain_template.evaluate({total:bf_editor.add_commas(d.total),domain:d.domain})}}).join("");$("domains-list"+index).update(domain_html);var search_template=new Template($F("search-term"));var search_html=bf_editor.stats_panel[index].search.map(function(d){if(d&&d.total){return search_template.evaluate({total:bf_editor.add_commas(d.total),query:d.query})}}).join("");$("search-terms-list"+index).update(search_html);var stash={};stash["direct-week"]=bf_editor.stats_panel[index].week_impressions["0"].total;stash["internal-week"]=bf_editor.stats_panel[index].week_impressions["1"].total;stash["link-week"]=bf_editor.stats_panel[index].week_impressions["2"].total;stash["search-week"]=bf_editor.stats_panel[index].week_impressions["3"].total;stash["network-week"]=bf_editor.stats_panel[index].week_impressions["4"].total;stash["total-week"]=stash["direct-week"]+stash["internal-week"]+stash["link-week"]+stash["search-week"]+stash["network-week"];stash["viral-week"]=stash["direct-week"]+stash["link-week"]+stash["search-week"];stash["direct-today"]=bf_editor.stats_panel[index].week_impressions["0"].totals[6];stash["internal-today"]=bf_editor.stats_panel[index].week_impressions["1"].totals[6];stash["link-today"]=bf_editor.stats_panel[index].week_impressions["2"].totals[6];stash["search-today"]=bf_editor.stats_panel[index].week_impressions["3"].totals[6];stash["network-today"]=bf_editor.stats_panel[index].week_impressions["4"].totals[6];stash["total-today"]=stash["direct-today"]+stash["internal-today"]+stash["link-today"]+stash["search-today"]+stash["network-today"];stash["viral-today"]=stash["direct-today"]+stash["link-today"]+stash["search-today"];if(bf_editor.stats_panel[index].all_impressions){stash["direct-all-time"]=bf_editor.stats_panel[index].all_impressions["0"].total;stash["internal-all-time"]=bf_editor.stats_panel[index].all_impressions["1"].total;stash["link-all-time"]=bf_editor.stats_panel[index].all_impressions["2"].total;stash["search-all-time"]=bf_editor.stats_panel[index].all_impressions["3"].total;stash["network-all-time"]=bf_editor.stats_panel[index].all_impressions["4"].total;stash["total-all-time"]=stash["direct-all-time"]+stash["internal-all-time"]+stash["link-all-time"]+stash["search-all-time"]+stash["network-all-time"];stash["viral-all-time"]=stash["direct-all-time"]+stash["link-all-time"]+stash["search-all-time"]}$("traffic-summary-body"+index).update((new Template($F("traffic-summary"))).evaluate(stash));$("traffic-breakdown-body"+index).update((new Template($F("traffic-breakdown"))).evaluate(stash));$("chart_image"+index).src=bf_editor.get_graph(bf_editor.stats_panel[index].week_impressions);if(bf_editor.stats_panel[index].snapshot){Element.setStyle("user-stats-snapshot-button",{display:"block"})}}};this.get_graph=function(data){var type_names=["1","4","2","3","0"];var totals={};type_names.each(function($_){if(typeof data[$_]=="undefined"){data[$_]={}}if(!data[$_].totals){data[$_].totals=[0,0,0,0,0,0,0]}if(!data[$_].total){data[$_].total=0}});var chd=[];var chm=[];var chco=[];var max_val=0;var i=0;var day_total=[0,0,0,0,0,0,0];type_names.each(function($k){i++;if(data[$k].totals){var triples=data[$k].totals.map(function($_,index){day_total[index]+=$_;$_=day_total[index];if($_>max_val){max_val=$_}return[$_,$_,$_].join(",")});chd.push(triples.join(","))}else{empty_array=[];for(j=0;j<21;j++){empty_array.push(0)}chd.push(empty_array.join(","))}});return"http://chart.apis.google.com/chart?cht=ls&chs=170x105&chds="+[0,max_val].join(",")+"&chd=t:0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0|"+chd.join("|")+"&chco=ffffff,0077ee,44bbff,ee3322,ff5544,ff7777&chm=b,0077ee,0,1,0|b,44bbff,1,2,0|b,ee3322,2,3,0|b,ff5544,3,4,0|b,ff7777,4,5,0&chf=bg,s,ffffff"};this.add_commas=function(num){num+="";num=num.replace(/(\d)(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})?(\d{3,3})$/,"$1,$2,$3,$4,$5,$6,$7");num=num.replace(/,{2,}/,",");return num};this.close_user_stats=function(){bf_editor.stats_shell_loaded=false;$$("#user_post_stats .bf_dialog_content").first().innerHTML='<img src="'+BF_STATIC.static_root+'/images/public/spinners/loading.gif" />'};this.do_load_editor_in_dialog=function(e){var tag=e.target;var tag_data=tag.getAttribute("rel:data");var tag_data_obj=eval("("+tag_data+")");var buzz_id=tag_data_obj.buzz_id;var buzz_type=tag_data_obj.type;BF_UI.showDialog("user_post_edit","Edit");if(/^super.*/.test(buzz_type)){buzz_type="super";window.location.href=BF_STATIC.web_root+"/post?id="+buzz_id}else{$("user_post_edit_iframe").setAttribute("src","/buzzfeed/editbuzz/"+buzz_type+"?id="+buzz_id+"&cb="+(new Date()).getTime())}};this.load_editor_in_dialog=function(e){bfjemplate.load_if_missing({id:"user_post_edit",callback:bf_editor.do_load_editor_in_dialog,context:bf_editor,args:arguments})};this._do_load_editor_in_dialog=function(data){BF_UI.showDialog("user_post_edit","Edit");var buzz_type=data.type;if(/^super.*/.test(buzz_type)){buzz_type="super"}$("user_post_edit_iframe").setAttribute("src","/buzzfeed/editbuzz/"+buzz_type+"?id="+data.id+"&cb="+(new Date()).getTime())};this._load_editor_in_dialog=function(data){bfjemplate.load_if_missing({id:"user_post_edit",callback:bf_editor._do_load_editor_in_dialog,context:bf_editor,args:arguments})};this.load_editor=function(e){if(bf_editor.poller.active){alert("Please close the existing dialog before opening another.");return}if(e.event){e=e.event}var tag=e.target;var tag_data=tag.getAttribute("rel:data");var tag_data_obj=eval("("+tag_data+")");var buzz_id=tag_data_obj.buzz_id;var buzz_type=tag_data_obj.type;var poller_id=(new Date()).getTime();BF_Editor.editor_div_id=""+poller_id;var div_id=BF_Editor.editor_div_id;var editor_div=$(div_id);if(!editor_div){editor_div=document.createElement("div");editor_div.id=div_id;bf_editor.bodyTag().appendChild(editor_div);editor_div.className="qwik_edit";var close_button=document.createElement("a");close_button.className="close_editor";close_button.update('<img src="'+BF_STATIC.image_root+'/static/images/public/spinners/closebox.png" alt="x"/>');close_button.href="#";close_button.observe("click",function(e){e.stop();bf_editor.close_editor(e)});editor_div.appendChild(close_button)}bf_editor.start_spinner();var style=e.target.getAttribute("editor-style");if(!style){style="terminal"}bf_editor.load_iframe(buzz_id,{style:style,type:buzz_type});bf_editor.poller.add_poller_callback(buzz_id,bf_editor.close_window);var terminal_url=BF_STATIC.terminal_root_url;terminal_domain=terminal_url.replace(/(http:\/\/.*?)\/.*/,"$1");bf_editor.poller.start({callback_string:buzz_id,poll_url:terminal_domain+"/static/js/poller/cookie.js",pollid:poller_id,arguments:{id:div_id}})};this.close_editor=function(e){e.stop();var div=$(BF_Editor.editor_div_id);if(div){div.parentNode.removeChild(div);bf_editor.poller.stop_polling()}};this.close_window=function(args){if($(args.pollid)){$(args.pollid).parentNode.removeChild($(args.pollid))}};this.load_iframe=function(buzz_id,args){if(!args){args={style:"terminal"}}var style=args.style?args.style:"terminal";var type=args.type?args.type:"link";var iframe_id=this.generate_id("iframe");var iframe=$(iframe_id);if(!iframe){iframe=document.createElement("iframe");iframe.id=iframe_id;$(BF_Editor.editor_div_id).appendChild(iframe);iframe.observe("load",bf_editor.iframe_loaded);iframe.className="qwik_edit"}iframe.style.display="none";if(style=="terminal"){iframe.setAttribute("src",BF_STATIC.terminal_root_url+"?editor=qwik_edit&buzz_id="+buzz_id+"&cb="+(new Date()).getTime())}else{var buzz_type=type;if(/^super.*/.test(buzz_type)){buzz_type="super"}iframe.setAttribute("src","/bf2/editbuzz/"+buzz_type+"?id="+buzz_id+"&cb="+(new Date()).getTime())}};this.iframe_loaded=function(){bf_editor.stop_spinner();$(bf_editor.generate_id("iframe")).show()};this.start_spinner=function(){var spinner_id=this.generate_id("spinner");var spinner=$(spinner_id);if(!spinner){var spinner=document.createElement("div");spinner.id=spinner_id;spinner.className="qwik_edit-spinner";spinner.appendChild(document.createTextNode("Loading..."));$(BF_Editor.editor_div_id).appendChild(spinner);spinner.style.display="none"}var iframe=$(this.generate_id("iframe"));if(iframe){iframe.hide()}spinner.show()};this.stop_spinner=function(){$(this.generate_id("spinner")).hide()};this.bodyTag=function(){return document.getElementsByTagName("BODY")[0]};this.generate_id=function(key){return BF_Editor.editor_div_id+"_"+key}};BF_Editor.editor_div_id="_editor_div_"+Math.random()*100000;bf_editor=new BF_Editor();BuzzLoader.register(function(){bf_editor.init()},1);window.setTimeout(function(){if(typeof bf_editor.poller=="undefined"){bf_editor.init()}},3000);var JSON=JSON||{};if(typeof JSON.parse!=="function"){JSON.parse=function(a){return a.evalJSON()}}if(typeof JSON.stringify!=="function"){JSON.stringify=Object.toJSON}var BF_TWITTER2={PLACED:{},placement:function(f,b){try{var a=f.target;if(!b){a=a.parentNode}return $(a).readAttribute("rel:share_placement")}catch(c){return null}},url:function(f,b){try{var a=f.target;if(!b){a=a.parentNode}return $(a).readAttribute("rel:share_url")}catch(c){return null}},gtrack_name:function(l,h){try{var g=l.target,f,c;while(g!=document){c=$(g).readAttribute("rel:bf_bucket");if(c&&c.match(/gtrack/)){f=$(g).readAttribute("rel:gt_cat");if(f&&f!=""){return f}}g=$(g).parentNode}return null}catch(k){return null}},clicked:function(h){var c=$(h.target)[bfjs.read_attr](bfjs.gtrack_act);if(c&&c.match("^tweet/")){return}var a=BF_TWITTER2.gtrack_name(h);var b="share/twitter/"+(h.region?h.region:"");if(h.region=="tweet"){gtrack.trackShares(21,"numSharesTwitter")}gtrack.track_events(a,b,"");try{var g=h.data.screen_name}catch(f){g=""}if(g=="buzzfeed"){localStorage.setItem("tw_follow_buzzfeed",1)}(new BF_Targetting_Pixel()).add("twitter")},insert:function(){BF_XSS.swift_injection(document.location.protocol+"//platform.twitter.com/widgets.js")},cache_button:function(a,b){$(a).addClassName("hidden");var c=false;return function(g){if(c){return false}c=true;var f;if(g){f=g.target.up(".tweet-btn")}else{f=a.up(".tweet-btn")}$$(".twitter-button-fixer a").each(function(h){h.addClassName("twitter-share-button")});f.insert("<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','twitter-wjs');<\/script>");setTimeout(function(){$$(".twitter-button-fixer").each(function(h){h.style.display="block"})},800)}(b)},load_tweet:function(a){if(typeof twttr=="object"){twttr.widgets.createTweet(a.tweet_id,a.tweet_el,{conversation:a.tweet_parent}).then(function(b){if(b){a.tweet_el.down(".bf-tweet").remove()}b.onload=function(){$(a.tweet_el).update();BF_TWITTER2.load_tweet({tweet_id:a.tweet_id,tweet_el:a.tweet_el,tweet_parent:tweet_parent})}})}else{setTimeout(function(){BF_TWITTER2.load_tweet(a)},100)}},init:function(){EventManager.observe("progload:tweet",function(g){var c=$(g.el),b=c.readAttribute("rel:bf_tweet_id"),h=$(c.readAttribute("rel:bf_tweet_el")),f=c.readAttribute("rel:bf_tweet_parent");if(BF_TWITTER2.PLACED[c.identify()]){return true}else{BF_TWITTER2.PLACED[c.identify()]=1}BF_TWITTER2.load_tweet({tweet_id:b,tweet_el:h,tweet_parent:f})});BF_TWITTER2.insert();universal_dom.get_bucket_elements("twitter_hover").each(function(b){if(BF_STATIC.tt_page=="Video"){BF_TWITTER2.cache_button(b);$(b).addClassName("hidden")}else{$(b).observe("mouseover",function(c){$(b).addClassName("hidden");BF_TWITTER2.cache_button(b,c)})}});var a=setInterval(function(){if(typeof(twttr)=="undefined"||!twttr){return false}clearInterval(a);if(twttr.events._handlers){twttr.events.unbind("click");twttr.events.unbind("tweet");twttr.events.unbind("follow")}twttr.events.bind("click",BF_TWITTER2.clicked);twttr.events.bind("follow",BF_TWITTER2.clicked);twttr.events.bind("tweet",BF_TWITTER2.clicked)},500)}};BuzzLoader.register(BF_TWITTER2.init,2);sailthru_horizon_track=function(g){getCookie=function(k){var m=k+"=";var h=document.cookie.split(";");for(var l=0;l<h.length;l++){var n=h[l];while(n.charAt(0)==" "){n=n.substring(1,n.length)}if(n.indexOf(m)==0){return n.substring(m.length,n.length)}}return null};var a=getCookie("sailthru_hid");if(!a||!g.domain){return}var c="http://"+g.domain+"/horizon/track?r="+parseInt(Math.random()*10000,10)+"&url="+encodeURIComponent(document.location);if(g.tag){g.tags=g.tag}if(g.tags){if(g.tags instanceof Array){c+="&tags="+encodeURIComponent(g.tags.join(","))}else{if(g.tags instanceof Object){for(var b in g.tags){c+="&tags["+encodeURIComponent(b)+"]="+encodeURIComponent(g.tags[b])}}else{c+="&tags="+encodeURIComponent(g.tags)}}c+="&spider=1"}if(g.set){for(var b in g.set){c+="&set["+encodeURIComponent(b)+"]="+encodeURIComponent(g.set[b])}}var f=new Image();f.src=c};sailthru_submit_email=function(l){var g={};var k={longform:"Great! You'll get your first email soon.",WKND:"Thanks! Keep an eye out for the newsletter next week."};var c="/buzzfeed/_email/";var b=$("sailthru_email_form-"+l.id).getValue().strip();var h=(l.category)?l.category:"";var f=g[h]?g[h]:local.t("Sorry! We weren't able to sign you up. Please try again.");var a=k[h]?k[h]:local.t("Great! You'll get your first email soon.");if($("sailthru_email_success-"+l.id)){$("sailthru_email_success-"+l.id).addClassName("hidden")}if($("sailthru_email_failure-"+l.id)){$("sailthru_email_failure-"+l.id).addClassName("hidden")}if($("sailthru_email_form-"+l.id)){$("sailthru_email_form-"+l.id).removeClassName("error-border")}if($("sailthru_email_signup-"+l.id)){$("sailthru_email_signup-"+l.id).show()}if($("sailthru_email_signup-"+l.id).select(".button2").first()){$("sailthru_email_signup-"+l.id).select(".button2").first().disable()}if(!b||b==local.t("your email address")){if($("sailthru_email_failure-"+l.id)){$("sailthru_email_failure-"+l.id).removeClassName("hidden")}if($("sailthru_email_failure-"+l.id)){$("sailthru_email_failure-"+l.id).innerHTML=local.t("Please enter an email address.")}if($("sailthru_email_form-"+l.id)){$("sailthru_email_form-"+l.id).addClassName("error-border")}if($("sailthru_email_signup-"+l.id).select(".button2").first()){$("sailthru_email_signup-"+l.id).select(".button2").first().enable()}}else{if($("sailthru_email_spinner-"+l.id)){$("sailthru_email_spinner-"+l.id).removeClassName("hidden")}new Ajax.Request(c,{method:"get",parameters:{email:b,category:h},onSuccess:function(m){EventManager.fire("sailthru:email_add",m.responseText);if(m.responseText.match(/Email added/)){if($("sailthru_email_success-"+l.id)){$("sailthru_email_success-"+l.id).removeClassName("hidden")}if($("sailthru_email_signup-"+l.id)){$("sailthru_email_signup-"+l.id).hide()}if($("sailthru_email_success-"+l.id)){$("sailthru_email_success-"+l.id).innerHTML=a}if(typeof(gtrack)!="undefined"){gtrack.track_events("","signup/email-success","")}if($$(".js-newsletter-wrap").length){if($("sailthru_email_success-"+l.id)){$("sailthru_email_success-"+l.id).innerHTML="<span>Great!</span> You'll get your first email soon."}setTimeout(function(){$s(".js-newsletter-wrap").removeClassName("hidden");$s(".js-newsletter-wrap #signup_"+h.toLowerCase()).setAttribute("checked","checked");$s(".js-newsletter-form__input").value=b;$s(".js-individual-newsletter-wrap").addClassName("hidden");$s(".js-individual-newsletter-header").addClassName("hidden")},1500)}}else{if($("sailthru_email_failure-"+l.id)){$("sailthru_email_failure-"+l.id).removeClassName("hidden")}if($("sailthru_email_failure-"+l.id)){$("sailthru_email_failure-"+l.id).innerHTML=f}if($("sailthru_email_signup-"+l.id)){$("sailthru_email_signup-"+l.id).show()}if($("sailthru_email_form-"+l.id)){$("sailthru_email_form-"+l.id).addClassName("error-border")}if($("sailthru_email_signup-"+l.id).select(".button2").first()){$("sailthru_email_signup-"+l.id).select(".button2").first().enable()}}if($("sailthru_email_spinner-"+l.id)){$("sailthru_email_spinner-"+l.id).addClassName("hidden")}},onFailure:function(m){if($("sailthru_email_failure-"+l.id)){$("sailthru_email_failure-"+l.id).removeClassName("hidden")}if($("sailthru_email_failure-"+l.id)){$("sailthru_email_failure-"+l.id).innerHTML=f}if($("sailthru_email_signup-"+l.id)){$("sailthru_email_signup-"+l.id).show()}if($("sailthru_email_form-"+l.id)){$("sailthru_email_form-"+l.id).addClassName("error-border")}if($("sailthru_email_spinner-"+l.id)){$("sailthru_email_spinner-"+l.id).addClassName("hidden")}if($("sailthru_email_signup-"+l.id).select(".button2").first()){$("sailthru_email_signup-"+l.id).select(".button2").first().enable()}}})}return false};var playing_animations=new Object();BFAnimatedGifPlayer=function(){this.load_count=0;this.play=function(b,a){this.overlay=a;var c=$(b.image_id).src.replace(/_preview\.gif$/,".gif");this.image=new Image();this.image.src=c;$(b.image_id).src=c;$(b.image_id).parentNode.className+=" animated-spinner";this.gifIsLoaded()};this.gifIsLoaded=function(){this.load_count++;var b=this.load_count*200;if(!this.image.complete&&b<10000){var a=function(){this.gifIsLoaded()}.bind(this);setTimeout(a,200)}else{this.overlay.hide()}}};function RegisterAnimation(args){if(!args||!args.image_element_play_id){console.error("RegisterAnimation needs args: {image_element_play_id: 'animation-id-1234'}")}$(args.image_element_play_id).observe("click",function(e){e.stop();var data=e.element().getAttribute("gif_animation");var player=new BFAnimatedGifPlayer();player.play(eval("("+data+")"),e.element())})}if(typeof deconcept=="undefined"){var deconcept=new Object()}if(typeof deconcept.util=="undefined"){deconcept.util=new Object()}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object()}deconcept.SWFObject=function(r,b,t,g,n,o,l,k,f,p){if(!document.getElementById){return}this.DETECT_KEY=p?p:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(r){this.setAttribute("swf",r)}if(b){this.setAttribute("id",b)}if(t){this.setAttribute("width",t)}if(g){this.setAttribute("height",g)}if(n){this.setAttribute("version",new deconcept.PlayerVersion(n.toString().split(".")))}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){deconcept.SWFObject.doPrepUnload=true}if(o){this.addParam("bgcolor",o)}var a=l?l:"high";this.addParam("quality",a);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var m=(k)?k:window.location;this.setAttribute("xiRedirectUrl",m);this.setAttribute("redirectUrl","");if(f){this.setAttribute("redirectUrl",f)}};deconcept.SWFObject.prototype={useExpressInstall:function(a){this.xiSWFPath=!a?"expressinstall.swf":a;this.setAttribute("useExpressInstall",true)},setAttribute:function(a,b){this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},addParam:function(b,a){this.params[b]=a},getParams:function(){return this.params},addVariable:function(b,a){this.variables[b]=a},getVariable:function(a){return this.variables[a]},getVariables:function(){return this.variables},getVariablePairs:function(){var c=new Array();var b;var a=this.getVariables();for(b in a){c[c.length]=b+"="+a[b]}return c},getSWFHTML:function(){var b="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath)}b='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'"';b+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';var h=this.getParams();for(var g in h){b+=[g]+'="'+h[g]+'" '}var f=this.getVariablePairs().join("&");if(f.length>0){b+='flashvars="'+f+'"'}b+="/>"}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath)}b='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'">';b+='<param name="movie" value="'+this.getAttribute("swf")+'" />';var c=this.getParams();for(var g in c){b+='<param name="'+g+'" value="'+c[g]+'" />'}var a=this.getVariablePairs().join("&");if(a.length>0){b+='<param name="flashvars" value="'+a+'" />'}b+="</object>"}return b},write:function(b){if(this.getAttribute("useExpressInstall")){var a=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(a)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title)}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var c=(typeof b=="string")?document.getElementById(b):b;c.innerHTML=this.getSWFHTML();return true}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"))}}return false}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var g=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var a=navigator.plugins["Shockwave Flash"];if(a&&a.description){g=new deconcept.PlayerVersion(a.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."))}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var b=1;var c=3;while(b){try{c++;b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+c);g=new deconcept.PlayerVersion([c,0,0])}catch(f){b=null}}}else{try{var b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(f){try{var b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");g=new deconcept.PlayerVersion([6,0,21]);b.AllowScriptAccess="always"}catch(f){if(g.major==6){return g}}try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(f){}}if(b!=null){g=new deconcept.PlayerVersion(b.GetVariable("$version").split(" ")[1].split(","))}}}return g};deconcept.PlayerVersion=function(a){this.major=a[0]!=null?parseInt(a[0]):0;this.minor=a[1]!=null?parseInt(a[1]):0;this.rev=a[2]!=null?parseInt(a[2]):0};deconcept.PlayerVersion.prototype.versionIsValid=function(a){if(this.major<a.major){return false}if(this.major>a.major){return true}if(this.minor<a.minor){return false}if(this.minor>a.minor){return true}if(this.rev<a.rev){return false}return true};deconcept.util={getRequestParameter:function(c){var f=document.location.search||document.location.hash;if(c==null){return f}if(f){var b=f.substring(1).split("&");for(var a=0;a<b.length;a++){if(b[a].substring(0,b[a].indexOf("="))==c){return b[a].substring((b[a].indexOf("=")+1))}}}return""}};deconcept.SWFObjectUtil.cleanupSWFs=function(){var b=document.getElementsByTagName("OBJECT");for(var c=b.length-1;c>=0;c--){b[c].style.display="none";for(var a in b[c]){if(typeof b[c][a]=="function"){b[c][a]=function(){}}}}};if(deconcept.SWFObject.doPrepUnload){if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs)};window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);deconcept.unloadSet=true}}if(!document.getElementById&&document.all){document.getElementById=function(a){return document.all[a]}}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;try{BF_XSS.swift_injection(BF_STATIC.static_root+"/js/public/video/flowplayer-3.2.8.min.js?v="+BF_STATIC.version);BF_XSS.swift_injection(BF_STATIC.static_root+"/js/flash/detector.js?v="+BF_STATIC.version)}catch(e){}BF_VIDEO_TYPES_STRING="YouTube, Vimeo, Soundcloud, Rdio, Spotify, Facebook, Hulu, Google Video, LiveLeak, MetaCafe, DailyMotion, or MySpace Video";bf2_terminal_Video=function(){this.type=null;this.id=null;this.embed_link=null;this.detected=false;this.src_link=null;this.getting_thumbnail=false;this.detect_type=function(g){this.detected=false;if(g){g=g.strip()}if(g){var a=g.match(/(http(s)?:\/\/)?(\w+\.)?youtube\.com\/((watch(\?|\#\!|\#)(.*\&)?v=)|(v\/|embed\/))([\w-]+)((#|&|&amp;)t=([\w-]+))?/);var z=g.match(/(http(s)?:\/\/)?(\w+\.)?youtube\.com\/user\/(.*)\#([\w\d\-\/]+\/)?([\w-]{3,})(\/[\w\d\-\/]+)?((#|&|&amp;)t=([\w-]+))?/);var w=g.match(/(http(s)?:\/\/)?(\w+\.)?youtu\.be\/([\w-]{3,})(?:\?t=([\w-]+))?/);if(a||z||w){yt_protocal=document.location.protocol+"//";this.type="youtube";this.id=(w?w[4]:(z?z[6]:a[9]));if(a&&a[12]){this.start_time=a[12]}else{if(z&&z[8]){this.start_time=z[8]}else{if(w&&w[5]){this.start_time=w[5]}else{this.start_time=""}}}if(this.start_time!==""){var m=this.start_time.match(/(\d*)(\D)?(\d*)(\D)?/);this.start_time=0;if(m[2]&&m[2]==="m"){this.start_time+=parseInt(m[1],10)*60}else{if(m[2]&&m[2]==="s"){this.start_time+=parseInt(m[1],10)}else{if(m[1]){this.start_time+=parseInt(m[1],10)}}}if(m[2]&&m[2]==="m"&&m[3]){this.start_time+=parseInt(m[3],10)}}this.embed_link=yt_protocal+"youtube.com/watch?v="+this.id;if(this.start_time){this.embed_link=this.embed_link+"&amp;t="+this.start_time}this.detected=(new Date()).valueOf();this.src_link=yt_protocal+"www.youtube.com/"+(a&&a[4]=="embed/"?"embed":"v")+"/"+this.id;if(this.start_time){this.src_link=this.src_link+"&amp;t="+this.start_time}this.img0=yt_protocal+"img.youtube.com/vi/"+this.id+"/0.jpg";this.img1=yt_protocal+"img.youtube.com/vi/"+this.id+"/1.jpg";this.img2=yt_protocal+"img.youtube.com/vi/"+this.id+"/2.jpg";this.img3=yt_protocal+"img.youtube.com/vi/"+this.id+"/3.jpg";this.thumbs=[this.img1,this.img0,this.img2,this.img3];this.thumbnail_available=true}if(!this.detected){a=g.match(/(http(s)?:\/\/)?(\w+\.)?vimeo\.com\/(video\/|moogaloop\.swf\?clip_id=)*(\d+)/);if(a){var p=document.location.protocol+"//";this.type="vimeo";this.id=a[5];this.embed_link=p+"vimeo.com/"+this.id;this.detected=true;this.src_link=p+"player.vimeo.com/video/"+this.id;this.thumbnail_available=true}}if(!this.detected){a=g.match(/(http(s)?:\/\/)?(\w+\.)?facebook\.com\/(video\/video\.php\?v\=|v\/)(\d+)/);matches1=g.match(/(http(s)?:\/\/)?(\w+\.)?facebook\.com\/(video\.php\?v\=|v\/)(\d+)/);if(a||matches1){var p=document.location.protocol+"//";var c=a?"www.facebook.com/video/video.php?v=":"www.facebook.com/video.php?v=";this.type="facebook";this.id=a?a[5]:matches1[5];this.embed_link=p+c+this.id;this.detected=true;this.src_link=p+"www.facebook.com/v/"+this.id;this.possible_privacy_restrictions=true;this.thumbnail_available=false}}if(!this.detected){a=g.match(/(http(s)?:\/\/)?(\w+\.)?facebook\.com\/([\w\.]+)\/posts\/([\w\d\.]+)/);if(a){var p=document.location.protocol+"//";this.type="facebook_post";this.id=a[4];this.post_id=a[5];this.embed_link=p+"www.facebook.com/"+this.id+"/posts/"+this.post_id;this.src_link=this.embed_link;this.possible_embed_privacy_restrictions=true;this.detected=true;this.thumbnail_available=false}}if(!this.detected){a=g.match(/(http(s)?:\/\/)(\w+\.)facebook\.com\/photo\.php\?v=([\d]+)/);if(a){var p=document.location.protocol+"//";this.type="facebook_video_post";this.post_id=a[4];this.embed_link=p+"www.facebook.com/photo.php?v="+this.post_id;this.src_link=this.embed_link;this.possible_embed_privacy_restrictions=true;this.detected=true;this.thumbnail_available=false}}if(!this.detected){if((a=g.match(/(http(s)?:\/\/)?(\w+\.)?facebook\.com\/photo.php\?fbid=(\w+)(?:&amp;|&)set=([\w\d\.]+)(?:&amp;|&)type=([\w\d\.]+)/))){var p=document.location.protocol+"//";this.type="facebook_photo";this.id=a[4];this.set_id=a[5];this.type_id=a[6];this.embed_link=p+"www.facebook.com/photo.php?fbid="+this.id+"&amp;set="+this.set_id+"&amp;type="+this.type_id;this.src_link=this.embed_link;this.possible_embed_privacy_restrictions=true;this.detected=true;this.thumbnail_available=false}else{if((a=g.match(/(http(s)?:\/\/)?(\w+\.)?facebook\.com\/([\w\.]+)\/photos\/([\w\.]+)\/([\w\.]+)\/(?:.*)type=([\w\d\.]+)/))){var h=document.location.protocol+"//";this.type="facebook_photo";this.id=a[4];this.set_id=a[5];this.post_id=a[6];this.type_id=a[7];this.embed_link=h+"www.facebook.com/photo.php?fbid="+this.post_id+"&amp;set="+this.set_id+"&amp;type="+this.type_id;this.src_link=this.embed_link;this.possible_embed_privacy_restrictions=true;this.detected=true;this.thumbnail_available=false}}}if((a=g.match(/(http(s)?:\/\/)?(\w+\.)?facebook\.com\/permalink\.php\?story_fbid=([\w\d\.]+)(?:&amp;|&)id=([\w\d\.]+)/))){var h=document.location.protocol+"//";this.type="facebook_photo_set";this.id=a[5];this.set_id=a[4];this.embed_link=h+"www.facebook.com/permalink.php?story_fbid="+this.set_id+"&amp;id="+this.id;this.src_link=this.embed_link;this.possible_embed_privacy_restrictions=true;this.detected=true;this.thumbnail_available=false}if(!this.detected){var f=[RegExp(/(http(s)?:\/\/buzzfeed-video1.s3.amazonaws.com\/.*)/),RegExp(/(http(s)?:\/\/s\.video\.buzzfeed\.com\/.*)/),RegExp(/(http(s)?:\/\/s3.amazonaws.com\/buzzfeed-video1\/.*)/)];for(var q=0;q<f.length;q++){a=g.match(f[q]);if(a){this.type="buzzfeed";this.id=a[1];this.embed_link=this.id;this.detected=true;this.src_link=this.id;this.thumbnail_available=false;this.thumbnail=g.replace(/(\.mp4|\.flv)/i,".jpg");break}}}if(!this.detected){a=g.match(/^http:\/\/video\.google\.com\/videoplay?(.*)?docid=((\-)?(\d+))/);if(a){this.type="google video";this.id=a[2];this.embed_link="http://video.google.com/videoplay?docid="+this.id;this.detected=true;this.src_link="http://video.google.com/googleplayer.swf?docid="+this.id}}if(!this.detected){a=g.match(/(http(s)?:\/\/)?(\w+\.)?bloomberg.com\/video\/(?!embed\/)(.+[-]+)?(.*)/);if(a){this.type="bloomberg_video";this.tag="iframe";this.id=a[5].replace(".html","");this.embed_link="http://www.bloomberg.com/video/embed/"+this.id;this.detected=true;this.src_link=g;this.thumbnail_available=false}}if(!this.detected){a=g.match(/(http(s)?:\/\/)?(\w+\.)?bloomberg.com\/video\/embed\/(.*)/);if(a){this.type="bloomberg_video";this.tag="iframe";this.id=a[4].split("?")[0];this.embed_link="http://www.bloomberg.com/video/embed/"+this.id;this.detected=true;this.src_link=this.embed_link;this.thumbnail_available=false}}if(!this.detected){a=g.match(/(http(s)?:\/\/)?(\w+\.)?oscar.go.com\/(embed|video)\/([^"]*)/);if(a){this.type="oscar_video";this.tag="iframe";if(a[4]==="video"){this.id=a[5].split("_m_")[1]}else{this.id=a[5]}this.embed_link="http://oscar.go.com/embed/"+this.id;this.detected=true;this.src_link=this.embed_link;this.thumbnail_available=false}}if(!this.detected){a=g.match(/http:\/\/video\.google\.com\/googleplayer.swf\?docid=((\-)?(\d+))/);if(a){this.type="google video";this.id=a[1];this.embed_link="http://video.google.com/videoplay?docid="+this.id;this.detected=true;this.src_link="http://video.google.com/googleplayer.swf?docid="+this.id}}if(!this.detected){a=g.match(/^http:\/\/(www\.)?liveleak\.com\/.*i=(\w{3}_(\d+)?)/);if(a){this.type="live leak";this.id=a[2];this.embed_link="http://www.liveleak.com/view?i="+this.id;this.detected=true;this.src_link="http://www.liveleak.com/e/"+this.id}}if(!this.detected){a=g.match(/http:\/\/(www\.)?liveleak\.com\/e\/(\w{3}_(\d+))/);if(a){this.type="live leak";this.id=a[2];this.embed_link="http://www.liveleak.com/view?i="+this.id;this.detected=true;this.src_link="http://www.liveleak.com/e/"+this.id}}if(!this.detected){a=g.match(/^http:\/\/vids\.myspace\.com\/.*ideoID=(\d+)/i);if(a){this.type="myspace";this.id=a[1];this.embed_link="http://vids.myspace.com/index.cfm?fuseaction=vids.individual&VideoID="+this.id;this.detected=true;this.src_link="http://mediaservices.myspace.com/services/media/embed.aspx/m="+this.id+",t=1,mt=video"}}if(!this.detected){a=g.match(/http:\/\/vids\.myspace\.com\/.*ideoID=(\d+)/i);if(a){this.type="myspace";this.id=a[1];this.embed_link="http://vids.myspace.com/index.cfm?fuseaction=vids.individual&VideoID="+this.id;this.detected=true;this.src_link="http://mediaservices.myspace.com/services/media/embed.aspx/m="+this.id+",t=1,mt=video"}}if(!this.detected){a=g.match(/src="(http:\/\/(www\.)?hulu\.com\/(embed\/|embed\.html\?eid=)(.*?))"/i);if(a){this.type="hulu";this.id=a[4];this.embed_link="http://www.hulu.com/embed/"+this.id;this.detected=true;this.src_link=a[1]}}if(!this.detected){a=g.match(/^http:\/\/(www\.)?hulu\.com\/embed\/(.*)$/i);if(a){this.type="hulu";this.id=a[2];this.embed_link="http://www.hulu.com/embed/"+this.id;this.detected=true;this.src_link=this.embed_link}}if(!this.detected){if(/http(s)?:\/\/(w\.)?soundcloud.com\/player/i.test(g)){a=g.match(/http(s)?:\/\/(w\.)?soundcloud.com\/player\/\?([\/\d\w=%\.;:\-_&]*)/i);var o=a[3].replace(/&amp;/g,"&");var k=o.toQueryParams();var n=k.url.indexOf("/playlists/")!==-1;this.id=k.hasOwnProperty("url")?k.url:"";this.soundcloud_artwork=k.hasOwnProperty("show_artwork")?k.show_artwork:"true";if(n){this.soundcloud_visual="true"}else{this.soundcloud_visual=k.hasOwnProperty("visual")?k.visual:"false"}this.type="soundcloud";this.tag="iframe";this.detected=true;this.embed_link="https://w.soundcloud.com/player/?url="+encodeURIComponent(this.id)+"&color=ff5500&auto_play=false&hide_related=false&visual="+this.soundcloud_visual+"&show_artwork="+this.soundcloud_artwork;this.src_link=this.embed_link}}if(!this.detected&&g.match(/spotify/)){if(g.match(/open\.spotify/)){g=g.replace("http://open.spotify.com","spotify");g=g.replace(/\//g,":")}a=g.match(/(spotify:.*:[0-9a-zA-Z]{22})/i);if(a){this.type="spotify";this.tag="iframe";this.id=a[1];this.embed_link="https://embed.spotify.com/?uri="+this.id;var r=g.match(/utm_[source|medium|campaign|content|term]+=[^&"]+/ig);if(r){this.embed_link+="&"+r.join("&")}this.detected=true;this.src_link=a[1]}}if(acl.user_can("general_admin")&&!this.detected&&g.match(/polldaddy/)){a=g.match(/polldaddy.com\/poll\/(\d+)(\/)?/i);if(a){this.type="polldaddy";this.tag="script";this.id=a[1];this.embed_link="http://polldaddy.com/poll/"+this.id+"/";this.detected=true;this.src_link="http://polldaddy.com/poll/"+this.id+"/";this.thumbs=[BF_STATIC.image_root+"/static/images/public/contrib/poll-daddy.gif"];this.thumbnail_available=true}}if(!this.detected&&g.match(/(msnbc|nbcnews)\./)){a=g.match(/(nbcnews\.com\/video\/[^\/]+\/|launch=)(\d+)/i);if(a){this.type="msnbc";this.id=a[2];this.embed_link="http://www.nbcnews.com/video/nbcnews.com/"+this.id;this.detected=true;this.thumbs=[BF_STATIC.image_root+"/static/images/public/contrib/msnbc.jpg"];this.thumbnail_available=true;this.src_link=this.embed_link}}if(acl.user_can("general_admin")&&!this.detected&&g.match(/storify/)){a=g.match(/storify.com\/([^\/]+\/[^\/.]+)/i);if(a){this.type="storify";this.tag="script";this.id=a[1];this.embed_link="http://storify.com/"+this.id;this.detected=true;this.thumbnail_available=false;this.src_link="http://storify.com/"+this.id}}if(!this.detected){a=g.match(/(http:\/\/(www\.)?dailymotion\.com\/swf\/(\w+))/i);if(a){this.type="daily motion";this.id=a[3];this.embed_link="http://www.dailymotion.com/swf/"+this.id;this.detected=true;this.src_link=a[1]}}if(!this.detected){a=g.match(/http:\/\/(www\.)?dailymotion\.com\/.*(related|video)\/([\w-]+)/i);if(a){this.type="daily motion";this.id=a[3];this.embed_link="http://www.dailymotion.com/swf/"+this.id;this.detected=true;this.src_link=this.embed_link}}if(!this.detected){a=g.match(/^http:\/\/(www\.)?metacafe\.com\/watch\/(.*?)\/(\w+)/i);if(a){this.type="metacafe";this.id=a[2];this.embed_link="http://www.metacafe.com/fplayer/"+this.id+"/"+a[3]+".swf";this.detected=true;this.src_link=this.embed_link}}if(!this.detected){a=g.match(/http:\/\/(embed|pshared)\.5min\.com\/(?:.*\/?)PlayerSeed(?:.*\/?)sid=(\d*)(?:.*|&amp;|&)(?:.*|&amp;|&)playList=(\d*)/i);if(a){this.type="aol";this.id=a[2];this.playlist_id=a[3];this.embed_link="http://embed.5min.com/PlayerSeed/?sid="+this.id+"&playList="+this.playlist_id;this.detected=true;this.src_link=this.embed_link;console.debug(this.src_link)}}if(!this.detected){a=g.match(/http(s)?:\/\/rd\.io\/[xi]\/([a-zA-Z0-9_]+)/i);if(a){this.type="rdio";this.id=a[2];this.embed_link="http://rd.io/i/"+this.id;this.detected=true;this.thumbnail_available=true;this.src_link=this.embed_link}}if(!this.detected){a=g.match(/instagram.com\/p\/([^\/]+)(\/)?/i);if(a){this.type="instagram";this.id=a[1];this.embed_link="http://instagram.com/p/"+this.id+"/";this.detected=true;this.thumbnail_available=true;this.src_link=this.embed_link}}if(!this.detected){a=g.match(/vine.co\/v\/([^\/]+)/i);if(a){this.type="vine";this.id=a[1];this.embed_link="https://vine.co/v/"+this.id;this.detected=true;this.thumbnail_available=false;this.src_link=this.embed_link}}if(!this.detected){a=g.match(/<a href="(http:\/\/www\.someecards.com\/.*)"><img src="([^"]*)".* \/><\/a>/i);if(a){this.type="someecard";this.id=a[2];this.embed_link=a[2];this.detected=true;this.thumbnail_available=false;this.src_link=a[1]}}if(!this.detected){a=g.match(/<a href="(http:\/\/www\.someecards.com\/.*)"><img src="([^"]*)".* \/><\/a>/i);if(a){this.type="someecard";this.id=a[2];this.embed_link=a[2];this.detected=true;this.thumbnail_available=false;this.src_link=a[1]}}if(!this.detected){a=g.match(/((?:http(?:s)?:\/\/)?(?:\w+\.)?whisper\.sh\/whisper\/(\w+)(?:\?[^'"]+)?)/i);if(a){var l=a[2],b=a[1].toQueryParams(),v=b.alt_text;if(!v&&(alt_matches=g.match(/alt=['"]([^'"]+)/))){v=alt_matches[1]}this.type="whisper";this.id=l;this.alt_text=v?encodeURIComponent(v):"";this.src_link="http://whisper.sh/whisper/"+this.id;this.embed_link=this.src_link+"?alt_text="+this.alt_text;this.thumbnail_available=false;this.detected=true}}if(acl.user_can("upload_audio_files")&&!this.detected){a=g.match(/.*\/([^\/]+)\.mp3/i);if(a){this.type="audio";this.id=a[1];this.embed_link=g;this.detected=true;this.thumbnail_available=false}}if(BF_STATIC.bf_test_mode){var t=BF_STATIC.test_thumb?BF_STATIC.test_thumb:"http://dev.buzzfeed.com/static/images/public/t/640x480.jpg";this.thumbs=BF_STATIC.test_thumbs?BF_STATIC.test_thumbs:[t,t,t,t]}}};this.detect_thumbnail_url=function(c,f){if(this.getting_thumbnail){return}else{this.getting_thumbnail=true}if(typeof(c)==="function"){f=c;c=this.embed_link}if(!c){return false}c=c.strip();if(c.match("youtube")){c=c.replace(/#.*$/,"")}var a="/buzzfeed/_rservice/?uri="+encodeURIComponent(c)+"&thumbnail_url",b=this;if(this.thumbs&&this.thumbs.length){if(typeof(f)==="function"){f.call(b);return false}}if(BF_STATIC.bf_test_mode&&BF_STATIC.test_thumbs){b.getting_thumbnail=false;b.thumbs=BF_STATIC.test_thumbs;if(typeof(f)==="function"){f.call(b)}}else{new Ajax.Request(a,{method:"get",onComplete:function(g){b.getting_thumbnail=false;b.thumbs=[g.responseText];if(typeof(f)==="function"){f.call(b)}}})}};this.detect_duration=function(c,f){if(this.getting_duration){return}else{this.getting_duration=true}if(typeof(c)==="function"){f=c;c=this.embed_link}if(!c){return false}c=c.strip();c=c.replace(/&amp;t=([\w-]+)/,"");var a="/buzzfeed/_rservice/?uri="+encodeURIComponent(c)+"&video_duration",b=this;if(this.duration){if(typeof(f)==="function"){f.call(b);return false}}if(BF_STATIC.bf_test_mode){b.getting_duration=false;b.duration=666;if(typeof(f)==="function"){f.call(b)}}else{new Ajax.Request(a,{method:"get",onComplete:function(g){b.getting_duration=false;b.duration=g.responseText;if(typeof(f)==="function"){f.call(b)}}})}}};BF_initSwfObject=function(a,o){try{if(typeof(a)=="undefined"){return null}a=a.strip();var p=new bf2_terminal_Video(),g=null,c=425,r=355,b=(new Date()).getTime(),h=0,q="",f="",l="",k="";if(o&&o.width){c=o.width}if(o&&o.height){r=o.height}if(o&&o.id){b=o.id}if(o&&o.dfp&&o.dfp==true){k="&dfp=true"}if(o&&o.autoplay){h=o.autoplay}if(o&&o.hideYouTubeInfo||BF_STATIC.tt_page=="Videos"){q="&autohide=2&showinfo=0"}if(o&&o.modestBranding||BF_STATIC.tt_page=="Videos"){l="&modestbranding=1"}p.detect_type(a);if(p.detected){a=p.src_link}if(a.match(/vimeo\.com/)){g={addParam:function(){},write:function(t){$(t).insert('<iframe src="'+a+'" frameborder="0" width="'+c+'" height="'+r+'"></iframe>')},getSWFHTML:function(){return'<iframe src="'+a+'" frameborder="0" width="'+c+'" height="'+r+'"></iframe>'}}}else{if(a&&a.match(/(hulu|myspace|liveleak|flickr)\.com/)){g=new SWFObject(a,b,c,r,"6","#000")}else{if(a.match(/video\.google\.com/)){g=new SWFObject(a,b,c,r,"6","#000")}else{if(a.match(/(nbcnews\.com\/video\/[^\/]+\/)(\d+)/i)){var m=a.match(/(nbcnews\.com\/video\/[^\/]+\/)(\d+)/i);g=new SWFObject("http://www.msnbc.msn.com/id/32545640",b,c,r,"6","#000");g.addVariable("launch",p.id);g.addVariable("width",c);g.addVariable("height",r)}else{if(a.match(/youtube\.com/)){if(p.start_time){f="&start="+p.start_time}if(a.match(/embed/)){g={getId:function(){return p.id},getEmbedCode:function(){return'<div style="position:relative;" id="video_wrapper_'+p.id+'"><iframe id="yt_'+p.id+'" type="text/html" allowscriptaccess="always" allowfullscreen="true" width="'+c+'" height="'+r+'" src="'+a+"?version=3&fs=1&hl=en&origin="+window.location.protocol+"//"+window.location.host+"&playerapiid=embed_"+p.id+"&autoplay="+h+q+k+l+f+'&enablejsapi=1&wmode=opaque" bgcolor="#000" class="ytvideo"></iframe></div>'}}}else{g=new SWFObject(a+"?version=3&fs=1&hl=en&playerapiid="+b+"&autoplay="+h+q+k+l+f+"&enablejsapi=1",b,c,r,"6","#000");g.addParam("wmode","transparent");g.addParam("allowscriptaccess","always")}}else{if(a.match(/s\.video\.buzzfeed\.com\//)||a.match(/s3\.amazonaws\.com\/buzzfeed-video1\//)||a.match(/buzzfeed-video1\.s3\.amazonaws\.com\//)){g=new FlowVid(o);g.width=c;g.height=r;g.vid_id=a.replace(/^(http:\/\/)(s\.video\.buzzfeed\.com\/|s3\.amazonaws\.com\/buzzfeed\-video1\/|buzzfeed-video1\.s3\.amazonaws\.com\/)(.*)(\.[A-Z0-9]+)$/i,"$3");g.url=a;if(window.autoplay!="undefined"&&window.autoplay==true){h=true}g.vid_autoplay=h}else{if(a.match(/whisper\.sh/i)){g=new SWFObject(a+(!a.match(/\?/)?"?":"")+"&amp;autostart=false&amp;autoplay="+h+"&amp;color1=0x3a3a3a&amp;color2=0x999999&amp;border=0",b,c,r,"6","#000");g.addVariable("whisper_id",p.id);g.addVariable("alt_text",p.alt_text)}else{g=new SWFObject(a+(!a.match(/\?/)?"?":"")+"&amp;autostart=false&amp;autoplay="+h+"&amp;color1=0x3a3a3a&amp;color2=0x999999&amp;border=0",b,c,r,"6","#000")}}}}}}}return g}catch(n){console.dir(n);return false}};var FlowVid=function(a){this.use_html5=false;this.width="100%";this.height="100%";this.debug=false;this.track_ga=true;this.track_formula=false;this.vid_id="unknown-video";this.url=null;this.vid_player="flowplayer";this.vid_onloadstart=null;this.vid_onplay=null;this.vid_onended=null;this.vid_cuepoints={25:null,50:null,75:null};this.vid_onclick=null;this.vid_autoplay=false;this.vid_scaling="fit";this.hide_controls=false;this.timestamp=(new Date()).getTime();this.html5_support=function(){var c=document.createElement("video"),b=false;try{if(b=!!c.canPlayType){b=new Boolean(b);b.ogg=c.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"");b.h264=c.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"");b.webm=c.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}}catch(f){}return b};this.default_onloadstart=function(){if($(this.player_div)&&!$(this.player_div).tracked.impression){$(this.player_div).tracked.impression=true;this._video_track(this.vid_id,"[nc]video:load","",null,true);if(this.vid_onloadstart){if(this.debug){console.log("Video Track (Custom, onloadstart): [...]")}try{this.vid_onloadstart()}catch(b){console.log("ERROR: Video Track (Custom, onloadstart): "+b)}}}};this.default_onplay=function(){if($(this.player_div)&&!$(this.player_div).tracked.start){$(this.player_div).tracked.start=true;this._video_track(this.vid_id,"video-play");if(this.vid_onplay){if(this.debug){console.log("Video Track (Custom, onplay): [...]")}try{this.vid_onplay()}catch(b){console.log("ERROR: Video Track (Custom, onplay): "+b)}}}};this.default_onended=function(){if($(this.player_div)&&!$(this.player_div).tracked.finish){$(this.player_div).tracked.finish=true;this._video_track(this.vid_id,"[nc]video:end");if(this.vid_onended){if(this.debug){console.log("Video Track (Custom, onended): [...]")}try{this.vid_onended()}catch(b){console.log("ERROR: Video Track (Custom, onended): "+b)}}}};this.default_timeupdate=function(){var c=$(this.player_div);for(var b in this.vid_cuepoints){if(!(c.tracked.reach[b])){if(c.currentTime*1000>Math.floor(c.duration*b*10-(b==100?100:0))){c.tracked.reach[b]=true;this._video_track(this.vid_id,"[nc]video:reached",b+"%")}}}};this._video_track=function(c,q,f){var k=q+(f?"/"+f:"");if(this.debug){console.log("Video Track: "+k+"/"+c)}if(this.track_ga&&typeof(_gaq)!="undefined"&&_gaq!=null){try{var l=gtrack.tt_page;if(a.dfp){var h="dfp/"+q}else{var h=q}var m=this.vid_id;var n=(f?":"+f:"");var o=h.match(/load/)?true:false;gtrack.track_events(l,(h+n),m,"",o)}catch(g){console.log("ERROR: Video Track")}}};this.addParam=function(b,c){};this.write=function(m){if(!this.url){console.error("Video URL must be specified!");return}try{this.player_div="player_"+this.timestamp;var g=this.url,b=navigator.userAgent.toLowerCase(),l=$(m);if(!this.vid_thumbnail){this.vid_thumbnail=this.url.replace(/^(.*)(\.)([A-Z0-9]+)$/i,"$1.jpg")}if(this.use_html5||b.match(/iphone|ipad|android/i)||(false&&b.match(/chrome|safari/i))){var c=document.createElement("video");c.id=this.player_div;c.tracked={impression:false,start:false,finish:false,reach:[]};c.style.width=this.width+((this.width+"").match(/%/)?"":"px");c.style.height=this.height+((this.height+"").match(/%/)?"":"px");c.setAttribute("src",g.replace(/(\.flv)$/i,".mp4"));c.addClassName("bf_video");c.binding=this;if(this.vid_thumbnail){c.setAttribute("poster",this.vid_thumbnail)}if(b.match(/android/)){c.setAttribute("onclick","this.play();")}else{c.setAttribute("controls","controls")}if(this.default_timeupdate){c.setAttribute("ontimeupdate","this.binding.default_timeupdate()")}if(this.default_onended){c.setAttribute("onended","this.binding.default_onended()")}if(this.default_onplay){c.setAttribute("onplay","this.binding.default_onplay()")}if(this.default_onloadstart){c.setAttribute("onloadstart","this.binding.default_onloadstart()")}$(m).insert(c)}else{if(this.vid_player=="flowplayer"){var c=document.createElement("div"),k=this;this.controls_height=(this.hide_controls?0:24);c.id=this.player_div;c.tracked={impression:false,start:false,finish:false,reach:[]};c.style.width=this.width+((this.width+"").match(/%/)?"":"px");c.style.height=((this.height+"").match(/%/)?this.height:((parseInt(this.height)+this.controls_height)+"px"));$(m).insert(c);var f={playlist:[],screen:{width:"100%",height:"100%",top:0,left:0},canvas:{backgroundGradient:"none",background:"rgba(34,34,34,1)"},plugins:{controls:{playlist:false,autoHide:(this.hide_controls?"auto":"never"),buttonOverColor:"rgba(255,255,255,1)",progressGradient:"none",timeBgColor:"rgb(0,0,0,0)",durationColor:"rgba(255,255,255,1)",timeBorder:"0px solid rgba(0,0,0,0)",sliderGradient:"none",buttonColor:"rgba(255,255,255,.82)",backgroundGradient:"none",timeColor:"rgba(255,255,255,1)",borderRadius:"0px",tooltipTextColor:"rgba(255,255,255,1)",timeSeparator:" ",bufferGradient:"none",volumeBorder:"1px solid rgba(255,255,255,.36)",volumeSliderColor:"rgba(255,255,255,.09)",volumeColor:"rgba(255,255,255,1)",sliderBorder:"1px solid rgba(255,255,255,.36)",volumeSliderGradient:"none",tooltipColor:"rgba(0,0,0,1)",sliderColor:"rgba(255,255,255,.09)",buttonOffColor:"rgba(130,130,130,1)",progressColor:"rgba(0,119,238,1)",bufferColor:"rgba(255,255,255,.18)",backgroundColor:"rgba(34,34,34,1)",height:24,opacity:1}},onLoad:function(){if(k.default_onloadstart){k.default_onloadstart()}},key:"#$6f5e940abb368c2a4e2"};if(!this.vid_autoplay){f.playlist.push({url:this.vid_thumbnail,duration:0,scaling:this.vid_scaling})}f.playlist.push({url:g,autoPlay:this.vid_autoplay,scaling:this.vid_scaling,onStart:function(n){if(k.default_onplay){k.default_onplay()}if(n.fullDuration>0){for(var o in k.vid_cuepoints){n.onCuepoint(Math.floor(n.fullDuration*o*10-(o==100?100:0)),function(p){if($(k.player_div)&&!$(k.player_div).tracked.reach[this]){$(k.player_div).tracked.reach[this]=true;k._video_track(k.vid_id,"[nc]video:reached",this+"%");if(k.vid_cuepoints[this]){if(k.debug){console.log("Video Track (Custom, reached/"+this+"%): [...]")}try{k.vid_cuepoints[this](k)}catch(q){console.log("ERROR: Video Track (Custom, reached/"+this+"%): "+q)}}}}.bind(o))}}},onFinish:function(n){if(k.default_onended){k.default_onended()}}});flowplayer(this.player_div,{src:"http://s3.amazonaws.com/buzzfeed-video1/flowplayer.commercial-3.2.7.swf",onFail:function(){$(k.player_div).up(".video-embed-area").addClassName("video-embed-noflash")},wmode:"opaque"},f)}else{console.error("FlowVid Error: Video player type not specified.")}}}catch(h){console.error("FlowVid Error: "+h)}}};ga_cv_map={"1":"template","2":"postCategory","3":"pageType","4":"postAuthor","5":"postBadges","6":"isRegistered","7":"signupDate","8":"facebookConnected","9":"registrationPath","10":"userFlags","11":"allowsEmailUpdates","14":"origReferrer","15":"origPageType","16":"origSegment","17":"username","18":"lastVisit","23":"numReactions","24":"reactionCounts","25":"numComments","26":"numPosts","27":"country","28":"categoryCounts","29":"categoryShareCounts","30":"logged-in","31":"facebookConnected","32":"numShares","33":"numReactions","34":"time_since_last_visit","35":"intlEdition","36":"","37":"postTags1","38":"postTags2","39":"postTags3","40":"numEvents","41":"sinceFV_d","42":"sinceFDHPV_d","43":"nDHPV","44":"postFlags","45":"postPublished","46":"language","47":"campaignID","48":"ReactGifImpression","49":"postForm","50":"mobileVariation"};var BF_GTrack=function(){var _gtrack=this;this.trackable_tags=["a","input","button","i","textarea"];this.tt_page=typeof(BF_STATIC.tt_page)!="undefined"?BF_STATIC.tt_page:"NA";this.scrollDepth=0;this.UserCVIDs=[6,8,9,10,11,14,15],this.VistCVIDs=[27,30,31,32,33,34],this.ShareCVs=[];this.postEvents=[];this.click_event_storage=[],this.comscore_url=(document.location.protocol=="https:"?"https://sb":"http://b")+".scorecardresearch.com/b?";this.didScroll=false;this.trackedScrollShare=false;this.hasBottomShare;this.shareBottom=0;this.shareTop=0;this.scrollBottom=0;this.ga_status=function(){return typeof(_gaq)!="undefined"&&typeof(_gat)!="undefined"&&!gtrack.checkTestMode()?true:false};this.ga_debug=function(){return document.location.search.match(/debug=ga/)?true:false};this.track_timing=function(category,variable,time,opt_label,opt_sample){if(BF_STATIC.bf_env=="live"&&!BF_STATIC.bf_test_mode){_gaq.push(["_trackTiming",category,variable,time,opt_label,opt_sample])}else{console.log("TrackTiming: ['"+category+"','"+variable+"', "+time+", '"+opt_label+"', "+opt_sample+"]")}};this.is_homepage=function(){var p=BF_STATIC&&BF_STATIC.hasOwnProperty("tt_page")?BF_STATIC.tt_page:"";return p.match("Home|France|Espanol|Brasil")?true:false};this.init=function(){setInterval(function(){if(gtrack.didScroll){gtrack.trackScrollDesktop();gtrack.didScroll=false}},250);bfjs.universal_each(gtrack.trackable_tags,function(t){var trigger="mousedown";if(bfjs.isMobile()&&BF_STATIC.env=="live"){trigger="click"}$(document.body).on(trigger,t,function(event){var el=bfjs.eventFindEl(event,t);gtrack.click(el)})})};this.cleanLink=function(href){if(typeof href=="string"){return href.replace("http://","").replace("https://","").replace("www.","")}else{return null}};this.click=function(el){var gt_act=$(el)[bfjs.read_attr](bfjs.gtrack_act);var gt_label=$(el)[bfjs.read_attr](bfjs.gtrack_label);var gt_cat=gtrack.findCatLabel(el);var tag=el.tagName.toUpperCase();if(typeof(gt_act)!="string"){gt_act="link";gt_label=gtrack.cleanLink(el.href)}if(gt_act.indexOf("dfp")>=0){var doubleclick=(el.href.match(/doubleclick/)&&el.href.match(/http/)&&el.href.split("http://").length>2?true:false);gt_label=(gt_label?gt_label+"/":"")+(doubleclick?gtrack.cleanLink(el.href.split("http://")[2]):gtrack.cleanLink(el.href))}gtrack.track_events(gt_cat,gt_act,gt_label)};this.findCatLabel=function(element){try{var count=0,max=99;while(element!=document&&count<max){var parent=$(element)[bfjs.up]();if(parent[bfjs.read_attr](bfjs.gtrack_cat)){return parent[bfjs.read_attr](bfjs.gtrack_cat)}else{element=parent;count++}}return null}catch(e){return null}};this.track_events=function(cat,act,label,value,br){if(act=="ignore"){return}br=typeof(br)!="undefined"?br:false;if(typeof cat=="undefined"||!cat){cat=gtrack.tt_page}if(typeof act=="undefined"||!act){act=""}if(label&&typeof label!="string"&&label!=null){label=label.toString()}if(typeof label=="undefined"||!label){label="(no label)"}act=act.indexOf("[nc]")<0?"click:"+act:act.replace("[nc]","");cat=cat.indexOf("[ttp]")<0?cat:cat.replace("[ttp]",gtrack.tt_page);try{if(BF_STATIC.bf_env!="live"){if(hasLocalStorage()&&(act.match("click")||act.match("page-exit"))&&!act.match("ab:")){localStorage.setItem("custom_events",window.JSON.stringify({category:cat,action:act,label:label}))}console.log("Event: ['"+cat+"','"+act+"','"+label+"','"+value+"','"+br+"']")}else{if(gtrack.ga_status()){_gaq.push(["_trackEvent",cat,act,label,,br])}}if(gtrack.postEvents.length>0&&!act.match("impab")&&!act.match("page-exit")&&!act.match("video:load")){var abact=act.match(":")?act.replace(":","ab:"):("ab:"+act);var postLabel=gtrack.postEvents.toString()+(label?";ol:"+label:""),br=true;if(BF_STATIC.bf_env!="live"){if(hasLocalStorage()&&abact.match("click")&&!abact.match("ab:")){localStorage.setItem("custom_events",window.JSON.stringify({category:cat,action:abact,label:postLabel}))}console.log("Event: ['"+cat+"','"+abact+"','"+postLabel+"','"+value+"','"+br+"']")}else{if(gtrack.ga_status()){_gaq.push(["_trackEvent",cat,abact,postLabel,,br])}}}if(gtrack.tt_page=="Buzz"&&objExists(buzzDetails)&&buzzDetails.ad=="1"&&!cat.match("header")&&!cat.match("bottom")){bfjs.universal_each(["share/","video-play"],function(x){if(act.match(x)){var clickType=objExists(hashtrack)&&objExists(hashtrack.tracked_hash_tag)?tracker.types.HASH_CLICK:tracker.types.SITE_CLICK;tracker.add({type:clickType});tracker.run()}})}if(act.match("share/")&&!bfjs.isMobile()){gtrack.comscore_events({cat:cat,act:act,label:label})}if(act.match("click:")){gtrack.adobe_events({cat:cat,act:act,label:label})}if(gtrack.tt_page=="Buzz"&&objExists(dfa)){dfa.fire_event(act)}}catch(err){if(BF_STATIC.bf_env!="live"){console.log(err)}}};this.comscore_events=function(eventData){if(typeof eventData!="object"){return false}var params=Object.clone(_cs)[0],csUrl;Object.extend(params,eventData);Object.extend(params,{ns_type:"hidden"});params=JSON.parse(JSON.stringify(params));csUrl=gtrack.comscore_url+Object.toQueryString(params);if(typeof udm_!="undefined"){udm_(csUrl,null)}if(BF_STATIC.bf_env!="live"){console.log("csParms",params);console.log("csUrl",csUrl)}};this.adobe_events=function(eventData){if(typeof eventData!="object"){return false}if(typeof s!="object"){return false}s.linkTrackVars="eVar51,eVar52,eVar53,events";s.linkTrackEvents="event1";s.events="event1";s.eVar51=eventData.cat;s.eVar52=eventData.act;s.eVar53=eventData.label;if(BF_STATIC.bf_env!="live"){console.log("Adobe | eVar51:",eventData.cat);console.log("Adobe | eVar52:",eventData.act);console.log("Adobe | eVar53:",eventData.label)}else{s.tl(true,"o","click")}};this.checkTestMode=function(){if(BF_STATIC.bf_test_mode&&document.cookie.match("sel2_third_party_analytics")===null&&document.cookie.match("sel2_gtrack")===null&&!bfjs.isMobile()){return true}else{return false}};this.abTracking=function(){if(gtrack.checkTestMode()){return}if(!gtrack.ga_status()||typeof(abtest.abLive)=="undefined"){setTimeout("gtrack.abTracking()",500);return false}if(abtest.abLive){var chance=Math.floor((Math.random()*10)+1),override=document.location.search.indexOf("abdebug")>-1;if(chance==10||override){var abTests=abtest.abTests.split(","),abVars=abtest.abVariations.split(",");for(var x=0;x<abTests.length;x++){gtrack.postEvents.push(abTests[x]+":"+abVars[x])}gtrack.postEvents.sort();gtrack.fireABImp()}}};this.fireABImp=function(){if(gtrack.postEvents.length>0){gtrack.track_events("[ttp]","[nc]impab",gtrack.postEvents.toString(),"",true)}};this.trackShares=function(index,id){if(!gtrack.ga_status()){return}_gaq.push(function(){var tracker=_gat._getTrackerByName();var shares=gtrack.getCustomVars(index,0);var CVs={};if(index==23){var selectedBadge=id.split("_")[1];id=id.split("_")[0]}if(!isNaN(parseFloat(Number(shares)))){shares++}CVs[index]=shares;if(index>=20&&index<=22){var sessionShares=isNaN(gtrack.getCustomVars(32,0))?0:gtrack.getCustomVars(32,0);sessionShares=Number(sessionShares)+1;gtrack.setCustomVars(2,{32:sessionShares});var buzz_cat=BF_STATIC.bf_category;if(Number(buzz_cat)){var cc=gtrack.getCustomVars(29,"").split("");var lid="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(buzz_cat);if(cc.length>=50){cc.shift()}cc.push(lid);CVs[29]=cc.join("")}}if(index==23){var reactionCounts="";var badges=(gtrack.getCustomVars(24,"L-0_WI-0_OM-0_WT-0_C-0_F-0_G-0_T-0_OL-0_E-0")).split("_");for(badge=0;badge<badges.length;badge++){var badgeAbr=badges[badge].split("-")[0];var badgeVal=badges[badge].split("-")[1];if((selectedBadge.substring(0,badgeAbr.length).toLowerCase()==badgeAbr.toLowerCase())&&(badgeVal<999)){badgeVal++}reactionCounts+=badgeAbr+"-"+badgeVal+"_"}reactionCounts=escape(reactionCounts.substring(0,reactionCounts.length-1));CVs[24]=reactionCounts;var sessionReactions=Number(gtrack.getCustomVars(33,0))+1;gtrack.setCustomVars(2,{33:sessionReactions})}gtrack.setCustomVars(1,CVs)})};this.getCustomVars=function(index,defVal){var tracker=_gat._getTrackerByName();if(gtrack.VistCVIDs.indexOf(index)>=0&&window.sessionStorage&&typeof sessionStorage["CV_"+index]!="undefined"){return sessionStorage["CV_"+index]}else{if(!tracker._getVisitorCustomVar(index)){var CValue=defVal}else{var CValue=tracker._getVisitorCustomVar(index)}}return CValue};this.CVsExist=function(IDs,scope){for(var x=0;x<IDs.length;x++){if(scope==2&&window.sessionStorage){if(typeof sessionStorage["CV_"+IDs[x]]=="undefined"){return false}}else{if(gtrack.getCustomVars(IDs[x],null)==null){return false}}}return true};this.setVisitCVs=function(){if(gtrack.checkTestMode()){return}if(!gtrack.ga_status()){setTimeout("gtrack.setVisitCVs()",500);return false}var ts_now=Math.round(new Date().getTime()/1000);if(typeof bf_login!="undefined"){bf_login.loggedInCallbacks.push(gtrack.loggedInStatus)}gtrack.loggedInStatus();if(!gtrack.CVsExist([41],2)||gtrack.getCustomVars(41,null)==null||gtrack.ga_debug()){var time_cookie=bfjs.read_cookie("__utma");var numDays=0;if(time_cookie&&time_cookie.split(".").length>=2){var firstVisit=time_cookie.split(".")[2];numDays=Math.floor((ts_now-firstVisit)/86400)}gtrack.setCustomVars(2,{41:numDays})}if(!gtrack.CVsExist([42],2)||gtrack.getCustomVars(42,null)==null||gtrack.ga_debug()){var firstHPVisit=bfjs.read_cookie("firstHPVisit");var daysSinceFirstHPVisit="NA";if(document.referrer==""){if(firstHPVisit&&typeof firstHPVisit!="undefined"){daysSinceFirstHPVisit=Math.floor((ts_now-firstHPVisit)/86400)}else{if(gtrack.is_homepage()||gtrack.ga_debug()){daysSinceFirstHPVisit=0;bfjs.write_cookie("firstHPVisit",ts_now.toString())}}}if(typeof daysSinceFirstHPVisit=="number"){gtrack.setCustomVars(2,{42:daysSinceFirstHPVisit})}}var HPVisits=parseInt(gtrack.getCustomVars(43,0));if(gtrack.is_homepage()&&(document.referrer==""||gtrack.ga_debug())){HPVisits+=1}gtrack.setCustomVars(1,{43:HPVisits});var intlEdition="";if(bfjs.isMobile()){intlEdition=(readCookie("country")!=null&&readCookie("country")!="us"?readCookie("country"):"us")}else{if(typeof BFW_Util=="object"){intlEdition=(BFW_Util.getCookie("country")!=null&&BFW_Util.getCookie("country")!="us"?BFW_Util.getCookie("country"):"us")}}gtrack.setCustomVars(1,{35:intlEdition});if(!gtrack.CVsExist([27],2)||gtrack.getCustomVars(27,null)==null||gtrack.ga_debug()){if("country_track" in BF_STATIC){var country=BF_STATIC.country_track;gtrack.setCustomVars(2,{27:country})}}};this.loggedInStatus=function(){var user=new BF_User();var userInfo=user.getUserInfo();var isRegistered=typeof user.isLoggedIn()!="undefined"?user.isLoggedIn():"false";var facebookConnected=typeof userInfo.is_facebook_user!="undefined"?userInfo.is_facebook_user:"false";var userid=parseInt(userInfo.userid);var CVs={30:isRegistered,31:facebookConnected};if(isRegistered){CVs[17]=(userInfo.p_editor_admin?"editor":"user")+"/"+userid.toString(36)}gtrack.setCustomVars(2,CVs)};this.setBuzzCVs=function(){if(gtrack.checkTestMode()){return}var ad=buzzDetails.hasOwnProperty("ad")?buzzDetails.ad:"",raw=buzzDetails.hasOwnProperty("raw")?buzzDetails.raw:"",nsfw=buzzDetails.hasOwnProperty("nsfw")?buzzDetails.nsfw:"",login=buzzDetails.hasOwnProperty("login")?buzzDetails.login:"",editor=buzzDetails.hasOwnProperty("editor")?buzzDetails.editor:"",f_ad=BF_STATIC.hasOwnProperty("f_ad")?BF_STATIC.f_ad:"",f_partner=buzzDetails.hasOwnProperty("f_partner")?buzzDetails.f_partner:"",user=buzzDetails.hasOwnProperty("user")?buzzDetails.user:"",trigger=buzzDetails.hasOwnProperty("trigger")?buzzDetails.trigger:"",postBadges=buzzDetails.hasOwnProperty("postBadges")?buzzDetails.postBadges:"",postTags=buzzDetails.hasOwnProperty("postTags")?buzzDetails.postTags:"",published=buzzDetails.hasOwnProperty("published")?buzzDetails.published.split(" ")[0]:"",username=BF_STATIC.hasOwnProperty("username")?BF_STATIC.username:"",category_name=buzzDetails.hasOwnProperty("category_name")?buzzDetails.category_name:"",form=buzzDetails.hasOwnProperty("form")?buzzDetails.form:"",campaignid=BF_STATIC.hasOwnProperty("campaignid")?BF_STATIC.campaignid:"",language=buzzDetails.hasOwnProperty("language")?buzzDetails.language:"";var postTagsArray=postTags.split(","),postTagsStorage=["","",""],postTagStorageKey=0;for(var x=0;x<postTagsArray.length;x++){if(postTagStorageKey>2){continue}var pt=postTagsArray[x].substring(0,63);if(postTagsStorage[postTagStorageKey].length+pt.length>=127){postTagStorageKey++}postTagsStorage[postTagStorageKey]+=pt+","}var CVs={44:escape("raw-"+raw+"_nsfw-"+nsfw+"_ad-"+f_ad+"_partner-"+f_partner+"_editor-"+editor+"_user-"+user+"_trigger-"+trigger),45:published,4:username,5:postBadges.substring(0,postBadges.length-1),2:category_name,37:postTagsStorage[0].substring(0,Math.min(postTagsStorage[0].length-1,127)),38:postTagsStorage[1].substring(0,Math.min(postTagsStorage[1].length-1,127)),39:postTagsStorage[2].substring(0,Math.min(postTagsStorage[2].length-1,127)),49:form,47:campaignid,46:language};gtrack.setCustomVars(3,CVs)};this.setUserCVs=function(){if(!gtrack.ga_status()){setTimeout("gtrack.setUserCVs()",500);return false}for(var i=0;i<gtrack.ShareCVs.length;i++){var id=gtrack.ShareCVs[i],so={};if(gtrack.getCustomVars(id,null)==null){so[id]="0";gtrack.setCustomVars(1,so)}}var buzz_cat=BF_STATIC.bf_category;if(Number(buzz_cat)){var cc=gtrack.getCustomVars(28,"").split(",");if(cc.length==1&&cc[0]==""){cc=[]}if(cc.length>=20){cc.shift()}cc.push(buzz_cat);gtrack.setCustomVars(1,{28:cc.join(",")})}if(gtrack.getCustomVars(14,null)==null||gtrack.ga_debug()){var referrer=document.referrer?document.referrer.replace("http://","").replace("https://","").replace("www.","").split(/[/?#]/)[0]:"(direct)";if(referrer.indexOf("buzzfeed.com",referrer.toLowerCase())>=0){referrer="(direct)"}gtrack.setCustomVars(1,{14:referrer})}if(gtrack.getCustomVars(15,null)==null||gtrack.ga_debug()){var pageType=typeof(BF_STATIC.tt_page)!="undefined"?BF_STATIC.tt_page:false;gtrack.setCustomVars(1,{15:pageType})}if((gtrack.getCustomVars(16,null)==null||gtrack.ga_debug())&&typeof(hashtrack)!="undefined"){if(typeof(hashtrack.tracked_hash_tag)!="undefined"){var ht=hashtrack.tracked_hash_tag;var level=ht.charAt(0)+ht.charAt(ht.length-1);var segment=ht.substring(1,ht.length-1);gtrack.setCustomVars(1,{16:level+"/"+segment})}}if(gtrack.getCustomVars(34,null)==null||gtrack.ga_debug()){var lastVisit=Number(gtrack.getCustomVars(18,null));var today=new Date().getTime()/1000;var lastYear=new Date().setDate(new Date().getDate()-365)/1000;if(!isNaN(lastVisit)&&typeof(lastVisit)=="number"){if(lastYear<lastVisit&&lastVisit<today){var timeDiff=today-lastVisit;var hours=(timeDiff/3600);lastVisit=isNaN(hours)?null:Math.round(hours)}}else{lastVisit=null}gtrack.setCustomVars(2,{34:lastVisit});gtrack.setCustomVars(1,{18:Math.round(today)})}var user=new BF_User();var isRegistered=user.isLoggedIn();if((!gtrack.CVsExist(gtrack.UserCVIDs,1))||(isRegistered==true&&gtrack.getCustomVars(6,null)=="false")||gtrack.ga_debug()){if(isRegistered){var userInfo=user.getUserInfo();settings_call=(new BF_Request()).request;settings_call("/buzzfeed/_edit_user",{method:"get",parameters:{action:"settings",session_key:userInfo.session_key},onSuccess:function(userResp){var userData=eval("("+userResp.responseText+")");var facebookConnected=userInfo.is_facebook_user;var registrationPath=userInfo.registration_path;var gender=(userData.user.gender==null?"false":userData.user.gender.toLowerCase()=="male"||userData.user.gender.toLowerCase()=="female"?userData.user.gender.toLowerCase():"false");var userFlags=(userInfo.p_admin=="true"?"admin":userInfo.moderated=="1"?"moderated":userInfo.f_raw=="1"?"raw":false);var allowsEmailUpdates=(userData.user.allow_email_updates==1?"true":"false");var signUpDate=(typeof userInfo.date_created_unix!=undefined?userInfo.date_created_unix:null);var CVs={6:isRegistered,7:signUpDate,8:facebookConnected,9:registrationPath,10:userFlags,11:allowsEmailUpdates,};gtrack.setCustomVars(1,CVs);GAPageLoad()},onFailure:function(){console.error("unable to fetch user data for gtrack.setUserCVs()");GAPageLoad()}})}else{var CVs={6:false,8:false,9:false,10:false,11:false,7:false};gtrack.setCustomVars(1,CVs);GAPageLoad()}}else{GAPageLoad()}};this.setCustomVars=function(scope,CVs){if(gtrack.checkTestMode()){return}if(!gtrack.ga_status()){setTimeout(function(){gtrack.setCustomVars(scope,CVs)},500);return false}if(typeof scope!="number"||typeof CVs!="object"){return false}for(cv in CVs){if(typeof cv=="undefined"||typeof CVs[cv]=="undefined"){continue}var key=Number(cv),value=CVs[cv],label=ga_cv_map[key];if(key>=1&&key<=5){if(typeof _gat._getTrackerByName()._getVisitorCustomVar(key)!="undefined"){_gaq.push(["_deleteCustomVar",key])}}if(gtrack.ga_status()){_gaq.push(["_setCustomVar",key,label,(value+""),scope])}if(scope==2&&hasLocalStorage()){sessionStorage.setItem("CV_"+key,value)}if(BF_STATIC.bf_env!="live"){console.log("CustomVar: ['"+key+"','"+label+"','"+value+"']")}}};this.DOB2Age=function(date){var age;var today=new Date();if(/\d{4}\-\d{2}\-\d{2}/.test(date)){date=date.split("-");if((today.getMonth()+1)>date[1]){age=today.getFullYear()-date[0]}else{if((today.getMonth()+1)==date[1]){if(today.getDate()>=date[2]){age=today.getFullYear()-date[0]}else{age=(today.getFullYear()-date[0])-1}}else{age=(today.getFullYear()-date[0])-1}}if(age>150){return null}else{return age}}return date};this.trackScrollMobile=function(){var bottomShareSelector="ul.share-buttons.position-lower";if(gtrack.tt_page!="MobileBuzz"){return false}if(typeof gtrack.hasBottomShare=="undefined"){gtrack.hasBottomShare=$("ul.share-buttons.position-lower").length>0?true:false}if(!gtrack.hasBottomShare){return false}gtrack.shareBottom=$("ul.share-buttons.position-lower").offset().top+$("ul.share-buttons.position-lower").height();gtrack.scrollBottom=$(window).scrollTop()+$(window).height();if(gtrack.scrollBottom>gtrack.shareBottom&&!gtrack.trackedScrollShare){gtrack.track_events("[ttp]","[nc]bottom-share-visible",null,null,true);gtrack.trackedScrollShare=true}};this.trackScrollDesktop=function(){if(gtrack.tt_page=="Home"){var page_flow=document.getElementById("page_flow")?document.getElementById("page_flow"):document.getElementById("feed")?document.getElementById("feed"):null;if(!page_flow){return}var feed=$(page_flow)?$(page_flow)[bfjs.selector]("li:not(.scrolled_past)"):[],screenBottom=document.documentElement.clientHeight+document.viewport.getScrollOffsets()[1];bfjs.universal_each(feed,function(el){var buzzBottom=bfjs.getOffset(el)[1]+$(el)[bfjs.get_height]();if(buzzBottom<=screenBottom){$(el)[bfjs.add_class]("scrolled_past");if(gtrack.ga_debug()){bfjs.setStyle(el,{border:"solid green 1px"})}}else{if(gtrack.ga_debug()){bfjs.setStyle(el,{border:"solid blue 1px"})}}});gtrack.scrollDepth=$(page_flow)[bfjs.selector]("li.scrolled_past").length}else{var docHeight=document.documentElement.scrollHeight-document.documentElement.clientHeight,docElScrollTop=typeof document.documentElement.scrollTop!="undefined"?document.documentElement.scrollTop:0,userGeo=docElScrollTop+document.body.scrollTop,scrollPercent=(userGeo/docHeight)*100;if(typeof gtrack.hasBottomShare=="undefined"){gtrack.hasBottomShare=$$("div.bottom-share-buttons").length>0?true:false}if(!gtrack.trackedScrollShare&&gtrack.hasBottomShare){var scrollBottom=userGeo+window.innerHeight;if(!gtrack.shareTop){gtrack.shareTop=$s(".bottom-share-buttons").cumulativeOffset().top}if(scrollBottom>gtrack.shareTop&&gtrack.shareTop!=0){gtrack.track_events("[ttp]","[nc]bottom-share-visible",null,null,true);gtrack.trackedScrollShare=true}}if(!isNaN(parseFloat(scrollPercent))&&isFinite(scrollPercent)&&scrollPercent>0&&scrollPercent<=100){scrollPercent=(scrollPercent%5)>=1?parseInt(scrollPercent/5)*5+5:parseInt(scrollPercent/5)*5;gtrack.scrollDepth=Math.max(gtrack.scrollDepth,scrollPercent)}}};this.pageUnload=function(){var SD;if(!bfjs.isMobile()){SD=gtrack.scrollDepth}else{var s=$(window).scrollTop(),d=$(document).height(),c=$(window).height();SD=Math.round((s/(d-c))*100)}SD=SD.toString();if(gtrack.tt_page!="Home"){SD+="%"}if(!bfjs.isMobile()||(bfjs.isMobile()&&BF_STATIC.os!=="android"&&BF_STATIC.in_app!=="facebook")){gtrack.track_events("","[nc]page-exit",SD,null,true)}}};var gtrack=new BF_GTrack();bfjs.onPageLoad(gtrack.init);bfjs.windowEvent("unload",function(){gtrack.pageUnload()});if(!bfjs.isMobile()){bfjs.windowEvent("scroll",function(){gtrack.didScroll=true})}EventManager.observe_once("abtest:ecommerce_link_desktop",function(a,b){gtrack.track_events("[ttp]","[nc]ecommerce_impab",a,"",true)});EventManager.observe_once("abtest:ecommerce_link_mobile",function(a,b){gtrack.track_events("[ttp]","[nc]ecommerce_impab",a,"",true)});EventManager.observe_once("abtest:geico_thumbstrip",function(c,f){gtrack.track_events("[ttp]","[nc]geicothumbstrip_impab",c,"",true);var b=$$(".shareBtn");function a(){gtrack.track_events("Buzz","[nc]geicothumbstrip_shareab",c,"",true)}bfjs.universal_each(b,function(g){g.setAttribute("rel:bf_bucket","abtest:geico_thumbstrip");universal_dom.update(g)});universal_dom.assign_handler({bucket:"abtest:geico_thumbstrip",event:"click",handler:a})});EventManager.observe_once("abtest:discovercard_thumbstrip",function(a,b){gtrack.track_events("[ttp]","[nc]discovercardthumbstrip_impab",a,"",true);var f=$$(".shareBtn");function c(){gtrack.track_events("Buzz","[nc]discovercardthumbstrip_shareab",a,"",true)}bfjs.universal_each(f,function(g){g.setAttribute("rel:bf_bucket","abtest:discovercard_thumbstrip");universal_dom.update(g)});universal_dom.assign_handler({bucket:"abtest:discovercard_thumbstrip",event:"click",handler:c})});var BF_ABTest=function(){this.tt_page=typeof(BF_STATIC.tt_page)!="undefined"?BF_STATIC.tt_page:"NA";this.vertical=typeof(BF_STATIC.vertical)!="undefined"?BF_STATIC.vertical:"NA";this.country=typeof(BF_STATIC.country)!="undefined"?BF_STATIC.country:"NA";this.abTests="",this.abVariations="",this.abLive;this.abConfig={related_buzz:{author:"naviltsev",date_created:"2014/06/15",pivotal_number:"67336918",page:"Buzz",type:"html",freeze_variation:false,variations:{filter_id_0:60,filter_id_2:40},country:"",vertical:"",start:"unixtime",stop:"unixtime"},geico_thumbstrip:{author:"LM",date_created:"2014/10/02",pivotal_number:"77563260",page:"Buzz",type:"css",freeze_variation:true,variations:{geico_thumbstrip_on:50,geico_thumbstrip_off:50},country:"",vertical:"",start:"unixtime",stop:"unixtime"},discovercard_thumbstrip:{author:"LM",date_created:"2014/12/24",pivotal_number:"85036636",page:"Buzz",type:"css",freeze_variation:true,variations:{discovercard_thumbstrip_on:50,discovercard_thumbstrip_off:50},country:"",vertical:"",start:"unixtime",stop:"unixtime"},ecommerce_link_desktop:{author:"tylerbuzzfeed",date_created:"2014/09/29",pivotal_number:"79557104",page:"Buzz",type:"css",freeze_variation:true,variations:{link:50,button:50},country:"",vertical:"",start:"unixtime",stop:"unixtime"},ecommerce_link_mobile:{author:"tylerbuzzfeed",date_created:"2014/09/29",pivotal_number:"79557104",page:"MobileBuzz",type:"css",freeze_variation:true,variations:{link:50,button:50},country:"",vertical:"",start:"unixtime",stop:"unixtime"},now_buzzing_infinite:{author:"alukin",date_created:"2014/10/07",pivotal_number:"78851886",page:"Buzz",type:"html",freeze_variation:false,variations:{now_buzzing_infinite:10,now_buzzing:90},country:"",vertical:"",start:"unixtime",stop:"unixtime"},subbuzz_share_overlay:{author:"neustroev",date_created:"2014/11/12",pivotal_number:"77122496",page:"MobileBuzz",type:"css",freeze_variation:false,variations:{control:80,overlay:20},country:"",vertical:"",start:"unixtime",stop:"unixtime"}};this.init=function(){abtest.abLoadConfig();if(!bfjs.isMobile()){universal_dom.assign_handler({bucket:"abtest",handler:abtest._init})}else{var a=bfjs.getElsByAttr("[rel\\:bf_bucket]");bfjs.universal_each(a,function(b){if($(b)[bfjs.read_attr]("rel:bf_bucket")=="abtest"){abtest._init(b)}})}};this._init=function(b){if(b.hasAttribute("rel:ab_test")){var a=$(b)[bfjs.read_attr]("rel:ab_test");if(abtest.abTests.search(a)>-1){abtest.abTest(b)}}};this.abTimeCheck=function(f){var b=abtest.abConfig[f].start;var a=abtest.abConfig[f].stop;var c=Math.round((new Date()).getTime()/1000);if(isNaN(b)||isNaN(a)){return true}else{if(c>=b&&c<=a){return true}else{return false}}};this.abLoadConfig=function(){for(x in this.abConfig){var a=false,m=bfjs.getElsByAttr("[rel\\:ab_test]");bfjs.universal_each(m,function(p){if($(p)[bfjs.read_attr]("rel:ab_test")==x){a=true}});if(a&&abtest.abTimeCheck(x)){var c=this.abConfig[x],l=c.page,g=c.vertical,b=c.country;if((l.match(abtest.tt_page)||l=="*")&&(!g||(g&&(g.match(abtest.vertical))))&&(!b||(b&&(b.match(abtest.country))))){var n=[],k=[],f;for(y in c.variations){var o=c.variations[y];for(var h=0;h<o;h++){n.push(y)}k.push(y)}if(document.location.search.match(/abdebug/)){var f=prompt("Please select a variation for test '"+x+"':\n"+k.toString().replace(/,/g,"\n"),k[0])}else{if(!bfjs.isMobile()&&objExists(getUrlVars()[x])){f=getUrlVars()[x]}else{if(c.freeze_variation&&typeof(Storage)!=="undefined"&&localStorage.getItem(x)&&!(localStorage.getItem(x)===null)){f=localStorage.getItem(x)}else{n=n.sort(function(){return 0.5-Math.random()});f=n[Math.floor(Math.random()*n.length)]}}}abtest.addTest(x,f);abtest.abLive=true}}}if(typeof abtest.abLive=="undefined"){abtest.abLive==false}};this.addTest=function(a,b){abtest.abTests=abtest.abTests?abtest.abTests+=","+a:a;abtest.abVariations=abtest.abVariations?abtest.abVariations+=","+b:b;abtest.abLive=true};this.getBucket=function(b){var c=this.abTests.split(","),f=this.abVariations.split(","),a=bfjs.indexOf(b,c);return(a<0||typeof f[a]==="undefined")?null:f[a]};this.abTest=function(c){var l=abtest.abTests.split(",");var b=abtest.abVariations.split(",");var f=$(c)[bfjs.read_attr]("rel:ab_test");var a=this.abConfig.hasOwnProperty(f)?this.abConfig[f]:new Object();var g=a.hasOwnProperty("type")?a.type:null;var m=a.hasOwnProperty("freeze_variation")?a.freeze_variation:false;for(x=0;x<l.length;x++){if(l[x]==f){break}}var h=b[x];var k=document.location.search.match(/variation=([a-zA-Z_]*)/);if(BF_STATIC.env!="live"&&k!=null&&k.length>1){h=k[1]}var h=b[x];if(g=="css"){$(c)[bfjs.add_class](h)}else{if(g=="html"){$(document.getElementById(h))[bfjs.remove_class]("hidden")}}if(m&&hasLocalStorage()){localStorage.setItem(l[x],h)}if(typeof EventManager=="object"){EventManager.fire("abtest:"+l[x],h,c)}}};var abtest=new BF_ABTest();bfjs.onPageLoad(abtest.init);BF_Targetting_Pixel=function(){this.pixels={comment:['<img src="http://ib.adnxs.com/seg?add=162223&t=2" width="1" height="1" />'],email:['<img src="http://ib.adnxs.com/seg?add=162219&t=2" width="1" height="1" />','<img src="http://ads.audienceamplify.com/px?id=23000&t=2" width="1" height="1" />'],badge_reaction:['<img src="http://ib.adnxs.com/seg?add=162222&t=2" width="1" height="1" />'],facebook:['<img src="http://ib.adnxs.com/seg?add=162218&t=2" width="1" height="1" />','<img src="http://ads.audienceamplify.com/px?id=22996&t=2" width="1" height="1" />'],google_plus:['<img src="http://ib.adnxs.com/seg?add=162225&t=2" width="1" height="1" />','<img src="http://ads.audienceamplify.com/px?id=22999&t=2" width="1" height="1" />'],stumbleupon:['<img src="http://ib.adnxs.com/seg?add=162220&t=2" width="1" height="1" />','<img src="http://ads.audienceamplify.com/px?id=22998&t=2" width="1" height="1" />'],twitter:['<img src="http://ib.adnxs.com/seg?add=162221&t=2" width="1" height="1" />','<img src="http://ads.audienceamplify.com/px?id=22997&t=2" width="1" height="1" />']};this.hashtrack_pixels=[{url_regex:/peggy\/some-uri/g,pixel_seed:'<iframe width="0" height="0" frameborder="0" scrolling="no" src="abcd"></iframe>',pixel_viral:'<iframe width="0" height="0" frameborder="0" scrolling="no" src="wxyz"></iframe>'}];this.add=function(o,m){if(!!window.fb_app){return}var p;if(o=="hashtrack"){p=m.pixel}else{p=this.pixels[o+""]}if(typeof p=="undefined"||!p){return}var q=/<([a-z]+)\b.*src="([^"]*)".*\/?>/;for(var c=0;c<p.length;c++){var l=p[c];var g=q.exec(l);if(!g||typeof g[1]=="undefined"||(g[1]!="img"&&g[1]!="iframe"&&g[1]!="script")){return false}var f=g[1],h=g[2];if(!$("third-party-tracking-pixel")){var a=document.createElement("div");a.id="third-party-tracking-pixel";document.getElementsByTagName("BODY")[0].appendChild(a)}if(!window.BF_STATIC||!BF_STATIC.bf_test_mode){var b;try{b=document.createElement(l)}catch(k){b=document.createElement(f)}if(f=="img"){b.src=h;b.height=1;b.width=1;b.setAttribute("style","width:1px;height:1px;position:absolute;")}else{if(f=="iframe"){b.src=h;b.height=0;b.width=0;b.setAttribute("frameborder",0);b.setAttribute("scrolling","no")}else{if(f=="script"){b.src=h;b.setAttribute("type","text/javascript")}}}}else{console.info("disable "+h+" for sel tests")}if(BF_STATIC.bf_env!="live"||!window.BF_STATIC||BF_STATIC.bf_test_mode){console.info("track px ("+o+") >> "+h)}else{document.getElementById("third-party-tracking-pixel").appendChild(b)}}};this.hashtrack_pixel=function(c,a){if(a==1){document.observe("dom:loaded",(function(){(new BF_Targetting_Pixel()).add("hashtrack",{pixel:['<img src="http://ads.audienceamplify.com/seg?add=187653&t=2" width="1" height="1" />']})}))}else{if(a==2){document.observe("dom:loaded",(function(){(new BF_Targetting_Pixel()).add("hashtrack",{pixel:['<img src="http://ads.audienceamplify.com/seg?add=187654&t=2" width="1" height="1" />']})}))}}for(var f=0;f<this.hashtrack_pixels.length;f++){if(this.hashtrack_pixels[f].url_regex.exec(c)){var b={};if(a==1){b={pixel:[this.hashtrack_pixels[f].pixel_seed]}}else{if(a==2){b={pixel:[this.hashtrack_pixels[f].pixel_viral]}}}if(typeof b.pixel!="undefined"){document.observe("dom:loaded",(function(g){return function(){(new BF_Targetting_Pixel()).add("hashtrack",g)}})(b))}}}}};BF_Post_Tools=function(){this.cache={};this.is_queue=false;this.is_draft_page=false;this.is_viewdraft_page=false;this.is_preview_page=false;this.page_name=null;this.supertag_cache=[];this.languages=["fr","pt","es","uk"];this.is_marked_for_translation=false;this.buzz_edit_permissions_decoder=function(code){var parts=code.split(".");return{p_admin:parts[0],user_ad:parts[1],p_editor_admin:parts[2],user_byline_description_id:parts[3],alias_parent_id:parts[4],p_partner_admin:parts[5]}};this.ck_acl_for_this_buzz={edit_user_posts:function(code){return 1},edit_editor_posts:function(code){return code.p_admin==0&&code.user_ad==0&&code.p_partner_admin==0&&(code.p_editor_admin==1||code.user_byline_description_id==3)},edit_community_posts:function(code){return code.p_admin==0&&code.user_ad==0&&code.p_editor_admin==0&&code.p_partner_admin==0&&code.user_byline_description_id!=3},edit_partner_posts:function(code){return code.p_admin==0&&(code.user_ad==1||code.p_partner_admin==1)&&code.p_editor_admin==0&&code.user_byline_description_id!=3}};this.has_permission=function(code){for(var ck_acl in bf_post_tools.ck_acl_for_this_buzz){if(bf_post_tools.ck_acl_for_this_buzz[ck_acl](code)&&acl.user_can(ck_acl)){return true}}return false};this.init=function(){try{$s("#page_container").show();$s("#header_wrapper").show();var user=new BF_User();var userinfo=user.getUserInfo();var username=user.isLoggedIn()?userinfo.username:"not_logged_in";var permissions={isa:false,edit_editor_posts:false,edit_community_posts:false,edit_partner_posts:false,basic_edit_functionality:false,edit_comments:false,pound:false};if(user&&user.isLoggedIn()){permissions.basic_edit_functionality=true;permissions.isa=acl.user_can("general_admin")||acl.user_can("edit_editor_posts")||acl.user_can("edit_community_posts");permissions.edit_editor_posts=acl.user_can("edit_editor_posts");permissions.edit_community_posts=acl.user_can("edit_community_posts");permissions.edit_partner_posts=acl.user_can("edit_partner_posts");permissions.edit_comments=acl.user_can("general_admin")||acl.user_can("edit_editor_posts")||acl.user_can("edit_community_posts")||(acl.user_can("edit_partner_posts")&&(BF_STATIC.f_partner||BF_STATIC.f_ad))||(acl.user_can("partners_manage")&&BF_STATIC.f_ad);permissions.pound=acl.user_can("pound")}var show_tools=location.href.match(username);["isa","edit_editor_posts","edit_community_posts","edit_partner_posts"].each(function(p){show_tools=show_tools||permissions[p]});var show_ctools=show_tools||permissions.edit_comments;if(!show_tools&&!show_ctools){if(signin&&signin.callbacks){signin.callbacks.onLogin.push(bf_post_tools.init.bind(this))}return false}var isa=userinfo.isa=="true"||("acl" in window&&acl.user_can("general_admin"));this.page_name=bf_post_tools.identify_page_type();this.set_is_marked_for_translation();universal_dom.assign_handler({bucket:"open-queue-schedule",event:"change",handler:function(ev){var open_dialog=(ev.target.value=="queue-at"&&ev.element.checked);var name=ev.name;if(universal_dom._bucket&&universal_dom._bucket["queue-schedule"]){universal_dom._bucket["queue-schedule"].elements.each(function(udo){if(typeof udo.data!="undefined"&&udo.data.name==name){if(open_dialog){udo.element.removeClassName("hidden")}else{udo.element.addClassName("hidden")}}})}}});universal_dom.assign_handler({bucket:"open-queue-dialog",event:"change",handler:function(ev,obj){var open_dialog=ev.element.checked;if(ev.force_closed=="true"){open_dialog=false}var name=ev.name;if(universal_dom._bucket&&universal_dom._bucket["queue-dialog"]){universal_dom._bucket["queue-dialog"].elements.each(function(udo){if(typeof udo.data!="undefined"&&udo.data.name==name){if(open_dialog){udo.element.removeClassName("hidden")}else{udo.element.addClassName("hidden")}}})}}});universal_dom.assign_handler({bucket:"open-vertical-dialog",event:"change",handler:function(ev,obj){var open_dialog=ev.element.checked;if(universal_dom._bucket&&universal_dom._bucket["vertical-dialog"]){universal_dom._bucket["vertical-dialog"].elements.each(function(udo){if(open_dialog){if(udo.data==1){udo.element.removeClassName("hidden")}else{udo.element.addClassName("hidden")}}else{if(udo.data==1){udo.element.addClassName("hidden")}else{udo.element.removeClassName("hidden")}}})}}});universal_dom.assign_handler({bucket:"mimic-radio",event:"change",handler:function(ev){var el=ev.target;var name=el.getAttribute("name");var value=el.getAttribute("value");var id=el.getAttribute("id");if(id=="queue-this"&&el.getAttribute("rel:clicked")==0){el.setAttribute("rel:clicked",1);$$('input[type="checkbox"][name="promotion"][value="queue-at"]')[0].checked=true;$("queue-calendar").removeClassName("hidden");var next=new Date();if(next.getMinutes()>=0&&next.getMinutes()<10){next.setMinutes(15)}else{if(next.getMinutes()>=10&&next.getMinutes()<25){next.setMinutes(30)}else{if(next.getMinutes()>=25&&next.getMinutes()<40){next.setMinutes(45)}else{if(next.getMinutes()>=40&&next.getMinutes()<55){next.setMinutes(60)}else{next.setMinutes(75)}}}}var day=$$('#queue-calendar [name="queue-on-day"]')[0],hour=$$('#queue-calendar [name="queue-on-hour"]')[0],date=dateFormat(next,"yyyy-mm-dd"),time=dateFormat(next,"H:MM");for(var i=0;i<day.options.length;i++){if(day.options[i].value==date){day.selectedIndex=i}}for(var i=0;i<hour.options.length;i++){if(hour.options[i].value==time){hour.selectedIndex=i}}}universal_dom.get_bucket_elements("mimic-radio").each(function(obj){if(obj.getAttribute("name")==name&&obj!=ev.target){obj.checked=false}})}});universal_dom.assign_handler({bucket:"flex_toggle_active",event:"click",handler:bf_post_tools.stop_splash});universal_dom.assign_handler({bucket:"pin-button",event:"click",handler:bf_post_tools.does_pin_dialog_have_anything_checked});universal_dom.assign_handler({bucket:"switch_promo_std",event:"click",handler:bf_post_tools.promo.switch_promo_std});universal_dom.assign_handler({bucket:"switch_promo_fp",event:"click",handler:bf_post_tools.promo.switch_promo_fp});universal_dom.assign_handler({bucket:"switch_promo_fpuk",event:"click",handler:bf_post_tools.promo.switch_promo_fpuk});this.poller=new cookie_poller();var isEditFormOpened=($("editForm")&&$("editForm").getStyle("display")!="none"),isQwikEditOpened=($$("div.qwik_edit").length&&$$("div.qwik_edit")[0].getStyle("display")=="block");bf_post_tools.buzz_opened=(isEditFormOpened||isQwikEditOpened);var ptool_posts=[];var posts=$$(".post",".post2","div.contrib");var ctool_posts=$$("li.contrib");for(var i=0;i<posts.length;i++){var existing_ptools=posts[i].select(".ptools");if(existing_ptools.length){if(!existing_ptools[0].up(".ptools-buzzpage")&&posts[i].childElements().indexOf(existing_ptools[0])!=-1){posts[i].removeChild(existing_ptools[0])}}}var userid=(new BF_User()).getUserInfo().userid;var current_user=userinfo.username;for(var i=0;i<posts.length;i++){var is_ptools=posts[i].getAttribute("rel:ptool");if(!!is_ptools&&is_ptools!=="false"&&!posts[i].select(".ptools").length){if(!(posts[i].nodeName=="HEADER"&&posts[i].up(".buzz")&&$$(".ptools-buzzpage").length)){var buzz_data,buzz_id;var buzz_data_str=posts[i].getAttribute("rel:data");if(buzz_data_str){try{buzz_data=eval("("+buzz_data_str+")");buzz_id=buzz_data.buzz_id}catch(e){console.warn("error parsing rel:data")}}var own_page=false;if(BF_STATIC.tt_page=="User"&&$("username_of_page_owner")&&typeof username_of_page_owner.value!=="undefined"&&$("username_of_page_owner").value==username){own_page=true}var is_owner=posts[i].getAttribute("rel:owner");if(!!is_owner&&is_owner==current_user){ptool_posts.push(posts[i])}var buzz_edit_permissions_code=bf_post_tools.buzz_edit_permissions_decoder(posts[i].getAttribute("rel:ptool_code")||"");if(buzz_edit_permissions_code.alias_parent_id==userid){ptool_posts.push(posts[i])}else{if(bf_post_tools.has_permission(buzz_edit_permissions_code)){ptool_posts.push(posts[i])}else{if(is_owner!=username&&"picks_controller" in window&&own_page&&$(buzz_id+"-delete_pick-spinner")){ptool_posts.push(posts[i]);buzz_data.just_pick=1;posts[i].setAttribute("rel:data",Object.toJSON(buzz_data))}}}}}}if(show_tools||show_ctools){var ptool_css=document.createElement("link");ptool_css.rel="stylesheet";ptool_css.href=BF_STATIC.static_root+"/css/post-tools.css?v="+BF_STATIC.version;ptool_css.type="text/css";bf_post_tools.load_link(ptool_css);if(typeof user_post=="undefined"){var userpost_js=document.createElement("script");userpost_js.src=BF_STATIC.static_root+"/js/public/contribute/user_post.js?v="+BF_STATIC.version;userpost_js.type="text/javascript";bf_post_tools.load_link(userpost_js)}var bfui_css=document.createElement("link");bfui_css.rel="stylesheet";bfui_css.href=BF_STATIC.static_root+"/css/bf_ui.css?v="+BF_STATIC.version;bfui_css.type="text/css";bf_post_tools.load_link(bfui_css);$$(".pinned").each(function(el,i){var buzz_data=el.getAttribute("rel:data");var require_acl="homepage_edit";if((BF_STATIC.page||"")=="VerticalFront"){require_acl="queue_edit_"+BF_STATIC.tt_page.toLowerCase()}if((BF_STATIC.page||"")=="Buzz"&&typeof buzz_profile!="undefined"){require_acl="queue_edit_"+buzz_profile.category.toLowerCase()}if(!buzz_data){el.remove()}});if(this.page_name!=="bookmarks"){this.create_tools(ptool_posts,bf_post_tools.create_ptool,permissions)}if(permissions.edit_comments){this.create_tools(ctool_posts,bf_post_tools.create_ctool,permissions)}var pt_buttons=$$(".ptools a",".ctools a",".mobile-preview a");for(var i=0;i<pt_buttons.length;i++){$(pt_buttons[i]).stopObserving("click");$(pt_buttons[i]).observe("click",this.click_buttons.bind(this))}}}catch(e){console.error(e)}};this.set_is_marked_for_translation=function(){if(typeof buzzDetails!="undefined"&&buzzDetails.hasOwnProperty("postTags")){var tags=buzzDetails.postTags;if(tags.indexOf("translatethis")!=-1){is_marked_for_translation=true}else{is_marked_for_translation=false}}};this.show_translation_status=function(e){try{if(bf_post_tools.cache.language=="en"){universal_dom.get_bucket_elements_with_data("translation_status",{my_type:"ui"}).each(function(el){el.removeClassName("hidden")})}}catch(e){console.warn("bf_post_tools.cache is not loaded yet")}};this.handle_translation_status=function(e){if(e.my_type=="mark as candidate"){bf_post_tools.supertag_cache.push("translatethis");universal_dom.get_bucket_elements_with_data("translation_status",{my_type:"mark as candidate"}).each(function(el){el.addClassName("hidden")});universal_dom.get_bucket_elements_with_data("translation_status",{my_type:"marked as candidate"}).each(function(el){el.removeClassName("hidden")})}};this.click_buttons=function(e){var el=e.target;if(el.className.indexOf("pt-wrench")!=-1){if($("editForm")&&$("editForm").getStyle("display")!="none"||$$("div.qwik_edit").length&&$$("div.qwik_edit")[0].getStyle("display")=="block"){$("editForm")?$("editForm").scrollTo():$$("div.qwik_edit")[0].scrollTo();return false}var ed_post=el.getAttribute("rel:data").evalJSON();bf_post_tools.cancel_inline_editor();bf_post_tools.load_inline_editor(ed_post)}else{if(el.className.indexOf("c-wrench")!=-1){var ed_post=el.getAttribute("rel:comment_id").evalJSON();bf_post_tools.cancel_inline_editor();bf_post_tools.load_inline_editor({comment_id:ed_post,type:"contribution"})}else{if(el.className.indexOf("pt-flexpro")!=-1){bf_post_tools.load_flexpro(e)}else{if(el.className.indexOf("pt-pound_button")!=-1){bf_post_tools.load_pound(e)}else{if(el.className.indexOf("pt-rebuzz_button")!=-1){bf_post_tools.load_rebuzz_button(e)}else{if(el.className.indexOf("pt-splash")!=-1){bf_post_tools.load_splash(e)}else{if(el.className.indexOf("pt-boost_button")!=-1){bf_post_tools.load_boost_button(e)}else{if(el.className.indexOf("pt-edit")!=-1){bf_post_tools.load_editor_in_dialog(e)}else{if(el.className.indexOf("pt-t-edit")!=-1){bf_post_tools.load_t_editor(e)}else{if(el.className.indexOf("pt-stats")!=-1){bf_post_tools.load_stats(e)}else{if(el.className.indexOf("pt-remove")!=-1){bf_post_tools.delete_quickpost(e)}else{if(el.className.indexOf("pt-hide")!=-1){bf_post_tools.hide_post(e)}else{if(el.className.indexOf("pt-show")!=-1){bf_post_tools.show_post(e)}else{if(el.className.indexOf("pt-pin")!=-1){bf_post_tools.pin_buzz(e,false)}else{if(el.className.indexOf("pt-preview-mobile")!=-1){mobile_preview.toggle_preview()}else{if(el.className.indexOf("pt-translate")!=-1){bf_post_tools.mark_for_translation(e)}else{if(el.className.indexOf("sleep-button")!=-1&&mobile_preview.default_draft){mobile_preview.toggle_preview()}else{if(el.className.indexOf("home-button")!=-1){mobile_preview.launch_app("home")}else{if(bf_post_tools.is_queue){e.stop();var buzz_data=el.getAttribute("rel:data");buzz_data=eval("("+buzz_data+")");Object.extend(e,buzz_data);var args={buzz_id:buzz_data.buzz_id};if(el.className.indexOf("pt-publish")!=-1){queue.publish_to_hp(args)}else{if(el.className.indexOf("pt-remove")!=-1){queue.show_alert(args)}else{if(el.className.indexOf("pt-queue")!=-1){queue.update_queue_time(e)}}}}}}}}}}}}}}}}}}}}}}};this.load_link=function(obj){var obj_loaded=false;if(obj.tagName=="LINK"){var page_links=document.getElementsByTagName("LINK");for(var i=0;i<page_links.length;i++){if(page_links[i].rel==obj.rel&&page_links[i].href==obj.href){obj_loaded=true}}}if(obj.tagName=="SCRIPT"){var page_links=document.getElementsByTagName("SCRIPT");for(var i=0;i<page_links.length;i++){if(page_links[i].src==obj.src){obj_loaded=true}}}if(!obj_loaded){document.getElementsByTagName("HEAD")[0].appendChild(obj)}};this.create_tools=function(posts,fn,permissions){if(typeof permissions=="undefined"){permissions=null}for(var i=0;i<posts.length;i++){if(posts[i].select(".ptools").length){continue}var injection=fn(posts[i],permissions);if(!!injection){posts[i].appendChild(injection);posts[i].appendChild(bf_post_tools.create_spinner());$(posts[i]).stopObserving("mouseout");$(posts[i]).stopObserving("mouseover");$(posts[i]).observe("mouseout",function(e){var target=this.obj.hasClassName("ptools")?this.obj:this.obj.select(".ptools")[0];target=target?target:this.obj;target.hide()}.bind({obj:injection}));$(posts[i]).observe("mouseover",function(e){var target=this.obj.hasClassName("ptools")?this.obj:this.obj.select(".ptools")[0];target=target?target:this.obj;target.show()}.bind({obj:injection}))}}};this.create_spinner=function(){var ptool_spinner=document.createElement("div");ptool_spinner.hide();ptool_spinner.className=("ptool_spinner");ptool_spinner.style.textAlign="center";var ptool_spinner_img=document.createElement("img");ptool_spinner_img.src=BF_STATIC.static_root+"/images/public/spinners/loading.gif";ptool_spinner.appendChild(ptool_spinner_img);return ptool_spinner};this.do_load_editor_in_dialog=function(e){var tag=e.target;var tag_data=tag.getAttribute("rel:data");var tag_data_obj=eval("("+tag_data+")");var buzz_id=tag_data_obj.buzz_id;var buzz_type=tag_data_obj.type;var ajax=new BF_Request();var can_edit=false;ajax.request("/buzzfeed/_public_admin",{parameters:{action:"check_edit_permissions",id:buzz_id},onSuccess:function(e){if(JSON.parse(e.responseText).success==false){BF_UI.showDialog("user_post_promoted_edit")}else{if(typeof buzzDetails!="undefined"&&buzzDetails.hasOwnProperty("breaking")&&buzzDetails.breaking){BF_Request.location({location:BF_STATIC.web_root+"/breaking_post?id="+buzz_id})}else{if(/^super.*/.test(buzz_type)){buzz_type="super";BF_Request.location({location:BF_STATIC.web_root+"/post?id="+buzz_id})}else{BF_UI.showDialog("user_post_edit","Edit");$("user_post_edit_iframe").setAttribute("src","/buzzfeed/editbuzz/"+buzz_type+"?id="+buzz_id+"&cb="+(new Date()).getTime())}}}}})};this.load_editor_in_dialog=function(e){bfjemplate.load_if_missing({id:"user_post_edit",callback:bf_post_tools.do_load_editor_in_dialog,context:bf_post_tools,args:arguments})};this.buttons_actions=function(){if($("quickpost-tags")&&typeof user_post!="undefined"){$("quickpost-tags").stopObserving();$("quickpost-tags").observe("keydown",user_post.auto_complete_special);$("quickpost-tags").observe("keyup",user_post.auto_complete);$("quickpost-tags").observe("blur",function(){window.setTimeout(function(){$("tag_suggestions").hide()},1000)})}if($("save_edited_buzz")){$("save_edited_buzz").stopObserving("click",bf_post_tools.save_edited_buzz);$("save_edited_buzz").observe("click",bf_post_tools.save_edited_buzz)}if($("edit_buzz_image")){$("edit_buzz_image").stopObserving("click",bf_post_tools.edit_image);$("edit_buzz_image").observe("click",bf_post_tools.edit_image);user_setting={save_image:bf_post_tools.save_image};parent.user_post.save_quickpost_image=function(){BF_UI.closeDialog("super-image-edit")}}if($("edit_in_terminal")){$("edit_in_terminal").stopObserving("click",function(e){bf_post_tools.terminal_edit(bf_post_tools.current_contrib)});$("edit_in_terminal").observe("click",function(e){bf_post_tools.terminal_edit(bf_post_tools.current_contrib)})}if($("delete_contribution")){$("delete_contribution").stopObserving("click",function(e){bf_post_tools.delete_quickpost(e,"contrib")});$("delete_contribution").observe("click",function(e){bf_post_tools.delete_quickpost(e,"contrib")})}if($("remove_contribution_from_raw")){$("remove_contribution_from_raw").stopObserving("click",function(e){bf_post_tools.update_contribution_raw_flag(e,0)});$("remove_contribution_from_raw").observe("click",function(e){bf_post_tools.update_contribution_raw_flag(e,0)})}if($("restore_contribution_to_raw")){$("restore_contribution_to_raw").stopObserving("click",function(e){bf_post_tools.update_contribution_raw_flag(e,1)});$("restore_contribution_to_raw").observe("click",function(e){bf_post_tools.update_contribution_raw_flag(e,1)})}};this.put_in_vertical=function(vertical,action){var buzz=bf_post_tools.cache;var vert={};buzz.verticals.each(function(v){if(v.category_name==vertical){vert=v}});if(action=="publish"){if(typeof buzz.delete_this_category_if_another_is_added!="undefined"){var old_vert={};buzz.verticals.each(function(v){if(v.category_name==buzz.delete_this_category_if_another_is_added){old_vert=v}});if(old_vert.action=="publish"){old_vert.action="delete"}}buzz.delete_this_category_if_another_is_added=vertical}if(typeof vert.category_name=="undefined"){buzz.verticals.push(vert);vert.category_name=vertical;vert.campaign_id=buzz.campaignid}if(action==vert.action){return}else{vert.action=action}};this.save_edited_buzz=function(e){var errors=[];var required=["name","blurb"];var buzz=bf_post_tools.cache;if(bf_post_tools.contrib!=1){var form=bf_post_tools.edit_form;required.each(function(field){if(form.elements[field].value==""){errors.push("Missing required field ("+field+")")}});var all_supertags=$$(".supertag");var supertag_set=false;for(var i=0;i<all_supertags.length;i++){if(all_supertags[i].checked){supertag_set=true;break}}if(!(form.elements["nsfw-btn"].hasClassName("selected")||form.elements["tame-btn"].hasClassName("selected"))){errors.push("Please specify if it's NSFW or not")}if(errors.length){alert("Cannot save. Please address the following error"+(errors.length>1?"s":"")+":\n"+errors.join("\n"));return}for(var each in bf_post_tools.buzz_fields_to_text_fields){if(form.elements[bf_post_tools.buzz_fields_to_text_fields[each]].disabled==false){buzz[each]=form.elements[bf_post_tools.buzz_fields_to_text_fields[each]].value}else{delete buzz[each]}}buzz.language=form.elements.language.options[form.elements.language.selectedIndex].value}else{var form=bf_post_tools.edit_form_contrib}var badge_checkboxes=form.select('[id="badges_list"]')[0].getElementsByTagName("INPUT");buzz.badges=[];for(var i=0;i<badge_checkboxes.length;i++){var cbox=badge_checkboxes[i];if(cbox.checked){buzz.badges.push(cbox.value)}}var ajax=new BF_Request();if(bf_post_tools.contrib==1){if(buzz.badges&&buzz.badges.length>0){var params={action:"update_contribution",comment_id:buzz.id,badges:buzz.badges.join(",")};ajax.request("/buzzfeed/comments_moderation",{method:"post",parameters:params,onSuccess:bf_post_tools._save_edited_buzz,while_processing:{show:$("save-edited-buzz-spinner"),hide:e.target}})}else{return}}else{var contrib_state=(form.elements["responses-on-btn"].hasClassName("selected"))?1:0;var contrib_checkboxes=form.select('[id="responses-options"]')[0].getElementsByTagName("INPUT");for(var i=0;i<contrib_checkboxes.length;i++){buzz[contrib_checkboxes[i].name]=(contrib_checkboxes[i].checked)?contrib_state:0}var new_tags=form.elements.namedItem("tags").value.split(",");new_tags.each(function(tag){buzz.tags.push(tag)});var all_supertags=$$(".supertag");var supertags=[];buzz.supertags=[];for(var i=0;i<all_supertags.length;i++){if(all_supertags[i].checked){buzz.supertags.push("--supertag-"+all_supertags[i].value)}}bf_post_tools.supertag_cache.each(function(tag){buzz.supertags.push("--"+tag)});buzz.nsfw=form.elements["nsfw-btn"].hasClassName("selected")?"true":"false";var category_option=form.elements.category.options[form.elements.category.selectedIndex];buzz.category_name=category_option.text;buzz.category_id=category_option.value;var params={action:"update_buzz",buzz:Object.toJSON(buzz),update_html:1};if(bf_post_tools.buzz_template){params.template=bf_post_tools.buzz_template}var promotion=[];if($("queue-this")&&$("queue-this").checked){var ck_promotion;for(var i=0;i<form.elements.promotion.length;i++){if(form.elements.promotion[i].checked){ck_promotion=form.elements.promotion[i].value}}if(promotion&&promotion!="none"){params.action="update_and_promote"}if(ck_promotion=="queue-at"){params["queue-on-day"]=form.elements["queue-on-day"].options[form.elements["queue-on-day"].selectedIndex].value;params["queue-on-hour"]=form.elements["queue-on-hour"].options[form.elements["queue-on-hour"].selectedIndex].value}if(ck_promotion){promotion.push(ck_promotion)}}if($("uk_queue-this")&&$("uk_queue-this").checked){var ck_promotion;for(var i=0;i<form.elements.uk_promotion.length;i++){if(form.elements.uk_promotion[i].checked){ck_promotion=form.elements.uk_promotion[i].value}}if(promotion&&promotion!="none"){params.action="update_and_promote"}if(ck_promotion=="uk_queue-at"){params["uk_queue-on-day"]=form.elements["uk_queue-on-day"].options[form.elements["uk_queue-on-day"].selectedIndex].value;params["uk_queue-on-hour"]=form.elements["uk_queue-on-hour"].options[form.elements["uk_queue-on-hour"].selectedIndex].value}if(ck_promotion){promotion.push(ck_promotion)}}if($("au_queue-this")&&$("au_queue-this").checked){var ck_promotion;for(var i=0;i<form.elements.au_promotion.length;i++){if(form.elements.au_promotion[i].checked){ck_promotion=form.elements.au_promotion[i].value}}if(promotion&&promotion!="none"){params.action="update_and_promote"}if(ck_promotion=="au_queue-at"){params["au_queue-on-day"]=form.elements["au_queue-on-day"].options[form.elements["au_queue-on-day"].selectedIndex].value;params["au_queue-on-hour"]=form.elements["au_queue-on-hour"].options[form.elements["au_queue-on-hour"].selectedIndex].value}if(ck_promotion){promotion.push(ck_promotion)}}if($("suggest-this")&&$("suggest-this").checked){params.fq_suggest=1}var cleanup_regex=new RegExp("boost-|add-");["boost","add","remove"].each(function(action){var legit_fields=["raw","thumbnails","network","homepage","homepage_now","homepage_uk","homepage_uk_now","homepage_au","homepage_au_now"];bf_post_tools.languages.each(function(abbr){legit_fields.push("thumbnails-"+abbr);legit_fields.push("thumbnails-"+abbr)});legit_fields.each(function(field){var ck_promotion=action+"-"+field;var obj=$(ck_promotion);if(obj&&obj.checked&&!obj.disabled){if(ck_promotion!="add-homepage"||acl.user_can("homepage_edit")){promotion.push(ck_promotion.replace(cleanup_regex,""));params.action="update_and_promote"}}})});if(promotion.length){params.promotion=promotion.join(",")}ajax.request("/buzzfeed/_admin",{method:"post",parameters:params,onSuccess:bf_post_tools._save_edited_buzz,while_processing:{show:$("save-edited-buzz-spinner"),hide:e.target}})}};this._save_edited_buzz=function(r){if(bf_post_tools.contrib==1){bf_post_tools.cancel_inline_editor()}else{if(BF_STATIC.page=="Buzz"){BF_Request.location();return}}var obj=eval("("+r.responseText+")");if(obj.success==1){try{var buzz=bf_post_tools.cache;if(bf_post_tools.edit_form){var form=bf_post_tools.edit_form;form.addClassName("hidden");form.parentNode.removeChild(form);document.getElementsByTagName("BODY")[0].appendChild(form)}if(bf_post_tools.current_buzz){var post=$("post-"+bf_post_tools.current_buzz);post.show();if(post.up("#queue")){post.scrollTo();post.insert("<span class='edit_success'>Edit successfully saved!</span>");window.setTimeout(function(){var successMsg=post.select(".edit_success")[0];if(successMsg){successMsg.remove()}},5000)}else{post.replace(obj.html)}$("post-"+bf_post_tools.current_buzz).className=post.className;universal_dom.update($("post-"+bf_post_tools.current_buzz));bf_post_tools.init()}else{if(bf_post_tools.current_contrib){var form=bf_post_tools.edit_form_contrib;$("contribwhat_"+bf_post_tools.current_contrib).parentNode.show()}}delete bf_post_tools.cache;bf_post_tools.supertag_cache=[]}catch(e){console.dir({e:e})}}};this.save_image=function(path,image,region,sendTo){var buzz=bf_post_tools.cache;var params=region;params.type=buzz.form+"buzz";if($("user-loading")){$("user-loading").show()}$("user-image-edit").hide();params.image=path.replace(/\.(jpg|gif)$/,"");params.action="imagecrop";var sr=bf_post_tools.image_saved;var er=bf_post_tools.image_errored;var ajax=new BF_Request();ajax.request(sendTo,{method:"post",parameters:params,onSuccess:sr,onFailure:er})};this.image_errored=function(){alert("There was an error trying to save your image")};this.image_saved=function(resp){var buzz=bf_post_tools.cache;if($("user-loading")){$("user-loading").hide()}var obj=eval("("+resp.responseText+")");if(obj.saved){if(bf_post_tools.promo.editing=="std"&&$("img_preview")){buzz.oldimage=buzz.image;buzz.image=obj.thumb_image;$("img_preview").src=BF_STATIC.image_root+obj.thumb_image}else{if(bf_post_tools.promo.editing=="fp"&&$("img_fp_preview")){buzz["frontpage-image"]=obj.thumb_image;$("img_fp_preview").src=BF_STATIC.image_root+obj.thumb_image}else{if(bf_post_tools.promo.editing=="fpuk"&&$("img_fpuk_preview")){buzz["frontpage_uk-image"]=obj.thumb_image;$("img_fpuk_preview").src=BF_STATIC.image_root+obj.thumb_image}}}}else{this.image_errored()}};this.edit_image=function(e){var buzz=bf_post_tools.cache;$("super-image-edit-iframe").src="/static/images/public/spinners/big_on_eee.gif";BF_UI.showDialog("super-image-edit","","page_container");$("super-image-edit-iframe").src="/buzzfeed/_edit_user_contribution_image?action=imageform&template=public/user/cropper_form.tt&wide_cropper=1";var buzz_type="link";if(buzz.form=="image"){buzz_type="image"}else{if(buzz.form=="video"){buzz_type="video"}}$("super-image-edit-iframe").stopObserving("load");$("super-image-edit-iframe").observe("load",function(ev){try{ev.target.contentWindow.user_image.setBuzzType(buzz_type)}catch(e){console.warn("unable to set buzz type")}})};this.cancel_inline_editor=function(){if(bf_post_tools.buzz_opened){bf_post_tools.clean_badges_list();var no_form;if(bf_post_tools.current_buzz){var form=bf_post_tools.edit_form;var show_at=$("post-"+bf_post_tools.current_buzz);if(bf_post_tools.show_at){show_at=bf_post_tools.show_at}show_at.show()}else{if(bf_post_tools.current_contrib){var form=bf_post_tools.edit_form_contrib;$("contribwhat_"+bf_post_tools.current_contrib).parentNode.show()}else{no_form=1}}if(!bf_post_tools.cancel_button){delete bf_post_tools.current_contrib;delete bf_post_tools.current_buzz}else{delete bf_post_tools.cancel_button}if(!no_form){if(form.select('[id="fav_badges"]')[0]){form.select('[id="fav_badges"]')[0].hide()}else{if(form.select('[id="all_badges"]')[0]){form.select('[id="all_badges"]')[0].hide()}}form.addClassName("hidden");document.getElementsByTagName("BODY")[0].appendChild(form)}delete no_form;bf_post_tools.cache={};bf_post_tools.contrib=0;bf_post_tools.fav_badges=0;bf_post_tools.buzz_opened=0}};this.clean_badges_list=function(){var fav_list=$("fav_badges").getElementsByTagName("INPUT");var all_list=$("all_badges").getElementsByTagName("INPUT");for(var i=0;i<fav_list.length;i++){fav_list[i].checked=false}for(var i=0;i<all_list.length;i++){all_list[i].checked=false}};this.toggle_badges=function(){var buzz=bf_post_tools.cache;bf_post_tools.clean_badges_list();var form=bf_post_tools.edit_form;if(bf_post_tools.current_contrib){form=bf_post_tools.edit_form_contrib}if(bf_post_tools.fav_badges){form.select('[id="fav_badges"]')[0].hide();buzz.badges.each(function(badge){if(typeof form.elements[badge]!="undefined"){if(typeof form.elements[badge][1]!="undefined"){form.elements[badge][1].checked=true}else{form.elements[badge].checked=true}}});form.select('[id="all_badges"]')[0].show();bf_post_tools.fav_badges=0}else{form.select('[id="all_badges"]')[0].hide();buzz.badges.each(function(badge){if(typeof form.elements[badge]!="undefined"){if(typeof form.elements[badge][0]!="undefined"){form.elements[badge][0].checked=true}else{form.elements[badge].checked=true}}});form.select('[id="fav_badges"]')[0].show();bf_post_tools.fav_badges=1}};this.buzz_fields_to_text_fields={name:"name",blurb:"blurb","frontpage-description":"frontpage-description","frontpage-title":"frontpage-title","frontpage_uk-description":"frontpage_uk-description","frontpage_uk-title":"frontpage_uk-title"};this.process_inline_editor=function(r){var obj=eval("("+r.responseText+")");if(obj.success==1){if(obj.html){var form_div=document.createElement("div");form_div.innerHTML=obj.html;form_div.id="ptools_form";form_div.hide();document.getElementsByTagName("BODY")[0].appendChild(form_div)}bf_post_tools.cache=obj.buzz_data.evalJSON();var buzz=bf_post_tools.cache;bf_post_tools.supertag_cache=[];if(obj.contribution!=1){var converter=$("_converter");if(!converter){converter=document.createElement("div");converter.id="_converter";converter.addClassName("hidden");document.getElementsByTagName("BODY")[0].appendChild(converter)}bf_post_tools.edit_form=$("editForm");var form=bf_post_tools.edit_form}else{bf_post_tools.edit_form_contrib=$("editFormContrib");var form=bf_post_tools.edit_form_contrib}try{var cbox=form.getElementsByTagName("INPUT");for(var i=0;i<cbox.length;i++){cbox[i].checked=false}var show_at;if(obj.contribution!=1){try{$$("#post-"+bf_post_tools.current_buzz+" .ptool_spinner")[0].hide()}catch(e){console.warn("no spinner")}show_at=$("post-"+bf_post_tools.current_buzz)}else{$$("#contribwhat_"+bf_post_tools.current_contrib)[0].parentNode.getElementsByClassName("ptool_spinner")[0].hide();show_at=$("contribwhat_"+bf_post_tools.current_contrib).parentNode}if(bf_post_tools.show_at){show_at=bf_post_tools.show_at}bf_post_tools.cache.owner=show_at.getAttribute("rel:owner");bf_post_tools.buzz_opened=1}catch(e){console.dir({e:e})}if(bf_post_tools.cache.published){var rawPubDateTime=bf_post_tools.cache.published;var rawPubDTComp=rawPubDateTime.split(" ");var rawPubDate=rawPubDTComp[0].split("-");var rawPubTime=rawPubDTComp[1].split(":");var composedDateTime=new Date(rawPubDate[0],rawPubDate[1]-1,rawPubDate[2],rawPubTime[0],rawPubTime[1],rawPubTime[2],0);var formattedPubDate=composedDateTime.format("mmm d, h:MM tt");if($("published_datetime")){$("published_datetime").update(formattedPubDate)}}else{if($("published_datetime")){$("published_datetime").update("N/A")}}if($("quickpost-public-draft")){$("quickpost-public-draft").checked=buzz.draft_public=="1"}form.parentNode.removeChild(form);show_at.hide();show_at.parentNode.insertBefore(form,show_at);form.removeClassName("hidden");form.show();buzz.badges.each(function(badge){if(typeof form.elements[badge]!="undefined"){if(typeof form.elements[badge][0]!="undefined"){form.elements[badge][0].checked=true}else{form.elements[badge].checked=true}}});bf_post_tools.fav_badges=1;var all_badges=form.select('[id="all_badges"]');var fav_badges=form.select('[id="fav_badges"]');try{if(all_badges){all_badges[0].hide()}if(fav_badges){fav_badges[0].show()}}catch(e){console.dir({e:e})}if(obj.contribution!=1){$H(bf_post_tools.buzz_fields_to_text_fields).each(function(pair){var buzz_field=pair[0];var form_field=pair[1];converter.update(unescape(buzz[buzz_field]));if(form.elements[form_field]){form.elements[form_field].value=converter.innerHTML}});if(buzz.language&&form.elements.language){var options=form.elements.language.options;for(var i=0;i<options.length;i++){if(options[i].value==buzz.language){options[i].selected=true}}}var tag_list=$("tag_list");if(tag_list){tag_list.update("");buzz.tags.each(function(tag,idx){if(idx>0&&tag!=""){tag_list.appendChild(document.createTextNode(", "))}tag_list.appendChild(document.createTextNode(tag))})}if(buzz.supertags){var supertags=[];buzz.supertags.each(function(supertag){if($(supertag)){$(supertag).checked=true;supertags.push("--supertag-"+$(supertag).value)}else{bf_post_tools.supertag_cache.push(supertag)}if(supertag=="no-badge"){$("badges_list").addClassName("hidden")}})}if(buzz.contributions&&buzz.contributions.length){$("responses-on-btn").addClassName("selected");$("responses-off-btn").removeClassName("selected");$("responses-options").show();buzz.contributions.each(function(contribution){if($("c_"+contribution)){$("c_"+contribution).checked=true}})}else{$("responses-off-btn").addClassName("selected");$("responses-on-btn").removeClassName("selected");$("responses-options").hide()}if(buzz.verticals){var insertAfter=$("section-placeholder");if(insertAfter){var template=new Template(' 							<li> 								<input type="checkbox" checked="true" disabled="true" /> 								Added to #{category_display_name} #{time}								<input class="bf_dom" rel:bf_bucket="mimic-radio" type="checkbox" name="vertical-#{category_name}" onclick="bf_post_tools.put_in_vertical(\'#{category_name}\',this.checked?\'delete\':\'\')">Remove</input>								<input class="bf_dom" rel:bf_bucket="mimic-radio" type="checkbox" name="vertical-#{category_name}" onclick="bf_post_tools.put_in_vertical(\'#{category_name}\',this.checked?\'boost\':\'\')">Boost</input>							</li> 						');var ul=document.createElement("ul");buzz.verticals.each(function(vertical){vertical.category_display_name=vertical.category_name==="Ukpolitics"?"UK Politics":vertical.category_name;var li=template.evaluate(vertical);ul.innerHTML+=li;var option=$("select-publish-to-"+vertical.category_id);if(option){option.disabled=true}});insertAfter.appendChild(ul)}}if(!acl.user_can("homepage_edit")){var not_yet_queued=$("not-yet-queued");var not_yet_suggested=$("not-yet-suggested");var already_suggested=$("already-suggested");if(not_yet_queued&&not_yet_suggested&&already_suggested){not_yet_queued.addClassName("hidden");if(buzz.suggestion==1){not_yet_suggested.addClassName("hidden");already_suggested.removeClassName("hidden");var suggested=$("suggested");if(suggested){suggested.checked=suggested.disabled=true}}else{not_yet_suggested.removeClassName("hidden");already_suggested.addClassName("hidden")}}var uk_not_yet_queued=$("uk_not-yet-queued");if(uk_not_yet_queued){uk_not_yet_queued.addClassName("hidden")}}if(buzz.run_at&&buzz.already_ran!=""){var already=$("already-queued");var not_yet_queued=$("not-yet-queued");var not_yet_suggested=$("not-yet-suggested");var already_suggested=$("already-suggested");var run_at=$("run_at");if(already&&not_yet_queued&&not_yet_suggested&&already_suggested&&run_at){already.removeClassName("hidden");not_yet_queued.addClassName("hidden");not_yet_suggested.addClassName("hidden");already_suggested.addClassName("hidden");run_at.update(buzz.run_at);$("already-queued-cbox").checked=true;$("already-queued-cbox").disabled=true}}if(buzz.uk_run_at&&buzz.uk_already_ran!=""){var uk_already=$("uk_already-queued");var uk_not_yet_queued=$("uk_not-yet-queued");var uk_run_at=$("uk_run_at");if(uk_already&&uk_not_yet_queued&&uk_run_at){uk_already.removeClassName("hidden");uk_not_yet_queued.addClassName("hidden");uk_run_at.update(buzz.uk_run_at);$("uk_already-queued-cbox").checked=true;$("uk_already-queued-cbox").disabled=true}}if(buzz.au_run_at&&buzz.au_already_ran!=""){var au_already=$("au_already-queued");var au_not_yet_queued=$("au_not-yet-queued");var au_run_at=$("au_run_at");if(au_already&&au_not_yet_queued&&au_run_at){au_already.removeClassName("hidden");au_not_yet_queued.addClassName("hidden");au_run_at.update(buzz.au_run_at);$("au_already-queued-cbox").checked=true;$("au_already-queued-cbox").disabled=true}}if(buzz.homepage){var already_added=$("already-added");var already_added_cbox=$("already-added-cbox");var already_added_on=$("already-added-on");if(already_added&&already_added_cbox&&already_added_on){already_added.removeClassName("hidden");already_added_cbox.checked=already_added_cbox.disabled=true;already_added_on.update(buzz.homepage)}else{console.warn("missing expected HTML id[s] already-added, already-added-cbox, and/or already-added-on")}}if(buzz.uk_homepage){var uk_already_added=$("uk_already-added");var uk_already_added_cbox=$("uk_already-added-cbox");var uk_already_added_on=$("uk_already-added-on");if(uk_already_added&&uk_already_added_cbox&&uk_already_added_on){uk_already_added.removeClassName("hidden");uk_already_added_cbox.checked=uk_already_added_cbox.disabled=true;uk_already_added_on.update(buzz.uk_homepage)}else{console.warn("missing expected HTML id[s] uk_already-added, uk_already-added-cbox, and/or uk_already-added-on")}}if(buzz.australia_homepage){var au_already_added=$("au_already-added");var au_already_added_cbox=$("au_already-added-cbox");var au_already_added_on=$("au_already-added-on");if(au_already_added&&au_already_added_cbox&&au_already_added_on){au_already_added.removeClassName("hidden");au_already_added_cbox.checked=au_already_added_cbox.disabled=true;au_already_added_on.update(buzz.australia_homepage)}else{console.warn("missing expected HTML id[s] au_already-added, au_already-added-cbox, and/or au_already-added-on")}}if(buzz.network){var obj=$("add-network");if(obj){obj.checked=obj.disabled=true}obj=$("added-network");if(obj){obj.removeClassName("hidden")}obj=$("added-network-on");if(obj){obj.update("ed: "+buzz.network)}}}if(buzz.raw&&$("add-raw")){var raw_obj=$("add-raw");raw_obj.checked=raw_obj.disabled=true;raw_obj=$("added-raw");if(raw_obj){raw_obj.removeClassName("hidden")}raw_obj=$("added-raw-on");if(raw_obj){raw_obj.update("ed: "+buzz.raw)}}if(buzz.raw&&$("remove_contribution_from_raw")){if(buzz.raw=="0000-00-00 00:00:00"){$("remove_contribution_from_raw").hide();$("restore_contribution_to_raw").show()}else{$("remove_contribution_from_raw").show();$("restore_contribution_to_raw").hide()}}if(obj.contribution!=1){if(buzz.thumbnails&&buzz.thumbnails!="0"){var obj=$("add-thumbnails");obj.checked=obj.disabled=true;obj=$("added-thumbnails");if(obj){obj.removeClassName("hidden")}obj=$("added-thumbnails-on");if(obj){obj.update("ed: "+buzz.thumbnails)}}bf_post_tools.languages.each(function(language_code){if(buzz["f_promoted-"+language_code]&&buzz["f_promoted-"+language_code]!="0"){var obj=$("add-thumbnails-"+language_code);obj.checked=obj.disabled=true;obj=$("added-thumbnails-"+language_code);if(obj){obj.removeClassName("hidden")}obj=$("added-thumbnails-"+language_code+"-on");if(obj){obj.update("ed: "+buzz["f_promoted-"+language_code])}}});if(buzz.nsfw=="true"){form.elements["nsfw-btn"].addClassName("selected");form.elements["tame-btn"].removeClassName("selected")}else{form.elements["tame-btn"].addClassName("selected");form.elements["nsfw-btn"].removeClassName("selected")}if($("img_preview")){$("img_preview").setAttribute("src",BF_STATIC.image_root+buzz.image)}if($("img_fp_preview")&&buzz["frontpage-image"]){$("img_fp_preview").setAttribute("src",BF_STATIC.image_root+buzz["frontpage-image"])}if($("img_fpuk_preview")&&buzz["frontpage_uk-image"]){$("img_fpuk_preview").setAttribute("src",BF_STATIC.image_root+buzz["frontpage_uk-image"])}if(buzz.category_id){var categories=form.elements.category.options;for(var i=0;i<categories.length;i++){if(categories[i].value==buzz.category_id){categories[i].selected=true}}}universal_dom.update(form);if(typeof buzz.translation_records!="undefined"){var pending;var translated;var deleted;universal_dom.get_bucket_elements_with_data("translation_status",{my_type:"pending"}).each(function(el){pending=el;pending.update("")});universal_dom.get_bucket_elements_with_data("translation_status",{my_type:"translated"}).each(function(el){translated=el;translated.update("")});universal_dom.get_bucket_elements_with_data("translation_status",{my_type:"deleted"}).each(function(el){deleted=el;deleted.update("")});if(buzz.translation_records.length==0||buzz.translation_records==null){universal_dom.get_bucket_elements_with_data("translation_status",{my_type:"not requested"}).each(function(el){el.removeClassName("hidden")})}else{buzz.translation_records.each(function(record){if(record.status==5){if(pending.childNodes.length==0){pending.removeClassName("hidden");pending.appendChild(document.createTextNode("Candidate"))}}if(record.status==1){pending.removeClassName("hidden");pending.appendChild(document.createTextNode("Awaiting "+record.language+" translation "))}if(record.status==2){translated.removeClassName("hidden");var t=new Template('Translated <a target="_blank" href="/#{uri}">#{language}</a> ');var span=document.createElement("span");span.update(t.evaluate(record));translated.appendChild(span)}if(record.status==6){deleted.removeClassName("hidden");var t=new Template("Removed #{language} ");var span=document.createElement("span");span.update(t.evaluate(record));deleted.appendChild(span)}});if(!deleted.hasClassName("hidden")){var a=document.createElement("a");a.observe("click",function(){bf_post_tools.supertag_cache.push("translatethis");this.parentNode.removeChild(this);return false});a.appendChild(document.createTextNode("Restore"));deleted.appendChild(a)}}}}bf_post_tools.buttons_actions();if($("editForm")){user_post.limit_categories_by_acl($("editForm").elements.category)}}};this.load_inline_editor=function(args){bf_post_tools.hide_message();if(args.buzz_id||args.comment_id){if(args.type=="contribution"){bf_post_tools.current_contrib=args.comment_id;$$("#contribwhat_"+bf_post_tools.current_contrib)[0].parentNode.getElementsByClassName("ptool_spinner")[0].show();if(typeof bf_post_tools.edit_form_contrib=="undefined"){var params={action:"get_form_contrib"}}else{var params={action:"get_contrib_data"}}bf_post_tools.contrib=1;params.comment_id=args.comment_id;var ajax=new BF_Request();ajax.request("/buzzfeed/comments_moderation",{method:"post",parameters:params,onSuccess:bf_post_tools.process_inline_editor})}else{bf_post_tools.current_buzz=args.buzz_id;try{$$("#post-"+bf_post_tools.current_buzz+" .ptool_spinner")[0].show();$$(".buzz header")[0].scrollTo()}catch(e){console.warn("no spinner")}if(typeof bf_post_tools.edit_form=="undefined"){var params={action:"get_form"}}else{try{bf_post_tools.edit_form.parentNode.removeChild(bf_post_tools.edit_form);delete bf_post_tools.edit_form}catch(e){console.warn("cannot find parent")}var params={action:"get_form"}}params.buzz_id=args.buzz_id;var ajax=new BF_Request();ajax.request("/buzzfeed/_admin",{method:"post",parameters:params,onSuccess:bf_post_tools.process_inline_editor})}}else{alert("Invalid ID ("+args.buzz_id+")")}};this.load_flexpro=function(e){var buzz_info=e.target.getAttribute("rel:data").evalJSON();var owner=e.target.getAttribute("rel:owner");var timestamp=(new Date()).getTime();if(buzz_info.buzz_id){if(acl.user_can("auto_flex")){window.open("/buzzfeed/_optimize/"+owner+"/"+buzz_info.uri,"_new_"+timestamp)}else{window.open(BF_STATIC.web_root+"/_flex_pro/"+owner+"/"+buzz_info.uri,"_new_"+timestamp)}}else{alert("Invalid ID ("+buzz_info.buzz_id+")")}};this.load_rebuzz_button=function(e){picks_controller.launch_pick(e)};this.load_splash=function(e){var buzz_info=e.target.getAttribute("rel:data").evalJSON();var owner=e.target.getAttribute("rel:owner");var medium=e.target.getAttribute("rel:medium");if(buzz_info.buzz_id){this._splash_buzz({uri:buzz_info.uri,username:owner,medium:medium})}else{alert("Invalid ID ("+buzz_info.buzz_id+")")}};this.load_boost_button=function(e){var timestamp=(new Date()).getTime();if(acl.user_can("boost_button")){window.open("http://discotech.buzzfeed.com/boost?buzz_url="+encodeURIComponent(location.href),"_new_"+timestamp)}};this.stop_splash=function(e){var el=e.target;var promoid=$(el).getAttribute("rel:promoid");var params={action:"set_active",active:0,promotion_id:promoid};var request=new BF_Request;request.request("/buzzfeed/_edit_flex_pro",{parameters:params,method:"post",onCreate:function(){$("splash-container").insert('<div style="width:100%; height:250px; background:rgba(200,200,200,.8); position:absolute; top:0px;"><img src="'+BF_STATIC.static_root+'/images/public/spinners/big_on_white.gif" style="position:absolute; left:50%; top:100px;" /></div>')},onSuccess:function(){BF_Request.location({reload_track:true})}})};this.load_stats=function(e){var buzz_info=e.target.getAttribute("rel:data").evalJSON();var owner=e.target.getAttribute("rel:owner");var timestamp=(new Date()).getTime();if(buzz_info.buzz_id){window.open(BF_STATIC.web_root+"/dashboard/"+owner+"/"+buzz_info.uri,"_new_"+timestamp)}else{alert("Invalid ID ("+buzz_info.buzz_id+")")}};this.update_contribution_raw_flag=function(e,raw){if(e.event){e=e.event}e.stop();var raw_flag=raw?1:0;var params={action:"update_contribution",comment_id:bf_post_tools.cache.id,f_raw:raw};var ajax=new BF_Request();ajax.request("/buzzfeed/comments_moderation",{method:"post",parameters:params,onSuccess:bf_post_tools._save_edited_buzz,while_processing:{show:$("save-edited-buzz-spinner"),hide:e.target}})};var update_count=function(action){var delta=action=="hide"?1:-1;var posts_count_element=$$("#posts-count")[0];if(posts_count_element){var posts_count=eval("("+posts_count_element.getAttribute("rel:data")+")");posts_count.posts_count-=delta;posts_count_element.setAttribute("rel:data",JSON.stringify(posts_count));posts_count_element.childNodes[0].nodeValue=posts_count.posts_count}var hidden_count_element=$$("#hidden-count")[0];if(hidden_count_element){var hidden_count=eval("("+hidden_count_element.getAttribute("rel:data")+")");hidden_count.hidden_count+=delta;hidden_count_element.setAttribute("rel:data",JSON.stringify(hidden_count));hidden_count_element.childNodes[0].nodeValue=hidden_count.hidden_count}};this.show_post=function(e){if(e.event){e=e.event}e.stop();var user=new BF_User();var userinfo=user.getUserInfo();var username=userinfo.username;var el=e.target;var owner=el.getAttribute("rel:owner");var buzz_data=el.getAttribute("rel:data");var buzz_data=eval("("+buzz_data+")");var buzz_id=buzz_data.buzz_id;if("acl" in window&&acl.user_can("edit_partner_posts")){el.setAttribute("rel:buzz_id",buzz_id);return picks_controller.show_pick({stop:function(){},target:el},function(){update_count("show")})}};this.mark_for_translation=function(e){var buzz=e.target.getAttribute("rel:data").evalJSON();var is_active=false;var elements=document.getElementsByClassName("pt-translate");if(elements[0].className.indexOf("translate-active")!=-1){is_active=true}if(!is_active){var params={action:"queue_translation",buzz_id:buzz.buzz_id};ajax=new BF_Request();ajax.request("/buzzfeed/translation_moderation",{method:"get",parameters:params,onSuccess:function(e){var elements=document.getElementsByClassName("pt-translate");elements[0].className=elements[0].className+" translate-active"}})}else{var params={action:"unqueue_translation",buzz_id:buzz.buzz_id};ajax=new BF_Request();ajax.request("/buzzfeed/translation_moderation",{method:"get",parameters:params,onSuccess:function(e){var elements=document.getElementsByClassName("pt-translate");elements[0].className=elements[0].className.replace(" translate-active","")}})}};this.hide_post=function(e){if(e.event){e=e.event}e.stop();var user=new BF_User();var userinfo=user.getUserInfo();var username=userinfo.username;var el=e.target;var owner=el.getAttribute("rel:owner");var buzz_data=el.getAttribute("rel:data");var buzz_data=eval("("+buzz_data+")");var buzz_id=buzz_data.buzz_id;if("acl" in window&&acl.user_can("edit_partner_posts")){el.setAttribute("rel:buzz_id",buzz_id);return picks_controller.hide_pick({stop:function(){},target:el},function(){update_count("hide")})}};this.do_delete_quickpost=function(e,type){if(type=="contrib"){var comment_id=bf_post_tools.current_contrib;var old_iframe=$("user_post_delete_iframe");if(old_iframe){var parent=old_iframe.parentNode;parent.removeChild(old_iframe)}if($("user_post_delete_modal_text")){$("user_post_delete_modal_text").removeClassName("hidden");if($("post-headline")){$("post-headline").update("this contribution")}var cancel_btn=$("cancel-delete-button");var delete_btn=$("delete-button");if(cancel_btn){cancel_btn.stopObserving("click");cancel_btn.observe("click",bf_post_tools._cancel_delete_quickpost)}if(delete_btn){delete_btn.stopObserving("click");delete_btn.observe("click",function(){bf_post_tools._delete_contribution({comment_id:comment_id})})}}BF_UI.showDialog("user_post_delete","Delete")}else{var user=new BF_User();var userinfo=user.getUserInfo();var username=userinfo.username;var el=e.target;var owner=el.getAttribute("rel:owner");var buzz_data=el.getAttribute("rel:data");var buzz_data=eval("("+buzz_data+")");var buzz_id=buzz_data.buzz_id;if(BF_STATIC.tt_page=="Home"&&"acl" in window&&acl.user_can("uk_homepage_edit")&&BF_STATIC.country!=="us"){BF_UI.showDialog("user_post_delete","Remove from the "+BF_STATIC.country.toUpperCase()+" frontpage");$("user_post_delete_iframe").setAttribute("src","/buzzfeed/editbuzz/remove?id="+buzz_id+"&country="+BF_STATIC.country);return}var isa=false;if("acl" in window&&acl.user_can("delete_user_posts")){isa=true}if(!isa&&acl.user_can("edit_partner_posts")&&typeof BF_STATIC!="undefined"&&(BF_STATIC.f_ad||BF_STATIC.f_partner)){isa=true}var own_page=false;if(BF_STATIC.tt_page=="User"&&$("username_of_page_owner")&&typeof username_of_page_owner.value!=="undefined"&&$("username_of_page_owner").value==username){own_page=true}if(username!=owner&&!isa&&!own_page){return}if(owner!=username&&"picks_controller" in window&&"acl" in window&&(acl.user_can("picks_delete_from_anywhere")||own_page)&&$(buzz_id+"-delete_pick-spinner")){el.setAttribute("rel:buzz_id",buzz_id);var posts_count_el=$("posts-count");if(posts_count_el&&posts_count_el.up("li").hasClassName("selected")){var posts_count=posts_count_el.getAttribute("rel:data");posts_count=eval("("+posts_count+")");posts_count.posts_count--;posts_count_el.setAttribute("rel:data",Object.toJSON(posts_count));posts_count_el.update(posts_count.posts_count)}return picks_controller.delete_pick({stop:function(){},target:el})}else{var old_iframe=$("user_post_delete_iframe");if(old_iframe){var parent=old_iframe.parentNode;parent.removeChild(old_iframe)}if($("user_post_delete_modal_text")){$("user_post_delete_modal_text").removeClassName("hidden");var headline=(buzz_data!=null)?owner+"/"+buzz_data.uri:"this contribution";if($("post-headline")){$("post-headline").update(headline)}var cancel_btn=$("cancel-delete-button");var delete_btn=$("delete-button");if(cancel_btn){cancel_btn.stopObserving("click");cancel_btn.observe("click",bf_post_tools._cancel_delete_quickpost)}if(delete_btn){delete_btn.stopObserving("click");delete_btn.observe("click",function(){bf_post_tools._delete_quickpost({buzz_id:buzz_id})})}}BF_UI.showDialog("user_post_delete","Delete")}}},this.delete_quickpost=function(e,type){if(e.event){e=e.event}e.stop();bfjemplate.load_if_missing({id:"user_post_delete",callback:bf_post_tools.do_delete_quickpost,context:bf_post_tools,args:arguments})};this._cancel_delete_quickpost=function(obj){top.BF_UI.closeDialog("user_post_delete")};this._delete_quickpost=function(obj){var params={action:"delete",id:obj.buzz_id};var url="/buzzfeed/_public_admin";if("reranked_id" in window){delete params.id;params.reranked_id=reranked_id;url="/buzzfeed/rerank_subbuzz"}var request=(new BF_Request()).request;request(url,{method:"post",needsToken:true,parameters:params,while_processing:{show:"delete-button-spinner",hide:"delete-button"},onSuccess:function(r){var r_obj=eval("("+r.responseText+")");if(r_obj.success!=1){var msg=r_obj.error;if(msg==="You cannot delete once the buzz has appeared on the homepage or has been promoted."){msg="Sorry, this post has been promoted by BuzzFeed editors so it can no longer be edited or deleted. Contact community@buzzfeed.com for more info."}$("delete-quickpost-form").innerHTML='<div class="bf_dialog_content_area"><div class="bf_dialog_pad">'+msg+'</div></div><div id="user_post_preview_footer" class="bf_dialog_footer"></div>';return}if(BF_STATIC.page=="Buzz"){top.BF_UI.closeDialog("user_post_delete");if(document.cookie.indexOf("testmode")==-1){BF_Request.location({reload_track:true})}}else{top.BF_UI.closeDialog("user_post_delete");parent.$("post-"+obj.buzz_id).hide();var draft_count_el=parent.$("draft-count");var posts_count_el=parent.$("posts-count");if(draft_count_el&&draft_count_el.up("li").hasClassName("selected")){var draft_count=draft_count_el.getAttribute("rel:data");draft_count=eval("("+draft_count+")");draft_count.draft_count--;draft_count_el.setAttribute("rel:data",Object.toJSON(draft_count));draft_count_el.update(draft_count.draft_count)}if(posts_count_el&&posts_count_el.up("li").hasClassName("selected")){var posts_count=posts_count_el.getAttribute("rel:data");posts_count=eval("("+posts_count+")");posts_count.posts_count--;posts_count_el.setAttribute("rel:data",Object.toJSON(posts_count));posts_count_el.update(posts_count.posts_count)}}}})};this._delete_contribution=function(obj){var params={action:"update_contribution",f_deleted:1,comment_id:obj.comment_id};var request=(new BF_Request()).request;request("/buzzfeed/comments_moderation",{method:"post",needsToken:true,parameters:params,while_processing:{show:"delete-button-spinner",hide:"delete-button"},onSuccess:function(){top.BF_UI.closeDialog("user_post_delete");bf_post_tools.cancel_inline_editor()}})};this.does_pin_dialog_have_anything_checked=function(obj){var changed=false;universal_dom.get_bucket_elements("pin-button").each(function(el){if(el.checked){changed=true}});var set_pin=$("set-pin");if(set_pin){if(changed){set_pin.removeClassName("hidden")}else{set_pin.addClassName("hidden")}}};this.pin_buzz=function(e,type,li){if($("pin-message")){$("pin-message").remove()}var el=e.findElement("li")||e.findElement("header")||$$(".buzz header")[0]||document.body;var data=el.getAttribute("rel:data");var vertical_feature_html="";if(data){var html="";var template=new Template("<li> 				<input class=\"bf_dom\" name=\"#{name}\" rel:bf_bucket_data=\"{'mimic-radio':1,'pin-button':1,'open-queue-dialog':{'name':'#{name}','force_closed':'true'}}\" value=\"#{suggest_category}\" type=\"checkbox\"#{checked}></input>#{msg} #{category} 			</li>");var select_template=new Template('<li> 				<input class="bf_dom" rel:bf_bucket="pin-button open-vertical-dialog" value="Feature" type="checkbox" />Add To 				<span class="bf_dom hidden" rel:bf_bucket_data="{\'vertical-dialog\': 1}"><select class="bf_dom" name="category" rel:bf_bucket="pin-dropdown">#{html}</select></span> 				<span class="bf_dom" rel:bf_bucket_data="{\'vertical-dialog\':0}">vertical</span> 				Big Stories</li>');var select_option_template=new Template('<option value="#{value}">#{value}</option>');var editor_add_template=new Template('<li> 				<input class="bf_dom" rel:bf_bucket="mimic-radio pin-button" name="#{category}" value="#{category}" type="checkbox"#{checked}></input>Add to <b>#{category}</b> 			</li>');var editor_queue_template=new Template("<li> 				<input class=\"bf_dom\" rel:bf_bucket_data=\"{'mimic-radio':1,'pin-button':1,'open-queue-dialog':{'name':'#{category}'}}\" name=\"#{category}\" value=\"#{category}\" type=\"checkbox\"#{checked}></input>Queue for <b>#{category}</b> 				#{queue_dialog} 			</li>");var queue_template=new Template('<div class="hidden bf_dom" rel:bf_bucket_data="{\'queue-dialog\':{\'name\':\'#{category}\'}}">Queue: 				<input id="queue-dialog-at" type="checkbox" class="bf_dom" name="pin-queue" value="queue-at" checked="true" 					rel:bf_bucket_data="{\'mimic-radio\':1,\'open-queue-schedule\':{\'name\':\'#{category}\'}}" />					<label for="queue-dialog-at">For</label> 				<span class="bf_dom" rel:bf_bucket_data="{\'queue-schedule\':{\'name\':\'#{category}\'}}"> 					<select name="queue-on-day">#{days}</select> 					<select name="queue-on-hour">#{hours}</select> 				</span> 				</div> 			');var option_template=new Template('<option value="#{value}"#{selected}>#{label}</option>');var interval_in_minutes=60;var hours_option="",first_hour="";var time=0;var next=new Date(),next_set=false;while(time<24*60){var seconds="00",raw_hours,raw_minutes;var hours=raw_hours=parseInt(time/60);var minutes=raw_minutes=time%60;if(minutes<10){minutes="0"+minutes}var ampm=hours<12?"am":"pm";if(hours==0){hours=12}if(hours>12){hours-=12}var tmpl=option_template.evaluate({value:[raw_hours,minutes,seconds].join(":"),label:[hours,minutes].join(":")+" "+ampm,selected:!first_hour||(raw_hours==next.getHours()&&raw_minutes==next.getMinutes())?' selected="selected"':""});if(!first_hour){first_hour=tmpl}else{hours_option+=tmpl}time+=interval_in_minutes;if(!next_set&&next.getHours()*60+next.getMinutes()+5<=time){next.setHours(0);next.setMinutes(time);next_set=true}}if(!next_set){next.setHours(0);next.setMinutes(time+interval_in_minutes)}else{first_hour=first_hour.replace(/\sselected="selected"/,"")}hours_option=first_hour+hours_option;var days="";var generate_date=function(d){var year=d.getYear();if(year<1900){year+=1900}return[year,d.getMonth()+1,d.getDate()].join("-")};var day_of_week=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var terms=function(days){var d=(days==0?new Date():new Date((new Date()).getTime()+(days*24*60*60*1000)));return{value:generate_date(d),label:(days==0?"Today":(days==1?"Tomorrow":day_of_week[d.getDay()])),selected:(next.getDate()==d.getDate()?' selected="selected"':"")}};var values=[0,1,2,3,4,5,6].map(terms);values.each(function(value){days+=option_template.evaluate(value)});data=eval("("+data+")");var added_vertical=false;var community=(/^\/buzzfeed\/queue\/community/.test(window.location.pathname))?true:false;if((!added_vertical&&typeof data.category!="undefined"&&data.category!="")||community){var options="";user_post.vertical_categories.each(function(index){var perm="queue_edit_"+((user_post.categories[index]||"").toLowerCase());if(perm in acls&&acl.user_can(perm)){options+=select_option_template.evaluate({value:user_post.categories[index]})}});html+=select_template.evaluate({html:options});added_vertical=true}var use_template=template;var params={suggest_category:"fq_suggest",category:"Homepage",name:"Homepage Flow",msg:"Suggest for"};params.queue_dialog=queue_template.evaluate({category:"Homepage Flow",days:days,hours:hours_option});html+=use_template.evaluate(params);if(acl.user_can("homepage_edit")){params.category="Homepage Flow";html+=editor_queue_template.evaluate(params);params.category="Homepage Big Stories";html+=editor_add_template.evaluate(params)}if(acl.user_can("uk_homepage_edit")){params.category="UK Homepage Big Stories";html+=editor_add_template.evaluate(params)}if(acl.user_can("australia_homepage_edit")){params.category="AU Homepage Big Stories";html+=editor_add_template.evaluate(params)}vertical_feature_html='<ul style="text-align:left;padding-left:24px;">'+html+"</ul>"}el.insert('		  <div class="pin-dialog"  id="pin-message"> 		  <div class="fixer">		    <div id="pin-text">   		    <span id="msg-text" class="pin-title">Feature This Post? <a class="pin-cancel" onclick="bf_post_tools.hide_message()">X</a></span>     		  <div>'+vertical_feature_html+'     		    <div class="pin-dialog-buttons"> 							<select id="splash-dropdown" class="hidden"> 								<option value="0">Splash</option> 							</select> 	    		    <button type="button" class="button2 hidden pin" style="float:left;" id="set-splash">Splash</button> 	    		    <button type="button" class="button2 grey pin" id="cancel-pin">Cancel</button> 	    		    <button type="button" class="button2 pin" id="set-pin">Let\'s Do It!</button>     		  	</div>     		  </div>   		  </div>   		  <div id="pin-spinner" class="hidden" style="text-align:center; margin-top:25px;">   		    <img src="/static/images/public/spinners/big_on_e6e6e6.gif" />   		  </div> 		  </div> 		  </div> 		');delete universal_dom._bucket["pin-button"].elements;universal_dom.update(el);bf_post_tools.does_pin_dialog_have_anything_checked();if(bf_post_tools.show_splash()){$("splash-dropdown").removeClassName("hidden")}if(type){if(type==="order"){$("msg-text").update("Move this Buzz to to top?");$("set-pin").observe("click",function(){bf_post_tools._pin_buzz(e,false,null)})}else{if(type==="remove"){$("msg-text").update("Remove this Buzz from the list?");$("set-pin").update("Remove");$("set-pin").observe("click",function(){bf_post_tools._pin_buzz(e,true,li)})}}}else{$("set-pin").observe("click",function(){bf_post_tools._pin_buzz(e,false,null)});var data=el.getAttribute("rel:data");var owner=el.getAttribute("rel:owner");if(data&&owner){data=eval("("+data+")");data.username=owner;$("splash-dropdown").observe("change",function(e){e.stop();bf_post_tools._splash_buzz(data)})}else{$("set-splash").addClassName("hidden")}}$("cancel-pin").observe("click",bf_post_tools.hide_message);document.body.appendChild($("pin-message"))};this._splash_buzz=function(data){try{var medium,splash_options=$("splash-dropdown"),window_name="_self";if(splash_options){medium=splash_options.options[splash_options.selectedIndex].value}else{if(data&&typeof data.medium!=="undefined"){medium=data.medium;window_name="_new_"+(new Date()).getTime()}else{medium=0}}if(medium!=0){window.open("/buzzfeed/_flex_pro/"+data.username+"/"+data.uri+"/splashing?medium="+medium,window_name)}}catch(e){console.dir({e:e})}};this.show_splash=function(){var splash_options=$("splash-dropdown");var show_splash=false;if(acl.user_can("homepage_splashing")){show_splash=true;splash_options.options[splash_options.options.length]=new Option("Homepage Splash","splash")}if(acl.user_can("uk_homepage_splashing")){show_splash=true;splash_options.options[splash_options.options.length]=new Option("UK Frontpage Splash","uk_frontpage_splash")}if(acl.user_can("australia_homepage_edit")){show_splash=true;splash_options.options[splash_options.options.length]=new Option("AU Frontpage Splash","australia_frontpage_splash")}var isa_queue_edit_acl=new RegExp(/^queue_edit_.*/);for(var ck_acl in acls){if(isa_queue_edit_acl.match(ck_acl)&&acl.user_can(ck_acl)){show_splash=true;var splash_value=ck_acl.replace(/queue_edit_/g,"");var splash_name=splash_value.capitalize()+" Splash";var medium_name=splash_value+"_splash";splash_options.options[splash_options.options.length]=new Option(splash_name,medium_name)}}return show_splash};this._pin_buzz=function(e,unpin,li){if(e.event&&typeof e.event!=" undefined"){e=e.event}e.stop();var el=e.target;var buzz_data=el.getAttribute("rel:data");var buzz_data=eval("("+buzz_data+")");var buzz_id=buzz_data.buzz_id;var action;if(unpin){action="unpin"}else{action="pin"}var params={action:action,buzz_id:buzz_id};if(buzz_data.column){params.column=buzz_data.column}if(params.action=="unpin"){if(BF_STATIC.tt_page!="Home"){params.is_vertical=1;params.vertical_name=BF_STATIC.tt_page}}else{var cboxes=[];var category_flag;try{cboxes=$("pin-message").getElementsByTagName("INPUT")}catch(e){}var hp_flow_queue=false;for(var i=0;i<cboxes.length;i++){if(cboxes[i].getAttribute("type")=="checkbox"&&cboxes[i].checked){var name=cboxes[i].name;var value=cboxes[i].value;if(value=="Homepage Big Stories"){params.bs_add=1}else{if(value=="UK Homepage Big Stories"){params.uk_bs_add=1}else{if(value=="AU Homepage Big Stories"){params.au_bs_add=1}else{if(value=="Homepage Flow"){hp_flow_queue=true}else{if(value=="bs_suggest"){params.bs_suggest=1}else{if(value=="fq_suggest"){params.fq_suggest=1}else{if(value.match(/queue-(next|last|at)/)){if(hp_flow_queue){params[value]=value;var selects=$("pin-message").getElementsByTagName("SELECT");for(var j=0;j<selects.length;j++){var option=selects[j].options;params[selects[j].getAttribute("name")]=option[selects[j].selectedIndex].value}}}else{if(value=="Feature"){category_flag=$("pin-message").select('select[name="category"]');if(category_flag[0].value){params.add_to_vertical=category_flag[0].value.toLowerCase()}}}}}}}}}}}}ajax=new BF_Request();ajax.request("/buzzfeed/_admin",{method:"post",parameters:params,while_processing:{show:"pin-spinner",hide:"pin-text"},onSuccess:function(e){var res=e.responseText.evalJSON();if(res.success){if(e.request.parameters.action=="unpin"&&li!=null){if(li.hasClassName("first")){$(li).next("li").addClassName("first")}li.hide()}bf_post_tools.hide_message()}else{$("msg-text").update("<h2>Error:"+res.error+"</h2>")}}})};this.hide_message=function(){if($("pin-message")){$("pin-message").remove()}};this.remove_from_parent=function(){var params={};params.action="moderate";params.id=bf_post_tools.current_contrib;var sr=function(r){var obj=eval("("+r.responseText+")");alert("Remove from parent cintribution id"+obj.id+": "+obj.updated)};var er=function(r){var obj=eval("("+r.responseText+")");console.error(obj);alert("Error! Remove from parent")};var ajax=new BF_Request();ajax.request("/buzzfeed/_contribution_moderator",{method:"get",parameters:params,onSuccess:sr,onFailure:er})};this.create_element=function(parent,class_name){var pt_element=document.createElement("A");var pt_owner=parent.getAttribute("rel:owner");var buzz_info=parent.getAttribute("rel:data").evalJSON();var buzz_id=parent.getAttribute("rel:buzz_id");pt_element.className=class_name;pt_element.href="#";pt_element.innerHTML=class_name;pt_element.setAttribute("onclick","return false");pt_element.setAttribute("rel:data",JSON.stringify(buzz_info));pt_element.setAttribute("rel:buzz_id",buzz_id);if(class_name=="pt-wrench"){pt_element.setAttribute("rel:actions","click:bf_post_tools.load_inline_editor");pt_element.setAttribute("rel:bf_bucket","event_handler")}if(class_name=="pt-remove"){var username=(new BF_User()).getUserInfo().username;var owner=parent.getAttribute("rel:owner");var own_page=false;if(BF_STATIC.tt_page=="User"&&$("username_of_page_owner")&&typeof username_of_page_owner.value!=="undefined"&&$("username_of_page_owner").value==username){own_page=true}if(owner!=username&&"picks_controller" in window&&"acl" in window&&(acl.user_can("picks_delete_from_anywhere")||own_page)&&$(buzz_id+"-delete_pick-spinner")||BF_STATIC.tt_page=="Home"&&"acl" in window&&acl.user_can("uk_homepage_edit")&&BF_STATIC.country!=="us"){pt_element.addClassName("pt-remove-picks")}}pt_element.setAttribute("rel:owner",pt_owner);return pt_element};this.create_ptool=function(item,permissions){try{if(!"acl" in window){throw new Error("acl is not available")}var inject=document.createElement("DIV");inject.className="ptools";inject.setAttribute("style","display:none");if(BF_STATIC.tt_page=="Home"&&acl.user_can("uk_homepage_edit")&&BF_STATIC.country!=="us"){inject.appendChild(bf_post_tools.create_element(item,"pt-remove"))}var stats,editBuzzElement=bf_post_tools.create_element(item,"pt-t-edit");editBuzzElement.setAttribute("rel:gt_act","open-post");editBuzzElement.setAttribute("rel:gt_cat","[ttp]:omni-box");if(bf_post_tools.is_queue){var qtool=document.createElement("DIV");qtool.className="queue_ptools";var buzz_data=item.getAttribute("rel:data");if(buzz_data){buzz_data=eval("("+buzz_data+")")}else{buzz_data={}}var ptool_data=item.getAttribute("rel:ptool-data");if(ptool_data){ptool_data=eval("("+ptool_data+")")}else{ptool_data={}}if(typeof BF_Queue!=="undefined"&&BF_Queue.allow_hp_change&&ptool_data.allow_q!=0){qtool.appendChild(bf_post_tools.create_element(item,"pt-queue"))}if((acl.user_can("queue_super_admin")&&typeof BF_Queue!=="undefined"&&BF_Queue.allow_hp_publish&&ptool_data.allow_hp!=0)||(BF_STATIC.country=="uk"&&acl.user_can("uk_homepage_edit"))){qtool.appendChild(bf_post_tools.create_element(item,"pt-publish"))}if(ptool_data.allow_pin!=0){qtool.appendChild(bf_post_tools.create_element(item,"pt-pin"))}if(typeof BF_Queue!=="undefined"&&BF_Queue.allow_hp_change){qtool.appendChild(bf_post_tools.create_element(item,"pt-remove"))}if(acl.user_can("general_admin")){inject.appendChild(bf_post_tools.create_element(item,"pt-wrench"));inject.appendChild(editBuzzElement)}inject.appendChild(bf_post_tools.create_element(item,"pt-flexpro"));inject.appendChild(bf_post_tools.create_element(item,"pt-stats"));inject.appendChild(qtool);return inject}else{if(bf_post_tools.is_viewdraft_page){var fixer;fixer=document.createElement("DIV");fixer.className="ptools-draftpage";fixer.appendChild(inject);if(acl.user_can("general_admin")){inject.appendChild(editBuzzElement)}inject.appendChild(bf_post_tools.create_element(item,"pt-preview-mobile"));return fixer}else{if(bf_post_tools.is_draft_page){if(acl.user_can("general_admin")){inject.appendChild(bf_post_tools.create_element(item,"pt-wrench"))}inject.appendChild(editBuzzElement);inject.appendChild(bf_post_tools.create_element(item,"pt-remove"));return inject}else{var fixer;if(acl.user_can("general_admin")){if(item.nodeName=="HEADER"&&item.up(".buzz")&&$$(".ptools-buzzpage").length){return false}if(item.nodeName=="HEADER"&&item.up(".buzz")){fixer=document.createElement("DIV");fixer.className="ptools-buzzpage";stats=document.createElement("DIV");stats.className="ptools-stats";var stats_data=item.getAttribute("rel:ptool_stats");if(stats_data){stats_data=eval("("+stats_data+")")}else{stats_data={}}var share_icons_map={impressions:"fa-eye",viral_lift:"fa-bolt",facebook_count:"fa-facebook",twitter_count:"fa-twitter",pinterest_count:"fa-pinterest-square",email_shares:"fa-envelope"};Object.keys(share_icons_map).each(function(name){if(stats_data[name]){var share=document.createElement((name=="twitter_count")?"a":"span");share.className=name+" stats";share.update("<i class='fa "+share_icons_map[name]+"'></i>"+stats_data[name]);if(name=="twitter_count"){var buzz_data=item.getAttribute("rel:data");var buzz_data=eval("("+buzz_data+")");if(buzz_data.uri){share.target="_blank";share.href="https://twitter.com/search?q="+buzz_data.uri}}stats.appendChild(share)}});var stats_wrapper=document.createElement("DIV");stats_wrapper.className="ptools-stats-wrapper";stats_wrapper.appendChild(stats);inject.appendChild(stats_wrapper);fixer.appendChild(inject);var user=new BF_User();if(acl.user_can("creative_byline_in_toolbar")){var buzz_data=item.getAttribute("rel:data");buzz_data=JSON.parse(buzz_data);var ajax=new BF_Request();ajax.request("/buzzfeed/api/buzz/original_owner",{method:"get",parameters:{id:buzz_data.buzz_id},onSuccess:function(e){var res=e.responseText.evalJSON();if(res.success&&res.user){var byline=document.createElement("DIV");byline.className="user-info";var user_page=BF_STATIC.web_root+"/"+res.user.username;var user_image=res.user.image?res.user.image:"/static/images/public/defaults/user_large.jpg";byline.innerHTML='<img class="user-avatar" src="'+BF_STATIC.image_root+user_image+'" width="26" height="26" />';byline.innerHTML+='<a class="user-display-name" target="_blank" href="'+user_page+'">'+res.user.display_name+"</a>";if(BF_STATIC.f_ad==1&&res.user.p_partner_admin==1){stats.insertBefore(byline,stats.firstChild)}}},onFailure:function(){}})}bf_post_tools.ptools_buzzpage=window.setInterval(function(){var ptool=null,ptoolcon=null,ptools_div=null,bodyfixer=null;var btt=$("back_to_top");return function(){if(ptool==null){ptool=$$(".ptools")[0];ptoolcon=ptool.up();ptools_div=document.createElement("div");ptools_div.addClassName("ptools_wrench_popup");ptools_div.addClassName("hidden");ptoolcon.appendChild(ptools_div);ptoolcon.select(".pt-wrench")[0].style.zIndex=101;$("page_container").insert({before:ptoolcon});$(document.body).addClassName("post-tools")}if(!btt){btt=$("back_to_top");if(btt){btt.style.top="50px"}}if(ptool){if((document&&((document.documentElement&&document.documentElement.scrollTop)||(document.body&&document.body.scrollTop)))&&(40<=(document.documentElement.scrollTop||document.body.scrollTop))){ptoolcon.style.position="fixed"}else{if(bodyfixer==null){bodyfixer=document.createElement("div");bodyfixer.style.width="100%";bodyfixer.style.height="40px";if($("header_wrapper")){$("header_wrapper").insert({before:bodyfixer})}}}}var isNewEditFormOnScreen=($("editForm")&&$("editForm").getStyle("display")!="none"),isOldEditFormOnScreen=($$("div.qwik_edit").length&&$$("div.qwik_edit")[0].getStyle("display")=="block");if(bf_post_tools.buzz_opened||isNewEditFormOnScreen||isOldEditFormOnScreen){ptools_div.removeClassName("hidden")}else{ptools_div.addClassName("hidden")}}}(),200)}}var user=new BF_User();var username=user.getUserInfo().username;var owner=item.getAttribute("rel:owner");var buzz_data=item.getAttribute("rel:data");buzz_data=JSON.parse(buzz_data);var buzz_id=buzz_data.buzz_id;var can_delete=acl.user_can("delete_user_posts")||(acl.user_can("edit_partner_posts")&&typeof BF_STATIC!="undefined"&&(BF_STATIC.f_ad||BF_STATIC.f_partner))||username==owner;item.setAttribute("rel:buzz_id",buzz_id);var buzz_edit_permissions_code=bf_post_tools.buzz_edit_permissions_decoder(item.getAttribute("rel:ptool_code")||"");if(can_delete&&(parseInt(buzz_edit_permissions_code.p_editor_admin)==1||parseInt(buzz_edit_permissions_code.user_byline_description_id)==3)){can_delete=acl.user_can("delete_user_posts")}if(permissions.isa||permissions.edit_partner_posts){inject.appendChild(editBuzzElement);inject.appendChild(bf_post_tools.create_element(item,"pt-pin"));if(stats){stats.appendChild(bf_post_tools.create_element(item,"pt-stats"))}else{inject.appendChild(bf_post_tools.create_element(item,"pt-stats"))}inject.appendChild(bf_post_tools.create_element(item,"pt-flexpro"));inject.appendChild(bf_post_tools.create_element(item,"pt-wrench"));if(acl.user_can("boost_button")&&BF_STATIC.page=="Buzz"){inject.appendChild(bf_post_tools.create_element(item,"pt-boost_button"))}if(BF_STATIC.page=="Buzz"&&acl.user_can("general_admin")){inject.appendChild(bf_post_tools.create_element(item,"pt-rebuzz_button"))}if(BF_STATIC.page=="Buzz"&&acl.user_can("pound")){inject.appendChild(bf_post_tools.create_element(item,"pt-pound_button"))}if(BF_STATIC.page=="Buzz"){if(acl.user_can("team_brasil")||acl.user_can("team_france")||acl.user_can("team_espanol")||acl.user_can("team_germany")){if(this.is_marked_for_translation){inject.appendChild(bf_post_tools.create_element(item,"pt-translate translate-active"))}else{inject.appendChild(bf_post_tools.create_element(item,"pt-translate"))}}}var own_page=BF_STATIC.tt_page=="User"&&$("username_of_page_owner")&&$("username_of_page_owner").value==username;var is_owner=item.getAttribute("rel:owner");var userid=(new BF_User()).getUserInfo().userid;var current_user=(new BF_User()).getUserInfo().username;if(can_delete&&!$(document.body).hasClassName("HomeSection")&&BF_STATIC.tt_page!="User"){inject.appendChild(bf_post_tools.create_element(item,"pt-remove"))}else{if(is_owner!=username&&"picks_controller" in window&&own_page&&$(buzz_id+"-delete_pick-spinner")){inject.appendChild(bf_post_tools.create_element(item,"pt-remove"))}}}else{if(permissions.basic_edit_functionality){if(buzz_data.just_pick==1){inject.appendChild(bf_post_tools.create_element(item,"pt-remove"))}else{inject.appendChild(bf_post_tools.create_element(item,"pt-edit"));if(stats){stats.appendChild(bf_post_tools.create_element(item,"pt-stats"))}else{inject.appendChild(bf_post_tools.create_element(item,"pt-stats"))}if(can_delete){inject.appendChild(bf_post_tools.create_element(item,"pt-remove"))}}}}if(document.location.href.match("/_buzz_preview$")){inject.appendChild(bf_post_tools.create_element(item,"pt-preview-mobile"))}var username_of_page_owner=$("username_of_page_owner")?$("username_of_page_owner").value:username;if(username_of_page_owner==owner&&BF_STATIC.tt_page=="User"&&BF_STATIC.user_is_f_ad&&acl.user_can("partners_manage")){if(bf_post_tools.page_name=="posts"){inject.appendChild(bf_post_tools.create_element(item,"pt-hide"))}if(bf_post_tools.page_name=="hidden"){inject.appendChild(bf_post_tools.create_element(item,"pt-show"))}}return fixer?fixer:inject}}}}catch(e){console.error(e)}};this.create_pin_tool=function(item,permissions){var inject=document.createElement("DIV");inject.className="pin_tools";inject.setAttribute("style","display:none");inject.appendChild(bf_post_tools.create_element(item,"pt-remove"));inject.appendChild(bf_post_tools.create_element(item,"pt-orders"));return inject};this.create_ctool=function(item,permissions){try{if(item.getAttribute("rel:comment_id")==""){return false}var inject=document.createElement("DIV");inject.className="ctools";inject.setAttribute("style","display:none");var pt_element=document.createElement("A");pt_element.className="c-wrench";pt_element.href="#";pt_element.innerHTML="c-wrench";pt_element.setAttribute("onclick","return false");inject.appendChild(pt_element);var comment_info=item.getAttribute("rel:comment_id").evalJSON();pt_element.setAttribute("rel:comment_id",JSON.stringify(comment_info));item.appendChild(inject);return inject}catch(e){if(!item.getAttribute("track")||!item.getAttribute("track").evalJSON()||item.getAttribute("track").evalJSON().user!="You"){console.error(e)}}};this.load_t_editor=function(e){var buzz_info={};var owner;if(/\/_draft\//.test(window.location.href)&&window.opener&&/\/post/.test(window.opener.location.href)){e.stop();return window.close()}if(typeof e=="undefined"&&bf_post_tools.cache!={}&&bf_post_tools.buzz_opened){buzz_info.buzz_id=bf_post_tools.cache.campaignid;buzz_info.form_id=bf_post_tools.cache.form_id;buzz_info.type=bf_post_tools.cache.form;buzz_info.uri=bf_post_tools.cache.uri;owner=bf_post_tools.cache.owner}else{buzz_info=e.target.getAttribute("rel:data").evalJSON();owner=e.target.getAttribute("rel:owner")}var appendix="",appendixData={};if($$(".ptools-buzzpage").length&&(!$$(".ptools_wrench_popup").length||$$(".ptools_wrench_popup")[0].getStyle("display")=="none")){var selection=window.getSelection();if(selection.focusNode&&selection.toString()){var el=selection.focusNode.parentNode.hasClassName("buzz_superlist_item")?selection.focusNode.parentNode:selection.focusNode.parentNode.up(".buzz_superlist_item");if(el&&el.id){appendixData.id="suplist_item_"+el.id.replace("superlist_"+buzz_info.buzz_id+"_","");appendixData.meta=false;var nodeName=selection.focusNode.nodeName;var node=nodeName=="#text"?selection.focusNode.parentNode:selection.focusNode;if(nodeName=="#text"||nodeName=="P"||nodeName=="H2"){var subbuzz=selection.focusNode.parentNode.up(".buzz_superlist_item");if(node.nodeName=="H2"){appendixData.meta="title"}else{if(node.nodeName=="A"&&node.up(".sub_buzz_source_via")||node.nodeName=="DIV"&&node.hasClassName("sub_buzz_source_via")){appendixData.meta="via"}}if(selection.focusNode.nodeName=="#text"){appendixData.start=selection.anchorOffset;appendixData.end=selection.focusOffset;var node=selection.focusNode.parentNode}else{appendixData.start=0;appendixData.end=selection.focusNode.textContent.length;var node=selection.focusNode}var offset=0;var els=$A(el.children);for(var i=0;i<=els.length;i++){if(els[i]!=node&&els[i]&&els[i].textContent){offset+=els[i].textContent.length}else{break}}appendixData.offset=offset}if(selection.focusNode&&selection.focusNode.nodeName=="#text"||selection.focusNode.nodeName=="P"){appendixData.text=selection.toString().substr(0,20).strip()}}else{selection=null}appendix="#"+Object.toJSON(appendixData)}if(!selection||!selection.focusNode||!selection.toString()){appendixData.scrollonly="true";var doctop=document.documentElement.scrollTop||document.body.scrollTop,docheight=document.viewport.getHeight(),docbot,buzzlist=[];if($$(".buzz header")[0].cumulativeOffset().top+100<doctop){docheight=docheight-docheight*0.2;docbot=doctop+docheight;var bonus=25;$$("#buzz_sub_buzz .buzz_superlist_item").each(function(el){var eltop=el.cumulativeOffset().top,elheight=parseInt(el.getStyle("height")),elbot=eltop+elheight;if(eltop<doctop&&doctop<elbot||doctop<eltop&&eltop<docbot){var pen_bon=0;if(eltop<doctop||(doctop+document.viewport.getHeight())<elbot){pen_bon=-5}if(bonus>0&&doctop<eltop&&elbot<(doctop+document.viewport.getHeight())){pen_bon+=bonus;bonus-=15}var h=elheight-(doctop-eltop>0?doctop-eltop:0)-(elbot-docbot>0?elbot-docbot:0);buzzlist.push({id:el.id,per:(h/(docheight/100))+pen_bon})}});var max=0,id;buzzlist.map(function(el){if(el.per>max){max=el.per;id=el.id}});if(!buzzlist.length){id=$$("#buzz_sub_buzz .buzz_superlist_item").last().id}appendixData.id="suplist_item_"+id.replace("superlist_"+buzz_info.buzz_id+"_","");appendix="#"+Object.toJSON(appendixData)}}}var is_queue_suggestions_page=(buzz_info.form_id==null&&document.location.href.match("/queue"));var timestamp=(new Date()).getTime();if((typeof buzzDetails!="undefined"&&buzzDetails.hasOwnProperty("breaking")&&buzzDetails.breaking)||(typeof buzz_info.list_format_visual!="undefined"&&buzz_info.list_format_visual=="breaking")){window.open(BF_STATIC.web_root+"/breaking_post?id="+buzz_info.buzz_id)}else{if(buzz_info.form_id>=20||is_queue_suggestions_page){window.open(BF_STATIC.web_root+"/post?id="+buzz_info.buzz_id+appendix,"_new_"+timestamp)}}if(buzz_info.type=="quick post"){window.open(BF_STATIC.web_root+"/buzzfeed/edit/"+owner+"/"+buzz_info.uri+appendix,"_new_"+timestamp)}if(buzz_info.form_id<20&&buzz_info.type!="quick post"){bf_post_tools.terminal_edit(buzz_info.buzz_id)}};this.terminal_edit=function(buzz_id){var timestamp=(new Date()).getTime();window.open(BF_STATIC.terminal_root_url+"?action=buzz_edit&bid="+buzz_id,"_new_"+timestamp)};this.load_old_wrench=function(){if(bf_post_tools.poller.active){alert("Please close the existing dialog before opening another.");return}var buzz_id=bf_post_tools.current_buzz;var buzz_type=bf_post_tools.cache.form;var poller_id=(new Date()).getTime();bf_post_tools.cancel_inline_editor();BF_Post_Tools.editor_div_id=""+poller_id;var div_id=BF_Post_Tools.editor_div_id;var editor_div=$(div_id);if(!editor_div){editor_div=document.createElement("div");editor_div.id=div_id;bf_post_tools.bodyTag().appendChild(editor_div);editor_div.className="qwik_edit";var close_button=document.createElement("a");close_button.className="close_editor";close_button.update('<img src="'+BF_STATIC.image_root+'/static/images/public/spinners/closebox.png" alt="x"/>');close_button.href="#";close_button.stopObserving("click");close_button.observe("click",function(e){e.stop();bf_post_tools.close_editor(e)});editor_div.appendChild(close_button)}bf_post_tools.start_spinner();var style="terminal";bf_post_tools.load_iframe(buzz_id,{style:style,type:buzz_type});bf_post_tools.poller.add_poller_callback(buzz_id,bf_post_tools.close_window);var terminal_url=BF_STATIC.terminal_root_url;terminal_domain=terminal_url.replace(/(http:\/\/.*?)\/.*/,"$1");bf_post_tools.poller.start({callback_string:buzz_id,poll_url:terminal_domain+"/static/js/poller/cookie.js",pollid:poller_id,arguments:{id:div_id}})};this.close_editor=function(e){e.stop();var div=$(BF_Post_Tools.editor_div_id);if(div){div.parentNode.removeChild(div);bf_post_tools.poller.stop_polling()}};this.close_window=function(args){if($(args.pollid)){$(args.pollid).parentNode.removeChild($(args.pollid))}};this.load_iframe=function(buzz_id,args){if(!args){args={style:"terminal"}}var style=args.style?args.style:"terminal";var type=args.type?args.type:"link";var iframe_id=this.generate_id("iframe");var iframe=$(iframe_id);if(!iframe){iframe=document.createElement("iframe");iframe.id=iframe_id;$(BF_Post_Tools.editor_div_id).appendChild(iframe);iframe.stopObserving("load");iframe.observe("load",bf_post_tools.iframe_loaded);iframe.className="qwik_edit"}iframe.style.display="none";if(style=="terminal"){iframe.setAttribute("src",BF_STATIC.terminal_root_url+"?editor=qwik_edit&buzz_id="+buzz_id+"&cb="+(new Date()).getTime())}else{var buzz_type=type;if(/^super.*/.test(buzz_type)){buzz_type="super"}iframe.setAttribute("src","/bf2/editbuzz/"+buzz_type+"?id="+buzz_id+"&cb="+(new Date()).getTime())}};this.iframe_loaded=function(){bf_post_tools.stop_spinner();$(bf_post_tools.generate_id("iframe")).show()};this.start_spinner=function(){var spinner_id=this.generate_id("spinner");var spinner=$(spinner_id);if(!spinner){var spinner=document.createElement("div");spinner.id=spinner_id;spinner.className="qwik_edit-spinner";spinner.appendChild(document.createTextNode("Loading..."));$(BF_Post_Tools.editor_div_id).appendChild(spinner);spinner.style.display="none"}var iframe=$(this.generate_id("iframe"));if(iframe){iframe.hide()}spinner.show()};this.stop_spinner=function(){$(this.generate_id("spinner")).hide()};this.bodyTag=function(){return document.getElementsByTagName("BODY")[0]};this.generate_id=function(key){return BF_Post_Tools.editor_div_id+"_"+key};this.promo={container:"promo_fields",fp_class:"fp_promo",std_class:"std_promo",fpuk_class:"fpuk_promo",editing:"std",switch_promo_std:function(e){if(typeof superlist!="undefined"){return true}bf_post_tools.promo.editing="std";$(bf_post_tools.promo.container).addClassName(bf_post_tools.promo.std_class);$(bf_post_tools.promo.container).removeClassName(bf_post_tools.promo.fp_class);$(bf_post_tools.promo.container).removeClassName(bf_post_tools.promo.fpuk_class)},switch_promo_fp:function(e){if(typeof superlist!="undefined"){return true}bf_post_tools.promo.editing="fp";$(bf_post_tools.promo.container).addClassName(bf_post_tools.promo.fp_class);$(bf_post_tools.promo.container).removeClassName(bf_post_tools.promo.std_class);$(bf_post_tools.promo.container).removeClassName(bf_post_tools.promo.fpuk_class)},switch_promo_fpuk:function(e){if(typeof superlist!="undefined"){return true}bf_post_tools.promo.editing="fpuk";$(bf_post_tools.promo.container).addClassName(bf_post_tools.promo.fpuk_class);$(bf_post_tools.promo.container).removeClassName(bf_post_tools.promo.std_class);$(bf_post_tools.promo.container).removeClassName(bf_post_tools.promo.fp_class)}};this.set_buzz_template=function(template){this.buzz_template=template};this.identify_page_type=function(test){var t_pathname=test||document.location.pathname;var page_defs={queue:/\/queue($|\/)/i,drafts:/\/drafts\//i,_drafts:/\/_draft\//i,responses:/\/responses($|\/)/i,activity:/\/activity($|\/)/i,hidden:/\/hidden_posts($|\/)/i,bookmarks:/\/bookmarks\//i};var page_name="posts";for(var page in page_defs){if(t_pathname.match(page_defs[page])){page_name=page}}this.is_queue=page_name=="queue";this.is_draft_page=page_name=="drafts";this.is_viewdraft_page=document.location.pathname.match(/\/_draft|_breaking_preview\//)?true:false;return page_name};this.load_pound=function(e){var e=e||window.event;var pound_button=e.target||e.srcElement;var timestamp=(new Date()).getTime();var uri="";var title=encodeURI(BF_STATIC.buzz_name);var path=window.location.pathname.split("/");if(path.length>0){path=path[path.length-1]||""}window.open("http://refreshstage.buzzfeed.com/dashboard/dendrogram?buzzid="+BF_STATIC.campaignid+"&username="+BF_STATIC.username+"&uri="+path+"&title="+title,"_new_"+timestamp)}};BF_Post_Tools.editor_div_id="_editor_div_"+Math.random()*100000;bf_post_tools=new BF_Post_Tools();BuzzLoader.register(function(){bf_post_tools.init()},1);document.observe("dom:loaded",function(){var f=new Date();var c=Math.floor(f.getTime()/1000);var a=Math.floor(Math.random()*c);var b=Math.floor(Math.random()*c);if((c>=1334808059)&&(c<=1334894399)){if($("pepsi-header")!=null){$("pepsi-header").show()}if($("pepsi-hot-module")!=null){$("pepsi-hot-module").show()}$("pepsi-hot-module").insert('<IMG SRC="http://ad.doubleclick.net/ad/N5371.244372.BUZZFEED/B6445150.2;sz=1x1;ord='+a+'?" BORDER=0 WIDTH=1 HEIGHT=1 ALT="">');$("pepsi-header").insert('<IMG SRC="http://ad.doubleclick.net/ad/N5371.244372.BUZZFEED/B6445150.9;sz=1x1;ord='+b+'?" BORDER=0 WIDTH=1 HEIGHT=1 ALT="">')}if($("prius-stats")){$("prius-stats").observe("click",function(){var g=new Image();if(BF_STATIC.tt_page=="Home"){g.src="http://ad.doubleclick.net/clk;254412577;78956947;f;pc=;"}else{g.src="http://ad.doubleclick.net/clk;254412577;78956999;m;pc=;"}})}});var BF_ACL=function(){this.init=function(){if("acls" in window){for(var a in acls){acl.manage_visibility(a)}}if(typeof EventManager!=="undefined"){EventManager.fire("acl:load:done")}};this.manage_visibility=function(a){if(acl.user_can(a)){document.getElementsByTagName("BODY")[0].addClassName("can_"+a)}};this.test_user=function(a,b){["p_admin","p_developer_admin","p_other_admin","p_editor_admin","p_partner_admin","cat_power_>=_1","cat_power_>=_2","cat_power_>=_3","cat_power_>=_4","cat_power_>=_5","byline_buzzfeed_creative","byline_buzzfeed_contributor","byline_publishing_partner","byline_buzzfeed_staff","byline_community_brand_publisher","byline_community_contributor","byline_freeform_input","byline_brand_publisher"].each(function(c){if(a[c]==1){a[c]="true"}else{a[c]="false"}});return acl._check(a,b)?"pass":"fail"};this.user_can=function(a){return acl.switch_user_can(a)||acl.default_user_can(a)};this.switch_user_can=function(b){var a=new BF_User();if(a.isLoggedIn()){a=a.getUserInfo();a.id=a.userid;return acl._check(a,b)}else{return false}};this.default_user_can=function(b){var a=new BF_User();if(a.isLoggedIn()){return acl._check(a.getUserInfo().default_user,b)}else{return false}};this._check=function(f,a){var m=false;if("acls" in window){if(!acls[a]){console.warn("Reference to undefined ACL: "+a)}var k=acls[a]||["p_admin"];for(var g=0;g<k.length;g++){var c=k[g];if(c=="anyone"){return true}var o=c.replace(/^!/,"");var b=o!=c;var l=o.match(/^[0-9]+$/)?true:false;if(b&&l&&parseInt(f.id)==parseInt(o)){return false}if(!b&&l&&parseInt(f.id)==parseInt(o)){return true}if(!b&&!l&&(f[o]=="true"||f[o]==1)){m=true}var n=/cat_power_>=_(\d)/i;var p=0;p=c.match(n);if(p){var h=p[1];if(f.community_tier>=h){m=true}}if(/^byline_\d+$/.test(c)&&c=="byline_"+f.byline_description_id){m=true}}}else{console.warn("No ACLs loaded")}return m}};acl=new BF_ACL();BuzzLoader.register(function(){acl.init()},10);var FlexProSplash=function(){this.draw_overlay=function(h,a){var b=document.createElement("div");b.addClassName(a.position);b.addClassName("splash-overlay");if($$("#"+h.id+" .splash-overlay").length>0){$(h.id).removeChild($$("#"+h.id+" .splash-overlay")[0])}b.id="splash-overlay";if(a.label.name!="none"){var k=document.createElement("div");k.addClassName("label");k.update(a.label.value);if(a.is_video){var g=document.createElement("div");var f=document.createElement("span");g.addClassName("label-wrap");f.addClassName("splash-video-icon");f.update("&nbsp;");g.insert(k);g.insert(f);b.appendChild(g)}else{b.appendChild(k)}}["title"].each(function(n){if(a.promo[n]){try{var o=document.createElement("div");o.addClassName(n);o.addClassName(a.color);o.style.fontSize=a.size+"px";o.style.lineHeight=a.size+"px";var q=document.createElement("div");q.addClassName("splash-desc");q.innerHTML=a.promo[n];o.appendChild(q);b.appendChild(o)}catch(p){console.error(p)}}});h.appendChild(b);if($$(".splash-overlay")&&$$("#edit-flex-pro-form")!=""){var m=$$(".splash-overlay")[0];var l=$$("#splash-container1")[0].getHeight();var c=$$(".splash-size-warning")[0];if(m){if(m.getHeight()>(l*0.94)){c.addClassName("visible")}else{if(c.hasClassName("visible")){c.removeClassName("visible")}}}}}};var BF_header=function(){var b={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},a=this;this.searchHideTimer;this.searchEffect;this.menuTimer;this.menuDelay=150;this.boxWidth=(BF_STATIC.tt_page=="Home")?"170px":"150px";if(isIE8()){this.boxWidth="130px"}this.menuOrder={};this.showMenuEvent=(is_touch()?"click":"mouseenter");this.hideMenuEvent=(is_touch()?"touchstart":"mouseleave");this.menuOpen=false;this.els={};this.init=function(){universal_dom.assign_handler({bucket:"signin",event:"click",handler:signin.open});universal_dom.assign_handler({bucket:"country_switch_menu",event:"click",handler:header.country_switch_menu});universal_dom.assign_handler({bucket:"country_switch",event:"click",handler:header.country_switch});universal_dom.assign_handler({bucket:"remove_cookie_notice",event:"click",handler:header.remove_cookie_notice});universal_dom.assign_handler({bucket:"set_country_cookie",event:"click",handler:header.set_country_cookie});try{if($("nav-search")){a.els.button_serach_submit=$s("#search_submit");a.els.button_search_toggle=$s("#nav-search-btn");a.els.el_search=$s("#nav-search-box");a.els.input_search=$s("#header_search");a.els.shares=$$(".nav-share").length?$s(".nav-share"):null;a.els.vertical_callout=$$(".new-vertical-callout").length?$s(".new-vertical-callout"):null;a.els.button_search_toggle.observe("click",function(){header.showSearchBox()});document.observe("click",function(g){header.closeSearchBar(g)});for(var c in b){if(b.hasOwnProperty(c)&&typeof a.els.el_search.style[c]!=="undefined"){window.transitionEnd=b[c];break}}if(typeof window.transitionEnd!=="undefined"){if(Element.prototype.addEventListener){a.els.el_search.addEventListener(window.transitionEnd,header.afterSearchTransition,false)}else{if(Element.prototype.attachEvent){a.els.el_search.attachEvent("on"+window.transitionEnd,header.afterSearchTransition,false)}else{a.els.el_search[window.transitionEnd]=header.afterSearchTransition}}}}$$(".header_dropdown, #nav_menu").each(function(g){$(g).observe(header.showMenuEvent,function(h){if(g==header.nav_menu()){clearTimer(header.menuTimer)}else{header.triggerMenu(h)}if(is_touch()){var k;if(h.target.tagName.toUpperCase()=="DIV"){k=h.target}else{k=h.target.up("div")}if(k.getAttribute("menu_group").match("(news|entertainment|life|video)")){h.stop()}}});if(!is_touch()){$(g).observe(header.hideMenuEvent,function(h){clearTimer(header.menuTimer);header.menuTimer=setTimeout(function(){header.hideNavMenu()},header.menuDelay)})}});if(is_touch()){$$("body")[0].addClassName("has_touch")}header.bf_community_submit();header.check_for_cookie_notice();setTimeout("header.youtube_dfp()",1500);if(BF_STATIC.tt_page!="Video"){header.ipad_promo()}}catch(f){console.dir(f)}};this.get_window_size=function(){var c={w:0,h:0};if(!window.innerWidth){if(!(document.documentElement.clientWidth==0)){c.w=document.documentElement.clientWidth;c.h=document.documentElement.clientHeight}else{c.w=document.body.clientWidth;c.h=document.body.clientHeight}}else{c.w=window.innerWidth;c.h=window.innerHeight}return c};this.nav_menu=function(){return $("nav_menu")};this.stopSearchEffect=function(){if(typeof searchEffect!="undefined"){searchEffect.cancel()}};this.showSearchBox=function(){a.els.button_search_toggle.hide();if(a.els.shares){a.els.shares.hide()}else{if(a.els.vertical_callout){a.els.vertical_callout.hide()}}a.els.el_search.show();setTimeout(function(){a.els.el_search.addClassName("open");if(typeof window.transitionEnd=="undefined"){a.afterSearchTransition()}a.els.input_search.focus()},100)};this.closeSearchBar=function(f){var c=f.target||false;if(c&&c.up("#nav-search")){return}if(header.searchTransitionEnded==true||typeof window.transitionEnd=="undefined"){header.searchTransitionEnded=false;a.els.button_serach_submit.hide();a.els.el_search.removeClassName("open")}if(typeof window.transitionEnd=="undefined"){a.afterSearchTransition()}};this.afterSearchTransition=function(){var c=$("nav-search-box").getStyle("width")=="0px"?false:true;header.searchTransitionEnded=true;if(c){a.els.button_serach_submit.show()}else{setTimeout(function(){if(a.els.shares){a.els.shares.show()}else{if(a.els.vertical_callout){a.els.vertical_callout.show()}}a.els.button_search_toggle.show()},250)}};this.triggerMenu=function(h){var c=h.element();if(!c.hasAttribute("menu_group")){c=c.findParent(".header_dropdown")}if(!c||typeof c=="undefined"){return}var f=c.getAttribute("menu_group");var g=header.menuOrder[f];if(!header.menuOpen&&!is_touch()){header.menuTimer=setTimeout(function(){header.openMenu(f,g,c)},header.menuDelay)}else{header.openMenu(f,g,c)}};this.openMenu=function(f,g,c){clearTimer(header.menuTimer);header.menuOpen=true;var h=$("just_block");if(h!==null){h.className="";h.addClassName("justmode-"+f)}header.toggleMoreMenu(f);header.setMenuContent(g);header.moveNavMenu(c);header.updateNameMenu(c);if(header.nav_menu().hasClassName("video-menu")){header.nav_menu().removeClassName("video-menu")}if(f=="video"){header.nav_menu().addClassName("video-menu")}if(is_touch()){header.hideNavMenuTouch(c)}};this.hideNavMenu=function(){header.updateNameMenu(null);header.nav_menu().hide();header.menuOpen=false;if($$(".country_switch_menu")[0]){$$(".country_switch_menu")[0].hide()}};this.hideNavMenuTouch=function(c){document.observe(header.hideMenuEvent,function(g){if(typeof g.element!="function"){return false}var f=$(g.element());if(!(f.findParent("#nav_menu"))&&!(f==header.nav_menu())&&!(f==c)&&!(f.findParent(".header_dropdown"))){header.hideNavMenu()}})};this.toggleMoreMenu=function(c){var f=$("nav_menu_more");if(f){if(c=="more"){f.show()}else{f.hide()}}};this.updateNameMenu=function(c){$$(".header_dropdown").each(function(f){if($(f)==c){if(!$(f).hasClassName("active")){$(f).addClassName("active")}}else{if($(f).hasClassName("active")){$(f).removeClassName("active")}}})};this.setMenuContent=function(f){var c=false;$$("#nav_menu #nav_menu_vertical_list li").each(function(h){var g=h.id.replace("nav_menu_","");if(f.indexOf(g)<0){$(h).addClassName("hidden")}else{if(!c){header.navMenuShowVertical(g);c=true}if($(h).hasClassName("hidden")){$(h).removeClassName("hidden")}}})};this.moveNavMenu=function(g){var c=Number($(g).cumulativeOffset()[1])+Number($(g).getHeight())-1;var f=Number($(g).cumulativeOffset()[0]);var h=window.innerWidth>=1125?175:205;if(isNumber(c)&&isNumber(f)){header.nav_menu().setStyle({left:(f-h)+"px",top:(c)+"px"});header.nav_menu().show()}};this.navMenuShowVertical=function(c){$$("#nav_menu .nav_menu_vertical").each(function(f){var k=$(f).id.replace("nav_menu_","");var g=$("nav_preview_"+k);var h=BFW_Util.getCookie("country")!=null?BFW_Util.getCookie("country"):"us";if(c=="politics"&&h=="uk"){c="ukpolitics"}$(f).addClassName("active");if(k==c&&g){if(!$(f).hasClassName("active")){$(f).addClassName("active")}if(c=="ukpolitics"&&!$("nav_menu_politics").hasClassName("active")){$("nav_menu_politics").addClassName("active")}g.show()}else{if($(f).hasClassName("active")){$(f).removeClassName("active")}if(g!=null){g.hide()}}})};this.bf_community_submit=function(){var f=$("community-submit-btn");if(f){var c=new BF_User();if(c.isLoggedIn()){f.innerHTML="Make A Post!"}bf_login.loggedInCallbacks.push(function(){f.innerHTML="Make A Post!"})}};this.fix_length=function(f){var o=(f.currentTarget)?$(f.currentTarget):$(f.srcElement),g=o.hasClassName("unit")?o:o.up(".unit"),m=g.getDimensions().height,n=g.select(".title")[0],k=n.getDimensions().height;var h=n.select(".bf-name")[0]||n;if(!h.innerHTML.length){return}if(k>(m-5)){n.addClassName("invisible");var p=h.innerHTML.split(" "),l=0;h.innerHTML="";while(n.getDimensions().height<g.getDimensions().height-5){h.innerHTML=p.slice(0,++l).join(" ")+"&hellip;"}h.innerHTML=p.slice(0,l-1).join(" ")+"&hellip;";n.removeClassName("invisible")}g.onmouseover=null};this.youtube_dfp=function(){$$(".bf-widget.partner-area").each(function(g){if(g){var c=g.select(".bf-user-url").first();if(c){var f=c.getAttribute("href");if(f&&f!=undefined){if(f.search("youtubecomedyweek")!=-1){if(g.hasClassName("current")||!g.hasClassName("variation")){g.addClassName("variation")}}}}}})};this.menu;this.hideMenuObserver=function(c){if(!c.target.hasClassName("country_switch")&&!c.target.up(".country_switch")){header.menu.hide()}};this.country_switch_menu=function(g){var f=($(Event.element(g)).hasClassName("country_switch")?Event.element(g):$(Event.element(g)).findParent(".country_switch"));var l=$(f).down(".country_switch_menu");var c=$(f).up("#nav_menu");var h=$$(".country-toggle")[0];if(f&&l){if(l.visible()){l.hide()}else{var k={left:0};if(c){k.top=-l.getHeight()-h.getHeight()-1}BF_Effect.OpenMenu(f,l,k);header.menu=l;document.stopObserving("mouseup",header.hideMenuObserver);document.observe("mouseup",header.hideMenuObserver)}}};this.country_switch=function(c){var f=c.r;if(f){document.location.href=f}};this.set_country_cookie=function(c){var f=c.country;if(f){BFW_Util.setCookie({name:"country",value:f,clem_valid:true,callback:function(){if($("cookie_notice")){BF_Effect.FadeOut($("cookie_notice"))}}})}};this.remove_cookie_notice=function(){if($("cookie_notice")){BF_Effect.FadeOut($("cookie_notice"))}localStorage.setItem("hide_cookie_notice","true")};this.check_for_cookie_notice=function(){if(!$("cookie_notice")){return false}var l=localStorage.getItem("hide_cookie_notice"),k=$("cookie_notice"),f=($("cookie_notice"))?$("cookie_notice").getAttribute("country"):"",n=BFW_Util.getCookie("country")!=null?BFW_Util.getCookie("country"):"us",g=((f==n)||(!n&&f=="us"))?true:false,c=null,h=(BF_STATIC.browser_language_settings||navigator.browserLanguage||navigator.language||navigator.userLanguage).substr(0,2),m=BF_STATIC.tt_page=="Buzz"?true:false;if(m){if(h!="en"&&h!=n){if(typeof liveCountries!="undefined"){if(liveCountries.hasOwnProperty(h)&&liveCountries[h]){c=$("have-you-seen-message");if(typeof cookieBarVerticalBpageMessage!="undefined"&&cookieBarVerticalBpageMessage&&cookieBarVerticalBpageMessage.hasOwnProperty(h)){c.update(cookieBarVerticalBpageMessage[h])}}}}}else{if(typeof liveCountries!="undefined"&&liveCountries.hasOwnProperty(n)&&liveCountries[n]){if(!l){if(g){if(f!="us"){c=$("cookie-us-message")}}else{c=$("cookie-set-message")}}else{if(!g){c=$("cookie-set-message")}}}}if(c&&(liveCountries.hasOwnProperty(f)&&liveCountries[f]===1)&&(liveCountries.hasOwnProperty(n)&&liveCountries[n]===1)){k.removeClassName("hidden");c.removeClassName("hidden")}};this.ipad_promo=function(){var c=this.agent=navigator.userAgent.toLowerCase();var g=' 			<div id="ipad-promo" class="bf_dom" style="display:none;" rel:gt_cat="[ttp]:ipad_promo">  				<a id="promo-content" rel:gt_act="download-app"> 					<div id="ipad-image"><img src="'+BF_STATIC.static_root+"/images/public/promos/ipad/ipad.png?v=="+BF_STATIC.version+'" /></div> 					<div id="promo-text">Download The New, Personalized App For iPad!</div> 					<div id="itunes-image"><img src="'+BF_STATIC.static_root+"/images/public/promos/ipad/app_store.png?v="+BF_STATIC.version+'" /></div> 					<div id="close"><img src="'+BF_STATIC.static_root+"/images/public/promos/ipad/x.png?v="+BF_STATIC.version+'" id="close-img"/></div> 				</a> 			</div> 			<div style="clear:both;"></div> 			';function f(k){if((k.srcElement.identify()==="close")||(k.srcElement.identify()==="close-img")){setTimeout(function(){$("ipad-promo").hide()},400);BFW_Util.setCookie({name:"no_ipad_promo",value:"1",seconds:2592000})}else{window.open("http://itunes.apple.com/us/app/buzzfeed/id352969997?mt=8&at=10l3HP&ct="+BF_STATIC.tt_page)}}if(c.match(/ipad/)&&(c.match(/os (\d)/)[1]<6||(new Date()<new Date(1373241600000)))){var h=BFW_Util.getCookie("no_ipad_promo");if(!h){$("header_wrapper").insert({before:g});$("ipad-promo").show();$("ipad-promo").observe("click",f)}}}};var header=new BF_header();BuzzLoader.register(header.init,1);var BF_Shares=function(){this.fixedEncodeURIComponent=function(a){return(encodeURIComponent(a).replace(/[!'()]/g,escape).replace(/\*/g,"%2A"))};this.email_link=function(f){if(!objExists(f.el)){return false}if(!objExists(f.words)){f.words="Email"}if(!objExists(f.size)){f.size="big"}if(!objExists(f.subject)){f.subject=""}if(!objExists(f.body)){f.body=""}if(!objExists(f.onclick)){f.onclick=""}if(!objExists(f.color)){f.color=""}if(!objExists(f.wrapper)){f.wrapper=false}var b=objExists(f.tracking_action)?"rel:gt_act='"+f.tracking_action+"'":"";var a=objExists(f.tracking_label)?"rel:gt_label='"+f.tracking_label+"'":"";f.subject=bf_shares.fixedEncodeURIComponent(f.subject);f.body=bf_shares.fixedEncodeURIComponent(f.body);var c="";var c="			"+(f.wrapper?'<div class="email_share">':"")+"			<a class='shareBtn big "+f.color+"'			onclick=\""+f.onclick+'"			href="mailto:?body='+f.body+"			&subject="+f.subject+'			" '+b+" "+a+"><div class='email_icon'></div>			<div class='label'>"+local.t(f.words)+"</div></a>			"+(f.wrapper?"</div>":"");$(f.el).insert(c)};this.fb_share=function(f){if(!objExists(f.el)||!objExists(f.uri)){return false}if(!objExists(f.words)){f.words="Share On Facebook"}if(!objExists(f.picture)){f.picture=""}if(!objExists(f.title)){f.title=""}if(!objExists(f.description)){f.description=""}if(!objExists(f.size)){f.size="big"}if(!objExists(f.color)){f.color="darkblue"}if(!objExists(f.onclick)){f.onclick=""}if(!objExists(f.wrapper)){f.wrapper=false}var b=objExists(f.tracking_action)?"rel:gt_act='"+f.tracking_action+"'":"";var a=objExists(f.tracking_label)?"rel:gt_label='"+f.tracking_label+"'":"";f.description=bf_shares.fixedEncodeURIComponent(f.description);f.title=bf_shares.fixedEncodeURIComponent(f.title);var c="			"+(f.wrapper?'<div class="fb_share">':"")+"			<a class='shareBtn "+f.size+" "+f.color+"'			type='box_count'			onclick=\"var sTop=window.screen.height/2-(218);var sLeft=window.screen.width/2-(313);window.open('https://www.facebook.com/dialog/feed?display=popup&			app_id="+BF_STATIC.fb_app_id+"			&link="+f.uri+"			&picture="+f.picture+"			&name="+f.title+"			&description="+f.description+"			&redirect_uri="+(BF_STATIC.bf_env=="dev"?"http://dev.buzzfeed.com/":BF_STATIC.bf_env=="stage"?"http://stage.buzzfeed.com/":BF_STATIC.bf_env=="live"?"http://buzzfeed.com/":"")+"static/html/timemachine_share.html			','sharer','toolbar=0,status=0,width=580,height=400,top='+sTop+',left='+sLeft);			"+f.onclick+'			;return false"			 '+b+" "+a+'><div class="fb_icon">&nbsp;</div>			<div class="label">'+local.t(f.words)+"</div></a>			"+(f.wrapper?"</div>":"");$(f.el).insert(c)};this.tw_tweet=function(f){if(!objExists(f.el)||!objExists(f.uri)){return false}if(!objExists(f.words)){f.words="Tweet"}if(!objExists(f.via)||!f.via){f.via="buzzfeed"}if(!objExists(f.size)){f.size="big"}if(!objExists(f.description)){f.description=""}if(!objExists(f.onclick)){f.onclick=""}if(!objExists(f.hashtags)){f.hashtags=""}if(!objExists(f.color)){f.color=""}if(!objExists(f.wrapper)){f.wrapper=false}var b=objExists(f.tracking_action)?"rel:gt_act='"+f.tracking_action+"'":"";var a=objExists(f.tracking_label)?"rel:gt_label='"+f.tracking_label+"'":"";f.description=bf_shares.fixedEncodeURIComponent(f.description);var c=(f.wrapper?'<div class="tweet_share">':"");c+="<a class='shareBtn "+f.size+" "+f.color+"'"+b+" "+a+" ";c+="onClick=\"window.open('https://twitter.com/intent/tweet?url="+f.uri;if(f.description){c+="&text="+f.description}if(f.hashtags){c+="&hashtags="+f.hashtags}if(f.via){c+="&via="+f.via}c+="', 'twitterwindow', 'height=450, width=550, top='+((BF_UTIL.browser.dimensions.height()/2) - 225 + BF_UTIL.browser.position.top()) +', left='+((BF_UTIL.browser.dimensions.width()/2) - 275 + BF_UTIL.browser.position.left()) +', toolbar=0, location=0, menubar=0, directories=0, scrollbars=0');"+f.onclick+";return false;\">			<div class='twitter_icon'></div>			<div class='label'>"+local.t(f.words)+"</div></a>			"+(f.wrapper?"</div>":"");$(f.el).insert(c)}};var bf_shares=new BF_Shares();sharing={};sharing.lib={};sharing.types={};sharing.lib.get_url=function(a){if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&!BF_STATIC.mobile_app&&(typeof a.pound_no_track=="undefined"||!a.pound_no_track)){try{if(a.network=="stumbleupon"){return encodeURIComponent(pound.urls.queryStringOnly(["fb_ref"]))}if(a.network=="buzzfeed-link"){return pound.urls.unescaped.queryStringOnly()}return pound.urls.queryStringOnly()}catch(b){}}else{if(a.url){return a.url}}return encodeURIComponent(document.URL)};sharing.lib.bind=function(b,a,c){if(window.addEventListener){b.addEventListener(a,c,false)}else{if(window.attachEvent){b.attachEvent("on"+a,c)}else{b["on"+a]=c}}};sharing.lib.unbind=function(b,a,c){if(!b){return}if(b.removeEventListener){b.removeEventListener(a,c,false)}else{if(b.detachEvent){b.detachEvent("on"+a,c)}else{b["on"+a]=function(f){return false}}}};sharing.lib.endEvent=function(a){if(a){a.cancelBubble=true;a.returnValue=false;if(a.stopPropagation){a.stopPropagation()}if(typeof a.preventDefault!="undefined"){a.preventDefault()}}return false};sharing.lib.apply_attrs=function(f,b,a){for(var c in b){if(b.hasOwnProperty(c)&&b[c]!=null&&b[c]!=""){f.setAttribute(c,b[c])}}if(typeof a=="function"){a()}};sharing.types.Buzz=function(){var a=this;this.build=function(h){var b=h.parentNode;var k=h.replace;var c=document.createElement("div");if(typeof k!="undefined"){k.parentNode.insertBefore(c,k);k.parentNode.removeChild(k)}var g=document.createElement("a");var l=document.createElement("div");var f=document.createElement("div");c.appendChild(g);g.appendChild(l);g.appendChild(f);sharing.lib.apply_attrs(g,{"class":"bf_dom shareBtn big square"});sharing.lib.apply_attrs(f,{"class":"label"});l.innerHTML="&nbsp;";f.innerHTML="Share";if(typeof b!="undefined"){b.appendChild(c)}a.container=c;a.anchor=g;a.icon=l;a.label=f;return c};this.type=function(){return"buzz"};this.elements=function(){return{container:a.container,anchor:a.anchor,icon:a.icon,label:a.label}};this.addClickEvent=function(b){if(typeof b!="undefined"){sharing.lib.bind(a.anchor,"click",b)}};this.toString=function(){return"[sharing.types.Buzz]"}};sharing.types.SubBuzz=function(){var a=this;this.build=function(c){var b=document.createElement("a");var f=c.replace;if(typeof f!="undefined"){f.parentNode.insertBefore(b,f);f.parentNode.removeChild(f)}sharing.lib.apply_attrs(b,{"class":"share-icon bf_dom",href:"javascript:;"});if(typeof c.parentNode!="undefined"){c.parentNode.appendChild(b)}a.anchor=b;return b};this.type=function(){return"subbuzz"};this.elements=function(){return{anchor:a.anchor}};this.addClickEvent=function(b){if(typeof b!="undefined"){sharing.lib.bind(a.anchor,"click",b)}};this.toString=function(){return"[object sharing.types.SubBuzz]"}};sharing.types.Longform=function(){var a=this;this.build=function(c){var b=document.createElement("a");var f=c.replace;if(typeof f!="undefined"){f.parentNode.insertBefore(b,f);f.parentNode.removeChild(f)}sharing.lib.apply_attrs(b,{href:"javascript:;"});if(typeof c.parentNode!="undefined"){c.parentNode.appendChild(b)}a.anchor=b;return b};this.type=function(){return"longform"};this.elements=function(){return{anchor:a.anchor}};this.addClickEvent=function(b){if(typeof b!="undefined"){sharing.lib.bind(a.anchor,"click",b)}};this.toString=function(){return"[object sharing.types.Longform]"}};sharing.types.CircleShare=function(){var a=this;this.build=function(c){var g=document.createElement("div");var b=document.createElement("a");var f=c.replace;if(typeof f!="undefined"){f.parentNode.insertBefore(b,f);f.parentNode.removeChild(f)}sharing.lib.apply_attrs(b,{href:"javascript:;"});b.appendChild(g);if(typeof c.parentNode!="undefined"){c.parentNode.appendChild(b)}a.anchor=b;a.icon=g;return b};this.type=function(){return"circleshare"};this.elements=function(){return{anchor:a.anchor,icon:a.icon}};this.addClickEvent=function(b){if(typeof b!="undefined"){sharing.lib.bind(a.anchor,"click",b)}};this.toString=function(){return"[object sharing.types.CircleShare]"}};sharing.types.PinterestImage=function(){var a=this;this.build=function(c){var b=document.createElement("a");var f=c.replace;if(typeof f!="undefined"){f.parentNode.insertBefore(b,f);f.parentNode.removeChild(f)}sharing.lib.apply_attrs(b,{href:"javascript:;"});if(typeof c.parentNode!="undefined"){c.parentNode.appendChild(b)}a.anchor=b;return b};this.type=function(){return"pinterest_image"};this.elements=function(){return{anchor:a.anchor}};this.addClickEvent=function(b){if(typeof b!="undefined"){sharing.lib.bind(a.anchor,"click",b)}};this.toString=function(){return"[object sharing.types.PinterestImage]"}};sharing.types.IcWithTxt=function(){var a=this;this.build=function(h){var b=h.parentNode;var k=h.replace;var c=document.createElement("div");if(typeof k!="undefined"){k.parentNode.insertBefore(c,k);k.parentNode.removeChild(k)}var g=document.createElement("a");var l=document.createElement("i");var f=document.createElement("span");c.appendChild(g);g.appendChild(l);g.appendChild(f);g.setAttribute("class","bf_dom shareBtn ic-with-txt");f.setAttribute("class","label");f.innerHTML="Share on "+h.network.charAt(0).toUpperCase()+h.network.slice(1);if(typeof b!="undefined"){b.appendChild(c)}a.container=c;a.anchor=g;a.icon=l;a.label=f;return c};this.type=function(){return"buzz"};this.elements=function(){return{container:a.container,anchor:a.anchor,icon:a.icon,label:a.label}};this.addClickEvent=function(b){if(typeof b!="undefined"){sharing.lib.bind(a.anchor,"click",b)}};this.toString=function(){return"[sharing.HeaderButton]"}};sharing.buttons=new (function(){var a=this;this._build=function(b){if(b.type=="undefined"){button=new sharing.types.Buzz()}else{if(b.type=="subbuzz"){button=new sharing.types.SubBuzz()}else{if(b.type=="longform"){button=new sharing.types.Longform()}else{if(b.type=="circleshare"){button=new sharing.types.CircleShare()}else{if(b.type=="pin_image"){button=new sharing.types.PinterestImage()}else{if(b.type=="ic_with_txt"){button=new sharing.types.IcWithTxt()}else{button=new sharing.types.Buzz()}}}}}}button.build(b);if(b.icon&&button.anchor){button.anchor.update('<i class = "fa" >'+b.icon+"</i>")}if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&typeof bf_visit!="undefined"){sharing.lib.bind(button.anchor,"click",bf_visit.recordShare)}return button};this._window=function(f){var b=(window.screen.height/2)-(f.height/2);var c=(window.screen.width/2)-(f.width/2);var g="scrollbars=yes, toolbar=0, status=0, width="+f.width+", height="+f.height+", top="+b+", left="+c;window.open(f.url,f.name,g)};this._tracking_pixel_fb=function(b){if(typeof window._fbq!="undefined"){window._fbq.push(["track",b,{value:"0.00",currency:"USD"}])}};this._custom_audience_fb=function(b){if(b!="undefined"){b=b.capitalize()}if(typeof window._fbq!="undefined"){window._fbq.push(["track",b+"Share"]);if(BF_STATIC.bf_env!="live"){console.log("window._fbq.push(['track', '"+b+"Share'])")}}};this.facebook_share=function(b){if(!b){b=new Object}b.network="facebook";var c=a._build(b);if(c.type()=="subbuzz"){a._facebook_share_subbuzz(c,b)}else{if(c.type()=="longform"){a._facebook_share_longform(c,b)}else{if(c.type()=="circleshare"){a._facebook_share_circleshare(c,b)}else{a._facebook_share_default(c,b)}}}c.network="facebook";return c};this._facebook_share_default=function(f,c){var b=function(l){if(BF_STATIC.vertical=="business"){a._tracking_pixel_fb("6015557839963")}if(BF_STATIC.vertical=="style"){a._custom_audience_fb(f.network)}var h=(typeof BF_STATIC!="undefined"&&BF_STATIC.fb_app_id?BF_STATIC.fb_app_id:null);var g=(document.URL.indexOf("https://")==0?"https://":"http://")+document.domain+"/static/html/fb-redirect.html";var k="https://www.facebook.com/dialog/feed?redirect_uri="+g+"&display=popup";if(h){k+="&app_id="+h}k+="&link="+sharing.lib.get_url(c);if(c.picture){k+="&picture="+c.picture}if(c.title){k+="&name="+encodeURIComponent(c.title)}if(c.blurb){k+="&description="+encodeURIComponent(c.blurb)}a._window({width:626,height:256,url:k,name:"fbWindow"});if(typeof fbSharePixel!="undefined"){fbSharePixel()}return sharing.lib.endEvent(l)};sharing.lib.bind(f.anchor,"click",b);if(c.type=="ic_with_txt"){if(c.divider==true){f.container.setAttribute("class","fb_share fa_ic br_bt")}else{f.container.setAttribute("class","fb_share fa_ic")}f.icon.setAttribute("class","fa fa-facebook-square fb_icon")}else{sharing.lib.apply_attrs(f.container,{"class":"fb_share"});sharing.lib.apply_attrs(f.icon,{"class":"fb_icon"})}sharing.lib.apply_attrs(f.anchor,{href:"javascript:;","rel:gt_act":(c.gt_act?c.gt_act:"share/facebook/share"),"rel:gt_label":(c.gt_label?c.gt_label:null)})};this._facebook_share_longform=function(f,c){var b=function(h){var g="http://www.facebook.com/sharer.php?s=100";g+="&p[url]="+sharing.lib.get_url(c);if(c.picture){g+="&p[images][0]="+c.picture}if(c.title){g+="&p[title]="+encodeURIComponent(c.title)}if(c.blurb){g+="&p[summary]="+encodeURIComponent(c.blurb)}a._window({width:626,height:256,url:g,name:"fbWindow"});if(typeof fbSharePixel!="undefined"){fbSharePixel()}return sharing.lib.endEvent(h)};sharing.lib.bind(f.anchor,"click",b);sharing.lib.apply_attrs(f.anchor,{"class":"fb_icon inlineShareBtn",href:"javascript:;","rel:gt_act":(c.gt_act?c.gt_act:"share/facebook/share"),"rel:gt_label":(c.gt_label?c.gt_label:null)})};this._facebook_share_subbuzz=function(c,b){sharing.lib.apply_attrs(c.anchor,{"class":"share-icon bf_dom sub-buzz-facebook-share fa-facebook fa",id:"facebook"+b.subbuzz,"rel:bf_bucket_data":JSON.stringify({"fb-share":{id:b.subbuzz}}),"rel:description":unescape(encodeURIComponent(b.description)),"rel:gt_act":(b.gt_act?b.gt_act:"share/facebook/list-item:"+b.subbuzz_no),"rel:gt_label":(b.gt_label?b.gt_label:b.image)})};this._facebook_share_circleshare=function(f,c){var b=function(l){var h=(typeof BF_STATIC!="undefined"&&BF_STATIC.fb_app_id?BF_STATIC.fb_app_id:null);var g=(document.URL.indexOf("https://")==0?"https://":"http://")+document.domain+"/static/html/fb-redirect.html";var k="https://www.facebook.com/dialog/feed?redirect_uri="+g+"&display=popup";if(h){k+="&app_id="+h}k+="&link="+sharing.lib.get_url(c);if(c.picture){k+="&picture="+c.picture}if(c.title){k+="&name="+encodeURIComponent(c.title)}if(c.blurb){k+="&description="+encodeURIComponent(c.blurb)}a._window({width:626,height:256,url:k,name:"fbWindow"});if(typeof fbSharePixel!="undefined"){fbSharePixel()}return sharing.lib.endEvent(l)};sharing.lib.bind(f.anchor,"click",b);sharing.lib.apply_attrs(f.icon,{"class":"fa fa-facebook","rel:gt_act":"ignore"});sharing.lib.apply_attrs(f.anchor,{"class":"bf_dom circle-share circle-facebook-share",href:"javascript:;","rel:gt_act":(c.gt_act?c.gt_act:"share/facebook/share"),"rel:gt_label":(c.gt_label?c.gt_label:null)})};this.email=function(b){if(!b){b=new Object}b.network="email";var c=a._build(b);b.body=encodeURIComponent(b.body).replace(/[!'()]/g,escape).replace(/\*/g,"%2A");b.subject=encodeURIComponent(b.subject).replace(/[!'()]/g,escape).replace(/\*/g,"%2A");if(c.type()=="subbuzz"){a._email_subbuzz(c,b)}else{if(c.type()=="longform"){a._email_longform(c,b)}else{if(c.type()=="circleshare"){a._email_circleshare(c,b)}else{if(b.method&&b.method=="mailto"){a._email_mailto_link(c,b)}else{a._email_default(c,b)}}}}c.network="email";return c};this._email_subbuzz=function(c,b){sharing.lib.apply_attrs(c.anchor,{"class":"share-icon bf_dom sub-buzz-email-share fa-envelope fa",id:"emailShare"+b.subbuzz,"rel:bf_bucket_data":JSON.stringify({"email-share":{id:b.subbuzz}}),"rel:gt_act":(b.gt_act?b.gt_act:"share/email/list-item:"+b.subbuzz_no),"rel:gt_label":(b.gt_label?b.gt_label:b.image)})};this._email_longform=function(g,f){var c=function(h){return sharing.lib.endEvent(h)};var b=function(h){var k=g.anchor.parentNode.parentNode.getElementsByClassName("bookmark-tooltip")[0];if(k!==undefined){k.style.display="none"}if(typeof tracker!="undefined"){tracker.add({type:tracker.types.SHARE_EMAIL});tracker.run()}};sharing.lib.bind(g.anchor,"click",c);sharing.lib.bind(g.anchor,"mousedown",b);sharing.lib.apply_attrs(g.anchor,{"class":"bf_dom email_icon inlineShareBtn","rel:gt_act":"share/email","rel:actions":"click:share_email","rel:bf_bucket":"event_handler sticky_popup_button","rel:data":JSON.stringify({share_email:{buzz_id:f.buzzid}}),href:"javascript:;"})};this._email_default=function(g,f){var c=function(h){if(BF_STATIC.vertical=="style"){a._custom_audience_fb(g.network)}return sharing.lib.endEvent(h)};var b=function(h){if(typeof tracker!="undefined"){tracker.add({type:tracker.types.SHARE_EMAIL});tracker.run()}};sharing.lib.bind(g.anchor,"click",c);sharing.lib.bind(g.anchor,"mousedown",b);sharing.lib.apply_attrs(g.container,{"class":"email_share"});sharing.lib.apply_attrs(g.icon,{"class":"email_icon"});sharing.lib.apply_attrs(g.anchor,{"rel:gt_act":(f.gt_act?f.gt_act:"share/email"),"rel:gt_label":(f.gt_label?f.gt_label:null),"rel:actions":"click:share_email","rel:bf_bucket":"event_handler sticky_popup_button","rel:data":JSON.stringify({share_email:{buzz_id:f.buzzid}}),href:"javascript:;"});if(typeof universal_dom!="undefined"){universal_dom.update(g.anchor)}};this._email_mailto_link=function(c,b){sharing.lib.apply_attrs(c.container,{"class":"email_share"});sharing.lib.apply_attrs(c.icon,{"class":"email_icon"});sharing.lib.apply_attrs(c.anchor,{"rel:gt_act":(b.gt_act?b.gt_act:"share/email"),"rel:gt_label":(b.gt_label?b.gt_label:null),"rel:actions":"click:share_email",href:"mailto:?body="+(b.body?b.body:"")+"&subject="+(b.subject?b.subject:""),target:"_self"})};this._email_circleshare=function(g,f){var c=function(h){if(BF_STATIC.vertical=="style"){a._custom_audience_fb(g.network)}return sharing.lib.endEvent(h)};var b=function(h){if(typeof tracker!="undefined"){tracker.add({type:tracker.types.SHARE_EMAIL});tracker.run()}};sharing.lib.bind(g.anchor,"click",c);sharing.lib.bind(g.anchor,"mousedown",b);sharing.lib.apply_attrs(g.icon,{"class":"fa fa-envelope email_icon","rel:gt_act":"ignore"});sharing.lib.apply_attrs(g.anchor,{"class":"bf_dom circle-share circle-email-share","rel:gt_act":(f.gt_act?f.gt_act:"share/email"),"rel:actions":"click:share_email","rel:bf_bucket":"event_handler sticky_popup_button","rel:data":JSON.stringify({share_email:{buzz_id:f.buzzid}}),href:"javascript:;"})};this.link=function(b){if(!b){b=new Object}b.network="buzzfeed-link";var c=a._build(b);if(c.type()=="subbuzz"){a._link_subbuzz(c,b)}else{a._link_default(c,b)}c.network="link";return c};this._link_default=function(c,b){sharing.lib.apply_attrs(c.container,{"class":"link_share"});sharing.lib.apply_attrs(c.icon,{"class":"copy_icon"});sharing.lib.apply_attrs(c.anchor,{"rel:gt_act":(b.gt_act?b.gt_act:"share/link"),"rel:gt_label":(b.gt_label?b.gt_label:null),href:"javascript:;","rel:bf_bucket":"share_link sticky_popup_button","rel:link":sharing.lib.get_url(b)});if(typeof universal_dom!="undefined"){universal_dom.update(c.container)}};this._link_subbuzz=function(c,b){sharing.lib.apply_attrs(c.anchor,{href:"javascript:;","class":"share-icon bf_dom sub-buzz-link-share fa-link fa",id:"link"+b.subbuzz,"rel:bf_bucket_data":JSON.stringify({"link-share":{id:b.subbuzz}}),"rel:gt_act":(b.gt_act?b.gt_act:"share/link/list-item:"+b.subbuzz_no),"rel:gt_label":(b.gt_label?b.gt_label:b.image)})};this.pinterest=function(b){if(!b){b=new Object}b.network="pinterest";var c=a._build(b);if(c.type()=="subbuzz"){a._pinterest_subbuzz(c,b)}else{if(c.type()=="longform"){a._pinterest_longform(c,b)}else{if(c.type()=="pinterest_image"){a.pinterest_pin_image(c,b)}else{if(c.type()=="buzz"&&typeof b.quiz_result!="undefined"){a.pinterest_quiz_result(c,b)}else{a._pinterest_default(c,b)}}}}c.network="pinterest";return c};this._pinterest_default=function(g,f){var c=function(k){if(BF_STATIC.vertical=="business"){a._tracking_pixel_fb("6015558073763")}if(BF_STATIC.vertical=="style"){a._custom_audience_fb(g.network)}return sharing.lib.endEvent(k)};if(f.optimized&&f.media){if(!document.getElementById("optimized_image_wrapper")){var b=document.createElement("div");b.id="optimized_image_wrapper";b.style.display="none";var h=new Image();h.src=f.media;h.setAttribute("rel:bf_image_src",f.media);h.setAttribute("rel:bf_image_desc",f.description);b.appendChild(h);document.documentElement.firstChild.appendChild(b)}}sharing.lib.bind(g.anchor,"click",c);sharing.lib.apply_attrs(g.container,{"class":"pinterest_share"});sharing.lib.apply_attrs(g.icon,{"class":"pi_icon"});sharing.lib.apply_attrs(g.anchor,{"rel:gt_act":(f.gt_act?f.gt_act:"share/pinterest"),"rel:gt_label":(f.gt_label?f.gt_label:null),"rel:bf_bucket":"pinterest",href:"javascript:;"})};this._pinterest_longform=function(c,b){sharing.lib.apply_attrs(c.anchor,{"rel:gt_act":(b.gt_act?b.gt_act:"share/pinterest"),"rel:gt_label":(b.gt_label?b.gt_label:null),"rel:bf_bucket":"pinterest",href:"javascript:;","class":"bf_dom inlineShareBtn pi_icon"})};this._pinterest_subbuzz=function(c,b){sharing.lib.apply_attrs(c.anchor,{href:"javascript:;","class":"share-icon bf_dom sub-buzz-pinterest-share fa-pinterest fa",id:"pinterest"+b.subbuzz,"rel:bf_bucket_data":JSON.stringify({"pin-share":{id:b.subbuzz}}),"rel:gt_act":(b.gt_act?b.gt_act:"share/pinterest/list-item:"+b.subbuzz_no),"rel:gt_label":(b.gt_label?b.gt_label:"row_image")})};this.pinterest_pin_image=function(f,c){var b=function(k){var h="http://pinterest.com/pin/create/bookmarklet/?url="+sharing.lib.get_url(c);if(c.media&&c.media.indexOf("http")!=0){var g=BF_STATIC.image_root?BF_STATIC.image_root:BF_STATIC.big_image_root;c.media=encodeURIComponent(g)+c.media}if(c.media){h+="&media="+c.media}if(c.description){h+="&description="+decodeURIComponent(c.description)}a._window({width:626,height:c.height||256,url:h,name:"pinterest"});return sharing.lib.endEvent(k)};sharing.lib.bind(f.anchor,"click",b);sharing.lib.apply_attrs(f.anchor,{href:"javascript:;",target:"_blank","rel:gt_act":"share/pinterest"})};this.pinterest_quiz_result=function(f,c){var b=function(k){var h="http://pinterest.com/pin/create/bookmarklet/?url="+sharing.lib.get_url(c);if(c.media&&c.media.indexOf("http")!=0){var g=BF_STATIC.image_root?BF_STATIC.image_root:BF_STATIC.big_image_root;c.media=g+c.media}if(c.media){h+="&media="+encodeURIComponent(c.media)}if(c.description){h+="&description="+encodeURIComponent(c.description)}a._window({width:626,height:c.height||256,url:h,name:"pinterest"});return sharing.lib.endEvent(k)};sharing.lib.bind(f.anchor,"click",b);f.label.innerHTML="Pin it";sharing.lib.apply_attrs(f.container,{"class":"pinterest_share"});sharing.lib.apply_attrs(f.icon,{"class":"pi_icon"});sharing.lib.apply_attrs(f.anchor,{"rel:gt_act":(c.gt_act?c.gt_act:"share/pinterest"),"rel:gt_label":(c.gt_label?c.gt_label:null),href:"javascript:;"})};this.tumblr=function(b){if(!b){b=new Object}b.network="tumblr";var c=a._build(b);if(c.type()=="buzz"){a._tumblr_default(c,b)}else{a._tumblr_default(c,b)}c.network="tumblr";return c};this._tumblr_default=function(f,c){var b=function(h){var g="http://www.tumblr.com/share/link?url="+encodeURIComponent(sharing.lib.get_url(c));if(c.name){g+="&name="+encodeURIComponent(c.name)}if(c.description){g+="&description="+encodeURIComponent(c.description)}a._window({width:626,height:c.height||465,url:g,name:"tumblr"});return sharing.lib.endEvent(h)};sharing.lib.bind(f.anchor,"click",b);f.label.innerHTML="Tumblr";sharing.lib.apply_attrs(f.container,{"class":"tumblr_share"});sharing.lib.apply_attrs(f.icon,{"class":"tumblr_icon"});sharing.lib.apply_attrs(f.anchor,{"rel:gt_act":(c.gt_act?c.gt_act:"share/tumblr"),"rel:gt_label":(c.gt_label?c.gt_label:null),href:"javascript:;"})};this.reddit=function(b){if(!b){b=new Object}b.network="reddit";var c=a._build(b);if(c.type()=="subbuzz"){a._reddit_subbuzz(c,b)}else{a._reddit_default(c,b)}c.network="reddit";return c};this._reddit_default=function(f,c){var b=function(h){var g="http://www.reddit.com/submit?url="+sharing.lib.get_url(c);a._window({width:900,height:700,url:g,name:"redditWindow"});return sharing.lib.endEvent(h)};sharing.lib.bind(f.anchor,"click",b);sharing.lib.apply_attrs(f.container,{"class":"reddit_share"});sharing.lib.apply_attrs(f.icon,{"class":"reddit_icon"});sharing.lib.apply_attrs(f.anchor,{"rel:gt_act":(c.gt_act?c.gt_act:"share/reddit"),"rel:gt_label":(c.gt_label?c.gt_label:null),href:"javascript:;"})};this._reddit_subbuzz=function(c,b){throw Error("Share.js: Reddit subbuzz button not implemented.")};this.stumbleupon=function(b){if(!b){b=new Object}b.network="stumbleupon";var c=a._build(b);if(c.type()=="subbuzz"){a._stumbleupon_subbuzz(c,b)}else{a._stumbleupon_default(c,b)}c.network="stumbleupon";return c};this._stumbleupon_default=function(f,c){var b=function(h){var g="http://www.stumbleupon.com/submit?url="+sharing.lib.get_url(c);a._window({width:750,height:450,name:"stumbleWindow",url:g});return sharing.lib.endEvent(h)};sharing.lib.bind(f.anchor,"click",b);f.label.innerHTML="Stumble";sharing.lib.apply_attrs(f.container,{"class":"stumbleupon_share"});sharing.lib.apply_attrs(f.icon,{"class":"su_icon"});sharing.lib.apply_attrs(f.anchor,{"rel:gt_act":(c.gt_act?c.gt_act:"share/su"),"rel:gt_label":(c.gt_label?c.gt_label:null),href:"javascript:;"})};this._stumbleupon_subbuzz=function(c,b){throw Error("Share.js: Stumbleupon subbuzz button is not implemented")};this.googleplus=function(b){if(!b){b=new Object}b.network="googleplus";var c=a._build(b);if(c.type()=="subbuzz"){a._googleplus_subbuzz(c,b)}else{a._googleplus_default(c,b)}c.network="googleplus";return c};this._googleplus_default=function(f,c){var b=function(h){var g="https://plus.google.com/share?url="+sharing.lib.get_url(c);a._window({width:550,height:450,name:"gplusWindow",url:g});return sharing.lib.endEvent(h)};sharing.lib.bind(f.anchor,"click",b);sharing.lib.apply_attrs(f.container,{"class":"gplus_share"});sharing.lib.apply_attrs(f.icon,{"class":"gplus_icon"});sharing.lib.apply_attrs(f.anchor,{"rel:gt_act":(c.gt_act?c.gt_act:"share/googleplus/plus-one"),"rel:gt_label":(c.gt_label?c.gt_label:null),href:"javascript:;"})};this._googleplus_subbuzz=function(c,b){throw Error("Share.js: Google Plus subbuzz button not implemented.")};this.comment_cb=null;if(BF_STATIC.bf_test_mode){this.comment_cb=function(){EventManager.fire("sharing:comment:done")}}this.comment=function(b){if(!b){b=new Object}b.network="buzzfeed";var c=a._build(b);if(c.type()=="subbuzz"){a._comment_subbuzz(c,b)}else{a._comment_default(c,b)}c.network="comment";return c};this._comment_default=function(c,b){throw Error("Share.js: Comment default button not implemented.")};this._comment_subbuzz=function(c,b){sharing.lib.apply_attrs(c.anchor,{href:"javascript:;","class":"share-icon bf_dom sub-buzz-response-share response-button hidden",id:"response"+b.subbuzz,"rel:bf_bucket_data":JSON.stringify({"response-share":{id:b.subbuzz}}),"rel:gt_act":(b.gt_act?b.gt_act:"share/contribute/list-item:"+b.subbuzz_no),"rel:gt_label":(b.gt_label?b.gt_label:null)},sharing.buttons.comment_cb)};this.linkedin=function(b){if(!b){b=new Object}b.network="linkedin";var c=a._build(b);if(c.type()=="subbuzz"){a._linked_in_subbuzz(c,b)}else{a._linkedin_default(c,b)}c.network="linkedin";return c};this._linkedin_default=function(f,c){var b=function(h){var g="http://www.linkedin.com/shareArticle?mini=true";g+="&url="+sharing.lib.get_url(c);a._window({width:520,height:420,url:g,name:"linkedinWindow"});return sharing.lib.endEvent(h)};sharing.lib.bind(f.anchor,"click",b);sharing.lib.apply_attrs(f.container,{"class":"linkedin_share"});sharing.lib.apply_attrs(f.icon,{"class":"li_icon"});sharing.lib.apply_attrs(f.anchor,{"rel:gt_act":(c.gt_act?c.gt_act:"share/linkedin"),"rel:gt_label":(c.gt_label?c.gt_label:null),"rel:bf_bucket":"linkedin",href:"javascript:;"})};this._linked_in_subbuzz=function(c,b){throw Error("Share.js: LinkedIn subbuzz is not implemented.")};this.rebuzz=function(b){if(!b){b=new Object}b.network="buzzfeed";var c=a._build(b);if(c.type()=="subbuzz"){a._rebuzz_subbuzz(c,b)}else{a._rebuzz_default(c,b)}c.network="rebuzz";return c};this._rebuzz_default=function(g,f){var c=function(h){return sharing.lib.endEvent(h)};var b=function(h){if(typeof tracker!="undefined"){tracker.add({type:tracker.types.SHARE_REBUZZ});tracker.run()}};sharing.lib.bind(g.anchor,"mousedown",b);sharing.lib.bind(g.anchor,"click",c);g.label.innerHTML="Rebuzz";sharing.lib.apply_attrs(g.container,{"class":"rebuzz_share","rel:buzz_id":f.buzzid});sharing.lib.apply_attrs(g.icon,{"class":"rebuzz_icon"});sharing.lib.apply_attrs(g.anchor,{"class":"add-pick bf_dom make_pick shareBtn big square","rel:gt_act":(f.gt_act?f.gt_act:"share/rebuzz"),"rel:gt_label":(f.gt_label?f.gt_label:null),id:f.buzzid+"-make_pick-add","rel:data":JSON.stringify({username:f.username})})};this._rebuzz_subbuzz=function(c,b){throw Error("Share.js: Rebuzz subbuzz buttons are not implemented.")};this.twitter=function(b){if(!b){b=new Object}b.network="twitter";var c=a._build(b);if(c.type()=="subbuzz"){a._twitter_subbuzz(c,b)}else{if(c.type()=="longform"){a._twitter_longform(c,b)}else{if(c.type()=="circleshare"){a._twitter_circleshare(c,b)}else{a._twitter_default(c,b)}}}c.network="twitter";return c};this._twitter_build_url=function(b){var c="";c+="&url="+sharing.lib.get_url(b);if(b.blurb){c+="&text="+encodeURIComponent(b.blurb).replace(/%25/g,"%")}if(b.via){c+="&via="+b.via}if(b.hashtags){c+="&hashtags="+(b.hashtags.replace(/#/g,""))}return"http://twitter.com/share?"+c};this._twitter_shorten_params=function(b){var g=22;if(b.blurb){g+=b.blurb.length+1}if(b.hashtags){g+=b.hashtags.length+3}if(b.via){var k=(b.via.length+5);if(g+k<140){g+=k}else{b.via=b.via.replace("@buzzfeednews"," ");b.via=b.via.replace("@buzzfeed"," ");g+=(b.via.length+5)}}if(b.blurb){if(g>=140){var f=Math.max(0,(b.blurb.length)-(g-140));var c=b.blurb.substring(0,f);var h=c.substring(0,c.lastIndexOf("%2520"));b.blurb=(c.indexOf("%2520")>=0?h:c)}}return b};this._twitter_default=function(f,c){var b=function(h){if(BF_STATIC.vertical=="business"){a._tracking_pixel_fb("6015558046363")}if(BF_STATIC.vertical=="style"){a._custom_audience_fb(f.network)}var g=a._twitter_build_url(c);a._window({width:550,height:450,url:g,name:"twitterWindow"});return sharing.lib.endEvent(h)};c=a._twitter_shorten_params(c);icoptions=a._twitter_shorten_params(c);sharing.lib.bind(f.anchor,"click",b);if(c.type=="ic_with_txt"){if(c.divider==true){f.container.setAttribute("class","tweet_share fa_ic br_bt")}else{f.container.setAttribute("class","tweet_share fa_ic")}f.icon.setAttribute("class","fa fa-twitter twitter_icon")}else{f.label.innerHTML="Tweet";sharing.lib.apply_attrs(f.container,{"class":"tweet_share"});sharing.lib.apply_attrs(f.icon,{"class":"twitter_icon"})}sharing.lib.apply_attrs(f.anchor,{"rel:gt_act":(c.gt_act?c.gt_act:"share/twitter/tweet"),"rel:gt_label":(c.gt_label?c.gt_label:null),href:"javascript:;"})};this._twitter_longform=function(f,c){var b=function(h){var g=a._twitter_build_url(c);a._window({width:550,height:450,url:g,name:"twitterWindow"});return sharing.lib.endEvent(h)};c=a._twitter_shorten_params(c);sharing.lib.bind(f.anchor,"click",b);sharing.lib.apply_attrs(f.anchor,{"rel:gt_act":"share/twitter/tweet",href:"javascript:;","class":"bf_dom twitter_icon inlineShareBtn"})};this._twitter_subbuzz=function(c,b){var b=a._twitter_shorten_params(b);sharing.lib.apply_attrs(c.anchor,{href:"javascript:;","class":"share-icon bf_dom sub-buzz-twitter-share fa fa-twitter",id:"twitter"+b.subbuzz,"rel:hashtags":(b.hashtags?b.hashtags.replace(/#/g,""):""),"rel:via":(b.via?b.via:""),"rel:sub_title":(b.blurb?decodeURIComponent(decodeURIComponent(b.blurb)):" "),"rel:adtl_tweet_text":(b.adtl_tweet_text?decodeURIComponent(b.adtl_tweet_text):" "),"rel:bf_bucket_data":JSON.stringify({"tw-share":{id:b.subbuzz}}),"rel:gt_act":(b.gt_act?b.gt_act:"share/twitter/list-item:"+b.subbuzz_no),"rel:gt_label":(b.gt_label?b.gt_label:b.image)})};this._twitter_circleshare=function(f,c){var b=function(h){var g="http://twitter.com/share?url="+sharing.lib.get_url(c);if(c.blurb){g+="&text="+c.blurb}if(c.via){g+="&via="+c.via}if(c.hashtags){g+="&hashtags="+c.hashtags}a._window({width:550,height:450,url:g,name:"twitterWindow"});return sharing.lib.endEvent(h)};sharing.lib.bind(f.anchor,"click",b);sharing.lib.apply_attrs(f.icon,{"class":"fa fa-twitter","rel:gt_act":"ignore"});sharing.lib.apply_attrs(f.anchor,{"rel:gt_act":(c.gt_act?c.gt_act:"share/twitter/share"),href:"javascript:;","class":"bf_dom circle-share circle-twitter-share"})}})();var ScrollToTop=function(){var b=false;var c=function(){if(f()){var g=new Element("div");g.id="back_to_top";g.onclick=function(){$$(".unified_header")[0].scrollTo();if(gtrack.tt_page=="Buzz"){gtrack.track_events("[ttp]","scrollTo/Top",gtrack.scrollDepth+"%")}else{gtrack.track_events("[ttp]","scrollTo/Top")}};$$("body")[0].insert(g);Event.observe(window,"scroll",function(h){a()})}};var f=function(){if($$(".HomePage").length){return true}if(!$$(".new-draft").length){if($$("#buzz_sub_buzz.suplist_list_show").length){return true}if(acl.user_can("general_admin")&&document.location.href.match("/_draft/")){return true}if($$(".BuzzPage").length){return true}}return false};var a=function(){try{if(document.viewport.getScrollOffsets()[1]>500&&!b){$("back_to_top").addClassName("show");new BF_Effect.FadeIn($("back_to_top"),1,20);b=true}else{if(document.viewport.getScrollOffsets()[1]<100&&b){$("back_to_top").removeClassName("show");b=false}else{if(document.viewport.getScrollOffsets()[1]<500&&b){var g=function(){$("back_to_top").removeClassName("show")};new BF_Effect.FadeOut($("back_to_top"),0,20,g);b=false}}}}catch(h){if(BF_STATIC.bf_env!="live"){console.error(h)}}};return{init:function(){try{c()}catch(g){if(BF_STATIC.bf_env!="live"){console.error(g)}}}}}();BuzzLoader.register(ScrollToTop.init,5);var HideSplashPost=(function(){var g=null;var a="splash-container";var c="list-of-buzz";var f=function(h){return $(h).readAttribute("rel:buzz_id")};var b=function(h,k){$(h).select("li").each(function(l){if($(l).id=="post-"+k){$(l).remove()}})};return{init:function(){if($(a)==null||$(c)==null){return}g=f(a);if(g==null){return}b(c,g)}}}());if(BF_STATIC.tt_page!="Home"){BuzzLoader.register(HideSplashPost.init,1)}(function(){var c=new Date().getTime(),a=$$("ul.breaking-posts li.last")[0],b=function(){var h=$$(".breaking-tweets iframe")[0],f=new Date().getTime(),g=function(){if(!h){return false}var k=h.getStyle("height").match(/\d+/),l=k?+k[0]:125;return h.getHeight()>=l};if(!g()&&(f-c)<10000){setTimeout(b,500)}else{if(!g()){if(h){h.addClassName("hidden")}$$("ul.breaking-posts li.last")[0].removeClassName("hidden")}}};if(!a){return}setTimeout(b,500)})();if(typeof BF_STATIC!="undefined"&&typeof BF_STATIC.language!="undefined"&&typeof countryLangLookup!="undefined"){window.___gcfg={lang:countryLangLookup[BF_STATIC.language],}}if(!isIE8()){BF_UTIL.createScript({url:"https://apis.google.com/js/client:plusone.js?onload=GCallback"})}if(BF_STATIC.bf_test_mode&&BF_STATIC.bf_env=="dev"){(function(){var a=document.createElement("script");a.type="text/javascript";a.async=true;a.src="https://apis.google.com/js/client:plusone.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})()}function GCallback(){EventManager.fire("gplus:api-loaded")}var BFPinterestReferer=function(){this.COOKIE="bf_referer";this.PROMO_INDEX=5;this.pinit_ps={};this.init=function(){var b=readCookie(bf_pinterest_referer.COOKIE);if(b!=null||BF_STATIC.tt_page=="DIY"||BF_STATIC.tt_page=="Food"||BF_STATIC.tt_page=="Style"){bf_pinterest_referer._init()}else{if(BF_STATIC.tt_page=="Buzz"&&BF_STATIC.vertical&&(BF_STATIC.vertical.toLowerCase()=="diy"||BF_STATIC.vertical.toLowerCase()=="food")){bf_pinterest_referer._init()}else{if((document.referrer||"").match(/pinterest.com/)||(location.search||"").match(/\?referer=pinterest.com/)||(document.referrer||"").match(/blog.pinterest.com/)||(location.search||"").match(/\?referer=blog.pinterest.com/)){var a=1/24/2;createCookie(bf_pinterest_referer.COOKIE,"pinterest.com",a);bf_pinterest_referer._init()}}}};this._init=function(){if(typeof universal_dom=="undefined"){setTimeout(bf_pinterest_referer.init,250)}else{bf_pinterest_referer.setup_observers();bf_pinterest_referer.show_pinterest_embed();bf_pinterest_referer.show_more();universal_dom.get_bucket_elements("pinterest_plugin").each(function(c){c.removeClassName("hidden")});if(!bf_pinterest_referer.matchReferer&&$$(".pinterestunit").length){var a=$$(".pinterestunit").first();if(a.hasClassName("hotonpinterest")&&!this.matchReferer){var b=$("permalink_buzz_stats");b.parentNode.insertBefore(a,b)}else{a.addClassName("hidden")}}}};this.setup_observers=function(){universal_dom.assign_handler({bucket:"more-pinterest-promos",event:"click",handler:bf_pinterest_referer.show_more});universal_dom.assign_handler({bucket:"pinit_promo",event:"mouseover",handler:bf_pinterest_referer.show_pinit_link});universal_dom.assign_handler({bucket:"pinit_link",event:"mouseover",handler:bf_pinterest_referer.show_pinit_link});universal_dom.assign_handler({bucket:"pinit_promo",event:"mouseout",handler:bf_pinterest_referer.hide_pinit_link})};this.show_pinit_link=function(a){universal_dom.get_bucket_elements_with_data("pinit_link",{uri:a.uri}).each(function(b){b.removeClassName("hidden")})};this.hide_pinit_link=function(a){universal_dom.get_bucket_elements_with_data("pinit_link",{uri:a.uri}).each(function(b){b.addClassName("hidden")})};this.show_more=function(c){var b=typeof bf_pinterest_referer._revealed=="undefined"?0:bf_pinterest_referer._revealed;var a=(BF_STATIC.tt_page=="DIY"||BF_STATIC.tt_page=="Food")?4:3;if(b==3||b==4){a=12}if(b==12){a=21}bf_pinterest_referer.reveal_promos(a);if(a==21){universal_dom.get_bucket_elements("more-pinterest-promos").each(function(f){f.addClassName("hidden")})}};this.reveal_promos=function(b){bf_pinterest_referer._revealed=b;var f=[],a=bf_pinterest_referer._get_shuffled_promos(),c=function(k){for(var g in a){for(var h=0;h<b&&h<a[g].length;h++){k.call(null,a[g][h])}}};c(function(g){var h;if(g.tagName.toLowerCase()=="div"){g.removeClassName("hidden");return}h=g.select(".pin-button-link");if(h.length){g.removeClassName("hidden");h.first().setAttribute("data-pin-do","buttonPin")}else{g.select(".pin-button a").each(function(k){if(k.getAttribute("data-pin-log")=="button_pinit"){f.push(k)}k.remove()})}});bf_pinterest_referer._loadPinterestScript(function(){if(!f.length){return}c(function(h){var g=h.select(".pin-button");if(!g.length){return}g.first().insert(f.shift())})})};this._get_shuffled_promos=function(){if(typeof bf_pinterest_referer._shuffled_promos=="undefined"){bf_pinterest_referer._shuffled_promos={};var a=["pinterest_promo"];a.each(function(h){var g=universal_dom.get_bucket_elements(h);g=g.slice(0,g.length);for(var f=0;f<g.length;f++){var c=Math.floor(Math.random()*g.length);var b=g[c];g[c]=g[f];g[f]=b}universal_dom.get_bucket_elements_with_data(h,{widget:true}).each(function(k){g.splice(g.indexOf(k),1);g.splice(bf_pinterest_referer.PROMO_INDEX,0,k)});bf_pinterest_referer._shuffled_promos[h]=g;bf_pinterest_referer._reorder_promos_on_page(h)})}return bf_pinterest_referer._shuffled_promos};this._reorder_promos_on_page=function(b){var a=bf_pinterest_referer._get_shuffled_promos();var c=null;var f=function(g){c=g.parentNode;c.update("")};a[b].each(function(g){if(!c){f(g)}c.appendChild(g)});universal_dom.update(c)};this._loadPinterestScript=function(f){if(!BF_STATIC.bf_test_mode){var a,b,c=document;b=c.createElement("SCRIPT");b.type="text/javascript";b.async=true;if(f){$(b).on("load",f)}b.src="//assets.pinterest.com/js/pinit.js";a=c.getElementsByTagName("SCRIPT")[0];a.parentNode.insertBefore(b,a)}else{console.info("disable Dynamically load assets.pinterest.com/js/pinit.js for test mode")}},this.show_pinterest_embed=function(){(function(b){var a=function(h){if(h==16){console.warn("Nothing returned from pinterest")}else{var g=0;var c=bf_pinterest_referer._get_shuffled_promos();for(var f in c){universal_dom.get_bucket_elements_with_data(f,{widget:true}).each(function(k){if(k.getElementsByTagName("SPAN").length>0){g++;try{if(k.next().className.indexOf("hidden")!=-1){k.addClassName("hidden")}}catch(l){console.warn("Error in DOM")}k.removeClassName("hide-buzz_holder")}})}if(g<2){setTimeout(function(){a(++h)},250)}}};a(0)}(document))}};bf_pinterest_referer=new BFPinterestReferer();var BF_Vertical=function(){this.init=function(){if(BF_STATIC.tt_page=="Community"){vertical.community_notice_toggle()}if($$(".twitter-widget").length>0){vertical.track_tweets_title_sidebar_clicks()}universal_dom.assign_handler({bucket:"close_community_note",event:"click",handler:vertical.remove_community_notice});universal_dom.assign_handler({bucket:"community_signin_post",event:"click",handler:vertical.community_signin_post})};this.track_tweets_title_sidebar_clicks=function(){new PeriodicalExecuter(function(a){if($$(".twitter-widget iframe.twitter-timeline").length>0&&typeof gtrack!=="undefined"){var c=$$("iframe.twitter-timeline")[0].contentDocument||$$("iframe.twitter-timeline")[0].contentWindow.document;if(typeof c.getElementsByTagName("h1")[0]!=="undefined"&&typeof c.getElementsByTagName("h1")[0].getElementsByTagName("a")[0]!=="undefined"){var b=c.getElementsByTagName("h1")[0].getElementsByTagName("a")[0];var f=typeof(new BF_User()).getUserInfo().username!=="undefined"?(new BF_User()).getUserInfo().username:"not_logged_in";if(typeof b==="undefined"){return}Event.observe(b,"click",function(){gtrack.track_events(BF_STATIC.tt_page+":sidebar/tweets","link","twitter/"+f)});a.stop()}}},0.5)};this.community_notice_toggle=function(b){try{if($("community_all_note")){var a=localStorage.getItem("community_notice");if(a==null){$("community_all_note").removeClassName("hidden")}else{if(a){$("community_all_note").addClassName("hidden")}}}}catch(b){console.log(b)}};this.remove_community_notice=function(a){if($("community_all_note")){$("community_all_note").addClassName("hidden")}localStorage.setItem("community_notice",true)};this.community_signin_post=function(b){b.stop();var a=new BF_User();if(a.isLoggedIn()){document.location.href=BF_STATIC.web_root+"/post"}else{b.signin_type="initial";b.location="community";signin.callbacks.onLogin.push(function(){document.location.href=BF_STATIC.web_root+"/post"});signin.open(b)}}};var vertical=new BF_Vertical();BuzzLoader.register(vertical.init,1);(function(a5){function a4(g,f,h){switch(arguments.length){case 2:return null!=g?g:f;case 3:return null!=g?g:null!=f?f:h;default:throw new Error("Implement me")}}function a3(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function a2(g,f){function k(){bT.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+g)}var h=!0;return aS(function(){return h&&(k(),h=!1),f.apply(this,arguments)},f)}function aZ(f,c){return function(a){return aO(f.call(this,a),c)}}function aY(f,c){return function(a){return this.lang().ordinal(f.call(this,a),c)}}function aX(){}function aW(b){ay(b),aS(this,b)}function aV(z){var w=aG(z),v=w.year||0,t=w.quarter||0,r=w.month||0,q=w.week||0,p=w.day||0,o=w.hour||0,n=w.minute||0,m=w.second||0,l=w.millisecond||0;this._milliseconds=+l+1000*m+60000*n+3600000*o,this._days=+p+7*q,this._months=+r+3*t+12*v,this._data={},this._bubble()}function aS(g,f){for(var h in f){f.hasOwnProperty(h)&&(g[h]=f[h])}return f.hasOwnProperty("toString")&&(g.toString=f.toString),f.hasOwnProperty("valueOf")&&(g.valueOf=f.valueOf),g}function aR(g){var f,h={};for(f in g){g.hasOwnProperty(f)&&b3.hasOwnProperty(f)&&(h[f]=g[f])}return h}function aP(b){return 0>b?Math.ceil(b):Math.floor(b)}function aO(g,f,l){for(var k=""+Math.abs(g),h=g>=0;k.length<f;){k="0"+k}return(h?l?"+":"":"-")+k}function aN(k,h,p,o){var n=h._milliseconds,m=h._days,l=h._months;o=null==o?!0:o,n&&k._d.setTime(+k._d+n*p),m&&bv(k,"Date",bR(k,"Date")+m*p),l&&b2(k,bR(k,"Month")+l*p),o&&bT.updateOffset(k,m||l)}function aL(b){return"[object Array]"===Object.prototype.toString.call(b)}function aK(b){return"[object Date]"===Object.prototype.toString.call(b)||b instanceof Date}function aI(k,h,p){var o,n=Math.min(k.length,h.length),m=Math.abs(k.length-h.length),l=0;for(o=0;n>o;o++){(p&&k[o]!==h[o]||!p&&aE(k[o])!==aE(h[o]))&&l++}return l+m}function aH(f){if(f){var c=f.toLowerCase().replace(/(.)s$/,"$1");f=bl[f]||aJ[c]||c}return f}function aG(g){var f,k,h={};for(k in g){g.hasOwnProperty(k)&&(f=aH(k),f&&(h[f]=g[k]))}return h}function aF(a){var g,f;if(0===a.indexOf("week")){g=7,f="day"}else{if(0!==a.indexOf("month")){return}g=12,f="month"}bT[a]=function(n,m){var l,k,c=bT.fn._lang[a],b=[];if("number"==typeof n&&(m=n,n=a5),k=function(o){var h=bT().utc().set(f,o);return c.call(bT.fn._lang,h,n||"")},null!=m){return k(m)}for(l=0;g>l;l++){b.push(k(l))}return b}}function aE(g){var f=+g,h=0;return 0!==f&&isFinite(f)&&(h=f>=0?Math.floor(f):Math.ceil(f)),h}function aD(f,c){return new Date(Date.UTC(f,c+1,0)).getUTCDate()}function aC(g,f,h){return bn(bT([g,11,31+f-h]),f,h).week}function aB(b){return aA(b)?366:365}function aA(b){return b%4===0&&b%100!==0||b%400===0}function ay(f){var c;f._a&&-2===f._pf.overflow&&(c=f._a[bJ]<0||f._a[bJ]>11?bJ:f._a[a6]<1||f._a[a6]>aD(f._a[bW],f._a[bJ])?a6:f._a[aw]<0||f._a[aw]>23?aw:f._a[am]<0||f._a[am]>59?am:f._a[aa]<0||f._a[aa]>59?aa:f._a[bY]<0||f._a[bY]>999?bY:-1,f._pf._overflowDayOfYear&&(bW>c||c>a6)&&(c=a6),f._pf.overflow=c)}function bK(b){return null==b._isValid&&(b._isValid=!isNaN(b._d.getTime())&&b._pf.overflow<0&&!b._pf.empty&&!b._pf.invalidMonth&&!b._pf.nullInput&&!b._pf.invalidFormat&&!b._pf.userInvalidated,b._strict&&(b._isValid=b._isValid&&0===b._pf.charsLeftOver&&0===b._pf.unusedTokens.length)),b._isValid}function bI(b){return b?b.toLowerCase().replace("_","-"):b}function bH(f,c){return c._isUTC?bT(f).zone(c._offset||0):bT(f).local()}function bG(f,c){return c.abbr=f,bM[f]||(bM[f]=new aX),bM[f].set(c),bM[f]}function bE(b){delete bM[b]}function bB(k){var h,p,o,n,m=0,l=function(f){if(!bM[f]&&bS){try{require("./lang/"+f)}catch(c){}}return bM[f]};if(!k){return bT.fn._lang}if(!aL(k)){if(p=l(k)){return p}k=[k]}for(;m<k.length;){for(n=bI(k[m]).split("-"),h=n.length,o=bI(k[m+1]),o=o?o.split("-"):null;h>0;){if(p=l(n.slice(0,h).join("-"))){return p}if(o&&o.length>=h&&aI(n,o,!0)>=h-1){break}h--}m++}return bT.fn._lang}function bA(b){return b.match(/\[[\s\S]/)?b.replace(/^\[|\]$/g,""):b.replace(/\\/g,"")}function bz(g){var f,k,h=g.match(aj);for(f=0,k=h.length;k>f;f++){h[f]=bs[h[f]]?bs[h[f]]:bA(h[f])}return function(b){var a="";for(f=0;k>f;f++){a+=h[f] instanceof Function?h[f].call(b,g):h[f]}return a}}function by(f,c){return f.isValid()?(c=bx(c,f.lang()),ap[c]||(ap[c]=bz(c)),ap[c](f)):f.lang().invalidDate()}function bx(g,f){function k(b){return f.longDateFormat(b)||b}var h=5;for(b5.lastIndex=0;h>=0&&b5.test(g);){g=g.replace(b5,k),b5.lastIndex=0,h-=1}return g}function bu(g,f){var k,h=f._strict;switch(g){case"Q":return an;case"DDDD":return bZ;case"YYYY":case"GGGG":case"gggg":return h?bN:a1;case"Y":case"G":case"g":return az;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return h?a9:av;case"S":if(h){return an}case"SS":if(h){return ad}case"SSS":if(h){return bZ}case"DDD":return bD;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return b7;case"a":case"A":return bB(f._l)._meridiemParse;case"X":return a7;case"Z":case"ZZ":return bX;case"T":return bL;case"SSSS":return al;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return h?ad:bU;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return bU;case"Do":return ax;default:return k=new RegExp(bi(bj(g.replace("\\","")),"i"))}}function bt(g){g=g||"";var f=g.match(bX)||[],l=f[f.length-1]||[],k=(l+"").match(af)||["-",0,0],h=+(60*k[1])+aE(k[2]);return"+"===k[0]?-h:h}function br(g,f,l){var k,h=l._a;switch(g){case"Q":null!=f&&(h[bJ]=3*(aE(f)-1));break;case"M":case"MM":null!=f&&(h[bJ]=aE(f)-1);break;case"MMM":case"MMMM":k=bB(l._l).monthsParse(f),null!=k?h[bJ]=k:l._pf.invalidMonth=f;break;case"D":case"DD":null!=f&&(h[a6]=aE(f));break;case"Do":null!=f&&(h[a6]=aE(parseInt(f,10)));break;case"DDD":case"DDDD":null!=f&&(l._dayOfYear=aE(f));break;case"YY":h[bW]=bT.parseTwoDigitYear(f);break;case"YYYY":case"YYYYY":case"YYYYYY":h[bW]=aE(f);break;case"a":case"A":l._isPm=bB(l._l).isPM(f);break;case"H":case"HH":case"h":case"hh":h[aw]=aE(f);break;case"m":case"mm":h[am]=aE(f);break;case"s":case"ss":h[aa]=aE(f);break;case"S":case"SS":case"SSS":case"SSSS":h[bY]=aE(1000*("0."+f));break;case"X":l._d=new Date(1000*parseFloat(f));break;case"Z":case"ZZ":l._useUTC=!0,l._tzm=bt(f);break;case"dd":case"ddd":case"dddd":k=bB(l._l).weekdaysParse(f),null!=k?(l._w=l._w||{},l._w.d=k):l._pf.invalidWeekday=f;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":g=g.substr(0,1);case"gggg":case"GGGG":case"GGGGG":g=g.substr(0,2),f&&(l._w=l._w||{},l._w[g]=aE(f));break;case"gg":case"GG":l._w=l._w||{},l._w[g]=bT.parseTwoDigitYear(f)}}function bq(r){var q,p,o,n,m,l,k,b;q=r._w,null!=q.GG||null!=q.W||null!=q.E?(m=1,l=4,p=a4(q.GG,r._a[bW],bn(bT(),1,4).year),o=a4(q.W,1),n=a4(q.E,1)):(b=bB(r._l),m=b._week.dow,l=b._week.doy,p=a4(q.gg,r._a[bW],bn(bT(),m,l).year),o=a4(q.w,1),null!=q.d?(n=q.d,m>n&&++o):n=null!=q.e?q.e+m:m),k=aM(p,o,n,l,m),r._a[bW]=k.year,r._dayOfYear=k.dayOfYear}function bp(b){var n,m,l,k,h=[];if(!b._d){for(l=bm(b),b._w&&null==b._a[a6]&&null==b._a[bJ]&&bq(b),b._dayOfYear&&(k=a4(b._a[bW],l[bW]),b._dayOfYear>aB(k)&&(b._pf._overflowDayOfYear=!0),m=ba(k,0,b._dayOfYear),b._a[bJ]=m.getUTCMonth(),b._a[a6]=m.getUTCDate()),n=0;3>n&&null==b._a[n];++n){b._a[n]=h[n]=l[n]}for(;7>n;n++){b._a[n]=h[n]=null==b._a[n]?2===n?1:0:b._a[n]}b._d=(b._useUTC?ba:bd).apply(null,h),null!=b._tzm&&b._d.setUTCMinutes(b._d.getUTCMinutes()+b._tzm)}}function bo(f){var c;f._d||(c=aG(f._i),f._a=[c.year,c.month,c.day,c.hour,c.minute,c.second,c.millisecond],bp(f))}function bm(f){var c=new Date;return f._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function bk(v){if(v._f===bT.ISO_8601){return void bg(v)}v._a=[],v._pf.empty=!0;var t,r,q,p,o,n=bB(v._l),m=""+v._i,l=m.length,k=0;for(q=bx(v._f,n).match(aj)||[],t=0;t<q.length;t++){p=q[t],r=(m.match(bu(p,v))||[])[0],r&&(o=m.substr(0,m.indexOf(r)),o.length>0&&v._pf.unusedInput.push(o),m=m.slice(m.indexOf(r)+r.length),k+=r.length),bs[p]?(r?v._pf.empty=!1:v._pf.unusedTokens.push(p),br(p,r,v)):v._strict&&!r&&v._pf.unusedTokens.push(p)}v._pf.charsLeftOver=l-k,m.length>0&&v._pf.unusedInput.push(m),v._isPm&&v._a[aw]<12&&(v._a[aw]+=12),v._isPm===!1&&12===v._a[aw]&&(v._a[aw]=0),bp(v),ay(v)}function bj(b){return b.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(g,f,l,k,h){return f||l||k||h})}function bi(b){return b.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function bh(h){var c,n,m,l,k;if(0===h._f.length){return h._pf.invalidFormat=!0,void (h._d=new Date(0/0))}for(l=0;l<h._f.length;l++){k=0,c=aS({},h),c._pf=a3(),c._f=h._f[l],bk(c),bK(c)&&(k+=c._pf.charsLeftOver,k+=10*c._pf.unusedTokens.length,c._pf.score=k,(null==m||m>k)&&(m=k,n=c))}aS(h,n||c)}function bg(g){var f,l,k=g._i,h=ao.exec(k);if(h){for(g._pf.iso=!0,f=0,l=b0.length;l>f;f++){if(b0[f][1].exec(k)){g._f=b0[f][0]+(h[6]||" ");break}}for(f=0,l=bF.length;l>f;f++){if(bF[f][1].exec(k)){g._f+=bF[f][0];break}}k.match(bX)&&(g._f+="Z"),bk(g)}else{g._isValid=!1}}function bf(b){bg(b),b._isValid===!1&&(delete b._isValid,bT.createFromInputFallback(b))}function be(a){var g=a._i,f=bw.exec(g);g===a5?a._d=new Date:f?a._d=new Date(+f[1]):"string"==typeof g?bf(a):aL(g)?(a._a=g.slice(0),bp(a)):aK(g)?a._d=new Date(+g):"object"==typeof g?bo(a):"number"==typeof g?a._d=new Date(g):bT.createFromInputFallback(a)}function bd(l,k,r,q,p,o,n){var m=new Date(l,k,r,q,p,o,n);return 1970>l&&m.setFullYear(l),m}function ba(f){var c=new Date(Date.UTC.apply(null,arguments));return 1970>f&&c.setUTCFullYear(f),c}function bV(f,c){if("string"==typeof f){if(isNaN(f)){if(f=c.weekdaysParse(f),"number"!=typeof f){return null}}else{f=parseInt(f,10)}}return f}function a8(g,f,l,k,h){return h.relativeTime(f||1,!!l,g,k)}function bP(t,r,q){var p=b6(Math.abs(t)/1000),o=b6(p/60),n=b6(o/60),m=b6(n/24),l=b6(m/365),k=p<ag.s&&["s",p]||1===o&&["m"]||o<ag.m&&["mm",o]||1===n&&["h"]||n<ag.h&&["hh",n]||1===m&&["d"]||m<=ag.dd&&["dd",m]||m<=ag.dm&&["M"]||m<ag.dy&&["MM",b6(m/30)]||1===l&&["y"]||["yy",l];return k[2]=r,k[3]=t>0,k[4]=q,a8.apply({},k)}function bn(h,g,n){var m,l=n-g,k=n-h.day();return k>l&&(k-=7),l-7>k&&(k+=7),m=bT(h).add("d",k),{week:Math.ceil(m.dayOfYear()/7),year:m.year()}}function aM(l,k,r,q,p){var o,n,m=ba(l,0,1).getUTCDay();return m=0===m?7:m,r=null!=r?r:p,o=p-m+(m>q?7:0)-(p>m?7:0),n=7*(k-1)+(r-p)+o+1,{year:n>0?l:l-1,dayOfYear:n>0?n:aB(l-1)+n}}function aq(a){var g=a._i,f=a._f;return null===g||f===a5&&""===g?bT.invalid({nullInput:!0}):("string"==typeof g&&(a._i=g=bB().preparse(g)),bT.isMoment(g)?(a=aR(g),a._d=new Date(+g._d)):f?aL(f)?bh(a):bk(a):be(a),new aW(a))}function ah(g,f){var k,h;if(1===f.length&&aL(f[0])&&(f=f[0]),!f.length){return bT()}for(k=f[0],h=1;h<f.length;++h){f[h][g](k)&&(k=f[h])}return k}function b2(g,f){var h;return"string"==typeof f&&(f=g.lang().monthsParse(f),"number"!=typeof f)?g:(h=Math.min(g.date(),aD(g.year(),f)),g._d["set"+(g._isUTC?"UTC":"")+"Month"](f,h),g)}function bR(f,c){return f._d["get"+(f._isUTC?"UTC":"")+c]()}function bv(g,f,h){return"Month"===f?b2(g,h):g._d["set"+(g._isUTC?"UTC":"")+f](h)}function aT(f,c){return function(a){return null!=a?(bv(this,f,a),bT.updateOffset(this,c),this):bR(this,f)}}function ar(b){bT.duration.fn[b]=function(){return this._data[b]}}function ai(f,c){bT.duration.fn["as"+f]=function(){return +this/c}}function b4(b){"undefined"==typeof ender&&(bC=ak.moment,ak.moment=b?a2("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",bT):bT)}for(var bT,bC,a0,au="2.7.0",ak="undefined"!=typeof global?global:this,b6=Math.round,bW=0,bJ=1,a6=2,aw=3,am=4,aa=5,bY=6,bM={},b3={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_tzm:null,_isUTC:null,_offset:null,_pf:null,_lang:null},bS="undefined"!=typeof module&&module.exports,bw=/^\/?Date\((\-?\d+)/i,aU=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,at=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,aj=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,b5=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,bU=/\d\d?/,bD=/\d{1,3}/,a1=/\d{1,4}/,av=/[+\-]?\d{1,6}/,al=/\d+/,b7=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,bX=/Z|[\+\-]\d\d:?\d\d/gi,bL=/T/i,a7=/[\+\-]?\d+(\.\d{1,3})?/,ax=/\d{1,2}/,an=/\d/,ad=/\d\d/,bZ=/\d{3}/,bN=/\d{4}/,a9=/[+-]?\d{6}/,az=/[+-]?\d+/,ao=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ae="YYYY-MM-DDTHH:mm:ssZ",b0=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],bF=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],af=/([\+\-]|\d\d)/gi,bO=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000}),bl={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},aJ={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ap={},ag={s:45,m:45,h:22,dd:25,dm:45,dy:345},b1="DDD w W M D d".split(" "),bQ="M D H h m s w W".split(" "),bs={M:function(){return this.month()+1},MMM:function(b){return this.lang().monthsShort(this,b)},MMMM:function(b){return this.lang().months(this,b)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(b){return this.lang().weekdaysMin(this,b)},ddd:function(b){return this.lang().weekdaysShort(this,b)},dddd:function(b){return this.lang().weekdays(this,b)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return aO(this.year()%100,2)},YYYY:function(){return aO(this.year(),4)},YYYYY:function(){return aO(this.year(),5)},YYYYYY:function(){var f=this.year(),c=f>=0?"+":"-";return c+aO(Math.abs(f),6)},gg:function(){return aO(this.weekYear()%100,2)},gggg:function(){return aO(this.weekYear(),4)},ggggg:function(){return aO(this.weekYear(),5)},GG:function(){return aO(this.isoWeekYear()%100,2)},GGGG:function(){return aO(this.isoWeekYear(),4)},GGGGG:function(){return aO(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return aE(this.milliseconds()/100)},SS:function(){return aO(aE(this.milliseconds()/10),2)},SSS:function(){return aO(this.milliseconds(),3)},SSSS:function(){return aO(this.milliseconds(),3)},Z:function(){var f=-this.zone(),c="+";return 0>f&&(f=-f,c="-"),c+aO(aE(f/60),2)+":"+aO(aE(f)%60,2)},ZZ:function(){var f=-this.zone(),c="+";return 0>f&&(f=-f,c="-"),c+aO(aE(f/60),2)+aO(aE(f)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},aQ=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];b1.length;){a0=b1.pop(),bs[a0+"o"]=aY(bs[a0],a0)}for(;bQ.length;){a0=bQ.pop(),bs[a0+a0]=aZ(bs[a0],2)}for(bs.DDDD=aZ(bs.DDD,3),aS(aX.prototype,{set:function(g){var f,h;for(h in g){f=g[h],"function"==typeof f?this[h]=f:this["_"+h]=f}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(b){return this._months[b.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(b){return this._monthsShort[b.month()]},monthsParse:function(g){var f,k,h;for(this._monthsParse||(this._monthsParse=[]),f=0;12>f;f++){if(this._monthsParse[f]||(k=bT.utc([2000,f]),h="^"+this.months(k,"")+"|^"+this.monthsShort(k,""),this._monthsParse[f]=new RegExp(h.replace(".",""),"i")),this._monthsParse[f].test(g)){return f}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(b){return this._weekdays[b.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(b){return this._weekdaysShort[b.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(b){return this._weekdaysMin[b.day()]},weekdaysParse:function(g){var f,k,h;for(this._weekdaysParse||(this._weekdaysParse=[]),f=0;7>f;f++){if(this._weekdaysParse[f]||(k=bT([2000,1]).day(f),h="^"+this.weekdays(k,"")+"|^"+this.weekdaysShort(k,"")+"|^"+this.weekdaysMin(k,""),this._weekdaysParse[f]=new RegExp(h.replace(".",""),"i")),this._weekdaysParse[f].test(g)){return f}}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(f){var c=this._longDateFormat[f];return !c&&this._longDateFormat[f.toUpperCase()]&&(c=this._longDateFormat[f.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(b){return b.slice(1)}),this._longDateFormat[f]=c),c},isPM:function(b){return"p"===(b+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(g,f,h){return g>11?h?"pm":"PM":h?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(g,f){var h=this._calendar[g];return"function"==typeof h?h.apply(f):h},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(g,f,l,k){var h=this._relativeTime[l];return"function"==typeof h?h(g,f,l,k):h.replace(/%d/i,g)},pastFuture:function(g,f){var h=this._relativeTime[g>0?"future":"past"];return"function"==typeof h?h(f):h.replace(/%s/i,f)},ordinal:function(b){return this._ordinal.replace("%d",b)},_ordinal:"%d",preparse:function(b){return b},postformat:function(b){return b},week:function(b){return bn(b,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),bT=function(a,l,k,h){var c;return"boolean"==typeof k&&(h=k,k=a5),c={},c._isAMomentObject=!0,c._i=a,c._f=l,c._l=k,c._strict=h,c._isUTC=!1,c._pf=a3(),aq(c)},bT.suppressDeprecationWarnings=!1,bT.createFromInputFallback=a2("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(b){b._d=new Date(b._i)}),bT.min=function(){var b=[].slice.call(arguments,0);return ah("isBefore",b)},bT.max=function(){var b=[].slice.call(arguments,0);return ah("isAfter",b)},bT.utc=function(a,l,k,h){var c;return"boolean"==typeof k&&(h=k,k=a5),c={},c._isAMomentObject=!0,c._useUTC=!0,c._isUTC=!0,c._l=k,c._i=a,c._f=l,c._strict=h,c._pf=a3(),aq(c).utc()},bT.unix=function(b){return bT(1000*b)},bT.duration=function(k,h){var p,o,n,m=k,l=null;return bT.isDuration(k)?m={ms:k._milliseconds,d:k._days,M:k._months}:"number"==typeof k?(m={},h?m[h]=k:m.milliseconds=k):(l=aU.exec(k))?(p="-"===l[1]?-1:1,m={y:0,d:aE(l[a6])*p,h:aE(l[aw])*p,m:aE(l[am])*p,s:aE(l[aa])*p,ms:aE(l[bY])*p}):(l=at.exec(k))&&(p="-"===l[1]?-1:1,n=function(f){var c=f&&parseFloat(f.replace(",","."));return(isNaN(c)?0:c)*p},m={y:n(l[2]),M:n(l[3]),d:n(l[4]),h:n(l[5]),m:n(l[6]),s:n(l[7]),w:n(l[8])}),o=new aV(m),bT.isDuration(k)&&k.hasOwnProperty("_lang")&&(o._lang=k._lang),o},bT.version=au,bT.defaultFormat=ae,bT.ISO_8601=function(){},bT.momentProperties=b3,bT.updateOffset=function(){},bT.relativeTimeThreshold=function(a,f){return ag[a]===a5?!1:(ag[a]=f,!0)},bT.lang=function(g,f){var h;return g?(f?bG(bI(g),f):null===f?(bE(g),g="en"):bM[g]||bB(g),h=bT.duration.fn._lang=bT.fn._lang=bB(g),h._abbr):bT.fn._lang._abbr},bT.langData=function(b){return b&&b._lang&&b._lang._abbr&&(b=b._lang._abbr),bB(b)},bT.isMoment=function(b){return b instanceof aW||null!=b&&b.hasOwnProperty("_isAMomentObject")},bT.isDuration=function(b){return b instanceof aV},a0=aQ.length-1;a0>=0;--a0){aF(aQ[a0])}bT.normalizeUnits=function(b){return aH(b)},bT.invalid=function(f){var c=bT.utc(0/0);return null!=f?aS(c._pf,f):c._pf.userInvalidated=!0,c},bT.parseZone=function(){return bT.apply(null,arguments).parseZone()},bT.parseTwoDigitYear=function(b){return aE(b)+(aE(b)>68?1900:2000)},aS(bT.fn=aW.prototype,{clone:function(){return bT(this)},valueOf:function(){return +this._d+60000*(this._offset||0)},unix:function(){return Math.floor(+this/1000)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var b=bT(this).utc();return 0<b.year()&&b.year()<=9999?by(b,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):by(b,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var b=this;return[b.year(),b.month(),b.date(),b.hours(),b.minutes(),b.seconds(),b.milliseconds()]},isValid:function(){return bK(this)},isDSTShifted:function(){return this._a?this.isValid()&&aI(this._a,(this._isUTC?bT.utc(this._a):bT(this._a)).toArray())>0:!1},parsingFlags:function(){return aS({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(f){var c=by(this,f||bT.defaultFormat);return this.lang().postformat(c)},add:function(g,f){var h;return h="string"==typeof g&&"string"==typeof f?bT.duration(isNaN(+f)?+g:+f,isNaN(+f)?f:g):"string"==typeof g?bT.duration(+f,g):bT.duration(g,f),aN(this,h,1),this},subtract:function(g,f){var h;return h="string"==typeof g&&"string"==typeof f?bT.duration(isNaN(+f)?+g:+f,isNaN(+f)?f:g):"string"==typeof g?bT.duration(+f,g):bT.duration(g,f),aN(this,h,-1),this},diff:function(k,h,p){var o,n,m=bH(k,this),l=60000*(this.zone()-m.zone());return h=aH(h),"year"===h||"month"===h?(o=43200000*(this.daysInMonth()+m.daysInMonth()),n=12*(this.year()-m.year())+(this.month()-m.month()),n+=(this-bT(this).startOf("month")-(m-bT(m).startOf("month")))/o,n-=60000*(this.zone()-bT(this).startOf("month").zone()-(m.zone()-bT(m).startOf("month").zone()))/o,"year"===h&&(n/=12)):(o=this-m,n="second"===h?o/1000:"minute"===h?o/60000:"hour"===h?o/3600000:"day"===h?(o-l)/86400000:"week"===h?(o-l)/604800000:o),p?n:aP(n)},from:function(f,c){return bT.duration(this.diff(f)).lang(this.lang()._abbr).humanize(!c)},fromNow:function(b){return this.from(bT(),b)},calendar:function(g){var f=g||bT(),l=bH(f,this).startOf("day"),k=this.diff(l,"days",!0),h=-6>k?"sameElse":-1>k?"lastWeek":0>k?"lastDay":1>k?"sameDay":2>k?"nextDay":7>k?"nextWeek":"sameElse";return this.format(this.lang().calendar(h,this))},isLeapYear:function(){return aA(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(f){var c=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=f?(f=bV(f,this.lang()),this.add({d:f-c})):c},month:aT("Month",!0),startOf:function(b){switch(b=aH(b)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===b?this.weekday(0):"isoWeek"===b&&this.isoWeekday(1),"quarter"===b&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(b){return b=aH(b),this.startOf(b).add("isoWeek"===b?"week":b,1).subtract("ms",1)},isAfter:function(f,c){return c="undefined"!=typeof c?c:"millisecond",+this.clone().startOf(c)>+bT(f).startOf(c)},isBefore:function(f,c){return c="undefined"!=typeof c?c:"millisecond",+this.clone().startOf(c)<+bT(f).startOf(c)},isSame:function(f,c){return c=c||"ms",+this.clone().startOf(c)===+bH(f,this).startOf(c)},min:a2("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(b){return b=bT.apply(null,arguments),this>b?this:b}),max:a2("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(b){return b=bT.apply(null,arguments),b>this?this:b}),zone:function(g,f){var h=this._offset||0;return null==g?this._isUTC?h:this._d.getTimezoneOffset():("string"==typeof g&&(g=bt(g)),Math.abs(g)<16&&(g=60*g),this._offset=g,this._isUTC=!0,h!==g&&(!f||this._changeInProgress?aN(this,bT.duration(h-g,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,bT.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(b){return b=b?bT(b).zone():0,(this.zone()-b)%60===0},daysInMonth:function(){return aD(this.year(),this.month())},dayOfYear:function(f){var c=b6((bT(this).startOf("day")-bT(this).startOf("year"))/86400000)+1;return null==f?c:this.add("d",f-c)},quarter:function(b){return null==b?Math.ceil((this.month()+1)/3):this.month(3*(b-1)+this.month()%3)},weekYear:function(f){var c=bn(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==f?c:this.add("y",f-c)},isoWeekYear:function(f){var c=bn(this,1,4).year;return null==f?c:this.add("y",f-c)},week:function(f){var c=this.lang().week(this);return null==f?c:this.add("d",7*(f-c))},isoWeek:function(f){var c=bn(this,1,4).week;return null==f?c:this.add("d",7*(f-c))},weekday:function(f){var c=(this.day()+7-this.lang()._week.dow)%7;return null==f?c:this.add("d",f-c)},isoWeekday:function(b){return null==b?this.day()||7:this.day(this.day()%7?b:b-7)},isoWeeksInYear:function(){return aC(this.year(),1,4)},weeksInYear:function(){var b=this._lang._week;return aC(this.year(),b.dow,b.doy)},get:function(b){return b=aH(b),this[b]()},set:function(f,c){return f=aH(f),"function"==typeof this[f]&&this[f](c),this},lang:function(a){return a===a5?this._lang:(this._lang=bB(a),this)}}),bT.fn.millisecond=bT.fn.milliseconds=aT("Milliseconds",!1),bT.fn.second=bT.fn.seconds=aT("Seconds",!1),bT.fn.minute=bT.fn.minutes=aT("Minutes",!1),bT.fn.hour=bT.fn.hours=aT("Hours",!0),bT.fn.date=aT("Date",!0),bT.fn.dates=a2("dates accessor is deprecated. Use date instead.",aT("Date",!0)),bT.fn.year=aT("FullYear",!0),bT.fn.years=a2("years accessor is deprecated. Use year instead.",aT("FullYear",!0)),bT.fn.days=bT.fn.day,bT.fn.months=bT.fn.month,bT.fn.weeks=bT.fn.week,bT.fn.isoWeeks=bT.fn.isoWeek,bT.fn.quarters=bT.fn.quarter,bT.fn.toJSON=bT.fn.toISOString,aS(bT.duration.fn=aV.prototype,{_bubble:function(){var l,k,r,q,p=this._milliseconds,o=this._days,n=this._months,m=this._data;m.milliseconds=p%1000,l=aP(p/1000),m.seconds=l%60,k=aP(l/60),m.minutes=k%60,r=aP(k/60),m.hours=r%24,o+=aP(r/24),m.days=o%30,n+=aP(o/30),m.months=n%12,q=aP(n/12),m.years=q},weeks:function(){return aP(this.days()/7)},valueOf:function(){return this._milliseconds+86400000*this._days+this._months%12*2592000000+31536000000*aE(this._months/12)},humanize:function(g){var f=+this,h=bP(f,!g,this.lang());return g&&(h=this.lang().pastFuture(f,h)),this.lang().postformat(h)},add:function(g,f){var h=bT.duration(g,f);return this._milliseconds+=h._milliseconds,this._days+=h._days,this._months+=h._months,this._bubble(),this},subtract:function(g,f){var h=bT.duration(g,f);return this._milliseconds-=h._milliseconds,this._days-=h._days,this._months-=h._months,this._bubble(),this},get:function(b){return b=aH(b),this[b.toLowerCase()+"s"]()},as:function(b){return b=aH(b),this["as"+b.charAt(0).toUpperCase()+b.slice(1)+"s"]()},lang:bT.fn.lang,toIsoString:function(){var h=Math.abs(this.years()),g=Math.abs(this.months()),n=Math.abs(this.days()),m=Math.abs(this.hours()),l=Math.abs(this.minutes()),k=Math.abs(this.seconds()+this.milliseconds()/1000);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(h?h+"Y":"")+(g?g+"M":"")+(n?n+"D":"")+(m||l||k?"T":"")+(m?m+"H":"")+(l?l+"M":"")+(k?k+"S":""):"P0D"}});for(a0 in bO){bO.hasOwnProperty(a0)&&(ai(a0,bO[a0]),ar(a0.toLowerCase()))}ai("Weeks",604800000),bT.duration.fn.asMonths=function(){return(+this-31536000000*this.years())/2592000000+12*this.years()},bT.lang("en",{ordinal:function(g){var f=g%10,h=1===aE(g%100/10)?"th":1===f?"st":2===f?"nd":3===f?"rd":"th";return g+h}}),function(b){b(bT)}(function(b){return b.lang("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})}),function(b){b(bT)}(function(g){var f={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},h={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return g.lang("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiem:function(b){return 12>b?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(b){return b.replace(/[-]/g,function(c){return h[c]}).replace(//g,",")},postformat:function(b){return b.replace(/\d/g,function(c){return f[c]}).replace(/,/g,"")},week:{dow:6,doy:12}})}),function(b){b(bT)}(function(g){var f={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},h={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return g.lang("ar",{months:"/  _/ _/ _/ _/ _/ _/ _/ _/ _/  _/  _/  ".split("_"),monthsShort:"/  _/ _/ _/ _/ _/ _/ _/ _/ _/  _/  _/  ".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiem:function(b){return 12>b?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(b){return b.replace(/[-]/g,function(c){return h[c]}).replace(//g,",")},postformat:function(b){return b.replace(/\d/g,function(c){return f[c]}).replace(/,/g,"")},week:{dow:6,doy:12}})}),function(b){b(bT)}(function(f){var c={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};return f.lang("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"birne saniyy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiem:function(b){return 4>b?"gec":12>b?"shr":17>b?"gndz":"axam"},ordinal:function(b){if(0===b){return b+"-nc"}var k=b%10,h=b%100-k,g=b>=100?100:null;return b+(c[k]||c[h]||c[g])},week:{dow:1,doy:7}})}),function(b){b(bT)}(function(b){return b.lang("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinal:function(g){var f=g%10,h=g%100;return 0===g?g+"-":0===h?g+"-":h>10&&20>h?g+"-":1===f?g+"-":2===f?g+"-":7===f||8===f?g+"-":g+"-"},week:{dow:1,doy:7}})}),function(b){b(bT)}(function(g){var f={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},h={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return g.lang("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(b){return b.replace(/[]/g,function(c){return h[c]})},postformat:function(b){return b.replace(/\d/g,function(c){return f[c]})},meridiem:function(b){return 4>b?"":10>b?"":17>b?"":20>b?"":""},week:{dow:0,doy:6}})}),function(b){b(bT)}(function(a){function n(g,f,p){var o={mm:"munutenn",MM:"miz",dd:"devezh"};return g+" "+k(o[p],g)}function m(b){switch(l(b)){case 1:case 3:case 4:case 5:case 9:return b+" bloaz";default:return b+" vloaz"}}function l(b){return b>9?l(b%10):b}function k(f,c){return 2===c?h(f):f}function h(f){var g={m:"v",b:"v",d:"z"};return g[f.charAt(0)]===a5?f:g[f.charAt(0)]+f.substring(1)}return a.lang("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY LT",LLLL:"dddd, D [a viz] MMMM YYYY LT"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno",m:"ur vunutenn",mm:n,h:"un eur",hh:"%d eur",d:"un devezh",dd:n,M:"ur miz",MM:n,y:"ur bloaz",yy:m},ordinal:function(f){var c=1===f?"a":"vet";return f+c},week:{dow:1,doy:4}})}),function(b){b(bT)}(function(f){function c(h,g,l){var k=h+" ";switch(l){case"m":return g?"jedna minuta":"jedne minute";case"mm":return k+=1===h?"minuta":2===h||3===h||4===h?"minute":"minuta";case"h":return g?"jedan sat":"jednog sata";case"hh":return k+=1===h?"sat":2===h||3===h||4===h?"sata":"sati";case"dd":return k+=1===h?"dan":"dana";case"MM":return k+=1===h?"mjesec":2===h||3===h||4===h?"mjeseca":"mjeseci";case"yy":return k+=1===h?"godina":2===h||3===h||4===h?"godine":"godina"}}return f.lang("bs",{months:"januar_februar_mart_april_maj_juni_juli_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:c,mm:c,h:c,hh:c,d:"dan",dd:c,M:"mjesec",MM:c,y:"godinu",yy:c},ordinal:"%d.",week:{dow:1,doy:7}})}),function(b){b(bT)}(function(b){return b.lang("ca",{months:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinal:"%d",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(g){function f(b){return b>1&&5>b&&1!==~~(b/10)}function l(b,p,o,n){var m=b+" ";switch(o){case"s":return p||n?"pr sekund":"pr sekundami";case"m":return p?"minuta":n?"minutu":"minutou";case"mm":return p||n?m+(f(b)?"minuty":"minut"):m+"minutami";break;case"h":return p?"hodina":n?"hodinu":"hodinou";case"hh":return p||n?m+(f(b)?"hodiny":"hodin"):m+"hodinami";break;case"d":return p||n?"den":"dnem";case"dd":return p||n?m+(f(b)?"dny":"dn"):m+"dny";break;case"M":return p||n?"msc":"mscem";case"MM":return p||n?m+(f(b)?"msce":"msc"):m+"msci";break;case"y":return p||n?"rok":"rokem";case"yy":return p||n?m+(f(b)?"roky":"let"):m+"lety"}}var k="leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),h="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_");return g.lang("cs",{months:k,monthsShort:h,monthsParse:function(n,m){var p,o=[];for(p=0;12>p;p++){o[p]=new RegExp("^"+n[p]+"$|^"+m[p]+"$","i")}return o}(k,h),weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H.mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:l,m:l,mm:l,h:l,hh:l,d:l,dd:l,M:l,MM:l,y:l,yy:l},ordinal:"%d.",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], LT",LLLL:"dddd, YYYY [] MMMM [] D[-], LT"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(f){var c=/$/i.exec(f)?"":/$/i.exec(f)?"":"";return f+c},past:"%s ",s:"- ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinal:"%d-",week:{dow:1,doy:7}})}),function(b){b(bT)}(function(b){return b.lang("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinal:function(g){var f=g,k="",h=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];return f>20?k=40===f||50===f||60===f||80===f||100===f?"fed":"ain":f>0&&(k=h[f]),g+k},week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd [d.] D. MMMM YYYY LT"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I gr kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(f){function c(h,g,l){var k={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[h+" Tage",h+" Tagen"],M:["ein Monat","einem Monat"],MM:[h+" Monate",h+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[h+" Jahre",h+" Jahren"]};return g?k[l][0]:k[l][1]}return f.lang("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm [Uhr]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT",sameElse:"L",nextDay:"[Morgen um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gestern um] LT",lastWeek:"[letzten] dddd [um] LT"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:c,mm:"%d Minuten",h:c,hh:"%d Stunden",d:c,dd:c,M:c,MM:c,y:c,yy:c},ordinal:"%d.",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(f){function c(h,g,l){var k={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[h+" Tage",h+" Tagen"],M:["ein Monat","einem Monat"],MM:[h+" Monate",h+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[h+" Jahre",h+" Jahren"]};return g?k[l][0]:k[l][1]}return f.lang("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm [Uhr]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT",sameElse:"L",nextDay:"[Morgen um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gestern um] LT",lastWeek:"[letzten] dddd [um] LT"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:c,mm:"%d Minuten",h:c,hh:"%d Stunden",d:c,dd:c,M:c,MM:c,y:c,yy:c},ordinal:"%d.",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(f,c){return/D/.test(c.substring(0,c.indexOf("MMMM")))?this._monthsGenitiveEl[f.month()]:this._monthsNominativeEl[f.month()]},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(g,f,h){return g>11?h?"":"":h?"":""},longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ ] dddd [{}] LT";default:return"[ ] dddd [{}] LT"}},sameElse:"L"},calendar:function(g,f){var k=this._calendarEl[g],h=f&&f.hours();return"function"==typeof k&&(k=k.apply(f)),k.replace("{}",h%12===1?"":"")},relativeTime:{future:" %s",past:"%s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinal:function(c){return c+""},week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(g){var f=g%10,h=1===~~(g%100/10)?"th":1===f?"st":2===f?"nd":3===f?"rd":"th";return g+h},week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY LT",LLLL:"dddd, D MMMM, YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(g){var f=g%10,h=1===~~(g%100/10)?"th":1===f?"st":2===f?"nd":3===f?"rd":"th";return g+h}})}),function(b){b(bT)}(function(b){return b.lang("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(g){var f=g%10,h=1===~~(g%100/10)?"th":1===f?"st":2===f?"nd":3===f?"rd":"th";return g+h},week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec".split("_"),weekdays:"Dimano_Lundo_Mardo_Merkredo_ado_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_a_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_a_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY LT",LLLL:"dddd, [la] D[-an de] MMMM, YYYY LT"},meridiem:function(g,f,h){return g>11?h?"p.t.m.":"P.T.M.":h?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"anta %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinal:"%da",week:{dow:1,doy:7}})}),function(b){b(bT)}(function(g){var f="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),h="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return g.lang("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(b,c){return/-MMM-/.test(c)?h[b.month()]:f[b.month()]},weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_S".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [del] YYYY",LLL:"D [de] MMMM [del] YYYY LT",LLLL:"dddd, D [de] MMMM [del] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:"%d",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(f){function c(h,g,m,l){var k={s:["mne sekundi","mni sekund","paar sekundit"],m:["he minuti","ks minut"],mm:[h+" minuti",h+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[h+" tunni",h+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[h+" kuu",h+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[h+" aasta",h+" aastat"]};return g?k[m][2]?k[m][2]:k[m][1]:l?k[m][0]:k[m][1]}return f.lang("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:c,m:c,mm:c,h:c,hh:c,d:c,dd:"%d peva",M:c,MM:c,y:c,yy:c},ordinal:"%d.",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] LT",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] LT",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] LT",llll:"ddd, YYYY[ko] MMM D[a] LT"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinal:"%d.",week:{dow:1,doy:7}})}),function(b){b(bT)}(function(g){var f={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},h={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return g.lang("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},meridiem:function(b){return 12>b?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(b){return b.replace(/[-]/g,function(c){return h[c]}).replace(//g,",")},postformat:function(b){return b.replace(/\d/g,function(c){return f[c]}).replace(/,/g,"")},ordinal:"%d",week:{dow:6,doy:12}})}),function(b){b(bT)}(function(g){function f(m,c,p,o){var n="";switch(p){case"s":return o?"muutaman sekunnin":"muutama sekunti";case"m":return o?"minuutin":"minuutti";case"mm":n=o?"minuutin":"minuuttia";break;case"h":return o?"tunnin":"tunti";case"hh":n=o?"tunnin":"tuntia";break;case"d":return o?"pivn":"piv";case"dd":n=o?"pivn":"piv";break;case"M":return o?"kuukauden":"kuukausi";case"MM":n=o?"kuukauden":"kuukautta";break;case"y":return o?"vuoden":"vuosi";case"yy":n=o?"vuoden":"vuotta"}return n=l(m,o)+" "+n}function l(m,c){return 10>m?c?h[m]:k[m]:m}var k="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),h=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",k[7],k[8],k[9]];return g.lang("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] LT",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] LT",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] LT",llll:"ddd, Do MMM YYYY, [klo] LT"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:f,m:f,mm:f,h:f,hh:f,d:f,dd:f,M:f,MM:f,y:f,yy:f},ordinal:"%d.",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D. MMMM, YYYY LT"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnai",MM:"%d mnair",y:"eitt r",yy:"%d r"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(c){return c+(1===c?"er":"")}})}),function(b){b(bT)}(function(b){return b.lang("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(c){return c+(1===c?"er":"")},week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuo_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xu._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_Mrcores_Xoves_Venres_Sbado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mr._Xov._Ven._Sb.".split("_"),weekdaysMin:"Do_Lu_Ma_M_Xo_Ve_S".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(c){return"uns segundos"===c?"nuns segundos":"en "+c},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinal:"%d",week:{dow:1,doy:7}})}),function(b){b(bT)}(function(b){return b.lang("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY LT",LLLL:"dddd, D []MMMM YYYY LT",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:function(c){return 2===c?"":c+" "},d:"",dd:function(c){return 2===c?"":c+" "},M:"",MM:function(c){return 2===c?"":c+" "},y:"",yy:function(c){return 2===c?"":c+" "}}})}),function(b){b(bT)}(function(g){var f={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},h={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return g.lang("hi",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(b){return b.replace(/[]/g,function(c){return h[c]})},postformat:function(b){return b.replace(/\d/g,function(c){return f[c]})},meridiem:function(b){return 4>b?"":10>b?"":17>b?"":20>b?"":""},week:{dow:0,doy:6}})}),function(b){b(bT)}(function(f){function c(h,g,l){var k=h+" ";switch(l){case"m":return g?"jedna minuta":"jedne minute";case"mm":return k+=1===h?"minuta":2===h||3===h||4===h?"minute":"minuta";case"h":return g?"jedan sat":"jednog sata";case"hh":return k+=1===h?"sat":2===h||3===h||4===h?"sata":"sati";case"dd":return k+=1===h?"dan":"dana";case"MM":return k+=1===h?"mjesec":2===h||3===h||4===h?"mjeseca":"mjeseci";case"yy":return k+=1===h?"godina":2===h||3===h||4===h?"godine":"godina"}}return f.lang("hr",{months:"sjeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),monthsShort:"sje._vel._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:c,mm:c,h:c,hh:c,d:"dan",dd:c,M:"mjesec",MM:c,y:"godinu",yy:c},ordinal:"%d.",week:{dow:1,doy:7}})}),function(b){b(bT)}(function(g){function f(m,l,p,o){var n=m;switch(p){case"s":return o||l?"nhny msodperc":"nhny msodperce";case"m":return"egy"+(o||l?" perc":" perce");case"mm":return n+(o||l?" perc":" perce");case"h":return"egy"+(o||l?" ra":" rja");case"hh":return n+(o||l?" ra":" rja");case"d":return"egy"+(o||l?" nap":" napja");case"dd":return n+(o||l?" nap":" napja");case"M":return"egy"+(o||l?" hnap":" hnapja");case"MM":return n+(o||l?" hnap":" hnapja");case"y":return"egy"+(o||l?" v":" ve");case"yy":return n+(o||l?" v":" ve")}return""}function k(b){return(b?"":"[mlt] ")+"["+h[this.day()]+"] LT[-kor]"}var h="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");return g.lang("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D., LT",LLLL:"YYYY. MMMM D., dddd LT"},meridiem:function(m,l,n){return 12>m?n===!0?"de":"DE":n===!0?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return k.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return k.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:f,m:f,mm:f,h:f,hh:f,d:f,dd:f,M:f,MM:f,y:f,yy:f},ordinal:"%d.",week:{dow:1,doy:7}})}),function(b){b(bT)}(function(g){function f(m,l){var o={nominative:"___________".split("_"),accusative:"___________".split("_")},n=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(l)?"accusative":"nominative";return o[n][m.month()]}function k(l){var c="___________".split("_");return c[l.month()]}function h(l){var c="______".split("_");return c[l.day()]}return g.lang("hy-am",{months:f,monthsShort:k,weekdays:h,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., LT",LLLL:"dddd, D MMMM YYYY ., LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiem:function(b){return 4>b?"":12>b?"":17>b?"":""},ordinal:function(l,c){switch(c){case"DDD":case"w":case"W":case"DDDo":return 1===l?l+"-":l+"-";default:return l}},week:{dow:1,doy:7}})}),function(b){b(bT)}(function(b){return b.lang("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiem:function(c){return 11>c?"pagi":15>c?"siang":19>c?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}),function(b){b(bT)}(function(g){function f(b){return b%100===11?!0:b%10===1?!1:!0}function h(b,n,m,l){var k=b+" ";switch(m){case"s":return n||l?"nokkrar sekndur":"nokkrum sekndum";case"m":return n?"mnta":"mntu";case"mm":return f(b)?k+(n||l?"mntur":"mntum"):n?k+"mnta":k+"mntu";case"hh":return f(b)?k+(n||l?"klukkustundir":"klukkustundum"):k+"klukkustund";case"d":return n?"dagur":l?"dag":"degi";case"dd":return f(b)?n?k+"dagar":k+(l?"daga":"dgum"):n?k+"dagur":k+(l?"dag":"degi");case"M":return n?"mnuur":l?"mnu":"mnui";case"MM":return f(b)?n?k+"mnuir":k+(l?"mnui":"mnuum"):n?k+"mnuur":k+(l?"mnu":"mnui");case"y":return n||l?"r":"ri";case"yy":return f(b)?k+(n||l?"r":"rum"):k+(n||l?"r":"ri")}}return g.lang("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd, D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:h,m:h,mm:h,h:"klukkustund",hh:h,d:h,dd:h,M:h,MM:h,y:h,yy:h},ordinal:"%d.",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Luned_Marted_Mercoled_Gioved_Venerd_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"D_L_Ma_Me_G_V_S".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:"[lo scorso] dddd [alle] LT",sameElse:"L"},relativeTime:{future:function(c){return(/^[0-9].+$/.test(c)?"tra":"in")+" "+c},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinal:"%d",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("ja",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahm",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDLT",LLLL:"YYYYMDLT dddd"},meridiem:function(c){return 12>c?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}})}),function(b){b(bT)}(function(g){function f(l,k){var n={nominative:"___________".split("_"),accusative:"___________".split("_")},m=/D[oD] *MMMM?/.test(k)?"accusative":"nominative";return n[m][l.month()]}function h(l,k){var n={nominative:"______".split("_"),accusative:"______".split("_")},m=/(|)/.test(k)?"accusative":"nominative";return n[m][l.day()]}return g.lang("ka",{months:f,monthsShort:"___________".split("_"),weekdays:h,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(b){return/(|||)/.test(b)?b.replace(/$/,""):b+""},past:function(b){return/(||||)/.test(b)?b.replace(/(|)$/," ")://.test(b)?b.replace(/$/," "):void 0},s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinal:function(b){return 0===b?b:1===b?b+"-":20>b||100>=b&&b%20===0||b%100===0?"-"+b:b+"-"},week:{dow:1,doy:7}})}),function(b){b(bT)}(function(b){return b.lang("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h mm",L:"YYYY.MM.DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D LT",LLLL:"YYYY MMMM D dddd LT"},meridiem:function(c){return 12>c?"":""},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",ss:"%d",m:"",mm:"%d",h:"",hh:"%d",d:"",dd:"%d",M:"",MM:"%d",y:"",yy:"%d"},ordinal:"%d",meridiemParse:/(|)/,isPM:function(c){return""===c}})}),function(b){b(bT)}(function(k){function h(g,f,r){var q={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],dd:[g+" Deeg",g+" Deeg"],M:["ee Mount","engem Mount"],MM:[g+" Mint",g+" Mint"],y:["ee Joer","engem Joer"],yy:[g+" Joer",g+" Joer"]};return f?q[r][0]:q[r][1]}function p(f){var c=f.substr(0,f.indexOf(" "));return l(c)?"a "+f:"an "+f}function o(f){var c=f.substr(0,f.indexOf(" "));return l(c)?"viru "+f:"virun "+f}function n(){var b=this.format("d");return m(b)?"[Leschte] dddd [um] LT":"[Leschten] dddd [um] LT"}function m(b){switch(b=parseInt(b,10)){case 0:case 1:case 3:case 5:case 6:return !0;default:return !1}}function l(g){if(g=parseInt(g,10),isNaN(g)){return !1}if(0>g){return !0}if(10>g){return g>=4&&7>=g?!0:!1}if(100>g){var f=g%10,q=g/10;return l(0===f?q:f)}if(10000>g){for(;g>=10;){g/=10}return l(g)}return g/=1000,l(g)}return k.lang("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:n},relativeTime:{future:p,past:o,s:"e puer Sekonnen",m:h,mm:"%d Minutten",h:h,hh:"%d Stonnen",d:h,dd:h,M:h,MM:h,y:h,yy:h},ordinal:"%d.",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(t){function r(g,f,v,h){return f?"kelios sekunds":h?"keli sekundi":"kelias sekundes"}function q(g,f,v,h){return f?o(v)[0]:h?o(v)[1]:o(v)[2]}function p(b){return b%10===0||b>10&&20>b}function o(b){return l[b].split("_")}function n(v,c,A,z){var w=v+" ";return 1===v?w+q(v,c,A[0],z):c?w+(p(v)?o(A)[1]:o(A)[0]):z?w+o(A)[1]:w+(p(v)?o(A)[1]:o(A)[2])}function m(g,f){var v=-1===f.indexOf("dddd HH:mm"),h=k[g.day()];return v?h:h.substring(0,h.length-2)+""}var l={m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"},k="sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_");return t.lang("lt",{months:"sausio_vasario_kovo_balandio_gegus_birlio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:m,weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], LT [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, LT [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], LT [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, LT [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:r,m:q,mm:n,h:q,hh:n,d:q,dd:n,M:q,MM:n,y:q,yy:n},ordinal:function(b){return b+"-oji"},week:{dow:1,doy:4}})}),function(b){b(bT)}(function(g){function f(m,l,o){var n=m.split("_");return o?l%10===1&&11!==l?n[2]:n[3]:l%10===1&&11!==l?n[0]:n[1]}function k(b,m,l){return b+" "+f(h[l],b,m)}var h={mm:"minti_mintes_minte_mintes",hh:"stundu_stundas_stunda_stundas",dd:"dienu_dienas_diena_dienas",MM:"mnesi_mneus_mnesis_mnei",yy:"gadu_gadus_gads_gadi"};return g.lang("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, LT",LLLL:"YYYY. [gada] D. MMMM, dddd, LT"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"%s vlk",past:"%s agrk",s:"daas sekundes",m:"minti",mm:k,h:"stundu",hh:k,d:"dienu",dd:k,M:"mnesi",MM:k,y:"gadu",yy:k},ordinal:"%d.",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinal:function(g){var f=g%10,h=g%100;return 0===g?g+"-":0===h?g+"-":h>10&&20>h?g+"-":1===f?g+"-":2===f?g+"-":7===f||8===f?g+"-":g+"-"},week:{dow:1,doy:7}})}),function(b){b(bT)}(function(b){return b.lang("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiem:function(c){return 4>c?"":12>c?"":17>c?" ":20>c?"":""}})}),function(b){b(bT)}(function(g){var f={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},h={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return g.lang("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(b){return b.replace(/[]/g,function(c){return h[c]})},postformat:function(b){return b.replace(/\d/g,function(c){return f[c]})},meridiem:function(b){return 4>b?"":10>b?"":17>b?"":20>b?"":""},week:{dow:0,doy:6}})}),function(b){b(bT)}(function(b){return b.lang("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiem:function(c){return 11>c?"pagi":15>c?"tengahari":19>c?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}),function(b){b(bT)}(function(b){return b.lang("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"H.mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(g){var f={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},h={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return g.lang("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._.__._._._.".split("_"),longDateFormat:{LT:"A h:mm ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},preparse:function(b){return b.replace(/[]/g,function(c){return h[c]})},postformat:function(b){return b.replace(/\d/g,function(c){return f[c]})},meridiem:function(b){return 3>b?"":10>b?"":15>b?"":18>b?"":20>b?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})}),function(b){b(bT)}(function(g){var f="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),h="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");return g.lang("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(b,c){return/-MMM-/.test(c)?h[b.month()]:f[b.month()]},weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},ordinal:function(b){return b+(1===b||8===b||b>=20?"ste":"de")},week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mn_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m_ty_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(g){function f(b){return 5>b%10&&b%10>1&&~~(b/10)%10!==1}function l(b,o,n){var m=b+" ";switch(n){case"m":return o?"minuta":"minut";case"mm":return m+(f(b)?"minuty":"minut");case"h":return o?"godzina":"godzin";case"hh":return m+(f(b)?"godziny":"godzin");case"MM":return m+(f(b)?"miesice":"miesicy");case"yy":return m+(f(b)?"lata":"lat")}}var k="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),h="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_");return g.lang("pl",{months:function(m,c){return/D MMMM/.test(c)?h[m.month()]:k[m.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"nie_pon_wt_r_czw_pt_sb".split("_"),weekdaysMin:"N_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:l,mm:l,h:l,hh:l,d:"1 dzie",dd:"%d dni",M:"miesic",MM:l,y:"rok",yy:l},ordinal:"%d.",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("pt-br",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sb".split("_"),weekdaysMin:"dom_2_3_4_5_6_sb".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] LT",LLLL:"dddd, D [de] MMMM [de] YYYY [s] LT"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrs",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinal:"%d"})}),function(b){b(bT)}(function(b){return b.lang("pt",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sb".split("_"),weekdaysMin:"dom_2_3_4_5_6_sb".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinal:"%d",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(f){function c(h,g,m){var l={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},k=" ";return(h%100>=20||h>=100&&h%100===0)&&(k=" de "),h+k+l[m]}return f.lang("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",m:"un minut",mm:c,h:"o or",hh:c,d:"o zi",dd:c,M:"o lun",MM:c,y:"un an",yy:c},week:{dow:1,doy:7}})}),function(b){b(bT)}(function(h){function g(o,f){var p=o.split("_");return f%10===1&&f%100!==11?p[0]:f%10>=2&&4>=f%10&&(10>f%100||f%100>=20)?p[1]:p[2]}function n(b,p,o){var f={mm:p?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"};return"m"===o?p?"":"":b+" "+g(f[o],+b)}function m(o,f){var q={nominative:"___________".split("_"),accusative:"___________".split("_")},p=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(f)?"accusative":"nominative";return q[p][o.month()]}function l(o,f){var q={nominative:"___________".split("_"),accusative:"___________".split("_")},p=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(f)?"accusative":"nominative";return q[p][o.month()]}function k(o,f){var q={nominative:"______".split("_"),accusative:"______".split("_")},p=/\[ ?[] ?(?:|)? ?\] ?dddd/.test(f)?"accusative":"nominative";return q[p][o.day()]}return h.lang("ru",{months:m,monthsShort:l,weekdays:k,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:[/^/i,/^/i,/^/i,/^/i,/^[|]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., LT",LLLL:"dddd, D MMMM YYYY ., LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:"",hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/i,isPM:function(b){return/^(|)$/.test(b)},meridiem:function(b){return 4>b?"":12>b?"":17>b?"":""},ordinal:function(f,c){switch(c){case"M":case"d":case"DDD":return f+"-";case"D":return f+"-";case"w":case"W":return f+"-";default:return f}},week:{dow:1,doy:7}})}),function(b){b(bT)}(function(g){function f(b){return b>1&&5>b}function l(b,p,o,n){var m=b+" ";switch(o){case"s":return p||n?"pr seknd":"pr sekundami";case"m":return p?"minta":n?"mintu":"mintou";case"mm":return p||n?m+(f(b)?"minty":"mint"):m+"mintami";break;case"h":return p?"hodina":n?"hodinu":"hodinou";case"hh":return p||n?m+(f(b)?"hodiny":"hodn"):m+"hodinami";break;case"d":return p||n?"de":"dom";case"dd":return p||n?m+(f(b)?"dni":"dn"):m+"dami";break;case"M":return p||n?"mesiac":"mesiacom";case"MM":return p||n?m+(f(b)?"mesiace":"mesiacov"):m+"mesiacmi";break;case"y":return p||n?"rok":"rokom";case"yy":return p||n?m+(f(b)?"roky":"rokov"):m+"rokmi"}}var k="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),h="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");return g.lang("sk",{months:k,monthsShort:h,monthsParse:function(n,m){var p,o=[];for(p=0;12>p;p++){o[p]=new RegExp("^"+n[p]+"$|^"+m[p]+"$","i")}return o}(k,h),weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 4:case 5:return"[minul] dddd [o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:l,m:l,mm:l,h:l,hh:l,d:l,dd:l,M:l,MM:l,y:l,yy:l},ordinal:"%d.",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(f){function c(h,g,l){var k=h+" ";switch(l){case"m":return g?"ena minuta":"eno minuto";case"mm":return k+=1===h?"minuta":2===h?"minuti":3===h||4===h?"minute":"minut";case"h":return g?"ena ura":"eno uro";case"hh":return k+=1===h?"ura":2===h?"uri":3===h||4===h?"ure":"ur";case"dd":return k+=1===h?"dan":"dni";case"MM":return k+=1===h?"mesec":2===h?"meseca":3===h||4===h?"mesece":"mesecev";case"yy":return k+=1===h?"leto":2===h?"leti":3===h||4===h?"leta":"let"}}return f.lang("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[prejnja] dddd [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"%s nazaj",s:"nekaj sekund",m:c,mm:c,h:c,hh:c,d:"en dan",dd:c,M:"en mesec",MM:c,y:"eno leto",yy:c},ordinal:"%d.",week:{dow:1,doy:7}})}),function(b){b(bT)}(function(b){return b.lang("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),meridiem:function(c){return 12>c?"PD":"MD"},longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(b){b(bT)}(function(f){var c={words:{m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(h,g){return 1===h?g[0]:h>=2&&4>=h?g[1]:g[2]},translate:function(b,k,h){var g=c.words[h];return 1===h.length?k?g[0]:g[1]:b+" "+c.correctGrammaticalCase(b,g)}};return f.lang("sr-cyrl",{months:["","","","","","","","","","","",""],monthsShort:[".",".",".",".","","","",".",".",".",".","."],weekdays:["","","","","","",""],weekdaysShort:[".",".",".",".",".",".","."],weekdaysMin:["","","","","","",""],longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){var b=["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"];return b[this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:c.translate,mm:c.translate,h:c.translate,hh:c.translate,d:"",dd:c.translate,M:"",MM:c.translate,y:"",yy:c.translate},ordinal:"%d.",week:{dow:1,doy:7}})}),function(b){b(bT)}(function(f){var c={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(h,g){return 1===h?g[0]:h>=2&&4>=h?g[1]:g[2]},translate:function(b,k,h){var g=c.words[h];return 1===h.length?k?g[0]:g[1]:b+" "+c.correctGrammaticalCase(b,g)}};return f.lang("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","etvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sre.","et.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","e","pe","su"],longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){var b=["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"];return b[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:c.translate,mm:c.translate,h:c.translate,hh:c.translate,d:"dan",dd:c.translate,M:"mesec",MM:c.translate,y:"godinu",yy:c.translate},ordinal:"%d.",week:{dow:1,doy:7}})}),function(b){b(bT)}(function(b){return b.lang("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"dddd LT",lastWeek:"[Frra] dddd[en] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},ordinal:function(g){var f=g%10,h=1===~~(g%100/10)?"e":1===f?"a":2===f?"a":3===f?"e":"e";return g+h},week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinal:function(c){return c+""},meridiem:function(c){return c>=6&&10>=c?" ":c>=10&&14>=c?" ":c>=14&&18>=c?" ":c>=18&&20>=c?" ":c>=20&&24>=c?" ":c>=0&&6>=c?" ":void 0},week:{dow:0,doy:6}})}),function(b){b(bT)}(function(b){return b.lang("th",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),longDateFormat:{LT:"H  m ",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  LT",LLLL:"dddd D MMMM YYYY  LT"},meridiem:function(c){return 12>c?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}),function(b){b(bT)}(function(b){return b.lang("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM DD, YYYY LT"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinal:function(c){return c},week:{dow:1,doy:4}})}),function(b){b(bT)}(function(f){var c={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};return f.lang("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinal:function(b){if(0===b){return b+"'nc"}var k=b%10,h=b%100-k,g=b>=100?100:null;return b+(c[k]||c[h]||c[g])},week:{dow:1,doy:7}})}),function(b){b(bT)}(function(b){return b.lang("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}),function(b){b(bT)}(function(b){return b.lang("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})}),function(b){b(bT)}(function(h){function g(o,f){var p=o.split("_");return f%10===1&&f%100!==11?p[0]:f%10>=2&&4>=f%10&&(10>f%100||f%100>=20)?p[1]:p[2]}function n(b,p,o){var f={mm:"__",hh:"__",dd:"__",MM:"__",yy:"__"};return"m"===o?p?"":"":"h"===o?p?"":"":b+" "+g(f[o],+b)}function m(o,f){var q={nominative:"___________".split("_"),accusative:"___________".split("_")},p=/D[oD]? *MMMM?/.test(f)?"accusative":"nominative";return q[p][o.month()]}function l(o,f){var q={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")},p=/(\[[]\]) ?dddd/.test(f)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(f)?"genitive":"nominative";return q[p][o.day()]}function k(b){return function(){return b+""+(11===this.hours()?"":"")+"] LT"}}return h.lang("uk",{months:m,monthsShort:"___________".split("_"),weekdays:l,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., LT",LLLL:"dddd, D MMMM YYYY ., LT"},calendar:{sameDay:k("[ "),nextDay:k("[ "),lastDay:k("[ "),nextWeek:k("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return k("[] dddd [").call(this);case 1:case 2:case 4:return k("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:"",hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiem:function(b){return 4>b?"":12>b?"":17>b?"":""},ordinal:function(f,c){switch(c){case"M":case"d":case"DDD":case"w":case"W":return f+"-";case"D":return f+"-";default:return f}},week:{dow:1,doy:7}})}),function(b){b(bT)}(function(b){return b.lang("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"D MMMM YYYY, dddd LT"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})}),function(b){b(bT)}(function(b){return b.lang("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY LT",LLLL:"dddd, D MMMM [nm] YYYY LT",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun ri lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},ordinal:function(c){return c},week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",L:"YYYY-MM-DD",LL:"YYYYMMMD",LLL:"YYYYMMMDLT",LLLL:"YYYYMMMDddddLT",l:"YYYY-MM-DD",ll:"YYYYMMMD",lll:"YYYYMMMDLT",llll:"YYYYMMMDddddLT"},meridiem:function(g,f){var h=100*g+f;return 600>h?"":900>h?"":1130>h?"":1230>h?"":1800>h?"":""},calendar:{sameDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},nextDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},lastDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},nextWeek:function(){var a,f;return a=b().startOf("week"),f=this.unix()-a.unix()>=604800?"[]":"[]",0===this.minutes()?f+"dddAh":f+"dddAhmm"},lastWeek:function(){var a,f;return a=b().startOf("week"),f=this.unix()<a.unix()?"[]":"[]",0===this.minutes()?f+"dddAh":f+"dddAhmm"},sameElse:"LL"},ordinal:function(f,c){switch(c){case"d":case"D":case"DDD":return f+"";case"M":return f+"";case"w":case"W":return f+"";default:return f}},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"},week:{dow:1,doy:4}})}),function(b){b(bT)}(function(b){return b.lang("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMDLT",LLLL:"YYYYMMMDddddLT",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMDLT",llll:"YYYYMMMDddddLT"},meridiem:function(g,f){var h=100*g+f;return 900>h?"":1130>h?"":1230>h?"":1800>h?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},ordinal:function(f,c){switch(c){case"d":case"D":case"DDD":return f+"";case"M":return f+"";case"w":case"W":return f+"";default:return f}},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d",h:"",hh:"%d",d:"",dd:"%d",M:"",MM:"%d",y:"",yy:"%d"}})}),bT.lang("en"),bS?module.exports=bT:"function"==typeof define&&define.amd?(define("moment",function(g,f,h){return h.config&&h.config()&&h.config().noGlobal===!0&&(ak.moment=bC),bT}),b4(!0)):b4()}).call(this);var UI=(typeof BF_UI=="undefined")?(typeof MobileUI=="undefined"?new Object():MobileUI):BF_UI;UI.dateFormat={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],monthsLong:["January","February","March","April","May","June","July","August","September","October","November","December"],system_dateformats:["X","ddd MMM DD HH:mm:ss ZZ YYYY","YYYY-MM-DD HH:mm:ss ZZ"],supported_langs:["en","fr","pt","es"],momentjs_settings:{en:{longDateFormat:{"tweet date format":"h:mm A - DD MMM YY","UTC date format":"MMMM D, YYYY, [at] H:mm:ss UTC","breaking date format":"h:mm a, MMMM D","post date format":"MMMM D, YYYY, [at] h:mm a","update date format":"MMMM D, YYYY, [at] h:mm a"},meridiem:function(a,c,f){var b={am:"a.m.",AM:"AM",pm:"p.m.",PM:"PM"};if(a>=12){return f?b.pm:b.PM}else{return f?b.am:b.AM}}},non_english:{longDateFormat:{},meridiem:function(a,c,f){var b={am:"a.m.",AM:"AM",pm:"p.m.",PM:"PM"};if(a>=12){return f?b.pm:b.PM}else{return f?b.am:b.AM}}}},init:function(){setTimeout(function(){if(typeof BF_STATIC!=="undefined"&&typeof BF_STATIC.timequeue!=="undefined"){bfjs.universal_each(BF_STATIC.timequeue,function(a){a()})}},0)},get_formatted_date:function(k,b){if(BF_STATIC.bf_test_mode){localStorage.setItem((bfjs.isMobile()?"mobile_":"")+(b?b+"_":"")+"posted_date",k)}b=(b=="correction")?"update":b;moment.lang("en");k=moment(k,UI.dateFormat.system_dateformats).format();if(moment(k).isValid()){var f=UI.dateFormat.momentjs_settings.en;f.months=(b=="UTC")?UI.dateFormat.monthsLong:UI.dateFormat.months;moment.lang("en",f);if(local.non_english&&UI.dateFormat.supported_langs.indexOf(BF_STATIC.language)>-1){f=UI.dateFormat.momentjs_settings.non_english;f.longDateFormat={"tweet date format":local.t("tweet date format"),"UTC date format":local.t("UTC date format"),"breaking date format":local.t("breaking date format"),"post date format":local.t("post date format"),"update date format":local.t("update date format")};moment.lang(BF_STATIC.language,f)}var h=UI.dateFormat.supported_langs.indexOf(BF_STATIC.language)>-1?BF_STATIC.language:"en";h=["tweet","UTC","breaking"].indexOf(b)==-1?h:"en";moment.lang(h);var a=moment.langData();var c=("UTC"==b)?moment(k).utc():moment(k);var g=a.longDateFormat((b||"post")+" date format");return c.format(g)}return k}};if(typeof bfjs=="object"){bfjs.onPageLoad(UI.dateFormat.init)}(function(){var B="0.4.8",n=window.jQuery||window.$||(window.$={}),h={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(O){return String(O).evalJSON()}||n.parseJSON||n.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||n.toJSON};if(!("parse" in h)||!("stringify" in h)){throw new Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page")}var q={__jstorage_meta:{CRC32:{}}},c={jStorage:"{}"},H=null,t=0,m=false,o={},L=false,I=0,A={},G=+new Date(),J,K={isXML:function(P){var O=(P?P.ownerDocument||P:0).documentElement;return O?O.nodeName!=="HTML":false},encode:function(P){if(!this.isXML(P)){return false}try{return new XMLSerializer().serializeToString(P)}catch(O){try{return P.xml}catch(Q){}}return false},decode:function(P){var O=("DOMParser" in window&&(new DOMParser()).parseFromString)||(window.ActiveXObject&&function(R){var S=new ActiveXObject("Microsoft.XMLDOM");S.async="false";S.loadXML(R);return S}),Q;if(!O){return false}Q=O.call("DOMParser" in window&&(new DOMParser())||window,P,"text/xml");return this.isXML(Q)?Q:false}};function w(){var O=false;if("localStorage" in window){try{window.localStorage.setItem("_tmptest","tmpval");O=true;window.localStorage.removeItem("_tmptest")}catch(P){}}if(O){try{if(window.localStorage){c=window.localStorage;m="localStorage";I=c.jStorage_update}}catch(V){}}else{if("globalStorage" in window){try{if(window.globalStorage){if(window.location.hostname=="localhost"){c=window.globalStorage["localhost.localdomain"]}else{c=window.globalStorage[window.location.hostname]}m="globalStorage";I=c.jStorage_update}}catch(U){}}else{H=document.createElement("link");if(H.addBehavior){H.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(H);try{H.load("jStorage")}catch(T){H.setAttribute("jStorage","{}");H.save("jStorage");H.load("jStorage")}var S="{}";try{S=H.getAttribute("jStorage")}catch(R){}try{I=H.getAttribute("jStorage_update")}catch(Q){}c.jStorage=S;m="userDataBehavior"}else{H=null;return}}}p();b();F();D();if("addEventListener" in window){window.addEventListener("pageshow",function(W){if(W.persisted){v()}},false)}}function g(){var Q="{}";if(m=="userDataBehavior"){H.load("jStorage");try{Q=H.getAttribute("jStorage")}catch(P){}try{I=H.getAttribute("jStorage_update")}catch(O){}c.jStorage=Q}p();b();D()}function F(){if(m=="localStorage"||m=="globalStorage"){if("addEventListener" in window){window.addEventListener("storage",v,false)}else{document.attachEvent("onstorage",v)}}else{if(m=="userDataBehavior"){setInterval(v,1000)}}}function v(){var O;clearTimeout(L);L=setTimeout(function(){if(m=="localStorage"||m=="globalStorage"){O=c.jStorage_update}else{if(m=="userDataBehavior"){H.load("jStorage");try{O=H.getAttribute("jStorage_update")}catch(P){}}}if(O&&O!=I){I=O;l()}},25)}function l(){var O=h.parse(h.stringify(q.__jstorage_meta.CRC32)),S;g();S=h.parse(h.stringify(q.__jstorage_meta.CRC32));var Q,P=[],R=[];for(Q in O){if(O.hasOwnProperty(Q)){if(!S[Q]){R.push(Q);continue}if(O[Q]!=S[Q]&&String(O[Q]).substr(0,2)=="2."){P.push(Q)}}}for(Q in S){if(S.hasOwnProperty(Q)){if(!O[Q]){P.push(Q)}}}N(P,"updated");N(R,"deleted")}function N(T,U){T=[].concat(T||[]);if(U=="flushed"){T=[];for(var S in o){if(o.hasOwnProperty(S)){T.push(S)}}U="deleted"}for(var R=0,O=T.length;R<O;R++){if(o[T[R]]){for(var Q=0,P=o[T[R]].length;Q<P;Q++){o[T[R]][Q](T[R],U)}}if(o["*"]){for(var Q=0,P=o["*"].length;Q<P;Q++){o["*"][Q](T[R],U)}}}}function r(){var P=(+new Date()).toString();if(m=="localStorage"||m=="globalStorage"){try{c.jStorage_update=P}catch(O){m=false}}else{if(m=="userDataBehavior"){H.setAttribute("jStorage_update",P);H.save("jStorage")}}v()}function p(){if(c.jStorage){try{q=h.parse(String(c.jStorage))}catch(O){c.jStorage="{}"}}else{c.jStorage="{}"}t=c.jStorage?String(c.jStorage).length:0;if(!q.__jstorage_meta){q.__jstorage_meta={}}if(!q.__jstorage_meta.CRC32){q.__jstorage_meta.CRC32={}}}function z(){a();try{c.jStorage=h.stringify(q);if(H){H.setAttribute("jStorage",c.jStorage);H.save("jStorage")}t=c.jStorage?String(c.jStorage).length:0}catch(O){}}function E(O){if(typeof O!="string"&&typeof O!="number"){throw new TypeError("Key name must be string or numeric")}if(O=="__jstorage_meta"){throw new TypeError("Reserved key name")}return true}function b(){var U,P,S,Q,R=Infinity,T=false,O=[];clearTimeout(J);if(!q.__jstorage_meta||typeof q.__jstorage_meta.TTL!="object"){return}U=+new Date();S=q.__jstorage_meta.TTL;Q=q.__jstorage_meta.CRC32;for(P in S){if(S.hasOwnProperty(P)){if(S[P]<=U){delete S[P];delete Q[P];delete q[P];T=true;O.push(P)}else{if(S[P]<R){R=S[P]}}}}if(R!=Infinity){J=setTimeout(b,R-U)}if(T){z();r();N(O,"deleted")}}function D(){var R,P;if(!q.__jstorage_meta.PubSub){return}var O,Q=G;for(R=P=q.__jstorage_meta.PubSub.length-1;R>=0;R--){O=q.__jstorage_meta.PubSub[R];if(O[0]>G){Q=O[0];f(O[1],O[2])}}G=Q}function f(Q,S){if(A[Q]){for(var P=0,O=A[Q].length;P<O;P++){try{A[Q][P](Q,h.parse(h.stringify(S)))}catch(R){}}}}function a(){if(!q.__jstorage_meta.PubSub){return}var Q=+new Date()-2000;for(var P=0,O=q.__jstorage_meta.PubSub.length;P<O;P++){if(q.__jstorage_meta.PubSub[P][0]<=Q){q.__jstorage_meta.PubSub.splice(P,q.__jstorage_meta.PubSub.length-P);break}}if(!q.__jstorage_meta.PubSub.length){delete q.__jstorage_meta.PubSub}}function k(O,P){if(!q.__jstorage_meta){q.__jstorage_meta={}}if(!q.__jstorage_meta.PubSub){q.__jstorage_meta.PubSub=[]}q.__jstorage_meta.PubSub.unshift([+new Date,O,P]);z();r()}function M(T,P){var O=T.length,S=P^O,R=0,Q;while(O>=4){Q=((T.charCodeAt(R)&255))|((T.charCodeAt(++R)&255)<<8)|((T.charCodeAt(++R)&255)<<16)|((T.charCodeAt(++R)&255)<<24);Q=(((Q&65535)*1540483477)+((((Q>>>16)*1540483477)&65535)<<16));Q^=Q>>>24;Q=(((Q&65535)*1540483477)+((((Q>>>16)*1540483477)&65535)<<16));S=(((S&65535)*1540483477)+((((S>>>16)*1540483477)&65535)<<16))^Q;O-=4;++R}switch(O){case 3:S^=(T.charCodeAt(R+2)&255)<<16;case 2:S^=(T.charCodeAt(R+1)&255)<<8;case 1:S^=(T.charCodeAt(R)&255);S=(((S&65535)*1540483477)+((((S>>>16)*1540483477)&65535)<<16))}S^=S>>>13;S=(((S&65535)*1540483477)+((((S>>>16)*1540483477)&65535)<<16));S^=S>>>15;return S>>>0}n.jStorage={version:B,set:function(P,Q,O){E(P);O=O||{};if(typeof Q=="undefined"){this.deleteKey(P);return Q}if(K.isXML(Q)){Q={_is_xml:true,xml:K.encode(Q)}}else{if(typeof Q=="function"){return undefined}else{if(Q&&typeof Q=="object"){Q=h.parse(h.stringify(Q))}}}q[P]=Q;q.__jstorage_meta.CRC32[P]="2."+M(h.stringify(Q),2538058380);this.setTTL(P,O.TTL||0);N(P,"updated");return Q},get:function(O,P){E(O);if(O in q){if(q[O]&&typeof q[O]=="object"&&q[O]._is_xml){return K.decode(q[O].xml)}else{return q[O]}}return typeof(P)=="undefined"?null:P},deleteKey:function(O){E(O);if(O in q){delete q[O];if(typeof q.__jstorage_meta.TTL=="object"&&O in q.__jstorage_meta.TTL){delete q.__jstorage_meta.TTL[O]}delete q.__jstorage_meta.CRC32[O];z();r();N(O,"deleted");return true}return false},setTTL:function(P,O){var Q=+new Date();E(P);O=Number(O)||0;if(P in q){if(!q.__jstorage_meta.TTL){q.__jstorage_meta.TTL={}}if(O>0){q.__jstorage_meta.TTL[P]=Q+O}else{delete q.__jstorage_meta.TTL[P]}z();b();r();return true}return false},getTTL:function(P){var Q=+new Date(),O;E(P);if(P in q&&q.__jstorage_meta.TTL&&q.__jstorage_meta.TTL[P]){O=q.__jstorage_meta.TTL[P]-Q;return O||0}return 0},flush:function(){q={__jstorage_meta:{CRC32:{}}};z();r();N(null,"flushed");return true},storageObj:function(){function O(){}O.prototype=q;return new O()},index:function(){var O=[],P;for(P in q){if(q.hasOwnProperty(P)&&P!="__jstorage_meta"){O.push(P)}}return O},storageSize:function(){return t},currentBackend:function(){return m},storageAvailable:function(){return !!m},listenKeyChange:function(O,P){E(O);if(!o[O]){o[O]=[]}o[O].push(P)},stopListening:function(P,Q){E(P);if(!o[P]){return}if(!Q){delete o[P];return}for(var O=o[P].length-1;O>=0;O--){if(o[P][O]==Q){o[P].splice(O,1)}}},subscribe:function(O,P){O=(O||"").toString();if(!O){throw new TypeError("Channel not defined")}if(!A[O]){A[O]=[]}A[O].push(P)},publish:function(O,P){O=(O||"").toString();if(!O){throw new TypeError("Channel not defined")}k(O,P)},reInit:function(){g()},noConflict:function(O){delete window.$.jStorage;if(O){window.jStorage=this}return this}};w()})();var BF_EmbedVideo=function(){this.agent=navigator.userAgent.toLowerCase();this.is_mobile=this.agent.match(/iphone|ipod|android|ipad/);this.index=1;this._init=function(){universal_dom.assign_handler({bucket:"video",handler:embed_video.load_video})};this.init=function(){if(typeof yt_player!="undefined"||BF_STATIC.tt_page=="Videos"){embed_video._init()}else{new PeriodicalExecuter(function(pe){if(typeof yt_player!="undefined"){pe.stop();console.info("player is here");embed_video._init()}},0.5)}};this.load_video=function(e,scroll){var data,video,vd=new bf2_terminal_Video,src_link,video_element;try{data=JSON.parse(e.getAttribute("rel:bf_bucket_data"))}catch(err){console.error(err)}video=scroll!=true?data.video:data.progload_video;src_link=video.url;video_element=$("video_buzz_element_"+video.id);vd.detect_type(video.url);if(vd.type&&vd.type!=null){src_link=vd.src_link}var so=BF_initSwfObject(src_link,{width:video.width,height:video.height});if(so.flowplayer){if(size=="sidebar"||size=="tiny"){so.hide_controls=true}if(size=="big"){so.height=360}else{if(size=="sidebar"){so.height=189}else{if(size=="small"){so.height=183}else{if(size=="tiny"){so.height=141}}}}if(is_mobile()){so.use_html5=true}so.write(video_element)}else{if(is_mobile()&&vd.type=="buzzfeed"){if(is_mobile()){so.use_html5=true}so.write(video_element)}else{if((!is_mobile()&&so.installedVer&&so.installedVer.major<8)||(is_mobile()&&vd.type!="youtube")){$(video_element).addClassName("video-embed-noflash");$(video_element).style.height="340px"}else{if(vd.type=="youtube"){if(isIE8()||isIE7()){Event.observe(window,"beforeunload",function(){$$("object").each(function(vidPlayer){vidPlayer.remove()})},false);if(isIE8()){so.addParam("wmode","opaque");$(video_element).fire("video:dfp",{src:src_link})}so.addParam("wmode","opaque");so.write($(video_element))}else{var start_time=vd.start_time?"&start="+vd.start_time:"";var autoplay=0,showinfo=1;if(typeof(window.autoplay)!="undefined"){autoplay=1}if(BF_STATIC.tt_page=="Videos"){showinfo=0}var you_tube_markup="";if(video.meta_overlay){you_tube_markup='<div style="position:relative;" id="video_wrapper_'+video.id+'"><iframe id="yt_'+video.id+'" type="text/html" allowscriptaccess="always" allowfullscreen="true" width="'+video.width+'" height="'+video.height+'" src="https://www.youtube.com/embed/'+embed_video.get_youtube_video_id(video.url)+"?version=3&hl=en&fs=1&enablejsapi=1&origin="+window.location.protocol+"//"+window.location.host+"&playerapiid=embed_"+video.id+"&autoplay="+autoplay+"&showinfo="+showinfo+"&wmode=opaque"+start_time+'" bgcolor="#000" class="ytvideo"></iframe></div>';var vd_overlays=eval("("+video.meta_overlay+")");yt_player.init(video.id,vd_overlays)}else{var you_tube_tmpl=new Template('<embed id="embed_'+video.id+'" src="#{src}" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="#{width}" height="#{height}" bgcolor="#000" wmode="opaque" class="ytvideo"></embed>');var you_tube_markup=you_tube_tmpl.evaluate({src:src_link+"?version=3&hl=en&fs=1&enablejsapi=1&playerapiid=embed_"+video.id+"&autoplay="+autoplay+"&showinfo="+showinfo+start_time,width:video.width,height:video.height});if(BF_STATIC.tt_page=="Video"){you_tube_markup+"&rel=0&showinfo=0"}}$(video_element).innerHTML=you_tube_markup}}else{if(vd.type=="vimeo"){var vimeo_tmpl=new Template('<iframe id="vimeoplayer_'+video.id+'" class="vimeo_video" src="#{src}" width="#{width}" height="#{height}" frameborder="0"></iframe>');var vimeo_markup=vimeo_tmpl.evaluate({src:src_link+'?color=ee3322&api=1&player_id=vimeoplayer_"'+video.id+'"',width:video.width,height:video.height});$(video_element).innerHTML=vimeo_markup}else{try{so.addParam("wmode","opaque")}catch(e){}so.write(video_element)}}}}}};this.get_youtube_video_id=function(url){if(!url){return null}var regExp=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;var match=url.match(regExp);if(match&&match[7].length){return match[7]}else{return null}}};var embed_video=new BF_EmbedVideo();BuzzLoader.register(embed_video.init,1);(function(){var b={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};var a={pointerX:0,pointerY:0,button:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,bubbles:true,cancelable:true};Event.simulate=function(l,f){var h=Object.extend(Object.clone(a),arguments[2]||{});var c,k=null;l=$(l);for(var g in b){if(b[g].test(f)){k=g;break}}if(!k){throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported")}if(document.createEvent){c=document.createEvent(k);if(k=="HTMLEvents"){c.initEvent(f,h.bubbles,h.cancelable)}else{c.initMouseEvent(f,h.bubbles,h.cancelable,document.defaultView,h.button,h.pointerX,h.pointerY,h.pointerX,h.pointerY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button,l)}l.dispatchEvent(c)}else{h.clientX=h.pointerX;h.clientY=h.pointerY;c=Object.extend(document.createEventObject(),h);l.fireEvent("on"+f,c)}return l};Element.addMethods({simulate:Event.simulate})})();var ProgressiveLoader=function(){this.elementList=[];this.init=function(){progressiveLoader.elementList=[];universal_dom.get_bucket_elements("progLoaderElement").each(function(c){var b=c,f=c.getAttribute("rel:bf-prog-load-pixels"),a=c.getAttribute("rel:name");if(progressiveLoader.elementList[a]==undefined){progressiveLoader.elementList[a]=({name:a,element:b,difference:f,loaded:false,timerId:0,preElement_OffsetTop:0});progressiveLoader.load(progressiveLoader.elementList[a])}})};this.load=function(a){if(a.timerId==0&&!a.loaded){a.timerId=setInterval(function(){if(a.preElement_OffsetTop==0){a.preElement_OffsetTop=a.element.offsetTop}if(Math.abs(window.pageYOffset-(a.preElement_OffsetTop))<=a.difference){a.loaded=true;EventManager.fire("progressive-load-callback:"+a.name,a.timerId)}},250)}}};var progressiveLoader=new ProgressiveLoader();BuzzLoader.register(function(){progressiveLoader.init()},1);(function(){var B="0.4.8",n=window.jQuery||window.$||(window.$={}),h={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(O){return String(O).evalJSON()}||n.parseJSON||n.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||n.toJSON};if(!("parse" in h)||!("stringify" in h)){throw new Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page")}var q={__jstorage_meta:{CRC32:{}}},c={jStorage:"{}"},H=null,t=0,m=false,o={},L=false,I=0,A={},G=+new Date(),J,K={isXML:function(P){var O=(P?P.ownerDocument||P:0).documentElement;return O?O.nodeName!=="HTML":false},encode:function(P){if(!this.isXML(P)){return false}try{return new XMLSerializer().serializeToString(P)}catch(O){try{return P.xml}catch(Q){}}return false},decode:function(P){var O=("DOMParser" in window&&(new DOMParser()).parseFromString)||(window.ActiveXObject&&function(R){var S=new ActiveXObject("Microsoft.XMLDOM");S.async="false";S.loadXML(R);return S}),Q;if(!O){return false}Q=O.call("DOMParser" in window&&(new DOMParser())||window,P,"text/xml");return this.isXML(Q)?Q:false}};function w(){var O=false;if("localStorage" in window){try{window.localStorage.setItem("_tmptest","tmpval");O=true;window.localStorage.removeItem("_tmptest")}catch(P){}}if(O){try{if(window.localStorage){c=window.localStorage;m="localStorage";I=c.jStorage_update}}catch(V){}}else{if("globalStorage" in window){try{if(window.globalStorage){if(window.location.hostname=="localhost"){c=window.globalStorage["localhost.localdomain"]}else{c=window.globalStorage[window.location.hostname]}m="globalStorage";I=c.jStorage_update}}catch(U){}}else{H=document.createElement("link");if(H.addBehavior){H.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(H);try{H.load("jStorage")}catch(T){H.setAttribute("jStorage","{}");H.save("jStorage");H.load("jStorage")}var S="{}";try{S=H.getAttribute("jStorage")}catch(R){}try{I=H.getAttribute("jStorage_update")}catch(Q){}c.jStorage=S;m="userDataBehavior"}else{H=null;return}}}p();b();F();D();if("addEventListener" in window){window.addEventListener("pageshow",function(W){if(W.persisted){v()}},false)}}function g(){var Q="{}";if(m=="userDataBehavior"){H.load("jStorage");try{Q=H.getAttribute("jStorage")}catch(P){}try{I=H.getAttribute("jStorage_update")}catch(O){}c.jStorage=Q}p();b();D()}function F(){if(m=="localStorage"||m=="globalStorage"){if("addEventListener" in window){window.addEventListener("storage",v,false)}else{document.attachEvent("onstorage",v)}}else{if(m=="userDataBehavior"){setInterval(v,1000)}}}function v(){var O;clearTimeout(L);L=setTimeout(function(){if(m=="localStorage"||m=="globalStorage"){O=c.jStorage_update}else{if(m=="userDataBehavior"){H.load("jStorage");try{O=H.getAttribute("jStorage_update")}catch(P){}}}if(O&&O!=I){I=O;l()}},25)}function l(){var O=h.parse(h.stringify(q.__jstorage_meta.CRC32)),S;g();S=h.parse(h.stringify(q.__jstorage_meta.CRC32));var Q,P=[],R=[];for(Q in O){if(O.hasOwnProperty(Q)){if(!S[Q]){R.push(Q);continue}if(O[Q]!=S[Q]&&String(O[Q]).substr(0,2)=="2."){P.push(Q)}}}for(Q in S){if(S.hasOwnProperty(Q)){if(!O[Q]){P.push(Q)}}}N(P,"updated");N(R,"deleted")}function N(T,U){T=[].concat(T||[]);if(U=="flushed"){T=[];for(var S in o){if(o.hasOwnProperty(S)){T.push(S)}}U="deleted"}for(var R=0,O=T.length;R<O;R++){if(o[T[R]]){for(var Q=0,P=o[T[R]].length;Q<P;Q++){o[T[R]][Q](T[R],U)}}if(o["*"]){for(var Q=0,P=o["*"].length;Q<P;Q++){o["*"][Q](T[R],U)}}}}function r(){var P=(+new Date()).toString();if(m=="localStorage"||m=="globalStorage"){try{c.jStorage_update=P}catch(O){m=false}}else{if(m=="userDataBehavior"){H.setAttribute("jStorage_update",P);H.save("jStorage")}}v()}function p(){if(c.jStorage){try{q=h.parse(String(c.jStorage))}catch(O){c.jStorage="{}"}}else{c.jStorage="{}"}t=c.jStorage?String(c.jStorage).length:0;if(!q.__jstorage_meta){q.__jstorage_meta={}}if(!q.__jstorage_meta.CRC32){q.__jstorage_meta.CRC32={}}}function z(){a();try{c.jStorage=h.stringify(q);if(H){H.setAttribute("jStorage",c.jStorage);H.save("jStorage")}t=c.jStorage?String(c.jStorage).length:0}catch(O){}}function E(O){if(typeof O!="string"&&typeof O!="number"){throw new TypeError("Key name must be string or numeric")}if(O=="__jstorage_meta"){throw new TypeError("Reserved key name")}return true}function b(){var U,P,S,Q,R=Infinity,T=false,O=[];clearTimeout(J);if(!q.__jstorage_meta||typeof q.__jstorage_meta.TTL!="object"){return}U=+new Date();S=q.__jstorage_meta.TTL;Q=q.__jstorage_meta.CRC32;for(P in S){if(S.hasOwnProperty(P)){if(S[P]<=U){delete S[P];delete Q[P];delete q[P];T=true;O.push(P)}else{if(S[P]<R){R=S[P]}}}}if(R!=Infinity){J=setTimeout(b,R-U)}if(T){z();r();N(O,"deleted")}}function D(){var R,P;if(!q.__jstorage_meta.PubSub){return}var O,Q=G;for(R=P=q.__jstorage_meta.PubSub.length-1;R>=0;R--){O=q.__jstorage_meta.PubSub[R];if(O[0]>G){Q=O[0];f(O[1],O[2])}}G=Q}function f(Q,S){if(A[Q]){for(var P=0,O=A[Q].length;P<O;P++){try{A[Q][P](Q,h.parse(h.stringify(S)))}catch(R){}}}}function a(){if(!q.__jstorage_meta.PubSub){return}var Q=+new Date()-2000;for(var P=0,O=q.__jstorage_meta.PubSub.length;P<O;P++){if(q.__jstorage_meta.PubSub[P][0]<=Q){q.__jstorage_meta.PubSub.splice(P,q.__jstorage_meta.PubSub.length-P);break}}if(!q.__jstorage_meta.PubSub.length){delete q.__jstorage_meta.PubSub}}function k(O,P){if(!q.__jstorage_meta){q.__jstorage_meta={}}if(!q.__jstorage_meta.PubSub){q.__jstorage_meta.PubSub=[]}q.__jstorage_meta.PubSub.unshift([+new Date,O,P]);z();r()}function M(T,P){var O=T.length,S=P^O,R=0,Q;while(O>=4){Q=((T.charCodeAt(R)&255))|((T.charCodeAt(++R)&255)<<8)|((T.charCodeAt(++R)&255)<<16)|((T.charCodeAt(++R)&255)<<24);Q=(((Q&65535)*1540483477)+((((Q>>>16)*1540483477)&65535)<<16));Q^=Q>>>24;Q=(((Q&65535)*1540483477)+((((Q>>>16)*1540483477)&65535)<<16));S=(((S&65535)*1540483477)+((((S>>>16)*1540483477)&65535)<<16))^Q;O-=4;++R}switch(O){case 3:S^=(T.charCodeAt(R+2)&255)<<16;case 2:S^=(T.charCodeAt(R+1)&255)<<8;case 1:S^=(T.charCodeAt(R)&255);S=(((S&65535)*1540483477)+((((S>>>16)*1540483477)&65535)<<16))}S^=S>>>13;S=(((S&65535)*1540483477)+((((S>>>16)*1540483477)&65535)<<16));S^=S>>>15;return S>>>0}n.jStorage={version:B,set:function(P,Q,O){E(P);O=O||{};if(typeof Q=="undefined"){this.deleteKey(P);return Q}if(K.isXML(Q)){Q={_is_xml:true,xml:K.encode(Q)}}else{if(typeof Q=="function"){return undefined}else{if(Q&&typeof Q=="object"){Q=h.parse(h.stringify(Q))}}}q[P]=Q;q.__jstorage_meta.CRC32[P]="2."+M(h.stringify(Q),2538058380);this.setTTL(P,O.TTL||0);N(P,"updated");return Q},get:function(O,P){E(O);if(O in q){if(q[O]&&typeof q[O]=="object"&&q[O]._is_xml){return K.decode(q[O].xml)}else{return q[O]}}return typeof(P)=="undefined"?null:P},deleteKey:function(O){E(O);if(O in q){delete q[O];if(typeof q.__jstorage_meta.TTL=="object"&&O in q.__jstorage_meta.TTL){delete q.__jstorage_meta.TTL[O]}delete q.__jstorage_meta.CRC32[O];z();r();N(O,"deleted");return true}return false},setTTL:function(P,O){var Q=+new Date();E(P);O=Number(O)||0;if(P in q){if(!q.__jstorage_meta.TTL){q.__jstorage_meta.TTL={}}if(O>0){q.__jstorage_meta.TTL[P]=Q+O}else{delete q.__jstorage_meta.TTL[P]}z();b();r();return true}return false},getTTL:function(P){var Q=+new Date(),O;E(P);if(P in q&&q.__jstorage_meta.TTL&&q.__jstorage_meta.TTL[P]){O=q.__jstorage_meta.TTL[P]-Q;return O||0}return 0},flush:function(){q={__jstorage_meta:{CRC32:{}}};z();r();N(null,"flushed");return true},storageObj:function(){function O(){}O.prototype=q;return new O()},index:function(){var O=[],P;for(P in q){if(q.hasOwnProperty(P)&&P!="__jstorage_meta"){O.push(P)}}return O},storageSize:function(){return t},currentBackend:function(){return m},storageAvailable:function(){return !!m},listenKeyChange:function(O,P){E(O);if(!o[O]){o[O]=[]}o[O].push(P)},stopListening:function(P,Q){E(P);if(!o[P]){return}if(!Q){delete o[P];return}for(var O=o[P].length-1;O>=0;O--){if(o[P][O]==Q){o[P].splice(O,1)}}},subscribe:function(O,P){O=(O||"").toString();if(!O){throw new TypeError("Channel not defined")}if(!A[O]){A[O]=[]}A[O].push(P)},publish:function(O,P){O=(O||"").toString();if(!O){throw new TypeError("Channel not defined")}k(O,P)},reInit:function(){g()},noConflict:function(O){delete window.$.jStorage;if(O){window.jStorage=this}return this}};w()})();var Base64={_Rixits:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+/",fromNumber:function(c){if(isNaN(Number(c))||c===null||c===Number.POSITIVE_INFINITY){throw"The input is not valid"}if(c<0){throw"Can't represent negative numbers now"}var b;var f=Math.floor(c);var a="";while(true){b=f%64;a=this._Rixits.charAt(b)+a;f=Math.floor(f/64);if(f==0){break}}return a},toNumber:function(b){var a=0;b=b.split("");for(e in b){a=(a*64)+this._Rixits.indexOf(b[e])}return a},_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){if(typeof c=="undefined"||c==null){c=""}var a="";var n,l,h,m,k,g,f;var b=0;c=Base64._utf8_encode(c);while(b<c.length){n=c.charCodeAt(b++);l=c.charCodeAt(b++);h=c.charCodeAt(b++);m=n>>2;k=((n&3)<<4)|(l>>4);g=((l&15)<<2)|(h>>6);f=h&63;if(isNaN(l)){g=f=64}else{if(isNaN(h)){f=64}}a=a+this._keyStr.charAt(m)+this._keyStr.charAt(k)+this._keyStr.charAt(g)+this._keyStr.charAt(f)}return a},decode:function(c){if(typeof c=="undefined"||c==null){return""}var a="";var n,l,h;var m,k,g,f;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){m=this._keyStr.indexOf(c.charAt(b++));k=this._keyStr.indexOf(c.charAt(b++));g=this._keyStr.indexOf(c.charAt(b++));f=this._keyStr.indexOf(c.charAt(b++));n=(m<<2)|(k>>4);l=((k&15)<<4)|(g>>2);h=((g&3)<<6)|f;a=a+String.fromCharCode(n);if(g!=64){a=a+String.fromCharCode(l)}if(f!=64){a=a+String.fromCharCode(h)}}a=Base64._utf8_decode(a);return a},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var g=0;g<b.length;g++){var f=b.charCodeAt(g);if(f<128){a+=String.fromCharCode(f)}else{if((f>127)&&(f<2048)){a+=String.fromCharCode((f>>6)|192);a+=String.fromCharCode((f&63)|128)}else{a+=String.fromCharCode((f>>12)|224);a+=String.fromCharCode(((f>>6)&63)|128);a+=String.fromCharCode((f&63)|128)}}}return a},_utf8_decode:function(a){var b="";var f=0;var g=c1=c2=0;while(f<a.length){g=a.charCodeAt(f);if(g<128){b+=String.fromCharCode(g);f++}else{if((g>191)&&(g<224)){c2=a.charCodeAt(f+1);b+=String.fromCharCode(((g&31)<<6)|(c2&63));f+=2}else{c2=a.charCodeAt(f+1);c3=a.charCodeAt(f+2);b+=String.fromCharCode(((g&15)<<12)|((c2&63)<<6)|(c3&63));f+=3}}}return b}};var CryptoJS=CryptoJS||function(A,a){var w={},v=w.lib={},g=function(){},B=v.Base={extend:function(h){g.prototype=this;var f=new g;h&&f.mixIn(h);f.hasOwnProperty("init")||(f.init=function(){f.$super.init.apply(this,arguments)});f.init.prototype=f;f.$super=this;return f},create:function(){var f=this.extend();f.init.apply(f,arguments);return f},init:function(){},mixIn:function(h){for(var f in h){h.hasOwnProperty(f)&&(this[f]=h[f])}h.hasOwnProperty("toString")&&(this.toString=h.toString)},clone:function(){return this.init.prototype.extend(this)}},z=v.WordArray=B.extend({init:function(h,f){h=this.words=h||[];this.sigBytes=f!=a?f:4*h.length},toString:function(f){return(f||F).stringify(this)},concat:function(h){var f=this.words,l=h.words,m=this.sigBytes;h=h.sigBytes;this.clamp();if(m%4){for(var k=0;k<h;k++){f[m+k>>>2]|=(l[k>>>2]>>>24-8*(k%4)&255)<<24-8*((m+k)%4)}}else{if(65535<l.length){for(k=0;k<h;k+=4){f[m+k>>>2]=l[k>>>2]}}else{f.push.apply(f,l)}}this.sigBytes+=h;return this},clamp:function(){var h=this.words,f=this.sigBytes;h[f>>>2]&=4294967295<<32-8*(f%4);h.length=A.ceil(f/4)},clone:function(){var f=B.clone.call(this);f.words=this.words.slice(0);return f},random:function(h){for(var f=[],k=0;k<h;k+=4){f.push(4294967296*A.random()|0)}return new z.init(f,h)}}),o=w.enc={},F=o.Hex={stringify:function(h){var f=h.words;h=h.sigBytes;for(var l=[],m=0;m<h;m++){var k=f[m>>>2]>>>24-8*(m%4)&255;l.push((k>>>4).toString(16));l.push((k&15).toString(16))}return l.join("")},parse:function(h){for(var f=h.length,k=[],l=0;l<f;l+=2){k[l>>>3]|=parseInt(h.substr(l,2),16)<<24-4*(l%8)}return new z.init(k,f/2)}},c=o.Latin1={stringify:function(h){var f=h.words;h=h.sigBytes;for(var k=[],l=0;l<h;l++){k.push(String.fromCharCode(f[l>>>2]>>>24-8*(l%4)&255))}return k.join("")},parse:function(h){for(var f=h.length,k=[],l=0;l<f;l++){k[l>>>2]|=(h.charCodeAt(l)&255)<<24-8*(l%4)}return new z.init(k,f)}},E=o.Utf8={stringify:function(h){try{return decodeURIComponent(escape(c.stringify(h)))}catch(f){throw Error("Malformed UTF-8 data")}},parse:function(f){return c.parse(unescape(encodeURIComponent(f)))}},b=v.BufferedBlockAlgorithm=B.extend({reset:function(){this._data=new z.init;this._nDataBytes=0},_append:function(f){"string"==typeof f&&(f=E.parse(f));this._data.concat(f);this._nDataBytes+=f.sigBytes},_process:function(k){var h=this._data,p=h.words,q=h.sigBytes,n=this.blockSize,m=q/(4*n),m=k?A.ceil(m):A.max((m|0)-this._minBufferSize,0);k=m*n;q=A.min(4*k,q);if(k){for(var l=0;l<k;l+=n){this._doProcessBlock(p,l)}l=p.splice(0,k);h.sigBytes-=q}return new z.init(l,q)},clone:function(){var f=B.clone.call(this);f._data=this._data.clone();return f},_minBufferSize:0});v.Hasher=b.extend({cfg:B.extend(),init:function(f){this.cfg=this.cfg.extend(f);this.reset()},reset:function(){b.reset.call(this);this._doReset()},update:function(f){this._append(f);this._process();return this},finalize:function(f){f&&this._append(f);return this._doFinalize()},blockSize:16,_createHelper:function(f){return function(h,k){return(new f.init(k)).finalize(h)}},_createHmacHelper:function(f){return function(h,k){return(new D.HMAC.init(f,k)).finalize(h)}}});var D=w.algo={};return w}(Math);(function(){var b=CryptoJS,a=b.lib.WordArray;b.enc.Base64={stringify:function(h){var n=h.words,m=h.sigBytes,p=this._map;h.clamp();h=[];for(var k=0;k<m;k+=3){for(var o=(n[k>>>2]>>>24-8*(k%4)&255)<<16|(n[k+1>>>2]>>>24-8*((k+1)%4)&255)<<8|n[k+2>>>2]>>>24-8*((k+2)%4)&255,l=0;4>l&&k+0.75*l<m;l++){h.push(p.charAt(o>>>6*(3-l)&63))}}if(n=p.charAt(64)){for(;h.length%4;){h.push(n)}}return h.join("")},parse:function(k){var p=k.length,o=this._map,r=o.charAt(64);r&&(r=k.indexOf(r),-1!=r&&(p=r));for(var r=[],l=0,q=0;q<p;q++){if(q%4){var n=o.indexOf(k.charAt(q-1))<<2*(q%4),m=o.indexOf(k.charAt(q))>>>6-2*(q%4);r[l>>>2]|=(n|m)<<24-8*(l%4);l++}}return a.create(r,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();var Hashids=(function(){function a(m,b,c){var f,k,g,n,l,o,h;this.version="1.0.1";this.minAlphabetLength=16;this.sepDiv=3.5;this.guardDiv=12;this.errorAlphabetLength="error: alphabet must contain at least X unique characters";this.errorAlphabetSpace="error: alphabet cannot contain spaces";this.alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";this.seps="cfhistuCFHISTU";this.minHashLength=parseInt(b,10)>0?b:0;this.salt=(typeof m==="string")?m:"";if(typeof c==="string"){this.alphabet=c}for(f="",k=0,n=this.alphabet.length;k!==n;k++){if(f.indexOf(this.alphabet[k])===-1){f+=this.alphabet[k]}}this.alphabet=f;if(this.alphabet.length<this.minAlphabetLength){throw this.errorAlphabetLength.replace("X",this.minAlphabetLength)}if(this.alphabet.search(" ")!==-1){throw this.errorAlphabetSpace}for(k=0,n=this.seps.length;k!==n;k++){g=this.alphabet.indexOf(this.seps[k]);if(g===-1){this.seps=this.seps.substr(0,k)+" "+this.seps.substr(k+1)}else{this.alphabet=this.alphabet.substr(0,g)+" "+this.alphabet.substr(g+1)}}this.alphabet=this.alphabet.replace(/ /g,"");this.seps=this.seps.replace(/ /g,"");this.seps=this.consistentShuffle(this.seps,this.salt);if(!this.seps.length||(this.alphabet.length/this.seps.length)>this.sepDiv){l=Math.ceil(this.alphabet.length/this.sepDiv);if(l===1){l++}if(l>this.seps.length){o=l-this.seps.length;this.seps+=this.alphabet.substr(0,o);this.alphabet=this.alphabet.substr(o)}else{this.seps=this.seps.substr(0,l)}}this.alphabet=this.consistentShuffle(this.alphabet,this.salt);h=Math.ceil(this.alphabet.length/this.guardDiv);if(this.alphabet.length<3){this.guards=this.seps.substr(0,h);this.seps=this.seps.substr(h)}else{this.guards=this.alphabet.substr(0,h);this.alphabet=this.alphabet.substr(h)}}a.prototype.encode=function(){var f="",g,b,c=Array.prototype.slice.call(arguments);if(!c.length){return f}if(c[0] instanceof Array){c=c[0]}for(g=0,b=c.length;g!==b;g++){if(typeof c[g]!=="number"||c[g]%1!==0||c[g]<0){return f}}return this._encode(c)};a.prototype.decode=function(c){var b=[];if(!c.length||typeof c!=="string"){return b}return this._decode(c,this.alphabet)};a.prototype.encodeHex=function(g){var f,b,c;g=g.toString();if(!/^[0-9a-fA-F]+$/.test(g)){return""}c=g.match(/[\w\W]{1,12}/g);for(f=0,b=c.length;f!==b;f++){c[f]=parseInt("1"+c[f],16)}return this.encode.apply(this,c)};a.prototype.decodeHex=function(h){var f=[],g,b,c=this.decode(h);for(g=0,b=c.length;g!==b;g++){f+=(c[g]).toString(16).substr(1)}return f};a.prototype._encode=function(v){var p,l,m,n,g,h,r,b,k,o,t,q,c=this.alphabet,w=v.length,f=0;for(m=0,n=v.length;m!==n;m++){f+=(v[m]%(m+100))}l=p=c[f%c.length];for(m=0,n=v.length;m!==n;m++){g=v[m];h=l+this.salt+c;c=this.consistentShuffle(c,h.substr(0,c.length));r=this.hash(g,c);p+=r;if(m+1<w){g%=(r.charCodeAt(0)+m);b=g%this.seps.length;p+=this.seps[b]}}if(p.length<this.minHashLength){k=(f+p[0].charCodeAt(0))%this.guards.length;o=this.guards[k];p=o+p;if(p.length<this.minHashLength){k=(f+p[2].charCodeAt(0))%this.guards.length;o=this.guards[k];p+=o}}t=parseInt(c.length/2,10);while(p.length<this.minHashLength){c=this.consistentShuffle(c,c);p=c.substr(t)+p+c.substr(0,t);q=p.length-this.minHashLength;if(q>0){p=p.substr(q/2,this.minHashLength)}}return p};a.prototype._decode=function(h,c){var o=[],l=0,k,m,p,g,b=new RegExp("["+this.guards+"]","g"),n=h.replace(b," "),f=n.split(" ");if(f.length===3||f.length===2){l=1}n=f[l];if(typeof n[0]!=="undefined"){k=n[0];n=n.substr(1);b=new RegExp("["+this.seps+"]","g");n=n.replace(b," ");f=n.split(" ");for(l=0,m=f.length;l!==m;l++){p=f[l];g=k+this.salt+c;c=this.consistentShuffle(c,g.substr(0,c.length));o.push(this.unhash(p,c))}if(this._encode(o)!==h){o=[]}}return o};a.prototype.consistentShuffle=function(m,k){var g,f,c,h,b,l;if(!k.length){return m}for(h=m.length-1,b=0,l=0;h>0;h--,b++){b%=k.length;l+=g=k[b].charCodeAt(0);f=(g+b+l)%h;c=m[f];m=m.substr(0,f)+m[h]+m.substr(f+1);m=m.substr(0,h)+c+m.substr(h+1)}return m};a.prototype.hash=function(c,g){var f="",b=g.length;do{f=g[c%b]+f;c=parseInt(c/b,10)}while(c);return f};a.prototype.unhash=function(b,g){var f=0,h,c;for(c=0;c<b.length;c++){h=g.indexOf(b[c]);f+=h*Math.pow(g.length,b.length-c-1)}return f};if(typeof define==="function"&&typeof define.amd==="object"&&define.amd){define(function(){return a})}return a}());if(typeof module!="undefined"){module.exports=Hashids}var pound={};pound.VERSION="2.0";pound.ENV="dev";pound.URL="http://dev.pound.buzzfeed.com/";pound.VERTICAL="default";pound.BUZZID=undefined;pound.BUZZ_NAME=undefined;pound.TIMESTAMP=1380000000;if(typeof pound.LOGGED_IN_ONLY=="undefined"){pound.LOGGED_IN_ONLY=true}if(typeof pound.VERIFY_IDENTITIES=="undefined"){pound.VERIFY_IDENTITIES=false}if(typeof Date!="undefined"){pound.TIMESTAMP=(new Date()).getTime()}else{if(typeof Math!="undefined"&&typeof Math.random!="undefined"){pound.TIMESTAMP=Math.random()}else{pound.TIMESTAMP=0}}if(typeof pound.SOCIAL_COUNTS=="undefined"){pound.SOCIAL_COUNTS={facebook_shares:0,twitter_shares:0}}var bf_static_was_undefined=false;if(typeof BF_STATIC!="undefined"){pound.ENV=BF_STATIC.bf_env?BF_STATIC.bf_env:"dev";if(pound.ENV=="dev"){pound.URL="http://dev.pound.buzzfeed.com/"}else{if(pound.ENV=="stage"){pound.URL="http://pound.stage.buzzfeed.com/"}else{if(pound.ENV=="live"){pound.URL="http://pound.buzzfeed.com/"}else{pound.URL="http://dev.pound.buzzfeed.com/"}}}pound.VERTICAL=BF_STATIC.vertical||"default";pound.BUZZID=BF_STATIC.campaignid;pound.BUZZ_NAME=BF_STATIC.buzz_name;pound.TIMESTAMP=BF_STATIC.generated_timestamp}else{bf_static_was_undefined=true}pound.XHR_URL=pound.URL+"pixel";if(typeof pound.VERIFY_IDENTITIES=="undefined"){pound.VERIFY_IDENTITIES=false}pound.FONTS=["Andale Mono","Arial Black","Arnoldboecklin","Avantgarde","Blippo","Book Antiqua","Brushstroke","Charcoal","Comic Sans","Comic Sans MS","Coronetscript","Courier","Courier New","Fixed","Florence","Gadget","Geneva","Georgia","Gill Sans","Helvetica","Helvetica Narrow","Impact","Lucida Console","Lucida Grande","Lucida Sans Unicode","Lucidatypewriter","MS Sans Serif","MS Serif","Monaco","New Century Schoolbook","New York","Oldtown","Palatino","Palatino Linotype","Parkavenue","Symbol","Tahoma","Times","Times New Roman","Trebuchet MS","Verdana","Webdings","Zapf Chancery","cursive","fantasy","monospace","sans-serif","serif"];pound.ACTIVEX_PLUGINS=["AOL Toolbar","Activeweave","Advanced searchbar","Affine","AhnLab SiteGuard","Alexa Toolbar","Altavista toolbar","Bing Bar","Browser toolbar","Data Toolbar","DeeperWeb","DoNotTrackMe","Earthlink toolbar","FeedsPlus","Fiddler","GeoSurf","Ghostery","Gofor-It Internet Explorer","Google Toolbar","IE Ad-dons","IE Developer toolbar","IE7pro","IMacros","LastPass Password Manager","LuckyTabSave","MSFeedIcon","Microsoft Internet Mail and News","Microsoft NetMeeting","Mitto Password Manager","Mouse Gestures for Internet Explorer","Offer Assistant","Outlook Express","Quero","SafeWallet Password Manager","Simple Adblock","Speckle","SpoofStick","Stickis","Streaming Internet Radio Toolbar","Surf Canyon","Turn Off the Lights","Vivisimo MiniBar","WOT Services","WebNotes","Windows Address Book","Windows Live Toolbar","Windows Messaging","Xmarks Sync","Xupiter","Yahoo! Axis","Yahoo! Toolbar","Yolink","Zemanta"];pound.lib={};if(typeof Base64=="undefined"){var Base64={encode:function(b){return encodeURIComponent(b)},decode:function(b){return decodeURIComponent(b)}}}pound.lib.decodeCascadeString=function(f){if(!f||f=="undefined"){return{}}var b=Base64.decode(unescape(f));if(b&&b.length>0&&b[0]=="?"){b=b.substr(1,b.length)}var a=pound.lib.parseQueryString(b,"/");for(var c in a){if(a.hasOwnProperty(c)){var g=(typeof a[c]).toLowerCase();if(g!="string"&&g!="object"){return{}}if(c!="t"&&c!="o"&&c!="v"&&c!="b"&&c!="u"){return{}}}}return a};pound.lib.encodeCascadeObject=function(a){return Base64.encode(pound.lib.createQueryString(a,"/"))};pound.lib.setCookie=function(k,h,b,m){var g=[];var a=[[k,escape(h)],["expires",b],["path",m]];var f,c;for(f=0;f<a.length;f++){c=a[f];g.push(c.join("="))}var l=(g.join("; ")+";");document.cookie=l;return l};pound.lib.getCookie=function(c){var b=document.cookie;var g=b.indexOf(c+"=");var a=b.indexOf(";",g);if(a<0){a=b.length}var f=b.slice(g,a).split("=");return f[1]};pound.lib.expireCookie=function(a){var b=new Date();b.setDate(b.getDate()-60);pound.lib.setCookie(a,"",b.toUTCString(),"/");pound.lib.setCookie(a,"",b.toUTCString(),"")};pound.lib.createQueryString=function(g,a){var f=[];var c;if(typeof a=="undefined"){a="&"}if(g===null||g===undefined){return""}if(g==={}){return"?"}for(var b in g){if(g.hasOwnProperty(b)){c=g[b];if(c===null){c=""}if(c===undefined){continue}else{f.push(b+"="+c)}}}return"?"+(f.join(a))};pound.lib.parseQueryString=function(a,b){if(a==""||a==undefined||a==null){return{}}if(typeof b=="undefined"){b="&"}var h=a.split(b);var g;var f={};for(var c=0;c<h.length;c++){g=h[c].split("=");if(g[1]==""){g[1]=null}f[g[0]]=g[1]}return f};pound.lib.getSubBuzzIdFromChildNode=function(b){if(!b){throw new Error("No node was passed to getSubBuzzIdFromChildNode")}var a=/buzz_superlist_item/;while(b.parentNode){if(b.hasAttribute("class")&&b.getAttribute("class").match(a)){break}b=b.parentNode}return b.getAttribute("id").replace("superlist_","")};pound.lib.bind=function(b,a,c){if(window.addEventListener){b.addEventListener(a,c,false)}else{if(window.attachEvent){b.attachEvent("on"+a,c)}else{b["on"+a]=c}}};pound.lib.unbind=function(b,a,c){if(!b){return}if(b.removeEventListener){b.removeEventListener(a,c,false)}else{if(b.detachEvent){b.detachEvent("on"+a,c)}else{b["on"+a]=function(f){return false}}}};pound.lib.endEvent=function(a){if(a){a.cancelBubble=true;a.returnValue=false;if(a.stopPropagation){a.stopPropagation()}if(typeof a.preventDefault!="undefined"){a.preventDefault()}}return false};pound.lib.walk=function(c,a,f){if(!c){return c}var g;for(var b=0;b<c.childNodes.length;b++){if(a(c.childNodes.item(b))){g=c.childNodes.item(b)}else{if(f(c.childNodes.item(b))){g=pound.lib.walk(c.childNodes.item(b),a,f)}else{continue}}if(g){return g}}};pound.lib.isInView=function(n,q,r){var o=document.documentElement,a=(window.innerHeight||o.clientHeight),f=(window.innerWidth||o.clientWidth),r=(r)?r:"both",l=n.offsetWidth*n.offsetHeight;var k=n.getBoundingClientRect(),h=k.top>=0&&k.top<a,v=k.top<=0,c=k.bottom>0&&k.bottom<=a,p=k.bottom>=a,g=k.left>=0&&k.left<f,m=k.left<=0,t=k.right>0&&k.right<=f,b=k.right>=f;vVisible=q?h||c||(v&&p):h&&c;hVisible=q?g||t||(m&&b):g&&t;if(r==="both"){return l&&vVisible&&hVisible}else{if(r==="vertical"){return l&&vVisible}else{if(r==="horizontal"){return l&&hVisible}}}};if(typeof pound=="undefined"){pound={}}if(typeof pound.sharing=="undefined"){pound.sharing={}}pound.sharing.hooks=new (function(){var a=this;a.hooks=[];this.register=function(b){if(typeof b!="undefined"){a.hooks.push(b)}};this.execute=function(c){for(var b=0;b<a.hooks.length;b++){a.hooks[b](c)}}})();if(typeof pound=="undefined"){var pound={}}if(typeof pound.identity=="undefined"){pound.identity={}}pound.identity.Unique=function(c){var b=this;function a(){var g=NaN;if(c){b.id=c}else{for(var f=0;f<10;f++){if(isNaN(g)){b.id=parseInt(Math.random()*10000000000)}else{break}}}}this.hashed=function(){var f=parseInt(Math.random()*25+10).toString(36)+parseInt(Math.random()*25+10).toString(36);var h=new Hashids(f);var g=h.encode(b.id);return"."+f+g};this.munge=function(){var f=parseInt(b.id);if(isNaN(b.id)){return null}return f};this.unhashed=function(l){if(!l){throw new Error("Id is a required parameter")}var h=l.substr(1,2);var f=l.substr(3);var g=parseInt(f,36);var k=new Hashids(h);return k.decode(f)[0]};this.toString=function(){return b.id.toString()};this.validate=function(){if(!b.id||isNaN(b.id)){return false}return true};a()};if(typeof module!="undefined"){module.exports=pound.identity.Unique}if(typeof pound=="undefined"){var pound={}}if(typeof pound.identity=="undefined"){pound.identity={}}function default_buzzfeed_id(){return undefined}pound.identity.Buzzfeed=function(){if(typeof BF_User!="undefined"){var a=(((new BF_User()).getUserInfo()).userid);return a}return default_buzzfeed_id()};pound.Validate=new (function(){var b=this;var a=new RegExp("[0-9A-Za-z]+");this.stringId=function(f){if(!f||!f.length||isNaN(parseInt(f,36))){return false}var c=a.exec(f);if(c!=null&&c[0]==f){return true}return false};this.poundHttpUrl=function(f,h){var c=pound.lib.parseQueryString(pound.urls._getQueryString(f));var l=encodeURIComponent(h.errors.join(":"));var k=b.idObject(c);var m={e:encodeURIComponent(h.errors.join(":"))};var n;for(var g in c){if(k.hasOwnProperty(g)){n=k[g];if(!b.stringId(n)){n=b.munge(n);if(n){m[g]=n}}}else{m[g]=c[g]}}return pound.XHR_URL+pound.lib.createQueryString(m)};this.poundShareUrl=function(f,h){var c=pound.lib.parseQueryString(pound.urls._getQueryString(f));var l=encodeURIComponent(h.errors.join(":"));var k=b.shareObject(c);var m={e:encodeURIComponent(h.errors.join(":"))};var n;for(var g in c){if(k.hasOwnProperty(g)){n=k[g];if(g=="u"&&!b.stringId(n)){n=b.munge(n);if(n){m[g]=n}}else{n=parseInt(n);if(!isNaN(n)){m[g]=n}}}else{m[g]=c[g]}}return pound.XHR_URL+pound.lib.createQueryString(m)};this.cookie=function(){var f=pound.lib.parseQueryString(unescape(pound.lib.getCookie("bf_visit")));return b.idObject(f)};this.idObject=function(f){var c={};if(f.u&&!b.stringId(f.u)){c.u=f.u}if(f.o&&!b.stringId(f.o)){c.o=f.o}if(f.t&&!b.stringId(f.t)){c.t=f.t}return c};this.shareObject=function(f){var c={};if(f.u&&!b.stringId(f.u)){c.u=f.u}if(f.c&&isNaN(f.c)){c.c=f.c}if(f.p&&isNaN(f.p)){c.p=f.p}return c};this.munge=function(c){while(c&&c.length&&c.length>0){if(!b.stringId(c)){c=c.substr(0,c.length-1)}else{return c}}return false}})();pound.UrlRewriting=function(){var a=this;this._init=function(){a.utm_param="utm_term";a.baseUrl=a._removeQueryString(a._removeHash(document.URL));a.baseHashString=window.location.hash.substr(1,window.location.hash.length);a.baseQueryString=window.location.search.substr(1,window.location.search.length);var b=pound.lib.parseQueryString(a.baseQueryString);if(typeof b.qa!="undefined"&&b.qa=="1"){a.baseUrl=a.baseUrl.replace("dev.","www.");a.baseUrl=a.baseUrl.replace("/bf2","")}};this._getCascadeString=function(){var b=window.bf_visit.sharer.hashed();var c=window.bf_visit.unique.hashed();if(typeof b!="undefined"){return pound.lib.encodeCascadeObject({t:b.hashed(),o:c.hashed()})}return pound.lib.encodeCascadeObject({o:c.hashed()})};this._addHash=function(b){if(bf_visit.optedOut()){return b}var c=window.bf_visit.unique.hashed();return a._removeHash(b)+(c!==undefined?"#"+c:"")};this._removeHash=function(b){if(b.indexOf("#")>-1){return b.substr(0,b.indexOf("#"))}return b};this._removeQueryString=function(b){var c=a._getHash(b);if(b.indexOf("?")>-1){return b.substr(0,b.indexOf("?"))+(c!==undefined?"#"+c:"")}return b};this._getHash=function(c){if(c.indexOf("#")>-1){return c.substr(c.indexOf("#")+1,c.length);var b=Base64.decode(hash);return Base64.encode(b.substr(b.indexOf("?"),b.length))}return undefined};this._getQueryString=function(b){b=a._removeHash(b);if(b.indexOf("?")>-1){return b.substr(b.indexOf("?")+1,b.length)}return undefined};this._addQueryString=function(f,l,c){if(bf_visit.optedOut()){return f}var m=a._getHash(f);var b=pound.lib.parseQueryString(a._getQueryString(f));var h;f=a._removeHash(f);f=a._removeQueryString(f);b[a.utm_param]=window.bf_visit.unique.hashed();if(typeof l!="undefined"){for(var g=0;g<l.length;g++){h=l[g];b[h]=escape(window.bf_visit.unique.hashed())}}if(typeof c!="undefined"){for(g=0;g<c.length;g++){h=c[g][0];pval=c[g][1];b[h]=pval}}var k=f+pound.lib.createQueryString(b)+(m?"#"+m:"");return k};this.hashOnly=function(){return escape(a._addHash(a.baseUrl))};this.queryStringOnly=function(f,c){var b;if(typeof f!="undefined"){b=a._addQueryString(a.baseUrl,f,c)}else{b=a._addQueryString(a.baseUrl)}return escape(b)};this.hashAndQueryString=function(c,b){if(typeof c!="undefined"){return escape(a._addHash(a._addQueryString(a.baseUrl,c,b)))}return escape(a._addHash(a._addQueryString(a.baseUrl)))};this.stripped=function(){return a.baseUrl};this.unescaped={hashOnly:function(){return unescape(a.hashOnly())},queryStringOnly:function(c,b){return unescape(a.queryStringOnly(c,b))},hashAndQueryString:function(c,b){return unescape(a.hashAndQueryString(c,b))}};this.setBaseUrl=function(b){a.baseUrl=a._removeQueryString(a._removeHash(b));a.baseQueryString=b.substr(b.indexOf("?"),b.length);a.baseHashString=b.substr(b.indexOf("#"),b.length)};a._init()};pound.PoundEvents=(function(){var a;var b=function(){var c=this;this.o={};this.empty=true;this.pixelNo=0;this.timer=null;this.errors=[];this.callback=null;this.eventsToComplete=[];this.setCallback=function(f){c.callback=f};this.queueEventData=function(f,g){c._haltProcessing();c._merge(f.toObject());if(f.completeProcessing!==undefined&&!f.queuedToComplete){f.queuedToComplete=true;c.eventsToComplete.push(f)}if(g===true){c._processEvents()}else{c._triggerProcessing()}};this._merge=function(f){for(var g in f){if(f.hasOwnProperty(g)){c.o[g]=f[g]}}c.o.r=encodeURIComponent(document.referrer);c.o.v=encodeURIComponent(pound.VERSION);c.empty=false};this._haltProcessing=function(){if(c.timer){clearTimeout(c.timer)}};this._triggerProcessing=function(){c.timer=setTimeout(c._processEvents,500)};this._processEvents=function(){if(typeof document.body!="undefined"&&document.body!==null){if(c.empty){return}if(typeof BF_STATIC.pound_enabled=="undefined"||!BF_STATIC.pound_enabled){return}var l=c.o;var g=c.errors;var m=c.callback;c.o={};c.errors=[];c.empty=true;c.callback=null;var h=c._toImage("pound-events-"+c.pixelNo++,l,g,m);document.body.appendChild(h);for(var k=0;k<c.eventsToComplete.length;k++){var f=c.eventsToComplete[k];f.completeProcessing();f.queuedToComplete=false}return true}};this._toImage=function(g,h,m,l){var f=document.createElement("img");var k;if(typeof m=="undefined"||m.length===0){k=pound.XHR_URL+pound.lib.createQueryString(h)}else{k=pound.XHR_URL+"?e="+m.join(",")+"&v="+pound.VERSION}f.setAttribute("height","1");f.setAttribute("width","1");f.setAttribute("class","pound-pixel");f.setAttribute("id",g);f.setAttribute("src",k);if(typeof l==="function"){f.onerror=l;f.onload=l}return f}};return{getInstance:function(){if(!a){a=new b()}return a}}})();pound.WidgetClick=function(a,b){var c=this;this.widget_id=a;this.buzz_id=b;this.toObject=function(){return{w:"w["+c.widget_id+"]b["+c.buzz_id+"]"}}};pound.WidgetImpressions=function(){var a=this;a.impressions={};a.queuedToClear=false;this.addImpression=function(b,c){if(b in a.impressions){a.impressions[b].push(c)}else{a.impressions[b]=[c]}};this.toObject=function(){var g=[];var f=a.impressions;for(var c in f){g.push("w["+c+"]b["+f[c].join("-")+"]")}var b="["+g.join("-")+"]";return{i:encodeURIComponent(b)}};this.completeProcessing=function(){a.impressions={}}};pound.Widgets=function(){var a=this;this.init=function(){if(typeof window.bf_widgets!="undefined"){return window.bf_widgets}a.scrollResizeTimer=null;pound.lib.bind(window,"scroll",a.scrollResizeHandler);pound.lib.bind(window,"resize",a.scrollResizeHandler);a.widgets={};a.impressions=new pound.WidgetImpressions();a.evt=pound.PoundEvents.getInstance()};this.addWidget=function(b){a.widgets[b.widget_id]=b};this.scrollResizeHandler=function(b){if(a.scrollResizeTimer){clearTimeout(a.scrollResizeTimer)}a.scrollResizeTimer=setTimeout(a._checkVisibility,500)};this.addImpression=function(b,c){a.impressions.addImpression(b,c);a.evt.queueEventData(a.impressions)};this._checkVisibility=function(c){for(var b in a.widgets){a.widgets[b]._recalculateInView(true)}};a.init()};window.bf_widgets=new pound.Widgets();pound.Buzz=function(b,a){var c=this;this.buzz_id=b;this.element=a;this.seen=false;this.sent=false};pound.Widget=function(a){var c=this,b=/(^|\s)preview-(\d+)(\s|$)/;this.init=function(f){c.container=f;c.widget_id=f.getAttribute("pound_position");c.buzzes={};c.impressions=[];c.in_view=c._recalculateInView(true);bf_widgets.addWidget(c);pound.lib.bind(f,"click",c._trackClickEvent);c.evt=pound.PoundEvents.getInstance()};this._recalculateInView=function(f,h){c.in_view=pound.lib.isInView(c.container,f,h);if(c.in_view){c.locate_buzzes();for(var g in c.buzzes){if(c.buzzes[g].sent){continue}c.buzzes[g].seen=pound.lib.isInView(c.buzzes[g].element,true);if(c.buzzes[g].seen){c.buzzes[g].sent=true;bf_widgets.addImpression(c.widget_id,g)}}}return c.in_view};this.isPartnerBuzz=function(g){if(g.className){var f=b.exec(g.className);if(f){return f[2]}}return false};this.locate_buzzes=function(){var g=c.container.getElementsByTagName("*");for(var f=0,h=g.length;f<h;f++){if(g[f].getAttribute("rel:buzz_id")&&!(g[f].getAttribute("rel:buzz_id") in c.buzzes)){c.buzzes[g[f].getAttribute("rel:buzz_id")]=new pound.Buzz(g[f].getAttribute("rel:buzz_id"),g[f].parentNode);continue}partnerBuzz=c.isPartnerBuzz(g[f]);if(partnerBuzz!==false&&!(partnerBuzz in c.buzzes)){c.buzzes[partnerBuzz]=new pound.Buzz(partnerBuzz,g[f])}}return c.buzzes};this._trackClick=function(l,k){var h=null;var f=null;while(l!=c.container){if(l.tagName&&l.tagName.toUpperCase()=="A"){f=l}if(l.getAttribute("rel:buzz_id")){h=l.getAttribute("rel:buzz_id");break}partnerBuzz=c.isPartnerBuzz(l);if(partnerBuzz!==false){h=partnerBuzz;break}l=l.parentNode}if(h===null||f===null){return}if(k!==null){pound.lib.endEvent(k)}var g=function(m){return function(){if(BF_STATIC.bf_test_mode){window.location="#test_click"}else{window.location=m}}};c.evt.setCallback(g((f.getAttribute("href"))));c.evt.queueEventData(new pound.WidgetClick(c.widget_id,h),true)};this._trackClickEvent=function(f){var g=f.target||f.srcElement;c._trackClick(g,f)};c.init(a);return c};if(typeof pound=="undefined"){var pound={}}pound.Share=function(a,b){var c=this;this.user=a;this.buzzid=b;this.toObject=function(){return{u:encodeURIComponent(c.user),s:encodeURIComponent(c.buzzid)}}};pound.UserEdge=function(f,c,a){var b=this;this.from=f;this.to=c;this.buzzid=a;this.toObject=function(){return{o:encodeURIComponent(b.from),u:encodeURIComponent(b.to),c:encodeURIComponent(b.buzzid)}}};pound.PostEdge=function(f,c,a){var b=this;this.from=f;this.to=c;this.user=a;this.toObject=function(){return{p:encodeURIComponent(b.from),c:encodeURIComponent(b.to),u:encodeURIComponent(b.user)}}};pound.UpdatedUnique=function(b,a){var c=this;this.old_unique=b;this.new_unique=a;this.toObject=function(){return{u1:encodeURIComponent(c.old_unique),u2:encodeURIComponent(c.new_unique)}}};pound.Event=function(){var a=this;this.o={};this.callback=null;this.empty=true;this.merge=function(b){for(var c in b){if(b.hasOwnProperty(c)){a.o[c]=b[c]}}a.o.r=encodeURIComponent(document.referrer);a.o.v=encodeURIComponent(pound.VERSION);a.empty=false};this.setCallback=function(b){a.callback=b};this.toImage=function(c,g){var b=document.createElement("img");var f;if(typeof g=="undefined"||g.length===0){f=pound.XHR_URL+pound.lib.createQueryString(a.o)}else{f=pound.XHR_URL+"?e="+g.join(",")+"&v="+pound.VERSION}b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("class","pound-pixel");b.setAttribute("id",c);b.style.position="absolute";b.style.zIndex="-1";if(typeof a.callback=="function"){pound.lib.bind(b,"error",function(){a.callback()});pound.lib.bind(b,"load",function(){a.callback()})}b.setAttribute("src",f);return b}};pound.Visit=function(){var a=this;this.init=function(){if(typeof window.bf_visit!="undefined"){return null}this.img=undefined;this.bf=undefined;this.random=undefined;this.sharer=null;this.errors=[];this.evt=new pound.Event();this.pixelNo=0;if(typeof pound.urls=="undefined"){pound.urls=new pound.UrlRewriting()}this.stateTimer=setInterval(a.setState,500);this.OPTED_OUT=undefined;a.setState()};this.setState=function(){if(typeof $=="undefined"||typeof $.jStorage=="undefined"){return null}else{clearTimeout(a.stateTimer)}a.processCascadeSegment();if(typeof BF_STATIC.pound_enabled!="undefined"&&BF_STATIC.pound_enabled&&!a.optedOut()){window.location.hash=a.unique.hashed()}if(typeof document.referrer!="undefined"&&document.referrer.indexOf("buzzfeed.com")>-1){if(a.previous_buzzid&&a.current_buzzid&&a.previous_buzzid!=a.current_buzzid){a.recordPostEdge()}}a.triggerProcessing()};this.triggerProcessing=function(){clearTimeout(a.interval);a.interval=setInterval(a.processEvent,500)};this.toJson=function(){return JSON.stringify({sharer:a.sharer.hashed(),unique:a.unique.hashed(),bf:a.bf,current_buzzid:a.current_buzzid,previous_buzzid:a.previous_buzzid,errors:a.errors})};this._parseHash=function(){var c=window.location.hash.slice(1,window.location.hash.length);if(c){var f=(new pound.identity.Unique()).unhashed(c);if(f){var b=new pound.identity.Unique(f);if(b.validate()&&b.id!=a.unique.id){a.sharer=b}}}};this._parseQueryString=function(){var b=null;if(location.search.length>=1){params=pound.lib.parseQueryString(location.search.substr(1));b=params.utm_term||params.fb_ref}if(typeof b!="undefined"&&b!=null){sharer_id=(new pound.identity.Unique()).unhashed(b);a.sharer=new pound.identity.Unique(sharer_id)}};this._parseLocalStorage=function(){var b=null;if((typeof window.hasLocalStorage!="undefined"&&hasLocalStorage())&&typeof $.jStorage!="undefined"){sharer_id=$.jStorage.get("pound_position")||undefined;if(sharer_id&&typeof sharer_id!="undefined"){var c=(new pound.identity.Unique()).unhashed(sharer_id);b=new pound.identity.Unique(c)}$.jStorage.set("pound_position",undefined)}if(typeof b!="undefined"&&b!=null){this.sharer=b}};this._parseCascadeSegment=function(){a._parseLocalStorage();a._parseQueryString();a._parseHash();if(a.sharer&&!a.sharer.validate()){a.sharer.munge();if(!a.sharer.validate()){a.errors.push(":4:"+a.sharer.toString());a.sharer=null}}if(a.sharer&&a.sharer!==undefined&&a.sharer.id==a.unique.id){a.sharer=null}};this._loadStateFromCookie=function(){var g=pound.lib.parseQueryString(unescape(pound.lib.getCookie("bf_visit")));var c,f;if(g.c!==undefined||g.c!=BF_STATIC.campaignid){a.previous_buzzid=g.c}if((g.b===undefined&&g.u===undefined)||g.v!=pound.VERSION){pound.lib.expireCookie("bf_visit");return{success:false,old_unique:g.u}}var f=g.u;if(typeof f!="undefined"){f=(new pound.identity.Unique()).unhashed(f);a.unique=new pound.identity.Unique(f);if(!a.unique.validate()){pound.lib.expireCookie("bf_visit");return{success:false}}}a.bf=g.b;return{success:true}};this.storeCurrentBPage=function(){var f=unescape(pound.lib.getCookie("bf_visit"));var b=pound.lib.parseQueryString(f);b.c=a.current_buzzid;b=pound.lib.createQueryString(b);var c=new Date();c.setDate(c.getDate()+10000);pound.lib.setCookie("bf_visit",b.slice(1,b.length),c.toUTCString(),"/")};this._loadStateToCookie=function(){var b=pound.lib.createQueryString({b:a.bf,u:a.unique.hashed(),v:pound.VERSION});var c=new Date();c.setDate(c.getDate()+10000);pound.lib.setCookie("bf_visit",b.slice(1,b.length),c.toUTCString(),"/")};this.setIdentity=function(){var b=0;var c=a._loadStateFromCookie();if(!c.success){a.bf=pound.identity.Buzzfeed();a.unique=new pound.identity.Unique()}while(!a.unique.validate()&&b++<10){a.unique=new pound.identity.Unique()}a.current_buzzid=BF_STATIC.campaignid;if(!a.unique.validate()){a.errors.push(":2:"+a.unique.toString())}else{if(c.old_unique!==undefined){a.recordUpdatedUnique(c.old_unique)}else{a._loadStateToCookie()}}};this.recordUserEdge=function(){a.queuePixel(new pound.UserEdge(a.sharer.hashed(),a.unique.hashed(),a.current_buzzid))};this.recordUpdatedUnique=function(b){a.queuePixel(new pound.UpdatedUnique(b,this.unique),a._loadStateToCookie);a.triggerProcessing()};this.recordShare=function(){a.queuePixel(new pound.Share(a.unique.hashed(),a.current_buzzid));a.triggerProcessing()};this.recordPostEdge=function(){a.queuePixel(new pound.PostEdge(a.previous_buzzid,a.current_buzzid,a.unique.hashed()))};this.processCascadeSegment=function(){a.setIdentity();a._parseCascadeSegment();a.storeCurrentBPage();if(a.sharer!==null){a.recordUserEdge()}};this.toString=function(){return"[object pound.Visit]"};this.queuePixel=function(b,c){a.evt.merge(b.toObject());if(c!==undefined){a.evt.setCallback(c)}};this.processEvent=function(){if(typeof document.body!=="undefined"&&document.body!==null){clearTimeout(a.interval);if(a.evt.empty){return}if(typeof BF_STATIC.pound_enabled=="undefined"||!BF_STATIC.pound_enabled){return}var c=a.evt;a.evt=new pound.Event();var f=[];if(a.errors.length>0){f=a.errors;a.errors=[]}if(!a.optedOut()){var b=c.toImage("pound-"+a.pixelNo++,f);document.body.appendChild(b)}}};this.optOut=function(){var b=new Date();b.setDate(b.getDate()+10000);pound.lib.setCookie("pound_opt_out","1",b.toUTCString(),"/");a.OPTED_OUT=true;alert("You have successfully opted out.")};this.optedOut=function(){if(typeof a.OPTED_OUT=="undefined"){if(pound.lib.getCookie("pound_opt_out")){a.OPTED_OUT=true}else{a.OPTED_OUT=false}}return a.OPTED_OUT};a.init()};window.bf_visit=new pound.Visit();if(typeof module!=="undefined"){module.exports=pound}else{var pound_retries=0;function init_pound(){if(typeof bf_login=="undefined"||typeof BF_User=="undefined"){if(pound_retries<20){setTimeout(init_pound,1000)}pound_retries+=1;return false}else{if(pound.VERIFY_IDENTITIES){if((pound.LOGGED_IN_ONLY&&(new BF_User()).isLoggedIn())||!pound.LOGGED_IN_ONLY){window.bf_visit.processCascadeSegment()}else{bf_login.loggedInCallbacks.push(window.bf_visit.processCascadeSegment)}}}return false}function registerWithBuzzLoader(){if(typeof BuzzLoader!="undefined"){BuzzLoader.register(init_pound,5)}else{if(typeof bfjs=="undefined"||!bfjs.isMobile()){setTimeout(registerWithBuzzLoader,500)}else{init_pound()}}}registerWithBuzzLoader()};